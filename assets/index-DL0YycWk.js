function t(t){return t&&t.k&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}!function(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver(t=>{for(const n of t)if("childList"===n.type)for(const t of n.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&e(t)}).observe(document,{childList:!0,subtree:!0})}function e(t){if(t.ep)return;t.ep=!0;const e=function(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),"use-credentials"===t.crossOrigin?e.credentials="include":"anonymous"===t.crossOrigin?e.credentials="omit":e.credentials="same-origin",e}(t);fetch(t.href,e)}}();var e,n,i={exports:{}},r={};var o,s,l=(n||(n=1,i.exports=function(){if(e)return r;e=1;var t=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function i(e,n,i){var r=null;if(void 0!==i&&(r=""+i),void 0!==n.key&&(r=""+n.key),"key"in n)for(var o in i={},n)"key"!==o&&(i[o]=n[o]);else i=n;return n=i.ref,{$$typeof:t,type:e,key:r,ref:void 0!==n?n:null,props:i}}return r.Fragment=n,r.jsx=i,r.jsxs=i,r}()),i.exports),u={exports:{}},a={};function c(){if(o)return a;o=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),d=Symbol.for("react.activity"),p=Symbol.iterator;var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,w={};function y(t,e,n){this.props=t,this.context=e,this.refs=w,this.updater=n||m}function g(){}function b(t,e,n){this.props=t,this.context=e,this.refs=w,this.updater=n||m}y.prototype.isReactComponent={},y.prototype.setState=function(t,e){if("object"!=typeof t&&"function"!=typeof t&&null!=t)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")},y.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},g.prototype=y.prototype;var E=b.prototype=new g;E.constructor=b,v(E,y.prototype),E.isPureReactComponent=!0;var S=Array.isArray;function T(){}var k={H:null,A:null,T:null,S:null},I=Object.prototype.hasOwnProperty;function _(e,n,i){var r=i.ref;return{$$typeof:t,type:e,key:n,ref:void 0!==r?r:null,props:i}}function C(e){return"object"==typeof e&&null!==e&&e.$$typeof===t}var A=/\/+/g;function O(t,e){return"object"==typeof t&&null!==t&&null!=t.key?(n=""+t.key,i={"=":"=0",":":"=2"},"$"+n.replace(/[=:]/g,function(t){return i[t]})):e.toString(36);var n,i}function N(n,i,r,o,s){var l=typeof n;"undefined"!==l&&"boolean"!==l||(n=null);var u,a,c=!1;if(null===n)c=!0;else switch(l){case"bigint":case"string":case"number":c=!0;break;case"object":switch(n.$$typeof){case t:case e:c=!0;break;case f:return N((c=n._init)(n._payload),i,r,o,s)}}if(c)return s=s(n),c=""===o?"."+O(n,0):o,S(s)?(r="",null!=c&&(r=c.replace(A,"$&/")+"/"),N(s,i,r,"",function(t){return t})):null!=s&&(C(s)&&(u=s,a=r+(null==s.key||n&&n.key===s.key?"":(""+s.key).replace(A,"$&/")+"/")+c,s=_(u.type,a,u.props)),i.push(s)),1;c=0;var h,d=""===o?".":o+":";if(S(n))for(var m=0;m<n.length;m++)c+=N(o=n[m],i,r,l=d+O(o,m),s);else if("function"==typeof(m=null===(h=n)||"object"!=typeof h?null:"function"==typeof(h=p&&h[p]||h["@@iterator"])?h:null))for(n=m.call(n),m=0;!(o=n.next()).done;)c+=N(o=o.value,i,r,l=d+O(o,m++),s);else if("object"===l){if("function"==typeof n.then)return N(function(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch("string"==typeof t.status?t.then(T,T):(t.status="pending",t.then(function(e){"pending"===t.status&&(t.status="fulfilled",t.value=e)},function(e){"pending"===t.status&&(t.status="rejected",t.reason=e)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}(n),i,r,o,s);throw i=String(n),Error("Objects are not valid as a React child (found: "+("[object Object]"===i?"object with keys {"+Object.keys(n).join(", ")+"}":i)+"). If you meant to render a collection of children, use an array instead.")}return c}function R(t,e,n){if(null==t)return t;var i=[],r=0;return N(t,i,"","",function(t){return e.call(n,t,r++)}),i}function P(t){if(-1===t._status){var e=t._result;(e=e()).then(function(e){0!==t._status&&-1!==t._status||(t._status=1,t._result=e)},function(e){0!==t._status&&-1!==t._status||(t._status=2,t._result=e)}),-1===t._status&&(t._status=0,t._result=e)}if(1===t._status)return t._result.default;throw t._result}var x="function"==typeof reportError?reportError:function(t){if("object"==typeof window&&"function"==typeof window.ErrorEvent){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"==typeof t&&null!==t&&"string"==typeof t.message?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if("object"==typeof process&&"function"==typeof process.emit)return void process.emit("uncaughtException",t)},M={map:R,forEach:function(t,e,n){R(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return R(t,function(){e++}),e},toArray:function(t){return R(t,function(t){return t})||[]},only:function(t){if(!C(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};return a.Activity=d,a.Children=M,a.Component=y,a.Fragment=n,a.Profiler=r,a.PureComponent=b,a.StrictMode=i,a.Suspense=c,a.$=k,a.q={__proto__:null,c:function(t){return k.H.useMemoCache(t)}},a.cache=function(t){return function(){return t.apply(null,arguments)}},a.cacheSignal=function(){return null},a.cloneElement=function(t,e,n){if(null==t)throw Error("The argument must be a React element, but you passed "+t+".");var i=v({},t.props),r=t.key;if(null!=e)for(o in void 0!==e.key&&(r=""+e.key),e)!I.call(e,o)||"key"===o||"__self"===o||"__source"===o||"ref"===o&&void 0===e.ref||(i[o]=e[o]);var o=arguments.length-2;if(1===o)i.children=n;else if(1<o){for(var s=Array(o),l=0;l<o;l++)s[l]=arguments[l+2];i.children=s}return _(t.type,r,i)},a.createContext=function(t){return(t={$$typeof:l,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null}).Provider=t,t.Consumer={$$typeof:s,_context:t},t},a.createElement=function(t,e,n){var i,r={},o=null;if(null!=e)for(i in void 0!==e.key&&(o=""+e.key),e)I.call(e,i)&&"key"!==i&&"__self"!==i&&"__source"!==i&&(r[i]=e[i]);var s=arguments.length-2;if(1===s)r.children=n;else if(1<s){for(var l=Array(s),u=0;u<s;u++)l[u]=arguments[u+2];r.children=l}if(t&&t.defaultProps)for(i in s=t.defaultProps)void 0===r[i]&&(r[i]=s[i]);return _(t,o,r)},a.createRef=function(){return{current:null}},a.forwardRef=function(t){return{$$typeof:u,render:t}},a.isValidElement=C,a.lazy=function(t){return{$$typeof:f,_payload:{_status:-1,_result:t},_init:P}},a.memo=function(t,e){return{$$typeof:h,type:t,compare:void 0===e?null:e}},a.startTransition=function(t){var e=k.T,n={};k.T=n;try{var i=t(),r=k.S;null!==r&&r(n,i),"object"==typeof i&&null!==i&&"function"==typeof i.then&&i.then(T,x)}catch(o){x(o)}finally{null!==e&&null!==n.types&&(e.types=n.types),k.T=e}},a.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},a.use=function(t){return k.H.use(t)},a.useActionState=function(t,e,n){return k.H.useActionState(t,e,n)},a.useCallback=function(t,e){return k.H.useCallback(t,e)},a.useContext=function(t){return k.H.useContext(t)},a.useDebugValue=function(){},a.useDeferredValue=function(t,e){return k.H.useDeferredValue(t,e)},a.useEffect=function(t,e){return k.H.useEffect(t,e)},a.useEffectEvent=function(t){return k.H.useEffectEvent(t)},a.useId=function(){return k.H.useId()},a.useImperativeHandle=function(t,e,n){return k.H.useImperativeHandle(t,e,n)},a.useInsertionEffect=function(t,e){return k.H.useInsertionEffect(t,e)},a.useLayoutEffect=function(t,e){return k.H.useLayoutEffect(t,e)},a.useMemo=function(t,e){return k.H.useMemo(t,e)},a.useOptimistic=function(t,e){return k.H.useOptimistic(t,e)},a.useReducer=function(t,e,n){return k.H.useReducer(t,e,n)},a.useRef=function(t){return k.H.useRef(t)},a.useState=function(t){return k.H.useState(t)},a.useSyncExternalStore=function(t,e,n){return k.H.useSyncExternalStore(t,e,n)},a.useTransition=function(){return k.H.useTransition()},a.version="19.2.1",a}function h(){return s||(s=1,u.exports=c()),u.exports}var f=h();const d=t(f);var p,m,v={exports:{}},w={},y={exports:{}},g={};function b(){return m||(m=1,y.exports=(p||(p=1,function(t){function e(t,e){var n=t.length;t.push(e);t:for(;0<n;){var i=n-1>>>1,o=t[i];if(!(0<r(o,e)))break t;t[i]=e,t[n]=o,n=i}}function n(t){return 0===t.length?null:t[0]}function i(t){if(0===t.length)return null;var e=t[0],n=t.pop();if(n!==e){t[0]=n;t:for(var i=0,o=t.length,s=o>>>1;i<s;){var l=2*(i+1)-1,u=t[l],a=l+1,c=t[a];if(0>r(u,n))a<o&&0>r(c,u)?(t[i]=c,t[a]=n,i=a):(t[i]=u,t[l]=n,i=l);else{if(!(a<o&&0>r(c,n)))break t;t[i]=c,t[a]=n,i=a}}}return e}function r(t,e){var n=t.sortIndex-e.sortIndex;return 0!==n?n:t.id-e.id}if(t.unstable_now=void 0,"object"==typeof performance&&"function"==typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var u=[],a=[],c=1,h=null,f=3,d=!1,p=!1,m=!1,v=!1,w="function"==typeof setTimeout?setTimeout:null,y="function"==typeof clearTimeout?clearTimeout:null,g="undefined"!=typeof setImmediate?setImmediate:null;function b(t){for(var r=n(a);null!==r;){if(null===r.callback)i(a);else{if(!(r.startTime<=t))break;i(a),r.sortIndex=r.expirationTime,e(u,r)}r=n(a)}}function E(t){if(m=!1,b(t),!p)if(null!==n(u))p=!0,T||(T=!0,S());else{var e=n(a);null!==e&&R(E,e.startTime-t)}}var S,T=!1,k=-1,I=5,_=-1;function C(){return!(!v&&t.unstable_now()-_<I)}function A(){if(v=!1,T){var e=t.unstable_now();_=e;var r=!0;try{t:{p=!1,m&&(m=!1,y(k),k=-1),d=!0;var o=f;try{e:{for(b(e),h=n(u);null!==h&&!(h.expirationTime>e&&C());){var s=h.callback;if("function"==typeof s){h.callback=null,f=h.priorityLevel;var l=s(h.expirationTime<=e);if(e=t.unstable_now(),"function"==typeof l){h.callback=l,b(e),r=!0;break e}h===n(u)&&i(u),b(e)}else i(u);h=n(u)}if(null!==h)r=!0;else{var c=n(a);null!==c&&R(E,c.startTime-e),r=!1}}break t}finally{h=null,f=o,d=!1}r=void 0}}finally{r?S():T=!1}}}if("function"==typeof g)S=function(){g(A)};else if("undefined"!=typeof MessageChannel){var O=new MessageChannel,N=O.port2;O.port1.onmessage=A,S=function(){N.postMessage(null)}}else S=function(){w(A,0)};function R(e,n){k=w(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(t){t.callback=null},t.unstable_forceFrameRate=function(t){0>t||125<t||(I=0<t?Math.floor(1e3/t):5)},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_next=function(t){switch(f){case 1:case 2:case 3:var e=3;break;default:e=f}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_requestPaint=function(){v=!0},t.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_scheduleCallback=function(i,r,o){var s=t.unstable_now();switch(o="object"==typeof o&&null!==o&&"number"==typeof(o=o.delay)&&0<o?s+o:s,i){case 1:var l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3}return i={id:c++,callback:r,priorityLevel:i,startTime:o,expirationTime:l=o+l,sortIndex:-1},o>s?(i.sortIndex=o,e(a,i),null===n(u)&&i===n(a)&&(m?(y(k),k=-1):m=!0,R(E,o-s))):(i.sortIndex=l,e(u,i),p||d||(p=!0,T||(T=!0,S()))),i},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(t){var e=f;return function(){var n=f;f=e;try{return t.apply(this,arguments)}finally{f=n}}}}(g)),g)),y.exports}var E,S,T,k,I={exports:{}},_={};function C(){if(E)return _;E=1;var t=h();function e(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");var o=t.$;function s(t,e){return"font"===t?"":"string"==typeof e?"use-credentials"===e?e:"":void 0}return _.lt=i,_.createPortal=function(t,n){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!n||1!==n.nodeType&&9!==n.nodeType&&11!==n.nodeType)throw Error(e(299));return function(t,e,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:r,key:null==i?null:""+i,children:t,containerInfo:e,implementation:n}}(t,n,null,i)},_.flushSync=function(t){var e=o.T,n=i.p;try{if(o.T=null,i.p=2,t)return t()}finally{o.T=e,i.p=n,i.d.f()}},_.preconnect=function(t,e){"string"==typeof t&&(e?e="string"==typeof(e=e.crossOrigin)?"use-credentials"===e?e:"":void 0:e=null,i.d.C(t,e))},_.prefetchDNS=function(t){"string"==typeof t&&i.d.D(t)},_.preinit=function(t,e){if("string"==typeof t&&e&&"string"==typeof e.as){var n=e.as,r=s(n,e.crossOrigin),o="string"==typeof e.integrity?e.integrity:void 0,l="string"==typeof e.fetchPriority?e.fetchPriority:void 0;"style"===n?i.d.S(t,"string"==typeof e.precedence?e.precedence:void 0,{crossOrigin:r,integrity:o,fetchPriority:l}):"script"===n&&i.d.X(t,{crossOrigin:r,integrity:o,fetchPriority:l,nonce:"string"==typeof e.nonce?e.nonce:void 0})}},_.preinitModule=function(t,e){if("string"==typeof t)if("object"==typeof e&&null!==e){if(null==e.as||"script"===e.as){var n=s(e.as,e.crossOrigin);i.d.M(t,{crossOrigin:n,integrity:"string"==typeof e.integrity?e.integrity:void 0,nonce:"string"==typeof e.nonce?e.nonce:void 0})}}else null==e&&i.d.M(t)},_.preload=function(t,e){if("string"==typeof t&&"object"==typeof e&&null!==e&&"string"==typeof e.as){var n=e.as,r=s(n,e.crossOrigin);i.d.L(t,n,{crossOrigin:r,integrity:"string"==typeof e.integrity?e.integrity:void 0,nonce:"string"==typeof e.nonce?e.nonce:void 0,type:"string"==typeof e.type?e.type:void 0,fetchPriority:"string"==typeof e.fetchPriority?e.fetchPriority:void 0,referrerPolicy:"string"==typeof e.referrerPolicy?e.referrerPolicy:void 0,imageSrcSet:"string"==typeof e.imageSrcSet?e.imageSrcSet:void 0,imageSizes:"string"==typeof e.imageSizes?e.imageSizes:void 0,media:"string"==typeof e.media?e.media:void 0})}},_.preloadModule=function(t,e){if("string"==typeof t)if(e){var n=s(e.as,e.crossOrigin);i.d.m(t,{as:"string"==typeof e.as&&"script"!==e.as?e.as:void 0,crossOrigin:n,integrity:"string"==typeof e.integrity?e.integrity:void 0})}else i.d.m(t)},_.requestFormReset=function(t){i.d.r(t)},_.unstable_batchedUpdates=function(t,e){return t(e)},_.useFormState=function(t,e,n){return o.H.useFormState(t,e,n)},_.useFormStatus=function(){return o.H.useHostTransitionStatus()},_.version="19.2.1",_}function A(){if(T)return w;T=1;var t=b(),e=h(),n=(S||(S=1,function t(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){}}(),I.exports=C()),I.exports);function i(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)}function o(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{!!(4098&(e=t).flags)&&(n=e.return),t=e.return}while(t)}return 3===e.tag?n:null}function s(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&(null!==(t=t.alternate)&&(e=t.memoizedState)),null!==e)return e.dehydrated}return null}function l(t){if(31===t.tag){var e=t.memoizedState;if(null===e&&(null!==(t=t.alternate)&&(e=t.memoizedState)),null!==e)return e.dehydrated}return null}function u(t){if(o(t)!==t)throw Error(i(188))}function a(t){var e=t.tag;if(5===e||26===e||27===e||6===e)return t;for(t=t.child;null!==t;){if(null!==(e=a(t)))return e;t=t.sibling}return null}var c=Object.assign,f=Symbol.for("react.element"),d=Symbol.for("react.transitional.element"),p=Symbol.for("react.portal"),m=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),g=Symbol.for("react.consumer"),E=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),x=Symbol.iterator;function M(t){return null===t||"object"!=typeof t?null:"function"==typeof(t=x&&t[x]||t["@@iterator"])?t:null}var D=Symbol.for("react.client.reference");function L(t){if(null==t)return null;if("function"==typeof t)return t.$$typeof===D?null:t.displayName||t.name||null;if("string"==typeof t)return t;switch(t){case m:return"Fragment";case y:return"Profiler";case v:return"StrictMode";case _:return"Suspense";case A:return"SuspenseList";case R:return"Activity"}if("object"==typeof t)switch(t.$$typeof){case p:return"Portal";case E:return t.displayName||"Context";case g:return(t._context.displayName||"Context")+".Consumer";case k:var e=t.render;return(t=t.displayName)||(t=""!==(t=e.displayName||e.name||"")?"ForwardRef("+t+")":"ForwardRef"),t;case O:return null!==(e=t.displayName||null)?e:L(t.type)||"Memo";case N:e=t._payload,t=t._init;try{return L(t(e))}catch(n){}}return null}var U=Array.isArray,F=e.$,$=n.lt,j={pending:!1,data:null,method:null,action:null},G=[],V=-1;function q(t){return{current:t}}function H(t){0>V||(t.current=G[V],G[V]=null,V--)}function B(t,e){V++,G[V]=t.current,t.current=e}var J,z,K=q(null),W=q(null),Y=q(null),X=q(null);function Q(t,e){switch(B(Y,e),B(W,t),B(K,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?Eh(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)t=Sh(e=Eh(e),t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}H(K),B(K,t)}function Z(){H(K),H(W),H(Y)}function tt(t){null!==t.memoizedState&&B(X,t);var e=K.current,n=Sh(e,t.type);e!==n&&(B(W,t),B(K,n))}function et(t){W.current===t&&(H(K),H(W)),X.current===t&&(H(X),mf._currentValue=j)}function nt(t){if(void 0===J)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);J=e&&e[1]||"",z=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+J+t+z}var it=!1;function rt(t,e){if(!t||it)return"";it=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(e){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(r){var i=r}Reflect.construct(t,[],n)}else{try{n.call()}catch(o){i=o}t.call(n.prototype)}}else{try{throw Error()}catch(s){i=s}(n=t())&&"function"==typeof n.catch&&n.catch(function(){})}}catch(l){if(l&&i&&"string"==typeof l.stack)return[l.stack,i.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var o=i.DetermineComponentFrameRoot(),s=o[0],l=o[1];if(s&&l){var u=s.split("\n"),a=l.split("\n");for(r=i=0;i<u.length&&!u[i].includes("DetermineComponentFrameRoot");)i++;for(;r<a.length&&!a[r].includes("DetermineComponentFrameRoot");)r++;if(i===u.length||r===a.length)for(i=u.length-1,r=a.length-1;1<=i&&0<=r&&u[i]!==a[r];)r--;for(;1<=i&&0<=r;i--,r--)if(u[i]!==a[r]){if(1!==i||1!==r)do{if(i--,0>--r||u[i]!==a[r]){var c="\n"+u[i].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}}while(1<=i&&0<=r);break}}}finally{it=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?nt(n):""}function ot(t,e){switch(t.tag){case 26:case 27:case 5:return nt(t.type);case 16:return nt("Lazy");case 13:return t.child!==e&&null!==e?nt("Suspense Fallback"):nt("Suspense");case 19:return nt("SuspenseList");case 0:case 15:return rt(t.type,!1);case 11:return rt(t.type.render,!1);case 1:return rt(t.type,!0);case 31:return nt("Activity");default:return""}}function st(t){try{var e="",n=null;do{e+=ot(t,n),n=t,t=t.return}while(t);return e}catch(i){return"\nError generating stack: "+i.message+"\n"+i.stack}}var lt=Object.prototype.hasOwnProperty,ut=t.unstable_scheduleCallback,at=t.unstable_cancelCallback,ct=t.unstable_shouldYield,ht=t.unstable_requestPaint,ft=t.unstable_now,dt=t.unstable_getCurrentPriorityLevel,pt=t.unstable_ImmediatePriority,mt=t.unstable_UserBlockingPriority,vt=t.unstable_NormalPriority,wt=t.unstable_LowPriority,yt=t.unstable_IdlePriority,gt=t.log,bt=t.unstable_setDisableYieldValue,Et=null,St=null;function Tt(t){if("function"==typeof gt&&bt(t),St&&"function"==typeof St.setStrictMode)try{St.setStrictMode(Et,t)}catch(e){}}var kt=Math.clz32?Math.clz32:function(t){return 0===(t>>>=0)?32:31-(It(t)/_t|0)|0},It=Math.log,_t=Math.LN2;var Ct=256,At=262144,Ot=4194304;function Nt(t){var e=42&t;if(0!==e)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return 261888&t;case 262144:case 524288:case 1048576:case 2097152:return 3932160&t;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&t;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Rt(t,e,n){var i=t.pendingLanes;if(0===i)return 0;var r=0,o=t.suspendedLanes,s=t.pingedLanes;t=t.warmLanes;var l=134217727&i;return 0!==l?0!==(i=l&~o)?r=Nt(i):0!==(s&=l)?r=Nt(s):n||0!==(n=l&~t)&&(r=Nt(n)):0!==(l=i&~o)?r=Nt(l):0!==s?r=Nt(s):n||0!==(n=i&~t)&&(r=Nt(n)),0===r?0:0!==e&&e!==r&&0===(e&o)&&((o=r&-r)>=(n=e&-e)||32===o&&4194048&n)?e:r}function Pt(t,e){return 0===(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)}function xt(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;default:return-1}}function Mt(){var t=Ot;return!(62914560&(Ot<<=1))&&(Ot=4194304),t}function Dt(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Lt(t,e){t.pendingLanes|=e,268435456!==e&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Ut(t,e,n){t.pendingLanes|=e,t.suspendedLanes&=~e;var i=31-kt(e);t.entangledLanes|=e,t.entanglements[i]=1073741824|t.entanglements[i]|261930&n}function Ft(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-kt(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}function $t(t,e){var n=e&-e;return 0!==((n=42&n?1:jt(n))&(t.suspendedLanes|e))?0:n}function jt(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Gt(t){return 2<(t&=-t)?8<t?134217727&t?32:268435456:8:2}function Vt(){var t=$.p;return 0!==t?t:void 0===(t=window.event)?32:Rf(t.type)}function qt(t,e){var n=$.p;try{return $.p=t,e()}finally{$.p=n}}var Ht=Math.random().toString(36).slice(2),Bt="__reactFiber$"+Ht,Jt="__reactProps$"+Ht,zt="__reactContainer$"+Ht,Kt="__reactEvents$"+Ht,Wt="__reactListeners$"+Ht,Yt="__reactHandles$"+Ht,Xt="__reactResources$"+Ht,Qt="__reactMarker$"+Ht;function Zt(t){delete t[Bt],delete t[Jt],delete t[Kt],delete t[Wt],delete t[Yt]}function te(t){var e=t[Bt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[zt]||n[Bt]){if(n=e.alternate,null!==e.child||null!==n&&null!==n.child)for(t=jh(t);null!==t;){if(n=t[Bt])return n;t=jh(t)}return e}n=(t=n).parentNode}return null}function ee(t){if(t=t[Bt]||t[zt]){var e=t.tag;if(5===e||6===e||13===e||31===e||26===e||27===e||3===e)return t}return null}function ne(t){var e=t.tag;if(5===e||26===e||27===e||6===e)return t.stateNode;throw Error(i(33))}function ie(t){var e=t[Xt];return e||(e=t[Xt]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function re(t){t[Qt]=!0}var oe=new Set,se={};function le(t,e){ue(t,e),ue(t+"Capture",e)}function ue(t,e){for(se[t]=e,t=0;t<e.length;t++)oe.add(e[t])}var ae=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ce={},he={};function fe(t,e,n){if(r=e,lt.call(he,r)||!lt.call(ce,r)&&(ae.test(r)?he[r]=!0:(ce[r]=!0,0)))if(null===n)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":return void t.removeAttribute(e);case"boolean":var i=e.toLowerCase().slice(0,5);if("data-"!==i&&"aria-"!==i)return void t.removeAttribute(e)}t.setAttribute(e,""+n)}var r}function de(t,e,n){if(null===n)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void t.removeAttribute(e)}t.setAttribute(e,""+n)}}function pe(t,e,n,i){if(null===i)t.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":return void t.removeAttribute(n)}t.setAttributeNS(e,n,""+i)}}function me(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return t;default:return""}}function ve(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function we(t){if(!t._valueTracker){var e=ve(t)?"checked":"value";t._valueTracker=function(t,e,n){var i=Object.getOwnPropertyDescriptor(t.constructor.prototype,e);if(!t.hasOwnProperty(e)&&void 0!==i&&"function"==typeof i.get&&"function"==typeof i.set){var r=i.get,o=i.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(t){n=""+t,o.call(this,t)}}),Object.defineProperty(t,e,{enumerable:i.enumerable}),{getValue:function(){return n},setValue:function(t){n=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t,e,""+t[e])}}function ye(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=ve(t)?t.checked?"true":"false":t.value),(t=i)!==n&&(e.setValue(t),!0)}function ge(t){if(void 0===(t=t||("undefined"!=typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}var be=/[\n"\\]/g;function Ee(t){return t.replace(be,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Se(t,e,n,i,r,o,s,l){t.name="",null!=s&&"function"!=typeof s&&"symbol"!=typeof s&&"boolean"!=typeof s?t.type=s:t.removeAttribute("type"),null!=e?"number"===s?(0===e&&""===t.value||t.value!=e)&&(t.value=""+me(e)):t.value!==""+me(e)&&(t.value=""+me(e)):"submit"!==s&&"reset"!==s||t.removeAttribute("value"),null!=e?ke(t,s,me(e)):null!=n?ke(t,s,me(n)):null!=i&&t.removeAttribute("value"),null==r&&null!=o&&(t.defaultChecked=!!o),null!=r&&(t.checked=r&&"function"!=typeof r&&"symbol"!=typeof r),null!=l&&"function"!=typeof l&&"symbol"!=typeof l&&"boolean"!=typeof l?t.name=""+me(l):t.removeAttribute("name")}function Te(t,e,n,i,r,o,s,l){if(null!=o&&"function"!=typeof o&&"symbol"!=typeof o&&"boolean"!=typeof o&&(t.type=o),null!=e||null!=n){if(("submit"===o||"reset"===o)&&null==e)return void we(t);n=null!=n?""+me(n):"",e=null!=e?""+me(e):n,l||e===t.value||(t.value=e),t.defaultValue=e}i="function"!=typeof(i=null!=i?i:r)&&"symbol"!=typeof i&&!!i,t.checked=l?t.checked:!!i,t.defaultChecked=!!i,null!=s&&"function"!=typeof s&&"symbol"!=typeof s&&"boolean"!=typeof s&&(t.name=s),we(t)}function ke(t,e,n){"number"===e&&ge(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function Ie(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+me(n),e=null,r=0;r<t.length;r++){if(t[r].value===n)return t[r].selected=!0,void(i&&(t[r].defaultSelected=!0));null!==e||t[r].disabled||(e=t[r])}null!==e&&(e.selected=!0)}}function _e(t,e,n){null==e||((e=""+me(e))!==t.value&&(t.value=e),null!=n)?t.defaultValue=null!=n?""+me(n):"":t.defaultValue!==e&&(t.defaultValue=e)}function Ce(t,e,n,r){if(null==e){if(null!=r){if(null!=n)throw Error(i(92));if(U(r)){if(1<r.length)throw Error(i(93));r=r[0]}n=r}null==n&&(n=""),e=n}n=me(e),t.defaultValue=n,(r=t.textContent)===n&&""!==r&&null!==r&&(t.value=r),we(t)}function Ae(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}var Oe=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ne(t,e,n){var i=0===e.indexOf("--");null==n||"boolean"==typeof n||""===n?i?t.setProperty(e,""):"float"===e?t.cssFloat="":t[e]="":i?t.setProperty(e,n):"number"!=typeof n||0===n||Oe.has(e)?"float"===e?t.cssFloat=n:t[e]=(""+n).trim():t[e]=n+"px"}function Re(t,e,n){if(null!=e&&"object"!=typeof e)throw Error(i(62));if(t=t.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=e&&e.hasOwnProperty(r)||(0===r.indexOf("--")?t.setProperty(r,""):"float"===r?t.cssFloat="":t[r]="");for(var o in e)r=e[o],e.hasOwnProperty(o)&&n[o]!==r&&Ne(t,o,r)}else for(var s in e)e.hasOwnProperty(s)&&Ne(t,s,e[s])}function Pe(t){if(-1===t.indexOf("-"))return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xe=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Me=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function De(t){return Me.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Le(){}var Ue=null;function Fe(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}var $e=null,je=null;function Ge(t){var e=ee(t);if(e&&(t=e.stateNode)){var n=t[Jt]||null;t:switch(t=e.stateNode,e.type){case"input":if(Se(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+Ee(""+e)+'"][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var o=r[Jt]||null;if(!o)throw Error(i(90));Se(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name)}}for(e=0;e<n.length;e++)(r=n[e]).form===t.form&&ye(r)}break t;case"textarea":_e(t,n.value,n.defaultValue);break t;case"select":null!=(e=n.value)&&Ie(t,!!n.multiple,e,!1)}}}var Ve=!1;function qe(t,e,n){if(Ve)return t(e,n);Ve=!0;try{return t(e)}finally{if(Ve=!1,(null!==$e||null!==je)&&(ic(),$e&&(e=$e,t=je,je=$e=null,Ge(e),t)))for(e=0;e<t.length;e++)Ge(t[e])}}function He(t,e){var n=t.stateNode;if(null===n)return null;var r=n[Jt]||null;if(null===r)return null;n=r[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!r;break t;default:t=!1}if(t)return null;if(n&&"function"!=typeof n)throw Error(i(231,e,typeof n));return n}var Be=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),Je=!1;if(Be)try{var ze={};Object.defineProperty(ze,"passive",{get:function(){Je=!0}}),window.addEventListener("test",ze,ze),window.removeEventListener("test",ze,ze)}catch(nd){Je=!1}var Ke=null,We=null,Ye=null;function Xe(){if(Ye)return Ye;var t,e,n=We,i=n.length,r="value"in Ke?Ke.value:Ke.textContent,o=r.length;for(t=0;t<i&&n[t]===r[t];t++);var s=i-t;for(e=1;e<=s&&n[i-e]===r[o-e];e++);return Ye=r.slice(t,1<e?1-e:void 0)}function Qe(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}function Ze(){return!0}function tn(){return!1}function en(t){function e(e,n,i,r,o){for(var s in this._reactName=e,this._targetInst=i,this.type=n,this.nativeEvent=r,this.target=o,this.currentTarget=null,t)t.hasOwnProperty(s)&&(e=t[s],this[s]=e?e(r):r[s]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?Ze:tn,this.isPropagationStopped=tn,this}return c(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!=typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=Ze)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!=typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=Ze)},persist:function(){},isPersistent:Ze}),e}var nn,rn,on,sn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=en(sn),un=c({},sn,{view:0,detail:0}),an=en(un),cn=c({},un,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(t){return void 0===t.relatedTarget?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==on&&(on&&"mousemove"===t.type?(nn=t.screenX-on.screenX,rn=t.screenY-on.screenY):rn=nn=0,on=t),nn)},movementY:function(t){return"movementY"in t?t.movementY:rn}}),hn=en(cn),fn=en(c({},cn,{dataTransfer:0})),dn=en(c({},un,{relatedTarget:0})),pn=en(c({},sn,{animationName:0,elapsedTime:0,pseudoElement:0})),mn=en(c({},sn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}})),vn=en(c({},sn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bn(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=gn[t])&&!!e[t]}function En(){return bn}var Sn=en(c({},un,{key:function(t){if(t.key){var e=wn[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=Qe(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?yn[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(t){return"keypress"===t.type?Qe(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?Qe(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}})),Tn=en(c({},cn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),kn=en(c({},un,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),In=en(c({},sn,{propertyName:0,elapsedTime:0,pseudoElement:0})),_n=en(c({},cn,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0})),Cn=en(c({},sn,{newState:0,oldState:0})),An=[9,13,27,32],On=Be&&"CompositionEvent"in window,Nn=null;Be&&"documentMode"in document&&(Nn=document.documentMode);var Rn=Be&&"TextEvent"in window&&!Nn,Pn=Be&&(!On||Nn&&8<Nn&&11>=Nn),xn=String.fromCharCode(32),Mn=!1;function Dn(t,e){switch(t){case"keyup":return-1!==An.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ln(t){return"object"==typeof(t=t.detail)&&"data"in t?t.data:null}var Un=!1;var Fn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $n(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!Fn[t.type]:"textarea"===e}function jn(t,e,n,i){$e?je?je.push(i):je=[i]:$e=i,0<(e=lh(e,"onChange")).length&&(n=new ln("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Gn=null,Vn=null;function qn(t){Zc(t,0)}function Hn(t){if(ye(ne(t)))return t}function Bn(t,e){if("change"===t)return e}var Jn=!1;if(Be){var zn;if(Be){var Kn="oninput"in document;if(!Kn){var Wn=document.createElement("div");Wn.setAttribute("oninput","return;"),Kn="function"==typeof Wn.oninput}zn=Kn}else zn=!1;Jn=zn&&(!document.documentMode||9<document.documentMode)}function Yn(){Gn&&(Gn.detachEvent("onpropertychange",Xn),Vn=Gn=null)}function Xn(t){if("value"===t.propertyName&&Hn(Vn)){var e=[];jn(e,Vn,t,Fe(t)),qe(qn,e)}}function Qn(t,e,n){"focusin"===t?(Yn(),Vn=n,(Gn=e).attachEvent("onpropertychange",Xn)):"focusout"===t&&Yn()}function Zn(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return Hn(Vn)}function ti(t,e){if("click"===t)return Hn(e)}function ei(t,e){if("input"===t||"change"===t)return Hn(e)}var ni="function"==typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t==1/e)||t!=t&&e!=e};function ii(t,e){if(ni(t,e))return!0;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!lt.call(e,r)||!ni(t[r],e[r]))return!1}return!0}function ri(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function oi(t,e){var n,i=ri(t);for(t=0;i;){if(3===i.nodeType){if(n=t+i.textContent.length,t<=e&&n>=e)return{node:i,offset:e-t};t=n}t:{for(;i;){if(i.nextSibling){i=i.nextSibling;break t}i=i.parentNode}i=void 0}i=ri(i)}}function si(t,e){return!(!t||!e)&&(t===e||(!t||3!==t.nodeType)&&(e&&3===e.nodeType?si(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}function li(t){for(var e=ge((t=null!=t&&null!=t.ownerDocument&&null!=t.ownerDocument.defaultView?t.ownerDocument.defaultView:window).document);e instanceof t.HTMLIFrameElement;){try{var n="string"==typeof e.contentWindow.location.href}catch(i){n=!1}if(!n)break;e=ge((t=e.contentWindow).document)}return e}function ui(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}var ai=Be&&"documentMode"in document&&11>=document.documentMode,ci=null,hi=null,fi=null,di=!1;function pi(t,e,n){var i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;di||null==ci||ci!==ge(i)||("selectionStart"in(i=ci)&&ui(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},fi&&ii(fi,i)||(fi=i,0<(i=lh(hi,"onSelect")).length&&(e=new ln("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=ci)))}function mi(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var vi={animationend:mi("Animation","AnimationEnd"),animationiteration:mi("Animation","AnimationIteration"),animationstart:mi("Animation","AnimationStart"),transitionrun:mi("Transition","TransitionRun"),transitionstart:mi("Transition","TransitionStart"),transitioncancel:mi("Transition","TransitionCancel"),transitionend:mi("Transition","TransitionEnd")},wi={},yi={};function gi(t){if(wi[t])return wi[t];if(!vi[t])return t;var e,n=vi[t];for(e in n)if(n.hasOwnProperty(e)&&e in yi)return wi[t]=n[e];return t}Be&&(yi=document.createElement("div").style,"AnimationEvent"in window||(delete vi.animationend.animation,delete vi.animationiteration.animation,delete vi.animationstart.animation),"TransitionEvent"in window||delete vi.transitionend.transition);var bi=gi("animationend"),Ei=gi("animationiteration"),Si=gi("animationstart"),Ti=gi("transitionrun"),ki=gi("transitionstart"),Ii=gi("transitioncancel"),_i=gi("transitionend"),Ci=new Map,Ai="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Oi(t,e){Ci.set(t,e),le(e,[t])}Ai.push("scrollEnd");var Ni="function"==typeof reportError?reportError:function(t){if("object"==typeof window&&"function"==typeof window.ErrorEvent){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"==typeof t&&null!==t&&"string"==typeof t.message?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if("object"==typeof process&&"function"==typeof process.emit)return void process.emit("uncaughtException",t)},Ri=[],Pi=0,xi=0;function Mi(){for(var t=Pi,e=xi=Pi=0;e<t;){var n=Ri[e];Ri[e++]=null;var i=Ri[e];Ri[e++]=null;var r=Ri[e];Ri[e++]=null;var o=Ri[e];if(Ri[e++]=null,null!==i&&null!==r){var s=i.pending;null===s?r.next=r:(r.next=s.next,s.next=r),i.pending=r}0!==o&&Fi(n,r,o)}}function Di(t,e,n,i){Ri[Pi++]=t,Ri[Pi++]=e,Ri[Pi++]=n,Ri[Pi++]=i,xi|=i,t.lanes|=i,null!==(t=t.alternate)&&(t.lanes|=i)}function Li(t,e,n,i){return Di(t,e,n,i),$i(t)}function Ui(t,e){return Di(t,null,null,e),$i(t)}function Fi(t,e,n){t.lanes|=n;var i=t.alternate;null!==i&&(i.lanes|=n);for(var r=!1,o=t.return;null!==o;)o.childLanes|=n,null!==(i=o.alternate)&&(i.childLanes|=n),22===o.tag&&(null===(t=o.stateNode)||1&t._visibility||(r=!0)),t=o,o=o.return;return 3===t.tag?(o=t.stateNode,r&&null!==e&&(r=31-kt(n),null===(i=(t=o.hiddenUpdates)[r])?t[r]=[e]:i.push(e),e.lane=536870912|n),o):null}function $i(t){if(50<Ka)throw Ka=0,Wa=null,Error(i(185));for(var e=t.return;null!==e;)e=(t=e).return;return 3===t.tag?t.stateNode:null}var ji={};function Gi(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vi(t,e,n,i){return new Gi(t,e,n,i)}function qi(t){return!(!(t=t.prototype)||!t.isReactComponent)}function Hi(t,e){var n=t.alternate;return null===n?((n=Vi(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&t.flags,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function Bi(t,e){t.flags&=65011714;var n=t.alternate;return null===n?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,e=n.dependencies,t.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function Ji(t,e,n,r,o,s){var l=0;if(r=t,"function"==typeof t)qi(t)&&(l=1);else if("string"==typeof t)l=function(t,e,n){if(1===n||null!=e.itemProp)return!1;switch(t){case"meta":case"title":return!0;case"style":if("string"!=typeof e.precedence||"string"!=typeof e.href||""===e.href)break;return!0;case"link":if("string"!=typeof e.rel||"string"!=typeof e.href||""===e.href||e.onLoad||e.onError)break;return"stylesheet"!==e.rel||(t=e.disabled,"string"==typeof e.precedence&&null==t);case"script":if(e.async&&"function"!=typeof e.async&&"symbol"!=typeof e.async&&!e.onLoad&&!e.onError&&e.src&&"string"==typeof e.src)return!0}return!1}(t,n,K.current)?26:"html"===t||"head"===t||"body"===t?27:5;else t:switch(t){case R:return(t=Vi(31,n,e,o)).elementType=R,t.lanes=s,t;case m:return zi(n.children,o,s,e);case v:l=8,o|=24;break;case y:return(t=Vi(12,n,e,2|o)).elementType=y,t.lanes=s,t;case _:return(t=Vi(13,n,e,o)).elementType=_,t.lanes=s,t;case A:return(t=Vi(19,n,e,o)).elementType=A,t.lanes=s,t;default:if("object"==typeof t&&null!==t)switch(t.$$typeof){case E:l=10;break t;case g:l=9;break t;case k:l=11;break t;case O:l=14;break t;case N:l=16,r=null;break t}l=29,n=Error(i(130,null===t?"null":typeof t,"")),r=null}return(e=Vi(l,n,e,o)).elementType=t,e.type=r,e.lanes=s,e}function zi(t,e,n,i){return(t=Vi(7,t,i,e)).lanes=n,t}function Ki(t,e,n){return(t=Vi(6,t,null,e)).lanes=n,t}function Wi(t){var e=Vi(18,null,null,0);return e.stateNode=t,e}function Yi(t,e,n){return(e=Vi(4,null!==t.children?t.children:[],t.key,e)).lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var Xi=new WeakMap;function Qi(t,e){if("object"==typeof t&&null!==t){var n=Xi.get(t);return void 0!==n?n:(e={value:t,source:e,stack:st(e)},Xi.set(t,e),e)}return{value:t,source:e,stack:st(e)}}var Zi=[],tr=0,er=null,nr=0,ir=[],rr=0,or=null,sr=1,lr="";function ur(t,e){Zi[tr++]=nr,Zi[tr++]=er,er=t,nr=e}function ar(t,e,n){ir[rr++]=sr,ir[rr++]=lr,ir[rr++]=or,or=t;var i=sr;t=lr;var r=32-kt(i)-1;i&=~(1<<r),n+=1;var o=32-kt(e)+r;if(30<o){var s=r-r%5;o=(i&(1<<s)-1).toString(32),i>>=s,r-=s,sr=1<<32-kt(e)+r|n<<r|i,lr=o+t}else sr=1<<o|n<<r|i,lr=t}function cr(t){null!==t.return&&(ur(t,1),ar(t,1,0))}function hr(t){for(;t===er;)er=Zi[--tr],Zi[tr]=null,nr=Zi[--tr],Zi[tr]=null;for(;t===or;)or=ir[--rr],ir[rr]=null,lr=ir[--rr],ir[rr]=null,sr=ir[--rr],ir[rr]=null}function fr(t,e){ir[rr++]=sr,ir[rr++]=lr,ir[rr++]=or,sr=e.id,lr=e.overflow,or=t}var dr=null,pr=null,mr=!1,vr=null,wr=!1,yr=Error(i(519));function gr(t){throw Ir(Qi(Error(i(418,1<arguments.length&&void 0!==arguments[1]&&arguments[1]?"text":"HTML","")),t)),yr}function br(t){var e=t.stateNode,n=t.type,i=t.memoizedProps;switch(e[Bt]=t,e[Jt]=i,n){case"dialog":th("cancel",e),th("close",e);break;case"iframe":case"object":case"embed":th("load",e);break;case"video":case"audio":for(n=0;n<Xc.length;n++)th(Xc[n],e);break;case"source":th("error",e);break;case"img":case"image":case"link":th("error",e),th("load",e);break;case"details":th("toggle",e);break;case"input":th("invalid",e),Te(e,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0);break;case"select":th("invalid",e);break;case"textarea":th("invalid",e),Ce(e,i.value,i.defaultValue,i.children)}"string"!=typeof(n=i.children)&&"number"!=typeof n&&"bigint"!=typeof n||e.textContent===""+n||!0===i.suppressHydrationWarning||dh(e.textContent,n)?(null!=i.popover&&(th("beforetoggle",e),th("toggle",e)),null!=i.onScroll&&th("scroll",e),null!=i.onScrollEnd&&th("scrollend",e),null!=i.onClick&&(e.onclick=Le),e=!0):e=!1,e||gr(t,!0)}function Er(t){for(dr=t.return;dr;)switch(dr.tag){case 5:case 31:case 13:return void(wr=!1);case 27:case 3:return void(wr=!0);default:dr=dr.return}}function Sr(t){if(t!==dr)return!1;if(!mr)return Er(t),mr=!0,!1;var e,n=t.tag;if((e=3!==n&&27!==n)&&((e=5===n)&&(e=!("form"!==(e=t.type)&&"button"!==e)||Th(t.type,t.memoizedProps)),e=!e),e&&pr&&gr(t),Er(t),13===n){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(i(317));pr=$h(t)}else if(31===n){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(i(317));pr=$h(t)}else 27===n?(n=pr,Nh(t.type)?(t=Fh,Fh=null,pr=t):pr=n):pr=dr?Uh(t.stateNode.nextSibling):null;return!0}function Tr(){pr=dr=null,mr=!1}function kr(){var t=vr;return null!==t&&(null===Ma?Ma=t:Ma.push.apply(Ma,t),vr=null),t}function Ir(t){null===vr?vr=[t]:vr.push(t)}var _r=q(null),Cr=null,Ar=null;function Or(t,e,n){B(_r,e._currentValue),e._currentValue=n}function Nr(t){t._currentValue=_r.current,H(_r)}function Rr(t,e,n){for(;null!==t;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,null!==i&&(i.childLanes|=e)):null!==i&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Pr(t,e,n,r){var o=t.child;for(null!==o&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){var l=o.child;s=s.firstContext;t:for(;null!==s;){var u=s;s=o;for(var a=0;a<e.length;a++)if(u.context===e[a]){s.lanes|=n,null!==(u=s.alternate)&&(u.lanes|=n),Rr(s.return,n,t),r||(l=null);break t}s=u.next}}else if(18===o.tag){if(null===(l=o.return))throw Error(i(341));l.lanes|=n,null!==(s=l.alternate)&&(s.lanes|=n),Rr(l,n,t),l=null}else l=o.child;if(null!==l)l.return=o;else for(l=o;null!==l;){if(l===t){l=null;break}if(null!==(o=l.sibling)){o.return=l.return,l=o;break}l=l.return}o=l}}function xr(t,e,n,r){t=null;for(var o=e,s=!1;null!==o;){if(!s)if(524288&o.flags)s=!0;else if(262144&o.flags)break;if(10===o.tag){var l=o.alternate;if(null===l)throw Error(i(387));if(null!==(l=l.memoizedProps)){var u=o.type;ni(o.pendingProps.value,l.value)||(null!==t?t.push(u):t=[u])}}else if(o===X.current){if(null===(l=o.alternate))throw Error(i(387));l.memoizedState.memoizedState!==o.memoizedState.memoizedState&&(null!==t?t.push(mf):t=[mf])}o=o.return}null!==t&&Pr(e,t,n,r),e.flags|=262144}function Mr(t){for(t=t.firstContext;null!==t;){if(!ni(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Dr(t){Cr=t,Ar=null,null!==(t=t.dependencies)&&(t.firstContext=null)}function Lr(t){return Fr(Cr,t)}function Ur(t,e){return null===Cr&&Dr(t),Fr(t,e)}function Fr(t,e){var n=e._currentValue;if(e={context:e,memoizedValue:n,next:null},null===Ar){if(null===t)throw Error(i(308));Ar=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else Ar=Ar.next=e;return n}var $r="undefined"!=typeof AbortController?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(e,n){t.push(n)}};this.abort=function(){e.aborted=!0,t.forEach(function(t){return t()})}},jr=t.unstable_scheduleCallback,Gr=t.unstable_NormalPriority,Vr={$$typeof:E,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function qr(){return{controller:new $r,data:new Map,refCount:0}}function Hr(t){t.refCount--,0===t.refCount&&jr(Gr,function(){t.controller.abort()})}var Br=null,Jr=0,zr=0,Kr=null;function Wr(){if(0===--Jr&&null!==Br){null!==Kr&&(Kr.status="fulfilled");var t=Br;Br=null,zr=0,Kr=null;for(var e=0;e<t.length;e++)(0,t[e])()}}var Yr=F.S;F.S=function(t,e){Ua=ft(),"object"==typeof e&&null!==e&&"function"==typeof e.then&&function(t,e){if(null===Br){var n=Br=[];Jr=0,zr=Jc(),Kr={status:"pending",value:void 0,then:function(t){n.push(t)}}}Jr++,e.then(Wr,Wr)}(0,e),null!==Yr&&Yr(t,e)};var Xr=q(null);function Qr(){var t=Xr.current;return null!==t?t:ya.pooledCache}function Zr(t,e){B(Xr,null===e?Xr.current:e.pool)}function to(){var t=Qr();return null===t?null:{parent:Vr._currentValue,pool:t}}var eo=Error(i(460)),no=Error(i(474)),io=Error(i(542)),ro={then:function(){}};function oo(t){return"fulfilled"===(t=t.status)||"rejected"===t}function so(t,e,n){switch(void 0===(n=t[n])?t.push(e):n!==e&&(e.then(Le,Le),e=n),e.status){case"fulfilled":return e.value;case"rejected":throw co(t=e.reason),t;default:if("string"==typeof e.status)e.then(Le,Le);else{if(null!==(t=ya)&&100<t.shellSuspendCounter)throw Error(i(482));(t=e).status="pending",t.then(function(t){if("pending"===e.status){var n=e;n.status="fulfilled",n.value=t}},function(t){if("pending"===e.status){var n=e;n.status="rejected",n.reason=t}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw co(t=e.reason),t}throw uo=e,eo}}function lo(t){try{return(0,t._init)(t._payload)}catch(e){if(null!==e&&"object"==typeof e&&"function"==typeof e.then)throw uo=e,eo;throw e}}var uo=null;function ao(){if(null===uo)throw Error(i(459));var t=uo;return uo=null,t}function co(t){if(t===eo||t===io)throw Error(i(483))}var ho=null,fo=0;function po(t){var e=fo;return fo+=1,null===ho&&(ho=[]),so(ho,t,e)}function mo(t,e){e=e.props.ref,t.ref=void 0!==e?e:null}function vo(t,e){if(e.$$typeof===f)throw Error(i(525));throw t=Object.prototype.toString.call(e),Error(i(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function wo(t){function e(e,n){if(t){var i=e.deletions;null===i?(e.deletions=[n],e.flags|=16):i.push(n)}}function n(n,i){if(!t)return null;for(;null!==i;)e(n,i),i=i.sibling;return null}function r(t){for(var e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function o(t,e){return(t=Hi(t,e)).index=0,t.sibling=null,t}function s(e,n,i){return e.index=i,t?null!==(i=e.alternate)?(i=i.index)<n?(e.flags|=67108866,n):i:(e.flags|=67108866,n):(e.flags|=1048576,n)}function l(e){return t&&null===e.alternate&&(e.flags|=67108866),e}function u(t,e,n,i){return null===e||6!==e.tag?((e=Ki(n,t.mode,i)).return=t,e):((e=o(e,n)).return=t,e)}function a(t,e,n,i){var r=n.type;return r===m?h(t,e,n.props.children,i,n.key):null!==e&&(e.elementType===r||"object"==typeof r&&null!==r&&r.$$typeof===N&&lo(r)===e.type)?(mo(e=o(e,n.props),n),e.return=t,e):(mo(e=Ji(n.type,n.key,n.props,null,t.mode,i),n),e.return=t,e)}function c(t,e,n,i){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=Yi(n,t.mode,i)).return=t,e):((e=o(e,n.children||[])).return=t,e)}function h(t,e,n,i,r){return null===e||7!==e.tag?((e=zi(n,t.mode,i,r)).return=t,e):((e=o(e,n)).return=t,e)}function f(t,e,n){if("string"==typeof e&&""!==e||"number"==typeof e||"bigint"==typeof e)return(e=Ki(""+e,t.mode,n)).return=t,e;if("object"==typeof e&&null!==e){switch(e.$$typeof){case d:return mo(n=Ji(e.type,e.key,e.props,null,t.mode,n),e),n.return=t,n;case p:return(e=Yi(e,t.mode,n)).return=t,e;case N:return f(t,e=lo(e),n)}if(U(e)||M(e))return(e=zi(e,t.mode,n,null)).return=t,e;if("function"==typeof e.then)return f(t,po(e),n);if(e.$$typeof===E)return f(t,Ur(t,e),n);vo(t,e)}return null}function v(t,e,n,i){var r=null!==e?e.key:null;if("string"==typeof n&&""!==n||"number"==typeof n||"bigint"==typeof n)return null!==r?null:u(t,e,""+n,i);if("object"==typeof n&&null!==n){switch(n.$$typeof){case d:return n.key===r?a(t,e,n,i):null;case p:return n.key===r?c(t,e,n,i):null;case N:return v(t,e,n=lo(n),i)}if(U(n)||M(n))return null!==r?null:h(t,e,n,i,null);if("function"==typeof n.then)return v(t,e,po(n),i);if(n.$$typeof===E)return v(t,e,Ur(t,n),i);vo(t,n)}return null}function w(t,e,n,i,r){if("string"==typeof i&&""!==i||"number"==typeof i||"bigint"==typeof i)return u(e,t=t.get(n)||null,""+i,r);if("object"==typeof i&&null!==i){switch(i.$$typeof){case d:return a(e,t=t.get(null===i.key?n:i.key)||null,i,r);case p:return c(e,t=t.get(null===i.key?n:i.key)||null,i,r);case N:return w(t,e,n,i=lo(i),r)}if(U(i)||M(i))return h(e,t=t.get(n)||null,i,r,null);if("function"==typeof i.then)return w(t,e,n,po(i),r);if(i.$$typeof===E)return w(t,e,n,Ur(e,i),r);vo(e,i)}return null}function y(u,a,c,h){if("object"==typeof c&&null!==c&&c.type===m&&null===c.key&&(c=c.props.children),"object"==typeof c&&null!==c){switch(c.$$typeof){case d:t:{for(var g=c.key;null!==a;){if(a.key===g){if((g=c.type)===m){if(7===a.tag){n(u,a.sibling),(h=o(a,c.props.children)).return=u,u=h;break t}}else if(a.elementType===g||"object"==typeof g&&null!==g&&g.$$typeof===N&&lo(g)===a.type){n(u,a.sibling),mo(h=o(a,c.props),c),h.return=u,u=h;break t}n(u,a);break}e(u,a),a=a.sibling}c.type===m?((h=zi(c.props.children,u.mode,h,c.key)).return=u,u=h):(mo(h=Ji(c.type,c.key,c.props,null,u.mode,h),c),h.return=u,u=h)}return l(u);case p:t:{for(g=c.key;null!==a;){if(a.key===g){if(4===a.tag&&a.stateNode.containerInfo===c.containerInfo&&a.stateNode.implementation===c.implementation){n(u,a.sibling),(h=o(a,c.children||[])).return=u,u=h;break t}n(u,a);break}e(u,a),a=a.sibling}(h=Yi(c,u.mode,h)).return=u,u=h}return l(u);case N:return y(u,a,c=lo(c),h)}if(U(c))return function(i,o,l,u){for(var a=null,c=null,h=o,d=o=0,p=null;null!==h&&d<l.length;d++){h.index>d?(p=h,h=null):p=h.sibling;var m=v(i,h,l[d],u);if(null===m){null===h&&(h=p);break}t&&h&&null===m.alternate&&e(i,h),o=s(m,o,d),null===c?a=m:c.sibling=m,c=m,h=p}if(d===l.length)return n(i,h),mr&&ur(i,d),a;if(null===h){for(;d<l.length;d++)null!==(h=f(i,l[d],u))&&(o=s(h,o,d),null===c?a=h:c.sibling=h,c=h);return mr&&ur(i,d),a}for(h=r(h);d<l.length;d++)null!==(p=w(h,i,d,l[d],u))&&(t&&null!==p.alternate&&h.delete(null===p.key?d:p.key),o=s(p,o,d),null===c?a=p:c.sibling=p,c=p);return t&&h.forEach(function(t){return e(i,t)}),mr&&ur(i,d),a}(u,a,c,h);if(M(c)){if("function"!=typeof(g=M(c)))throw Error(i(150));return function(o,l,u,a){if(null==u)throw Error(i(151));for(var c=null,h=null,d=l,p=l=0,m=null,y=u.next();null!==d&&!y.done;p++,y=u.next()){d.index>p?(m=d,d=null):m=d.sibling;var g=v(o,d,y.value,a);if(null===g){null===d&&(d=m);break}t&&d&&null===g.alternate&&e(o,d),l=s(g,l,p),null===h?c=g:h.sibling=g,h=g,d=m}if(y.done)return n(o,d),mr&&ur(o,p),c;if(null===d){for(;!y.done;p++,y=u.next())null!==(y=f(o,y.value,a))&&(l=s(y,l,p),null===h?c=y:h.sibling=y,h=y);return mr&&ur(o,p),c}for(d=r(d);!y.done;p++,y=u.next())null!==(y=w(d,o,p,y.value,a))&&(t&&null!==y.alternate&&d.delete(null===y.key?p:y.key),l=s(y,l,p),null===h?c=y:h.sibling=y,h=y);return t&&d.forEach(function(t){return e(o,t)}),mr&&ur(o,p),c}(u,a,c=g.call(c),h)}if("function"==typeof c.then)return y(u,a,po(c),h);if(c.$$typeof===E)return y(u,a,Ur(u,c),h);vo(u,c)}return"string"==typeof c&&""!==c||"number"==typeof c||"bigint"==typeof c?(c=""+c,null!==a&&6===a.tag?(n(u,a.sibling),(h=o(a,c)).return=u,u=h):(n(u,a),(h=Ki(c,u.mode,h)).return=u,u=h),l(u)):n(u,a)}return function(t,e,n,i){try{fo=0;var r=y(t,e,n,i);return ho=null,r}catch(s){if(s===eo||s===io)throw s;var o=Vi(29,s,null,t.mode);return o.lanes=i,o.return=t,o}}}var yo=wo(!0),go=wo(!1),bo=!1;function Eo(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function So(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function To(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function ko(t,e,n){var i=t.updateQueue;if(null===i)return null;if(i=i.shared,2&wa){var r=i.pending;return null===r?e.next=e:(e.next=r.next,r.next=e),i.pending=e,e=$i(t),Fi(t,null,n),e}return Di(t,i,e,n),$i(t)}function Io(t,e,n){if(null!==(e=e.updateQueue)&&(e=e.shared,4194048&n)){var i=e.lanes;n|=i&=t.pendingLanes,e.lanes=n,Ft(t,n)}}function _o(t,e){var n=t.updateQueue,i=t.alternate;if(null!==i&&n===(i=i.updateQueue)){var r=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var s={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===o?r=o=s:o=o.next=s,n=n.next}while(null!==n);null===o?r=o=e:o=o.next=e}else r=o=e;return n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:i.shared,callbacks:i.callbacks},void(t.updateQueue=n)}null===(t=n.lastBaseUpdate)?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}var Co=!1;function Ao(){if(Co){if(null!==Kr)throw Kr}}function Oo(t,e,n,i){Co=!1;var r=t.updateQueue;bo=!1;var o=r.firstBaseUpdate,s=r.lastBaseUpdate,l=r.shared.pending;if(null!==l){r.shared.pending=null;var u=l,a=u.next;u.next=null,null===s?o=a:s.next=a,s=u;var h=t.alternate;null!==h&&((l=(h=h.updateQueue).lastBaseUpdate)!==s&&(null===l?h.firstBaseUpdate=a:l.next=a,h.lastBaseUpdate=u))}if(null!==o){var f=r.baseState;for(s=0,h=a=u=null,l=o;;){var d=-536870913&l.lane,p=d!==l.lane;if(p?(ba&d)===d:(i&d)===d){0!==d&&d===zr&&(Co=!0),null!==h&&(h=h.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});t:{var m=t,v=l;d=e;var w=n;switch(v.tag){case 1:if("function"==typeof(m=v.payload)){f=m.call(w,f,d);break t}f=m;break t;case 3:m.flags=-65537&m.flags|128;case 0:if(null==(d="function"==typeof(m=v.payload)?m.call(w,f,d):m))break t;f=c({},f,d);break t;case 2:bo=!0}}null!==(d=l.callback)&&(t.flags|=64,p&&(t.flags|=8192),null===(p=r.callbacks)?r.callbacks=[d]:p.push(d))}else p={lane:d,tag:l.tag,payload:l.payload,callback:l.callback,next:null},null===h?(a=h=p,u=f):h=h.next=p,s|=d;if(null===(l=l.next)){if(null===(l=r.shared.pending))break;l=(p=l).next,p.next=null,r.lastBaseUpdate=p,r.shared.pending=null}}null===h&&(u=f),r.baseState=u,r.firstBaseUpdate=a,r.lastBaseUpdate=h,null===o&&(r.shared.lanes=0),Aa|=s,t.lanes=s,t.memoizedState=f}}function No(t,e){if("function"!=typeof t)throw Error(i(191,t));t.call(e)}function Ro(t,e){var n=t.callbacks;if(null!==n)for(t.callbacks=null,t=0;t<n.length;t++)No(n[t],e)}var Po=q(null),xo=q(0);function Mo(t,e){B(xo,t=_a),B(Po,e),_a=t|e.baseLanes}function Do(){B(xo,_a),B(Po,Po.current)}function Lo(){_a=xo.current,H(Po),H(xo)}var Uo=q(null),Fo=null;function $o(t){var e=t.alternate;B(Ho,1&Ho.current),B(Uo,t),null===Fo&&(null===e||null!==Po.current||null!==e.memoizedState)&&(Fo=t)}function jo(t){B(Ho,Ho.current),B(Uo,t),null===Fo&&(Fo=t)}function Go(t){22===t.tag?(B(Ho,Ho.current),B(Uo,t),null===Fo&&(Fo=t)):Vo()}function Vo(){B(Ho,Ho.current),B(Uo,Uo.current)}function qo(t){H(Uo),Fo===t&&(Fo=null),H(Ho)}var Ho=q(0);function Bo(t){for(var e=t;null!==e;){if(13===e.tag){var n=e.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||Dh(n)||Lh(n)))return e}else if(19!==e.tag||"forwards"!==e.memoizedProps.revealOrder&&"backwards"!==e.memoizedProps.revealOrder&&"unstable_legacy-backwards"!==e.memoizedProps.revealOrder&&"together"!==e.memoizedProps.revealOrder){if(null!==e.child){e.child.return=e,e=e.child;continue}}else if(128&e.flags)return e;if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Jo=0,zo=null,Ko=null,Wo=null,Yo=!1,Xo=!1,Qo=!1,Zo=0,ts=0,es=null,ns=0;function is(){throw Error(i(321))}function rs(t,e){if(null===e)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ni(t[n],e[n]))return!1;return!0}function os(t,e,n,i,r,o){return Jo=o,zo=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,F.H=null===t||null===t.memoizedState?bl:El,Qo=!1,o=n(i,r),Qo=!1,Xo&&(o=ls(e,n,i,r)),ss(t),o}function ss(t){F.H=gl;var e=null!==Ko&&null!==Ko.next;if(Jo=0,Wo=Ko=zo=null,Yo=!1,ts=0,es=null,e)throw Error(i(300));null===t||Ul||null!==(t=t.dependencies)&&Mr(t)&&(Ul=!0)}function ls(t,e,n,r){zo=t;var o=0;do{if(Xo&&(es=null),ts=0,Xo=!1,25<=o)throw Error(i(301));if(o+=1,Wo=Ko=null,null!=t.updateQueue){var s=t.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,null!=s.memoCache&&(s.memoCache.index=0)}F.H=Sl,s=e(n,r)}while(Xo);return s}function us(){var t=F.H,e=t.useState()[0];return e="function"==typeof e.then?ps(e):e,t=t.useState()[0],(null!==Ko?Ko.memoizedState:null)!==t&&(zo.flags|=1024),e}function as(){var t=0!==Zo;return Zo=0,t}function cs(t,e,n){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n}function hs(t){if(Yo){for(t=t.memoizedState;null!==t;){var e=t.queue;null!==e&&(e.pending=null),t=t.next}Yo=!1}Jo=0,Wo=Ko=zo=null,Xo=!1,ts=Zo=0,es=null}function fs(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Wo?zo.memoizedState=Wo=t:Wo=Wo.next=t,Wo}function ds(){if(null===Ko){var t=zo.alternate;t=null!==t?t.memoizedState:null}else t=Ko.next;var e=null===Wo?zo.memoizedState:Wo.next;if(null!==e)Wo=e,Ko=t;else{if(null===t){if(null===zo.alternate)throw Error(i(467));throw Error(i(310))}t={memoizedState:(Ko=t).memoizedState,baseState:Ko.baseState,baseQueue:Ko.baseQueue,queue:Ko.queue,next:null},null===Wo?zo.memoizedState=Wo=t:Wo=Wo.next=t}return Wo}function ps(t){var e=ts;return ts+=1,null===es&&(es=[]),t=so(es,t,e),e=zo,null===(null===Wo?e.memoizedState:Wo.next)&&(e=e.alternate,F.H=null===e||null===e.memoizedState?bl:El),t}function ms(t){if(null!==t&&"object"==typeof t){if("function"==typeof t.then)return ps(t);if(t.$$typeof===E)return Lr(t)}throw Error(i(438,String(t)))}function vs(t){var e=null,n=zo.updateQueue;if(null!==n&&(e=n.memoCache),null==e){var i=zo.alternate;null!==i&&(null!==(i=i.updateQueue)&&(null!=(i=i.memoCache)&&(e={data:i.data.map(function(t){return t.slice()}),index:0})))}if(null==e&&(e={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},zo.updateQueue=n),n.memoCache=e,void 0===(n=e.data[e.index]))for(n=e.data[e.index]=Array(t),i=0;i<t;i++)n[i]=P;return e.index++,n}function ws(t,e){return"function"==typeof e?e(t):e}function ys(t){return gs(ds(),Ko,t)}function gs(t,e,n){var r=t.queue;if(null===r)throw Error(i(311));r.lastRenderedReducer=n;var o=t.baseQueue,s=r.pending;if(null!==s){if(null!==o){var l=o.next;o.next=s.next,s.next=l}e.baseQueue=o=s,r.pending=null}if(s=t.baseState,null===o)t.memoizedState=s;else{var u=l=null,a=null,c=e=o.next,h=!1;do{var f=-536870913&c.lane;if(f!==c.lane?(ba&f)===f:(Jo&f)===f){var d=c.revertLane;if(0===d)null!==a&&(a=a.next={lane:0,revertLane:0,gesture:null,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),f===zr&&(h=!0);else{if((Jo&d)===d){c=c.next,d===zr&&(h=!0);continue}f={lane:0,revertLane:c.revertLane,gesture:null,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===a?(u=a=f,l=s):a=a.next=f,zo.lanes|=d,Aa|=d}f=c.action,Qo&&n(s,f),s=c.hasEagerState?c.eagerState:n(s,f)}else d={lane:f,revertLane:c.revertLane,gesture:c.gesture,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===a?(u=a=d,l=s):a=a.next=d,zo.lanes|=f,Aa|=f;c=c.next}while(null!==c&&c!==e);if(null===a?l=s:a.next=u,!ni(s,t.memoizedState)&&(Ul=!0,h&&null!==(n=Kr)))throw n;t.memoizedState=s,t.baseState=l,t.baseQueue=a,r.lastRenderedState=s}return null===o&&(r.lanes=0),[t.memoizedState,r.dispatch]}function bs(t){var e=ds(),n=e.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=t;var r=n.dispatch,o=n.pending,s=e.memoizedState;if(null!==o){n.pending=null;var l=o=o.next;do{s=t(s,l.action),l=l.next}while(l!==o);ni(s,e.memoizedState)||(Ul=!0),e.memoizedState=s,null===e.baseQueue&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Es(t,e,n){var r=zo,o=ds(),s=mr;if(s){if(void 0===n)throw Error(i(407));n=n()}else n=e();var l=!ni((Ko||o).memoizedState,n);if(l&&(o.memoizedState=n,Ul=!0),o=o.queue,Js(ks.bind(null,r,o,t),[t]),o.getSnapshot!==e||l||null!==Wo&&1&Wo.memoizedState.tag){if(r.flags|=2048,Gs(9,{destroy:void 0},Ts.bind(null,r,o,n,e),null),null===ya)throw Error(i(349));s||127&Jo||Ss(r,e,n)}return n}function Ss(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},null===(e=zo.updateQueue)?(e={lastEffect:null,events:null,stores:null,memoCache:null},zo.updateQueue=e,e.stores=[t]):null===(n=e.stores)?e.stores=[t]:n.push(t)}function Ts(t,e,n,i){e.value=n,e.getSnapshot=i,Is(e)&&_s(t)}function ks(t,e,n){return n(function(){Is(e)&&_s(t)})}function Is(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ni(t,n)}catch(i){return!0}}function _s(t){var e=Ui(t,2);null!==e&&Qa(e,t,2)}function Cs(t){var e=fs();if("function"==typeof t){var n=t;if(t=n(),Qo){Tt(!0);try{n()}finally{Tt(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ws,lastRenderedState:t},e}function As(t,e,n,i){return t.baseState=n,gs(t,Ko,"function"==typeof i?i:ws)}function Os(t,e,n,r,o){if(vl(t))throw Error(i(485));if(null!==(t=e.action)){var s={payload:o,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(t){s.listeners.push(t)}};null!==F.T?n(!0):s.isTransition=!1,r(s),null===(n=e.pending)?(s.next=e.pending=s,Ns(e,s)):(s.next=n.next,e.pending=n.next=s)}}function Ns(t,e){var n=e.action,i=e.payload,r=t.state;if(e.isTransition){var o=F.T,s={};F.T=s;try{var l=n(r,i),u=F.S;null!==u&&u(s,l),Rs(t,e,l)}catch(a){xs(t,e,a)}finally{null!==o&&null!==s.types&&(o.types=s.types),F.T=o}}else try{Rs(t,e,o=n(r,i))}catch(c){xs(t,e,c)}}function Rs(t,e,n){null!==n&&"object"==typeof n&&"function"==typeof n.then?n.then(function(n){Ps(t,e,n)},function(n){return xs(t,e,n)}):Ps(t,e,n)}function Ps(t,e,n){e.status="fulfilled",e.value=n,Ms(e),t.state=n,null!==(e=t.pending)&&((n=e.next)===e?t.pending=null:(n=n.next,e.next=n,Ns(t,n)))}function xs(t,e,n){var i=t.pending;if(t.pending=null,null!==i){i=i.next;do{e.status="rejected",e.reason=n,Ms(e),e=e.next}while(e!==i)}t.action=null}function Ms(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function Ds(t,e){return e}function Ls(t,e){if(mr){var n=ya.formState;if(null!==n){t:{var i=zo;if(mr){if(pr){e:{for(var r=pr,o=wr;8!==r.nodeType;){if(!o){r=null;break e}if(null===(r=Uh(r.nextSibling))){r=null;break e}}r="F!"===(o=r.data)||"F"===o?r:null}if(r){pr=Uh(r.nextSibling),i="F!"===r.data;break t}}gr(i)}i=!1}i&&(e=n[0])}}return(n=fs()).memoizedState=n.baseState=e,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ds,lastRenderedState:e},n.queue=i,n=dl.bind(null,zo,i),i.dispatch=n,i=Cs(!1),o=ml.bind(null,zo,!1,i.queue),r={state:e,dispatch:null,action:t,pending:null},(i=fs()).queue=r,n=Os.bind(null,zo,r,o,n),r.dispatch=n,i.memoizedState=t,[e,n,!1]}function Us(t){return Fs(ds(),Ko,t)}function Fs(t,e,n){if(e=gs(t,e,Ds)[0],t=ys(ws)[0],"object"==typeof e&&null!==e&&"function"==typeof e.then)try{var i=ps(e)}catch(s){if(s===eo)throw io;throw s}else i=e;var r=(e=ds()).queue,o=r.dispatch;return n!==e.memoizedState&&(zo.flags|=2048,Gs(9,{destroy:void 0},$s.bind(null,r,n),null)),[i,o,t]}function $s(t,e){t.action=e}function js(t){var e=ds(),n=Ko;if(null!==n)return Fs(e,n,t);ds(),e=e.memoizedState;var i=(n=ds()).queue.dispatch;return n.memoizedState=t,[e,i,!1]}function Gs(t,e,n,i){return t={tag:t,create:n,deps:i,inst:e,next:null},null===(e=zo.updateQueue)&&(e={lastEffect:null,events:null,stores:null,memoCache:null},zo.updateQueue=e),null===(n=e.lastEffect)?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t),t}function Vs(){return ds().memoizedState}function qs(t,e,n,i){var r=fs();zo.flags|=t,r.memoizedState=Gs(1|e,{destroy:void 0},n,void 0===i?null:i)}function Hs(t,e,n,i){var r=ds();i=void 0===i?null:i;var o=r.memoizedState.inst;null!==Ko&&null!==i&&rs(i,Ko.memoizedState.deps)?r.memoizedState=Gs(e,o,n,i):(zo.flags|=t,r.memoizedState=Gs(1|e,o,n,i))}function Bs(t,e){qs(8390656,8,t,e)}function Js(t,e){Hs(2048,8,t,e)}function zs(t){var e=ds().memoizedState;return function(t){zo.flags|=4;var e=zo.updateQueue;if(null===e)e={lastEffect:null,events:null,stores:null,memoCache:null},zo.updateQueue=e,e.events=[t];else{var n=e.events;null===n?e.events=[t]:n.push(t)}}({ref:e,nextImpl:t}),function(){if(2&wa)throw Error(i(440));return e.impl.apply(void 0,arguments)}}function Ks(t,e){return Hs(4,2,t,e)}function Ws(t,e){return Hs(4,4,t,e)}function Ys(t,e){if("function"==typeof e){t=t();var n=e(t);return function(){"function"==typeof n?n():e(null)}}if(null!=e)return t=t(),e.current=t,function(){e.current=null}}function Xs(t,e,n){n=null!=n?n.concat([t]):null,Hs(4,4,Ys.bind(null,e,t),n)}function Qs(){}function Zs(t,e){var n=ds();e=void 0===e?null:e;var i=n.memoizedState;return null!==e&&rs(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function tl(t,e){var n=ds();e=void 0===e?null:e;var i=n.memoizedState;if(null!==e&&rs(e,i[1]))return i[0];if(i=t(),Qo){Tt(!0);try{t()}finally{Tt(!1)}}return n.memoizedState=[i,e],i}function el(t,e,n){return void 0===n||1073741824&Jo&&!(261930&ba)?t.memoizedState=e:(t.memoizedState=n,t=Xa(),zo.lanes|=t,Aa|=t,n)}function nl(t,e,n,i){return ni(n,e)?n:null!==Po.current?(t=el(t,n,i),ni(t,e)||(Ul=!0),t):42&Jo&&(!(1073741824&Jo)||261930&ba)?(t=Xa(),zo.lanes|=t,Aa|=t,e):(Ul=!0,t.memoizedState=n)}function il(t,e,n,i,r){var o=$.p;$.p=0!==o&&8>o?o:8;var s,l,u,a=F.T,c={};F.T=c,ml(t,!1,e,n);try{var h=r(),f=F.S;if(null!==f&&f(c,h),null!==h&&"object"==typeof h&&"function"==typeof h.then)pl(t,e,(s=i,l=[],u={status:"pending",value:null,reason:null,then:function(t){l.push(t)}},h.then(function(){u.status="fulfilled",u.value=s;for(var t=0;t<l.length;t++)(0,l[t])(s)},function(t){for(u.status="rejected",u.reason=t,t=0;t<l.length;t++)(0,l[t])(void 0)}),u),Ya());else pl(t,e,i,Ya())}catch(d){pl(t,e,{then:function(){},status:"rejected",reason:d},Ya())}finally{$.p=o,null!==a&&null!==c.types&&(a.types=c.types),F.T=a}}function rl(){}function ol(t,e,n,r){if(5!==t.tag)throw Error(i(476));var o=sl(t).queue;il(t,o,e,j,null===n?rl:function(){return ll(t),n(r)})}function sl(t){var e=t.memoizedState;if(null!==e)return e;var n={};return(e={memoizedState:j,baseState:j,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ws,lastRenderedState:j},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ws,lastRenderedState:n},next:null},t.memoizedState=e,null!==(t=t.alternate)&&(t.memoizedState=e),e}function ll(t){var e=sl(t);null===e.next&&(e=t.alternate.memoizedState),pl(t,e.next.queue,{},Ya())}function ul(){return Lr(mf)}function al(){return ds().memoizedState}function cl(){return ds().memoizedState}function hl(t){for(var e=t.return;null!==e;){switch(e.tag){case 24:case 3:var n=Ya(),i=ko(e,t=To(n),n);return null!==i&&(Qa(i,e,n),Io(i,e,n)),e={cache:qr()},void(t.payload=e)}e=e.return}}function fl(t,e,n){var i=Ya();n={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},vl(t)?wl(e,n):null!==(n=Li(t,e,n,i))&&(Qa(n,t,i),yl(n,e,i))}function dl(t,e,n){pl(t,e,n,Ya())}function pl(t,e,n,i){var r={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(vl(t))wl(e,r);else{var o=t.alternate;if(0===t.lanes&&(null===o||0===o.lanes)&&null!==(o=e.lastRenderedReducer))try{var s=e.lastRenderedState,l=o(s,n);if(r.hasEagerState=!0,r.eagerState=l,ni(l,s))return Di(t,e,r,0),null===ya&&Mi(),!1}catch(u){}if(null!==(n=Li(t,e,r,i)))return Qa(n,t,i),yl(n,e,i),!0}return!1}function ml(t,e,n,r){if(r={lane:2,revertLane:Jc(),gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},vl(t)){if(e)throw Error(i(479))}else null!==(e=Li(t,n,r,2))&&Qa(e,t,2)}function vl(t){var e=t.alternate;return t===zo||null!==e&&e===zo}function wl(t,e){Xo=Yo=!0;var n=t.pending;null===n?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function yl(t,e,n){if(4194048&n){var i=e.lanes;n|=i&=t.pendingLanes,e.lanes=n,Ft(t,n)}}var gl={readContext:Lr,use:ms,useCallback:is,useContext:is,useEffect:is,useImperativeHandle:is,useLayoutEffect:is,useInsertionEffect:is,useMemo:is,useReducer:is,useRef:is,useState:is,useDebugValue:is,useDeferredValue:is,useTransition:is,useSyncExternalStore:is,useId:is,useHostTransitionStatus:is,useFormState:is,useActionState:is,useOptimistic:is,useMemoCache:is,useCacheRefresh:is};gl.useEffectEvent=is;var bl={readContext:Lr,use:ms,useCallback:function(t,e){return fs().memoizedState=[t,void 0===e?null:e],t},useContext:Lr,useEffect:Bs,useImperativeHandle:function(t,e,n){n=null!=n?n.concat([t]):null,qs(4194308,4,Ys.bind(null,e,t),n)},useLayoutEffect:function(t,e){return qs(4194308,4,t,e)},useInsertionEffect:function(t,e){qs(4,2,t,e)},useMemo:function(t,e){var n=fs();e=void 0===e?null:e;var i=t();if(Qo){Tt(!0);try{t()}finally{Tt(!1)}}return n.memoizedState=[i,e],i},useReducer:function(t,e,n){var i=fs();if(void 0!==n){var r=n(e);if(Qo){Tt(!0);try{n(e)}finally{Tt(!1)}}}else r=e;return i.memoizedState=i.baseState=r,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},i.queue=t,t=t.dispatch=fl.bind(null,zo,t),[i.memoizedState,t]},useRef:function(t){return t={current:t},fs().memoizedState=t},useState:function(t){var e=(t=Cs(t)).queue,n=dl.bind(null,zo,e);return e.dispatch=n,[t.memoizedState,n]},useDebugValue:Qs,useDeferredValue:function(t,e){return el(fs(),t,e)},useTransition:function(){var t=Cs(!1);return t=il.bind(null,zo,t.queue,!0,!1),fs().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,n){var r=zo,o=fs();if(mr){if(void 0===n)throw Error(i(407));n=n()}else{if(n=e(),null===ya)throw Error(i(349));127&ba||Ss(r,e,n)}o.memoizedState=n;var s={value:n,getSnapshot:e};return o.queue=s,Bs(ks.bind(null,r,s,t),[t]),r.flags|=2048,Gs(9,{destroy:void 0},Ts.bind(null,r,s,n,e),null),n},useId:function(){var t=fs(),e=ya.identifierPrefix;if(mr){var n=lr;e="_"+e+"R_"+(n=(sr&~(1<<32-kt(sr)-1)).toString(32)+n),0<(n=Zo++)&&(e+="H"+n.toString(32)),e+="_"}else e="_"+e+"r_"+(n=ns++).toString(32)+"_";return t.memoizedState=e},useHostTransitionStatus:ul,useFormState:Ls,useActionState:Ls,useOptimistic:function(t){var e=fs();e.memoizedState=e.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=n,e=ml.bind(null,zo,!0,n),n.dispatch=e,[t,e]},useMemoCache:vs,useCacheRefresh:function(){return fs().memoizedState=hl.bind(null,zo)},useEffectEvent:function(t){var e=fs(),n={impl:t};return e.memoizedState=n,function(){if(2&wa)throw Error(i(440));return n.impl.apply(void 0,arguments)}}},El={readContext:Lr,use:ms,useCallback:Zs,useContext:Lr,useEffect:Js,useImperativeHandle:Xs,useInsertionEffect:Ks,useLayoutEffect:Ws,useMemo:tl,useReducer:ys,useRef:Vs,useState:function(){return ys(ws)},useDebugValue:Qs,useDeferredValue:function(t,e){return nl(ds(),Ko.memoizedState,t,e)},useTransition:function(){var t=ys(ws)[0],e=ds().memoizedState;return["boolean"==typeof t?t:ps(t),e]},useSyncExternalStore:Es,useId:al,useHostTransitionStatus:ul,useFormState:Us,useActionState:Us,useOptimistic:function(t,e){return As(ds(),0,t,e)},useMemoCache:vs,useCacheRefresh:cl};El.useEffectEvent=zs;var Sl={readContext:Lr,use:ms,useCallback:Zs,useContext:Lr,useEffect:Js,useImperativeHandle:Xs,useInsertionEffect:Ks,useLayoutEffect:Ws,useMemo:tl,useReducer:bs,useRef:Vs,useState:function(){return bs(ws)},useDebugValue:Qs,useDeferredValue:function(t,e){var n=ds();return null===Ko?el(n,t,e):nl(n,Ko.memoizedState,t,e)},useTransition:function(){var t=bs(ws)[0],e=ds().memoizedState;return["boolean"==typeof t?t:ps(t),e]},useSyncExternalStore:Es,useId:al,useHostTransitionStatus:ul,useFormState:js,useActionState:js,useOptimistic:function(t,e){var n=ds();return null!==Ko?As(n,0,t,e):(n.baseState=t,[t,n.queue.dispatch])},useMemoCache:vs,useCacheRefresh:cl};function Tl(t,e,n,i){n=null==(n=n(i,e=t.memoizedState))?e:c({},e,n),t.memoizedState=n,0===t.lanes&&(t.updateQueue.baseState=n)}Sl.useEffectEvent=zs;var kl={enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Ya(),r=To(i);r.payload=e,null!=n&&(r.callback=n),null!==(e=ko(t,r,i))&&(Qa(e,t,i),Io(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Ya(),r=To(i);r.tag=1,r.payload=e,null!=n&&(r.callback=n),null!==(e=ko(t,r,i))&&(Qa(e,t,i),Io(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ya(),i=To(n);i.tag=2,null!=e&&(i.callback=e),null!==(e=ko(t,i,n))&&(Qa(e,t,n),Io(e,t,n))}};function Il(t,e,n,i,r,o,s){return"function"==typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(i,o,s):!e.prototype||!e.prototype.isPureReactComponent||(!ii(n,i)||!ii(r,o))}function _l(t,e,n,i){t=e.state,"function"==typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,i),"function"==typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&kl.enqueueReplaceState(e,e.state,null)}function Cl(t,e){var n=e;if("ref"in e)for(var i in n={},e)"ref"!==i&&(n[i]=e[i]);if(t=t.defaultProps)for(var r in n===e&&(n=c({},n)),t)void 0===n[r]&&(n[r]=t[r]);return n}function Al(t){Ni(t)}function Ol(t){}function Nl(t){Ni(t)}function Rl(t,e){try{(0,t.onUncaughtError)(e.value,{componentStack:e.stack})}catch(n){setTimeout(function(){throw n})}}function Pl(t,e,n){try{(0,t.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===e.tag?e.stateNode:null})}catch(i){setTimeout(function(){throw i})}}function xl(t,e,n){return(n=To(n)).tag=3,n.payload={element:null},n.callback=function(){Rl(t,e)},n}function Ml(t){return(t=To(t)).tag=3,t}function Dl(t,e,n,i){var r=n.type.getDerivedStateFromError;if("function"==typeof r){var o=i.value;t.payload=function(){return r(o)},t.callback=function(){Pl(e,n,i)}}var s=n.stateNode;null!==s&&"function"==typeof s.componentDidCatch&&(t.callback=function(){Pl(e,n,i),"function"!=typeof r&&(null===ja?ja=new Set([this]):ja.add(this));var t=i.stack;this.componentDidCatch(i.value,{componentStack:null!==t?t:""})})}var Ll=Error(i(461)),Ul=!1;function Fl(t,e,n,i){e.child=null===t?go(e,null,n,i):yo(e,t.child,n,i)}function $l(t,e,n,i,r){n=n.render;var o=e.ref;if("ref"in i){var s={};for(var l in i)"ref"!==l&&(s[l]=i[l])}else s=i;return Dr(e),i=os(t,e,n,s,o,r),l=as(),null===t||Ul?(mr&&l&&cr(e),e.flags|=1,Fl(t,e,i,r),e.child):(cs(t,e,r),uu(t,e,r))}function jl(t,e,n,i,r){if(null===t){var o=n.type;return"function"!=typeof o||qi(o)||void 0!==o.defaultProps||null!==n.compare?((t=Ji(n.type,null,i,e,e.mode,r)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=o,Gl(t,e,o,i,r))}if(o=t.child,!au(t,r)){var s=o.memoizedProps;if((n=null!==(n=n.compare)?n:ii)(s,i)&&t.ref===e.ref)return uu(t,e,r)}return e.flags|=1,(t=Hi(o,i)).ref=e.ref,t.return=e,e.child=t}function Gl(t,e,n,i,r){if(null!==t){var o=t.memoizedProps;if(ii(o,i)&&t.ref===e.ref){if(Ul=!1,e.pendingProps=i=o,!au(t,r))return e.lanes=t.lanes,uu(t,e,r);131072&t.flags&&(Ul=!0)}}return Kl(t,e,n,i,r)}function Vl(t,e,n,i){var r=i.children,o=null!==t?t.memoizedState:null;if(null===t&&null===e.stateNode&&(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),"hidden"===i.mode){if(128&e.flags){if(o=null!==o?o.baseLanes|n:n,null!==t){for(i=e.child=t.child,r=0;null!==i;)r=r|i.lanes|i.childLanes,i=i.sibling;i=r&~o}else i=0,e.child=null;return Hl(t,e,o,n,i)}if(!(536870912&n))return i=e.lanes=536870912,Hl(t,e,null!==o?o.baseLanes|n:n,n,i);e.memoizedState={baseLanes:0,cachePool:null},null!==t&&Zr(0,null!==o?o.cachePool:null),null!==o?Mo(e,o):Do(),Go(e)}else null!==o?(Zr(0,o.cachePool),Mo(e,o),Vo(),e.memoizedState=null):(null!==t&&Zr(0,null),Do(),Vo());return Fl(t,e,r,n),e.child}function ql(t,e){return null!==t&&22===t.tag||null!==e.stateNode||(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),e.sibling}function Hl(t,e,n,i,r){var o=Qr();return o=null===o?null:{parent:Vr._currentValue,pool:o},e.memoizedState={baseLanes:n,cachePool:o},null!==t&&Zr(0,null),Do(),Go(e),null!==t&&xr(t,e,i,!0),e.childLanes=r,null}function Bl(t,e){return(e=iu({mode:e.mode,children:e.children},t.mode)).ref=t.ref,t.child=e,e.return=t,e}function Jl(t,e,n){return yo(e,t.child,null,n),(t=Bl(e,e.pendingProps)).flags|=2,qo(e),e.memoizedState=null,t}function zl(t,e){var n=e.ref;if(null===n)null!==t&&null!==t.ref&&(e.flags|=4194816);else{if("function"!=typeof n&&"object"!=typeof n)throw Error(i(284));null!==t&&t.ref===n||(e.flags|=4194816)}}function Kl(t,e,n,i,r){return Dr(e),n=os(t,e,n,i,void 0,r),i=as(),null===t||Ul?(mr&&i&&cr(e),e.flags|=1,Fl(t,e,n,r),e.child):(cs(t,e,r),uu(t,e,r))}function Wl(t,e,n,i,r,o){return Dr(e),e.updateQueue=null,n=ls(e,i,n,r),ss(t),i=as(),null===t||Ul?(mr&&i&&cr(e),e.flags|=1,Fl(t,e,n,o),e.child):(cs(t,e,o),uu(t,e,o))}function Yl(t,e,n,i,r){if(Dr(e),null===e.stateNode){var o=ji,s=n.contextType;"object"==typeof s&&null!==s&&(o=Lr(s)),o=new n(i,o),e.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,o.updater=kl,e.stateNode=o,o._reactInternals=e,(o=e.stateNode).props=i,o.state=e.memoizedState,o.refs={},Eo(e),s=n.contextType,o.context="object"==typeof s&&null!==s?Lr(s):ji,o.state=e.memoizedState,"function"==typeof(s=n.getDerivedStateFromProps)&&(Tl(e,n,s,i),o.state=e.memoizedState),"function"==typeof n.getDerivedStateFromProps||"function"==typeof o.getSnapshotBeforeUpdate||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||(s=o.state,"function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),s!==o.state&&kl.enqueueReplaceState(o,o.state,null),Oo(e,i,o,r),Ao(),o.state=e.memoizedState),"function"==typeof o.componentDidMount&&(e.flags|=4194308),i=!0}else if(null===t){o=e.stateNode;var l=e.memoizedProps,u=Cl(n,l);o.props=u;var a=o.context,c=n.contextType;s=ji,"object"==typeof c&&null!==c&&(s=Lr(c));var h=n.getDerivedStateFromProps;c="function"==typeof h||"function"==typeof o.getSnapshotBeforeUpdate,l=e.pendingProps!==l,c||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(l||a!==s)&&_l(e,o,i,s),bo=!1;var f=e.memoizedState;o.state=f,Oo(e,i,o,r),Ao(),a=e.memoizedState,l||f!==a||bo?("function"==typeof h&&(Tl(e,n,h,i),a=e.memoizedState),(u=bo||Il(e,n,u,i,f,a,s))?(c||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||("function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"==typeof o.componentDidMount&&(e.flags|=4194308)):("function"==typeof o.componentDidMount&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=a),o.props=i,o.state=a,o.context=s,i=u):("function"==typeof o.componentDidMount&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,So(t,e),c=Cl(n,s=e.memoizedProps),o.props=c,h=e.pendingProps,f=o.context,a=n.contextType,u=ji,"object"==typeof a&&null!==a&&(u=Lr(a)),(a="function"==typeof(l=n.getDerivedStateFromProps)||"function"==typeof o.getSnapshotBeforeUpdate)||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(s!==h||f!==u)&&_l(e,o,i,u),bo=!1,f=e.memoizedState,o.state=f,Oo(e,i,o,r),Ao();var d=e.memoizedState;s!==h||f!==d||bo||null!==t&&null!==t.dependencies&&Mr(t.dependencies)?("function"==typeof l&&(Tl(e,n,l,i),d=e.memoizedState),(c=bo||Il(e,n,c,i,f,d,u)||null!==t&&null!==t.dependencies&&Mr(t.dependencies))?(a||"function"!=typeof o.UNSAFE_componentWillUpdate&&"function"!=typeof o.componentWillUpdate||("function"==typeof o.componentWillUpdate&&o.componentWillUpdate(i,d,u),"function"==typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(i,d,u)),"function"==typeof o.componentDidUpdate&&(e.flags|=4),"function"==typeof o.getSnapshotBeforeUpdate&&(e.flags|=1024)):("function"!=typeof o.componentDidUpdate||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=d),o.props=i,o.state=d,o.context=u,i=c):("function"!=typeof o.componentDidUpdate||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),i=!1)}return o=i,zl(t,e),i=!!(128&e.flags),o||i?(o=e.stateNode,n=i&&"function"!=typeof n.getDerivedStateFromError?null:o.render(),e.flags|=1,null!==t&&i?(e.child=yo(e,t.child,null,r),e.child=yo(e,null,n,r)):Fl(t,e,n,r),e.memoizedState=o.state,t=e.child):t=uu(t,e,r),t}function Xl(t,e,n,i){return Tr(),e.flags|=256,Fl(t,e,n,i),e.child}var Ql={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Zl(t){return{baseLanes:t,cachePool:to()}}function tu(t,e,n){return t=null!==t?t.childLanes&~n:0,e&&(t|=Ra),t}function eu(t,e,n){var r,o=e.pendingProps,s=!1,l=!!(128&e.flags);if((r=l)||(r=(null===t||null!==t.memoizedState)&&!!(2&Ho.current)),r&&(s=!0,e.flags&=-129),r=!!(32&e.flags),e.flags&=-33,null===t){if(mr){if(s?$o(e):Vo(),(t=pr)?null!==(t=null!==(t=Mh(t,wr))&&"&"!==t.data?t:null)&&(e.memoizedState={dehydrated:t,treeContext:null!==or?{id:sr,overflow:lr}:null,retryLane:536870912,hydrationErrors:null},(n=Wi(t)).return=e,e.child=n,dr=e,pr=null):t=null,null===t)throw gr(e);return Lh(t)?e.lanes=32:e.lanes=536870912,null}var u=o.children;return o=o.fallback,s?(Vo(),u=iu({mode:"hidden",children:u},s=e.mode),o=zi(o,s,n,null),u.return=e,o.return=e,u.sibling=o,e.child=u,(o=e.child).memoizedState=Zl(n),o.childLanes=tu(t,r,n),e.memoizedState=Ql,ql(null,o)):($o(e),nu(e,u))}var a=t.memoizedState;if(null!==a&&null!==(u=a.dehydrated)){if(l)256&e.flags?($o(e),e.flags&=-257,e=ru(t,e,n)):null!==e.memoizedState?(Vo(),e.child=t.child,e.flags|=128,e=null):(Vo(),u=o.fallback,s=e.mode,o=iu({mode:"visible",children:o.children},s),(u=zi(u,s,n,null)).flags|=2,o.return=e,u.return=e,o.sibling=u,e.child=o,yo(e,t.child,null,n),(o=e.child).memoizedState=Zl(n),o.childLanes=tu(t,r,n),e.memoizedState=Ql,e=ql(null,o));else if($o(e),Lh(u)){if(r=u.nextSibling&&u.nextSibling.dataset)var c=r.dgst;r=c,(o=Error(i(419))).stack="",o.digest=r,Ir({value:o,source:null,stack:null}),e=ru(t,e,n)}else if(Ul||xr(t,e,n,!1),r=0!==(n&t.childLanes),Ul||r){if(null!==(r=ya)&&(0!==(o=$t(r,n))&&o!==a.retryLane))throw a.retryLane=o,Ui(t,o),Qa(r,t,o),Ll;Dh(u)||cc(),e=ru(t,e,n)}else Dh(u)?(e.flags|=192,e.child=t.child,e=null):(t=a.treeContext,pr=Uh(u.nextSibling),dr=e,mr=!0,vr=null,wr=!1,null!==t&&fr(e,t),(e=nu(e,o.children)).flags|=4096);return e}return s?(Vo(),u=o.fallback,s=e.mode,c=(a=t.child).sibling,(o=Hi(a,{mode:"hidden",children:o.children})).subtreeFlags=65011712&a.subtreeFlags,null!==c?u=Hi(c,u):(u=zi(u,s,n,null)).flags|=2,u.return=e,o.return=e,o.sibling=u,e.child=o,ql(null,o),o=e.child,null===(u=t.child.memoizedState)?u=Zl(n):(null!==(s=u.cachePool)?(a=Vr._currentValue,s=s.parent!==a?{parent:a,pool:a}:s):s=to(),u={baseLanes:u.baseLanes|n,cachePool:s}),o.memoizedState=u,o.childLanes=tu(t,r,n),e.memoizedState=Ql,ql(t.child,o)):($o(e),t=(n=t.child).sibling,(n=Hi(n,{mode:"visible",children:o.children})).return=e,n.sibling=null,null!==t&&(null===(r=e.deletions)?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n)}function nu(t,e){return(e=iu({mode:"visible",children:e},t.mode)).return=t,t.child=e}function iu(t,e){return(t=Vi(22,t,null,e)).lanes=0,t}function ru(t,e,n){return yo(e,t.child,null,n),(t=nu(e,e.pendingProps.children)).flags|=2,e.memoizedState=null,t}function ou(t,e,n){t.lanes|=e;var i=t.alternate;null!==i&&(i.lanes|=e),Rr(t.return,e,n)}function su(t,e,n,i,r,o){var s=t.memoizedState;null===s?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r,treeForkCount:o}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r,s.treeForkCount=o)}function lu(t,e,n){var i=e.pendingProps,r=i.revealOrder,o=i.tail;i=i.children;var s=Ho.current,l=!!(2&s);if(l?(s=1&s|2,e.flags|=128):s&=1,B(Ho,s),Fl(t,e,i,n),i=mr?nr:0,!l&&null!==t&&128&t.flags)t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&ou(t,n,e);else if(19===t.tag)ou(t,n,e);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(r){case"forwards":for(n=e.child,r=null;null!==n;)null!==(t=n.alternate)&&null===Bo(t)&&(r=n),n=n.sibling;null===(n=r)?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),su(e,!1,r,n,o,i);break;case"backwards":case"unstable_legacy-backwards":for(n=null,r=e.child,e.child=null;null!==r;){if(null!==(t=r.alternate)&&null===Bo(t)){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}su(e,!0,n,null,o,i);break;case"together":su(e,!1,null,null,void 0,i);break;default:e.memoizedState=null}return e.child}function uu(t,e,n){if(null!==t&&(e.dependencies=t.dependencies),Aa|=e.lanes,0===(n&e.childLanes)){if(null===t)return null;if(xr(t,e,n,!1),0===(n&e.childLanes))return null}if(null!==t&&e.child!==t.child)throw Error(i(153));if(null!==e.child){for(n=Hi(t=e.child,t.pendingProps),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=Hi(t,t.pendingProps)).return=e;n.sibling=null}return e.child}function au(t,e){return 0!==(t.lanes&e)||!(null===(t=t.dependencies)||!Mr(t))}function cu(t,e,n){if(null!==t)if(t.memoizedProps!==e.pendingProps)Ul=!0;else{if(!(au(t,n)||128&e.flags))return Ul=!1,function(t,e,n){switch(e.tag){case 3:Q(e,e.stateNode.containerInfo),Or(0,Vr,t.memoizedState.cache),Tr();break;case 27:case 5:tt(e);break;case 4:Q(e,e.stateNode.containerInfo);break;case 10:Or(0,e.type,e.memoizedProps.value);break;case 31:if(null!==e.memoizedState)return e.flags|=128,jo(e),null;break;case 13:var i=e.memoizedState;if(null!==i)return null!==i.dehydrated?($o(e),e.flags|=128,null):0!==(n&e.child.childLanes)?eu(t,e,n):($o(e),null!==(t=uu(t,e,n))?t.sibling:null);$o(e);break;case 19:var r=!!(128&t.flags);if((i=0!==(n&e.childLanes))||(xr(t,e,n,!1),i=0!==(n&e.childLanes)),r){if(i)return lu(t,e,n);e.flags|=128}if(null!==(r=e.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),B(Ho,Ho.current),i)break;return null;case 22:return e.lanes=0,Vl(t,e,n,e.pendingProps);case 24:Or(0,Vr,t.memoizedState.cache)}return uu(t,e,n)}(t,e,n);Ul=!!(131072&t.flags)}else Ul=!1,mr&&1048576&e.flags&&ar(e,nr,e.index);switch(e.lanes=0,e.tag){case 16:t:{var r=e.pendingProps;if(t=lo(e.elementType),e.type=t,"function"!=typeof t){if(null!=t){var o=t.$$typeof;if(o===k){e.tag=11,e=$l(null,e,t,r,n);break t}if(o===O){e.tag=14,e=jl(null,e,t,r,n);break t}}throw e=L(t)||t,Error(i(306,e,""))}qi(t)?(r=Cl(t,r),e.tag=1,e=Yl(null,e,t,r,n)):(e.tag=0,e=Kl(null,e,t,r,n))}return e;case 0:return Kl(t,e,e.type,e.pendingProps,n);case 1:return Yl(t,e,r=e.type,o=Cl(r,e.pendingProps),n);case 3:t:{if(Q(e,e.stateNode.containerInfo),null===t)throw Error(i(387));r=e.pendingProps;var s=e.memoizedState;o=s.element,So(t,e),Oo(e,r,null,n);var l=e.memoizedState;if(r=l.cache,Or(0,Vr,r),r!==s.cache&&Pr(e,[Vr],n,!0),Ao(),r=l.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:l.cache},e.updateQueue.baseState=s,e.memoizedState=s,256&e.flags){e=Xl(t,e,r,n);break t}if(r!==o){Ir(o=Qi(Error(i(424)),e)),e=Xl(t,e,r,n);break t}if(9===(t=e.stateNode.containerInfo).nodeType)t=t.body;else t="HTML"===t.nodeName?t.ownerDocument.body:t;for(pr=Uh(t.firstChild),dr=e,mr=!0,vr=null,wr=!0,n=go(e,null,r,n),e.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(Tr(),r===o){e=uu(t,e,n);break t}Fl(t,e,r,n)}e=e.child}return e;case 26:return zl(t,e),null===t?(n=Wh(e.type,null,e.pendingProps,null))?e.memoizedState=n:mr||(n=e.type,t=e.pendingProps,(r=bh(Y.current).createElement(n))[Bt]=e,r[Jt]=t,vh(r,n,t),re(r),e.stateNode=r):e.memoizedState=Wh(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return tt(e),null===t&&mr&&(r=e.stateNode=Gh(e.type,e.pendingProps,Y.current),dr=e,wr=!0,o=pr,Nh(e.type)?(Fh=o,pr=Uh(r.firstChild)):pr=o),Fl(t,e,e.pendingProps.children,n),zl(t,e),null===t&&(e.flags|=4194304),e.child;case 5:return null===t&&mr&&((o=r=pr)&&(null!==(r=function(t,e,n,i){for(;1===t.nodeType;){var r=n;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!i&&("INPUT"!==t.nodeName||"hidden"!==t.type))break}else if(i){if(!t[Qt])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if("stylesheet"===(o=t.getAttribute("rel"))&&t.hasAttribute("data-precedence"))break;if(o!==r.rel||t.getAttribute("href")!==(null==r.href||""===r.href?null:r.href)||t.getAttribute("crossorigin")!==(null==r.crossOrigin?null:r.crossOrigin)||t.getAttribute("title")!==(null==r.title?null:r.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(((o=t.getAttribute("src"))!==(null==r.src?null:r.src)||t.getAttribute("type")!==(null==r.type?null:r.type)||t.getAttribute("crossorigin")!==(null==r.crossOrigin?null:r.crossOrigin))&&o&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else{if("input"!==e||"hidden"!==t.type)return t;var o=null==r.name?null:""+r.name;if("hidden"===r.type&&t.getAttribute("name")===o)return t}if(null===(t=Uh(t.nextSibling)))break}return null}(r,e.type,e.pendingProps,wr))?(e.stateNode=r,dr=e,pr=Uh(r.firstChild),wr=!1,o=!0):o=!1),o||gr(e)),tt(e),o=e.type,s=e.pendingProps,l=null!==t?t.memoizedProps:null,r=s.children,Th(o,s)?r=null:null!==l&&Th(o,l)&&(e.flags|=32),null!==e.memoizedState&&(o=os(t,e,us,null,null,n),mf._currentValue=o),zl(t,e),Fl(t,e,r,n),e.child;case 6:return null===t&&mr&&((t=n=pr)&&(null!==(n=function(t,e,n){if(""===e)return null;for(;3!==t.nodeType;){if((1!==t.nodeType||"INPUT"!==t.nodeName||"hidden"!==t.type)&&!n)return null;if(null===(t=Uh(t.nextSibling)))return null}return t}(n,e.pendingProps,wr))?(e.stateNode=n,dr=e,pr=null,t=!0):t=!1),t||gr(e)),null;case 13:return eu(t,e,n);case 4:return Q(e,e.stateNode.containerInfo),r=e.pendingProps,null===t?e.child=yo(e,null,r,n):Fl(t,e,r,n),e.child;case 11:return $l(t,e,e.type,e.pendingProps,n);case 7:return Fl(t,e,e.pendingProps,n),e.child;case 8:case 12:return Fl(t,e,e.pendingProps.children,n),e.child;case 10:return r=e.pendingProps,Or(0,e.type,r.value),Fl(t,e,r.children,n),e.child;case 9:return o=e.type._context,r=e.pendingProps.children,Dr(e),r=r(o=Lr(o)),e.flags|=1,Fl(t,e,r,n),e.child;case 14:return jl(t,e,e.type,e.pendingProps,n);case 15:return Gl(t,e,e.type,e.pendingProps,n);case 19:return lu(t,e,n);case 31:return function(t,e,n){var r=e.pendingProps,o=!!(128&e.flags);if(e.flags&=-129,null===t){if(mr){if("hidden"===r.mode)return t=Bl(e,r),e.lanes=536870912,ql(null,t);if(jo(e),(t=pr)?null!==(t=null!==(t=Mh(t,wr))&&"&"===t.data?t:null)&&(e.memoizedState={dehydrated:t,treeContext:null!==or?{id:sr,overflow:lr}:null,retryLane:536870912,hydrationErrors:null},(n=Wi(t)).return=e,e.child=n,dr=e,pr=null):t=null,null===t)throw gr(e);return e.lanes=536870912,null}return Bl(e,r)}var s=t.memoizedState;if(null!==s){var l=s.dehydrated;if(jo(e),o)if(256&e.flags)e.flags&=-257,e=Jl(t,e,n);else{if(null===e.memoizedState)throw Error(i(558));e.child=t.child,e.flags|=128,e=null}else if(Ul||xr(t,e,n,!1),o=0!==(n&t.childLanes),Ul||o){if(null!==(r=ya)&&0!==(l=$t(r,n))&&l!==s.retryLane)throw s.retryLane=l,Ui(t,l),Qa(r,t,l),Ll;cc(),e=Jl(t,e,n)}else t=s.treeContext,pr=Uh(l.nextSibling),dr=e,mr=!0,vr=null,wr=!1,null!==t&&fr(e,t),(e=Bl(e,r)).flags|=4096;return e}return(t=Hi(t.child,{mode:r.mode,children:r.children})).ref=e.ref,e.child=t,t.return=e,t}(t,e,n);case 22:return Vl(t,e,n,e.pendingProps);case 24:return Dr(e),r=Lr(Vr),null===t?(null===(o=Qr())&&(o=ya,s=qr(),o.pooledCache=s,s.refCount++,null!==s&&(o.pooledCacheLanes|=n),o=s),e.memoizedState={parent:r,cache:o},Eo(e),Or(0,Vr,o)):(0!==(t.lanes&n)&&(So(t,e),Oo(e,null,null,n),Ao()),o=t.memoizedState,s=e.memoizedState,o.parent!==r?(o={parent:r,cache:r},e.memoizedState=o,0===e.lanes&&(e.memoizedState=e.updateQueue.baseState=o),Or(0,Vr,r)):(r=s.cache,Or(0,Vr,r),r!==o.cache&&Pr(e,[Vr],n,!0))),Fl(t,e,e.pendingProps.children,n),e.child;case 29:throw e.pendingProps}throw Error(i(156,e.tag))}function hu(t){t.flags|=4}function fu(t,e,n,i,r){if((e=!!(32&t.mode))&&(e=!1),e){if(t.flags|=16777216,(335544128&r)===r)if(t.stateNode.complete)t.flags|=8192;else{if(!lc())throw uo=ro,no;t.flags|=8192}}else t.flags&=-16777217}function du(t,e){if("stylesheet"!==e.type||4&e.state.loading)t.flags&=-16777217;else if(t.flags|=16777216,!af(e)){if(!lc())throw uo=ro,no;t.flags|=8192}}function pu(t,e){null!==e&&(t.flags|=4),16384&t.flags&&(e=22!==t.tag?Mt():536870912,t.lanes|=e,Pa|=e)}function mu(t,e){if(!mr)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;null!==e;)null!==e.alternate&&(n=e),e=e.sibling;null===n?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?e||null===t.tail?t.tail=null:t.tail.sibling=null:i.sibling=null}}function vu(t){var e=null!==t.alternate&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;null!==r;)n|=r.lanes|r.childLanes,i|=65011712&r.subtreeFlags,i|=65011712&r.flags,r.return=t,r=r.sibling;else for(r=t.child;null!==r;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function wu(t,e,n){var r=e.pendingProps;switch(hr(e),e.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return vu(e),null;case 3:return n=e.stateNode,r=null,null!==t&&(r=t.memoizedState.cache),e.memoizedState.cache!==r&&(e.flags|=2048),Nr(Vr),Z(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==t&&null!==t.child||(Sr(e)?hu(e):null===t||t.memoizedState.isDehydrated&&!(256&e.flags)||(e.flags|=1024,kr())),vu(e),null;case 26:var o=e.type,s=e.memoizedState;return null===t?(hu(e),null!==s?(vu(e),du(e,s)):(vu(e),fu(e,o,0,0,n))):s?s!==t.memoizedState?(hu(e),vu(e),du(e,s)):(vu(e),e.flags&=-16777217):((t=t.memoizedProps)!==r&&hu(e),vu(e),fu(e,o,0,0,n)),null;case 27:if(et(e),n=Y.current,o=e.type,null!==t&&null!=e.stateNode)t.memoizedProps!==r&&hu(e);else{if(!r){if(null===e.stateNode)throw Error(i(166));return vu(e),null}t=K.current,Sr(e)?br(e):(t=Gh(o,r,n),e.stateNode=t,hu(e))}return vu(e),null;case 5:if(et(e),o=e.type,null!==t&&null!=e.stateNode)t.memoizedProps!==r&&hu(e);else{if(!r){if(null===e.stateNode)throw Error(i(166));return vu(e),null}if(s=K.current,Sr(e))br(e);else{var l=bh(Y.current);switch(s){case 1:s=l.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:s=l.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":s=l.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":s=l.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":(s=l.createElement("div")).innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s="string"==typeof r.is?l.createElement("select",{is:r.is}):l.createElement("select"),r.multiple?s.multiple=!0:r.size&&(s.size=r.size);break;default:s="string"==typeof r.is?l.createElement(o,{is:r.is}):l.createElement(o)}}s[Bt]=e,s[Jt]=r;t:for(l=e.child;null!==l;){if(5===l.tag||6===l.tag)s.appendChild(l.stateNode);else if(4!==l.tag&&27!==l.tag&&null!==l.child){l.child.return=l,l=l.child;continue}if(l===e)break t;for(;null===l.sibling;){if(null===l.return||l.return===e)break t;l=l.return}l.sibling.return=l.return,l=l.sibling}e.stateNode=s;t:switch(vh(s,o,r),o){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break t;case"img":r=!0;break t;default:r=!1}r&&hu(e)}}return vu(e),fu(e,e.type,null===t||t.memoizedProps,e.pendingProps,n),null;case 6:if(t&&null!=e.stateNode)t.memoizedProps!==r&&hu(e);else{if("string"!=typeof r&&null===e.stateNode)throw Error(i(166));if(t=Y.current,Sr(e)){if(t=e.stateNode,n=e.memoizedProps,r=null,null!==(o=dr))switch(o.tag){case 27:case 5:r=o.memoizedProps}t[Bt]=e,(t=!!(t.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||dh(t.nodeValue,n)))||gr(e,!0)}else(t=bh(t).createTextNode(r))[Bt]=e,e.stateNode=t}return vu(e),null;case 31:if(n=e.memoizedState,null===t||null!==t.memoizedState){if(r=Sr(e),null!==n){if(null===t){if(!r)throw Error(i(318));if(!(t=null!==(t=e.memoizedState)?t.dehydrated:null))throw Error(i(557));t[Bt]=e}else Tr(),!(128&e.flags)&&(e.memoizedState=null),e.flags|=4;vu(e),t=!1}else n=kr(),null!==t&&null!==t.memoizedState&&(t.memoizedState.hydrationErrors=n),t=!0;if(!t)return 256&e.flags?(qo(e),e):(qo(e),null);if(128&e.flags)throw Error(i(558))}return vu(e),null;case 13:if(r=e.memoizedState,null===t||null!==t.memoizedState&&null!==t.memoizedState.dehydrated){if(o=Sr(e),null!==r&&null!==r.dehydrated){if(null===t){if(!o)throw Error(i(318));if(!(o=null!==(o=e.memoizedState)?o.dehydrated:null))throw Error(i(317));o[Bt]=e}else Tr(),!(128&e.flags)&&(e.memoizedState=null),e.flags|=4;vu(e),o=!1}else o=kr(),null!==t&&null!==t.memoizedState&&(t.memoizedState.hydrationErrors=o),o=!0;if(!o)return 256&e.flags?(qo(e),e):(qo(e),null)}return qo(e),128&e.flags?(e.lanes=n,e):(n=null!==r,t=null!==t&&null!==t.memoizedState,n&&(o=null,null!==(r=e.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(o=r.alternate.memoizedState.cachePool.pool),s=null,null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(s=r.memoizedState.cachePool.pool),s!==o&&(r.flags|=2048)),n!==t&&n&&(e.child.flags|=8192),pu(e,e.updateQueue),vu(e),null);case 4:return Z(),null===t&&ih(e.stateNode.containerInfo),vu(e),null;case 10:return Nr(e.type),vu(e),null;case 19:if(H(Ho),null===(r=e.memoizedState))return vu(e),null;if(o=!!(128&e.flags),null===(s=r.rendering))if(o)mu(r,!1);else{if(0!==Ca||null!==t&&128&t.flags)for(t=e.child;null!==t;){if(null!==(s=Bo(t))){for(e.flags|=128,mu(r,!1),t=s.updateQueue,e.updateQueue=t,pu(e,t),e.subtreeFlags=0,t=n,n=e.child;null!==n;)Bi(n,t),n=n.sibling;return B(Ho,1&Ho.current|2),mr&&ur(e,r.treeForkCount),e.child}t=t.sibling}null!==r.tail&&ft()>Fa&&(e.flags|=128,o=!0,mu(r,!1),e.lanes=4194304)}else{if(!o)if(null!==(t=Bo(s))){if(e.flags|=128,o=!0,t=t.updateQueue,e.updateQueue=t,pu(e,t),mu(r,!0),null===r.tail&&"hidden"===r.tailMode&&!s.alternate&&!mr)return vu(e),null}else 2*ft()-r.renderingStartTime>Fa&&536870912!==n&&(e.flags|=128,o=!0,mu(r,!1),e.lanes=4194304);r.isBackwards?(s.sibling=e.child,e.child=s):(null!==(t=r.last)?t.sibling=s:e.child=s,r.last=s)}return null!==r.tail?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=ft(),t.sibling=null,n=Ho.current,B(Ho,o?1&n|2:1&n),mr&&ur(e,r.treeForkCount),t):(vu(e),null);case 22:case 23:return qo(e),Lo(),r=null!==e.memoizedState,null!==t?null!==t.memoizedState!==r&&(e.flags|=8192):r&&(e.flags|=8192),r?!!(536870912&n)&&!(128&e.flags)&&(vu(e),6&e.subtreeFlags&&(e.flags|=8192)):vu(e),null!==(n=e.updateQueue)&&pu(e,n.retryQueue),n=null,null!==t&&null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(n=t.memoizedState.cachePool.pool),r=null,null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(r=e.memoizedState.cachePool.pool),r!==n&&(e.flags|=2048),null!==t&&H(Xr),null;case 24:return n=null,null!==t&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),Nr(Vr),vu(e),null;case 25:case 30:return null}throw Error(i(156,e.tag))}function yu(t,e){switch(hr(e),e.tag){case 1:return 65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 3:return Nr(Vr),Z(),65536&(t=e.flags)&&!(128&t)?(e.flags=-65537&t|128,e):null;case 26:case 27:case 5:return et(e),null;case 31:if(null!==e.memoizedState){if(qo(e),null===e.alternate)throw Error(i(340));Tr()}return 65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 13:if(qo(e),null!==(t=e.memoizedState)&&null!==t.dehydrated){if(null===e.alternate)throw Error(i(340));Tr()}return 65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 19:return H(Ho),null;case 4:return Z(),null;case 10:return Nr(e.type),null;case 22:case 23:return qo(e),Lo(),null!==t&&H(Xr),65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 24:return Nr(Vr),null;default:return null}}function gu(t,e){switch(hr(e),e.tag){case 3:Nr(Vr),Z();break;case 26:case 27:case 5:et(e);break;case 4:Z();break;case 31:null!==e.memoizedState&&qo(e);break;case 13:qo(e);break;case 19:H(Ho);break;case 10:Nr(e.type);break;case 22:case 23:qo(e),Lo(),null!==t&&H(Xr);break;case 24:Nr(Vr)}}function bu(t,e){try{var n=e.updateQueue,i=null!==n?n.lastEffect:null;if(null!==i){var r=i.next;n=r;do{if((n.tag&t)===t){i=void 0;var o=n.create,s=n.inst;i=o(),s.destroy=i}n=n.next}while(n!==r)}}catch(l){Cc(e,e.return,l)}}function Eu(t,e,n){try{var i=e.updateQueue,r=null!==i?i.lastEffect:null;if(null!==r){var o=r.next;i=o;do{if((i.tag&t)===t){var s=i.inst,l=s.destroy;if(void 0!==l){s.destroy=void 0,r=e;var u=n,a=l;try{a()}catch(c){Cc(r,u,c)}}}i=i.next}while(i!==o)}}catch(c){Cc(e,e.return,c)}}function Su(t){var e=t.updateQueue;if(null!==e){var n=t.stateNode;try{Ro(e,n)}catch(i){Cc(t,t.return,i)}}}function Tu(t,e,n){n.props=Cl(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(i){Cc(t,e,i)}}function ku(t,e){try{var n=t.ref;if(null!==n){switch(t.tag){case 26:case 27:case 5:var i=t.stateNode;break;default:i=t.stateNode}"function"==typeof n?t.refCleanup=n(i):n.current=i}}catch(r){Cc(t,e,r)}}function Iu(t,e){var n=t.ref,i=t.refCleanup;if(null!==n)if("function"==typeof i)try{i()}catch(r){Cc(t,e,r)}finally{t.refCleanup=null,null!=(t=t.alternate)&&(t.refCleanup=null)}else if("function"==typeof n)try{n(null)}catch(o){Cc(t,e,o)}else n.current=null}function _u(t){var e=t.type,n=t.memoizedProps,i=t.stateNode;try{t:switch(e){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break t;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(r){Cc(t,t.return,r)}}function Cu(t,e,n){try{var r=t.stateNode;!function(t,e,n,r){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var o=null,s=null,l=null,u=null,a=null,c=null,h=null;for(p in n){var f=n[p];if(n.hasOwnProperty(p)&&null!=f)switch(p){case"checked":case"value":break;case"defaultValue":a=f;default:r.hasOwnProperty(p)||ph(t,e,p,null,r,f)}}for(var d in r){var p=r[d];if(f=n[d],r.hasOwnProperty(d)&&(null!=p||null!=f))switch(d){case"type":s=p;break;case"name":o=p;break;case"checked":c=p;break;case"defaultChecked":h=p;break;case"value":l=p;break;case"defaultValue":u=p;break;case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(i(137,e));break;default:p!==f&&ph(t,e,d,p,r,f)}}return void Se(t,l,u,a,c,h,s,o);case"select":for(s in p=l=u=d=null,n)if(a=n[s],n.hasOwnProperty(s)&&null!=a)switch(s){case"value":break;case"multiple":p=a;default:r.hasOwnProperty(s)||ph(t,e,s,null,r,a)}for(o in r)if(s=r[o],a=n[o],r.hasOwnProperty(o)&&(null!=s||null!=a))switch(o){case"value":d=s;break;case"defaultValue":u=s;break;case"multiple":l=s;default:s!==a&&ph(t,e,o,s,r,a)}return e=u,n=l,r=p,void(null!=d?Ie(t,!!n,d,!1):!!r!=!!n&&(null!=e?Ie(t,!!n,e,!0):Ie(t,!!n,n?[]:"",!1)));case"textarea":for(u in p=d=null,n)if(o=n[u],n.hasOwnProperty(u)&&null!=o&&!r.hasOwnProperty(u))switch(u){case"value":case"children":break;default:ph(t,e,u,null,r,o)}for(l in r)if(o=r[l],s=n[l],r.hasOwnProperty(l)&&(null!=o||null!=s))switch(l){case"value":d=o;break;case"defaultValue":p=o;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=o)throw Error(i(91));break;default:o!==s&&ph(t,e,l,o,r,s)}return void _e(t,d,p);case"option":for(var m in n)if(d=n[m],n.hasOwnProperty(m)&&null!=d&&!r.hasOwnProperty(m))if("selected"===m)t.selected=!1;else ph(t,e,m,null,r,d);for(a in r)if(d=r[a],p=n[a],r.hasOwnProperty(a)&&d!==p&&(null!=d||null!=p))if("selected"===a)t.selected=d&&"function"!=typeof d&&"symbol"!=typeof d;else ph(t,e,a,d,r,p);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var v in n)d=n[v],n.hasOwnProperty(v)&&null!=d&&!r.hasOwnProperty(v)&&ph(t,e,v,null,r,d);for(c in r)if(d=r[c],p=n[c],r.hasOwnProperty(c)&&d!==p&&(null!=d||null!=p))switch(c){case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(i(137,e));break;default:ph(t,e,c,d,r,p)}return;default:if(Pe(e)){for(var w in n)d=n[w],n.hasOwnProperty(w)&&void 0!==d&&!r.hasOwnProperty(w)&&mh(t,e,w,void 0,r,d);for(h in r)d=r[h],p=n[h],!r.hasOwnProperty(h)||d===p||void 0===d&&void 0===p||mh(t,e,h,d,r,p);return}}for(var y in n)d=n[y],n.hasOwnProperty(y)&&null!=d&&!r.hasOwnProperty(y)&&ph(t,e,y,null,r,d);for(f in r)d=r[f],p=n[f],!r.hasOwnProperty(f)||d===p||null==d&&null==p||ph(t,e,f,d,r,p)}(r,t.type,n,e),r[Jt]=e}catch(o){Cc(t,t.return,o)}}function Au(t){return 5===t.tag||3===t.tag||26===t.tag||27===t.tag&&Nh(t.type)||4===t.tag}function Ou(t){t:for(;;){for(;null===t.sibling;){if(null===t.return||Au(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;5!==t.tag&&6!==t.tag&&18!==t.tag;){if(27===t.tag&&Nh(t.type))continue t;if(2&t.flags)continue t;if(null===t.child||4===t.tag)continue t;t.child.return=t,t=t.child}if(!(2&t.flags))return t.stateNode}}function Nu(t,e,n){var i=t.tag;if(5===i||6===i)t=t.stateNode,e?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(t,e):((e=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(t),null!=(n=n._reactRootContainer)||null!==e.onclick||(e.onclick=Le));else if(4!==i&&(27===i&&Nh(t.type)&&(n=t.stateNode,e=null),null!==(t=t.child)))for(Nu(t,e,n),t=t.sibling;null!==t;)Nu(t,e,n),t=t.sibling}function Ru(t,e,n){var i=t.tag;if(5===i||6===i)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(4!==i&&(27===i&&Nh(t.type)&&(n=t.stateNode),null!==(t=t.child)))for(Ru(t,e,n),t=t.sibling;null!==t;)Ru(t,e,n),t=t.sibling}function Pu(t){var e=t.stateNode,n=t.memoizedProps;try{for(var i=t.type,r=e.attributes;r.length;)e.removeAttributeNode(r[0]);vh(e,i,n),e[Bt]=t,e[Jt]=n}catch(o){Cc(t,t.return,o)}}var xu=!1,Mu=!1,Du=!1,Lu="function"==typeof WeakSet?WeakSet:Set,Uu=null;function Fu(t,e,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:Qu(t,n),4&i&&bu(5,n);break;case 1:if(Qu(t,n),4&i)if(t=n.stateNode,null===e)try{t.componentDidMount()}catch(s){Cc(n,n.return,s)}else{var r=Cl(n.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(r,e,t.vt)}catch(l){Cc(n,n.return,l)}}64&i&&Su(n),512&i&&ku(n,n.return);break;case 3:if(Qu(t,n),64&i&&null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:e=n.child.stateNode}try{Ro(t,e)}catch(s){Cc(n,n.return,s)}}break;case 27:null===e&&4&i&&Pu(n);case 26:case 5:Qu(t,n),null===e&&4&i&&_u(n),512&i&&ku(n,n.return);break;case 12:Qu(t,n);break;case 31:Qu(t,n),4&i&&Hu(t,n);break;case 13:Qu(t,n),4&i&&Bu(t,n),64&i&&(null!==(t=n.memoizedState)&&(null!==(t=t.dehydrated)&&function(t,e){var n=t.ownerDocument;if("$~"===t.data)t._reactRetry=e;else if("$?"!==t.data||"loading"!==n.readyState)e();else{var i=function(){e(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),t._reactRetry=i}}(t,n=Rc.bind(null,n))));break;case 22:if(!(i=null!==n.memoizedState||xu)){e=null!==e&&null!==e.memoizedState||Mu,r=xu;var o=Mu;xu=i,(Mu=e)&&!o?ta(t,n,!!(8772&n.subtreeFlags)):Qu(t,n),xu=r,Mu=o}break;case 30:break;default:Qu(t,n)}}function $u(t){var e=t.alternate;null!==e&&(t.alternate=null,$u(e)),t.child=null,t.deletions=null,t.sibling=null,5===t.tag&&(null!==(e=t.stateNode)&&Zt(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var ju=null,Gu=!1;function Vu(t,e,n){for(n=n.child;null!==n;)qu(t,e,n),n=n.sibling}function qu(t,e,n){if(St&&"function"==typeof St.onCommitFiberUnmount)try{St.onCommitFiberUnmount(Et,n)}catch(o){}switch(n.tag){case 26:Mu||Iu(n,e),Vu(t,e,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:Mu||Iu(n,e);var i=ju,r=Gu;Nh(n.type)&&(ju=n.stateNode,Gu=!1),Vu(t,e,n),Vh(n.stateNode),ju=i,Gu=r;break;case 5:Mu||Iu(n,e);case 6:if(i=ju,r=Gu,ju=null,Vu(t,e,n),Gu=r,null!==(ju=i))if(Gu)try{(9===ju.nodeType?ju.body:"HTML"===ju.nodeName?ju.ownerDocument.body:ju).removeChild(n.stateNode)}catch(s){Cc(n,e,s)}else try{ju.removeChild(n.stateNode)}catch(s){Cc(n,e,s)}break;case 18:null!==ju&&(Gu?(Rh(9===(t=ju).nodeType?t.body:"HTML"===t.nodeName?t.ownerDocument.body:t,n.stateNode),Wf(t)):Rh(ju,n.stateNode));break;case 4:i=ju,r=Gu,ju=n.stateNode.containerInfo,Gu=!0,Vu(t,e,n),ju=i,Gu=r;break;case 0:case 11:case 14:case 15:Eu(2,n,e),Mu||Eu(4,n,e),Vu(t,e,n);break;case 1:Mu||(Iu(n,e),"function"==typeof(i=n.stateNode).componentWillUnmount&&Tu(n,e,i)),Vu(t,e,n);break;case 21:Vu(t,e,n);break;case 22:Mu=(i=Mu)||null!==n.memoizedState,Vu(t,e,n),Mu=i;break;default:Vu(t,e,n)}}function Hu(t,e){if(null===e.memoizedState&&(null!==(t=e.alternate)&&null!==(t=t.memoizedState))){t=t.dehydrated;try{Wf(t)}catch(n){Cc(e,e.return,n)}}}function Bu(t,e){if(null===e.memoizedState&&(null!==(t=e.alternate)&&(null!==(t=t.memoizedState)&&null!==(t=t.dehydrated))))try{Wf(t)}catch(n){Cc(e,e.return,n)}}function Ju(t,e){var n=function(t){switch(t.tag){case 31:case 13:case 19:var e=t.stateNode;return null===e&&(e=t.stateNode=new Lu),e;case 22:return null===(e=(t=t.stateNode)._retryCache)&&(e=t._retryCache=new Lu),e;default:throw Error(i(435,t.tag))}}(t);e.forEach(function(e){if(!n.has(e)){n.add(e);var i=Pc.bind(null,t,e);e.then(i,i)}})}function zu(t,e){var n=e.deletions;if(null!==n)for(var r=0;r<n.length;r++){var o=n[r],s=t,l=e,u=l;t:for(;null!==u;){switch(u.tag){case 27:if(Nh(u.type)){ju=u.stateNode,Gu=!1;break t}break;case 5:ju=u.stateNode,Gu=!1;break t;case 3:case 4:ju=u.stateNode.containerInfo,Gu=!0;break t}u=u.return}if(null===ju)throw Error(i(160));qu(s,l,o),ju=null,Gu=!1,null!==(s=o.alternate)&&(s.return=null),o.return=null}if(13886&e.subtreeFlags)for(e=e.child;null!==e;)Wu(e,t),e=e.sibling}var Ku=null;function Wu(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:zu(e,t),Yu(t),4&r&&(Eu(3,t,t.return),bu(3,t),Eu(5,t,t.return));break;case 1:zu(e,t),Yu(t),512&r&&(Mu||null===n||Iu(n,n.return)),64&r&&xu&&(null!==(t=t.updateQueue)&&(null!==(r=t.callbacks)&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=null===n?r:n.concat(r))));break;case 26:var o=Ku;if(zu(e,t),Yu(t),512&r&&(Mu||null===n||Iu(n,n.return)),4&r){var s=null!==n?n.memoizedState:null;if(r=t.memoizedState,null===n)if(null===r)if(null===t.stateNode){t:{r=t.type,n=t.memoizedProps,o=o.ownerDocument||o;e:switch(r){case"title":(!(s=o.getElementsByTagName("title")[0])||s[Qt]||s[Bt]||"http://www.w3.org/2000/svg"===s.namespaceURI||s.hasAttribute("itemprop"))&&(s=o.createElement(r),o.head.insertBefore(s,o.querySelector("head > title"))),vh(s,r,n),s[Bt]=t,re(s),r=s;break t;case"link":var l=lf("link","href",o).get(r+(n.href||""));if(l)for(var u=0;u<l.length;u++)if((s=l[u]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&s.getAttribute("rel")===(null==n.rel?null:n.rel)&&s.getAttribute("title")===(null==n.title?null:n.title)&&s.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){l.splice(u,1);break e}vh(s=o.createElement(r),r,n),o.head.appendChild(s);break;case"meta":if(l=lf("meta","content",o).get(r+(n.content||"")))for(u=0;u<l.length;u++)if((s=l[u]).getAttribute("content")===(null==n.content?null:""+n.content)&&s.getAttribute("name")===(null==n.name?null:n.name)&&s.getAttribute("property")===(null==n.property?null:n.property)&&s.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&s.getAttribute("charset")===(null==n.charSet?null:n.charSet)){l.splice(u,1);break e}vh(s=o.createElement(r),r,n),o.head.appendChild(s);break;default:throw Error(i(468,r))}s[Bt]=t,re(s),r=s}t.stateNode=r}else uf(o,t.type,t.stateNode);else t.stateNode=ef(o,r,t.memoizedProps);else s!==r?(null===s?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):s.count--,null===r?uf(o,t.type,t.stateNode):ef(o,r,t.memoizedProps)):null===r&&null!==t.stateNode&&Cu(t,t.memoizedProps,n.memoizedProps)}break;case 27:zu(e,t),Yu(t),512&r&&(Mu||null===n||Iu(n,n.return)),null!==n&&4&r&&Cu(t,t.memoizedProps,n.memoizedProps);break;case 5:if(zu(e,t),Yu(t),512&r&&(Mu||null===n||Iu(n,n.return)),32&t.flags){o=t.stateNode;try{Ae(o,"")}catch(m){Cc(t,t.return,m)}}4&r&&null!=t.stateNode&&Cu(t,o=t.memoizedProps,null!==n?n.memoizedProps:o),1024&r&&(Du=!0);break;case 6:if(zu(e,t),Yu(t),4&r){if(null===t.stateNode)throw Error(i(162));r=t.memoizedProps,n=t.stateNode;try{n.nodeValue=r}catch(m){Cc(t,t.return,m)}}break;case 3:if(sf=null,o=Ku,Ku=Bh(e.containerInfo),zu(e,t),Ku=o,Yu(t),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Wf(e.containerInfo)}catch(m){Cc(t,t.return,m)}Du&&(Du=!1,Xu(t));break;case 4:r=Ku,Ku=Bh(t.stateNode.containerInfo),zu(e,t),Yu(t),Ku=r;break;case 12:default:zu(e,t),Yu(t);break;case 31:case 19:zu(e,t),Yu(t),4&r&&(null!==(r=t.updateQueue)&&(t.updateQueue=null,Ju(t,r)));break;case 13:zu(e,t),Yu(t),8192&t.child.flags&&null!==t.memoizedState!=(null!==n&&null!==n.memoizedState)&&(La=ft()),4&r&&(null!==(r=t.updateQueue)&&(t.updateQueue=null,Ju(t,r)));break;case 22:o=null!==t.memoizedState;var a=null!==n&&null!==n.memoizedState,c=xu,h=Mu;if(xu=c||o,Mu=h||a,zu(e,t),Mu=h,xu=c,Yu(t),8192&r)t:for(e=t.stateNode,e._visibility=o?-2&e._visibility:1|e._visibility,o&&(null===n||a||xu||Mu||Zu(t)),n=null,e=t;;){if(5===e.tag||26===e.tag){if(null===n){a=n=e;try{if(s=a.stateNode,o)"function"==typeof(l=s.style).setProperty?l.setProperty("display","none","important"):l.display="none";else{u=a.stateNode;var f=a.memoizedProps.style,d=null!=f&&f.hasOwnProperty("display")?f.display:null;u.style.display=null==d||"boolean"==typeof d?"":(""+d).trim()}}catch(m){Cc(a,a.return,m)}}}else if(6===e.tag){if(null===n){a=e;try{a.stateNode.nodeValue=o?"":a.memoizedProps}catch(m){Cc(a,a.return,m)}}}else if(18===e.tag){if(null===n){a=e;try{var p=a.stateNode;o?Ph(p,!0):Ph(a.stateNode,!1)}catch(m){Cc(a,a.return,m)}}}else if((22!==e.tag&&23!==e.tag||null===e.memoizedState||e===t)&&null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break t;for(;null===e.sibling;){if(null===e.return||e.return===t)break t;n===e&&(n=null),e=e.return}n===e&&(n=null),e.sibling.return=e.return,e=e.sibling}4&r&&(null!==(r=t.updateQueue)&&(null!==(n=r.retryQueue)&&(r.retryQueue=null,Ju(t,n))));case 30:case 21:}}function Yu(t){var e=t.flags;if(2&e){try{for(var n,r=t.return;null!==r;){if(Au(r)){n=r;break}r=r.return}if(null==n)throw Error(i(160));switch(n.tag){case 27:var o=n.stateNode;Ru(t,Ou(t),o);break;case 5:var s=n.stateNode;32&n.flags&&(Ae(s,""),n.flags&=-33),Ru(t,Ou(t),s);break;case 3:case 4:var l=n.stateNode.containerInfo;Nu(t,Ou(t),l);break;default:throw Error(i(161))}}catch(u){Cc(t,t.return,u)}t.flags&=-3}4096&e&&(t.flags&=-4097)}function Xu(t){if(1024&t.subtreeFlags)for(t=t.child;null!==t;){var e=t;Xu(e),5===e.tag&&1024&e.flags&&e.stateNode.reset(),t=t.sibling}}function Qu(t,e){if(8772&e.subtreeFlags)for(e=e.child;null!==e;)Fu(t,e.alternate,e),e=e.sibling}function Zu(t){for(t=t.child;null!==t;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:Eu(4,e,e.return),Zu(e);break;case 1:Iu(e,e.return);var n=e.stateNode;"function"==typeof n.componentWillUnmount&&Tu(e,e.return,n),Zu(e);break;case 27:Vh(e.stateNode);case 26:case 5:Iu(e,e.return),Zu(e);break;case 22:null===e.memoizedState&&Zu(e);break;default:Zu(e)}t=t.sibling}}function ta(t,e,n){for(n=n&&!!(8772&e.subtreeFlags),e=e.child;null!==e;){var i=e.alternate,r=t,o=e,s=o.flags;switch(o.tag){case 0:case 11:case 15:ta(r,o,n),bu(4,o);break;case 1:if(ta(r,o,n),"function"==typeof(r=(i=o).stateNode).componentDidMount)try{r.componentDidMount()}catch(a){Cc(i,i.return,a)}if(null!==(r=(i=o).updateQueue)){var l=i.stateNode;try{var u=r.shared.hiddenCallbacks;if(null!==u)for(r.shared.hiddenCallbacks=null,r=0;r<u.length;r++)No(u[r],l)}catch(a){Cc(i,i.return,a)}}n&&64&s&&Su(o),ku(o,o.return);break;case 27:Pu(o);case 26:case 5:ta(r,o,n),n&&null===i&&4&s&&_u(o),ku(o,o.return);break;case 12:ta(r,o,n);break;case 31:ta(r,o,n),n&&4&s&&Hu(r,o);break;case 13:ta(r,o,n),n&&4&s&&Bu(r,o);break;case 22:null===o.memoizedState&&ta(r,o,n),ku(o,o.return);break;case 30:break;default:ta(r,o,n)}e=e.sibling}}function ea(t,e){var n=null;null!==t&&null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(n=t.memoizedState.cachePool.pool),t=null,null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(t=e.memoizedState.cachePool.pool),t!==n&&(null!=t&&t.refCount++,null!=n&&Hr(n))}function na(t,e){t=null,null!==e.alternate&&(t=e.alternate.memoizedState.cache),(e=e.memoizedState.cache)!==t&&(e.refCount++,null!=t&&Hr(t))}function ia(t,e,n,i){if(10256&e.subtreeFlags)for(e=e.child;null!==e;)ra(t,e,n,i),e=e.sibling}function ra(t,e,n,i){var r=e.flags;switch(e.tag){case 0:case 11:case 15:ia(t,e,n,i),2048&r&&bu(9,e);break;case 1:case 31:case 13:default:ia(t,e,n,i);break;case 3:ia(t,e,n,i),2048&r&&(t=null,null!==e.alternate&&(t=e.alternate.memoizedState.cache),(e=e.memoizedState.cache)!==t&&(e.refCount++,null!=t&&Hr(t)));break;case 12:if(2048&r){ia(t,e,n,i),t=e.stateNode;try{var o=e.memoizedProps,s=o.id,l=o.onPostCommit;"function"==typeof l&&l(s,null===e.alternate?"mount":"update",t.passiveEffectDuration,-0)}catch(u){Cc(e,e.return,u)}}else ia(t,e,n,i);break;case 23:break;case 22:o=e.stateNode,s=e.alternate,null!==e.memoizedState?2&o._visibility?ia(t,e,n,i):sa(t,e):2&o._visibility?ia(t,e,n,i):(o._visibility|=2,oa(t,e,n,i,!!(10256&e.subtreeFlags)||!1)),2048&r&&ea(s,e);break;case 24:ia(t,e,n,i),2048&r&&na(e.alternate,e)}}function oa(t,e,n,i,r){for(r=r&&(!!(10256&e.subtreeFlags)||!1),e=e.child;null!==e;){var o=t,s=e,l=n,u=i,a=s.flags;switch(s.tag){case 0:case 11:case 15:oa(o,s,l,u,r),bu(8,s);break;case 23:break;case 22:var c=s.stateNode;null!==s.memoizedState?2&c._visibility?oa(o,s,l,u,r):sa(o,s):(c._visibility|=2,oa(o,s,l,u,r)),r&&2048&a&&ea(s.alternate,s);break;case 24:oa(o,s,l,u,r),r&&2048&a&&na(s.alternate,s);break;default:oa(o,s,l,u,r)}e=e.sibling}}function sa(t,e){if(10256&e.subtreeFlags)for(e=e.child;null!==e;){var n=t,i=e,r=i.flags;switch(i.tag){case 22:sa(n,i),2048&r&&ea(i.alternate,i);break;case 24:sa(n,i),2048&r&&na(i.alternate,i);break;default:sa(n,i)}e=e.sibling}}var la=8192;function ua(t,e,n){if(t.subtreeFlags&la)for(t=t.child;null!==t;)aa(t,e,n),t=t.sibling}function aa(t,e,n){switch(t.tag){case 26:ua(t,e,n),t.flags&la&&null!==t.memoizedState&&function(t,e,n,i){if(!("stylesheet"!==n.type||"string"==typeof i.media&&!1===matchMedia(i.media).matches||4&n.state.loading)){if(null===n.instance){var r=Yh(i.href),o=e.querySelector(Xh(r));if(o)return null!==(e=o._p)&&"object"==typeof e&&"function"==typeof e.then&&(t.count++,t=hf.bind(t),e.then(t,t)),n.state.loading|=4,n.instance=o,void re(o);o=e.ownerDocument||e,i=Qh(i),(r=qh.get(r))&&rf(i,r),re(o=o.createElement("link"));var s=o;s._p=new Promise(function(t,e){s.onload=t,s.onerror=e}),vh(o,"link",i),n.instance=o}null===t.stylesheets&&(t.stylesheets=new Map),t.stylesheets.set(n,e),(e=n.state.preload)&&!(3&n.state.loading)&&(t.count++,n=hf.bind(t),e.addEventListener("load",n),e.addEventListener("error",n))}}(n,Ku,t.memoizedState,t.memoizedProps);break;case 5:default:ua(t,e,n);break;case 3:case 4:var i=Ku;Ku=Bh(t.stateNode.containerInfo),ua(t,e,n),Ku=i;break;case 22:null===t.memoizedState&&(null!==(i=t.alternate)&&null!==i.memoizedState?(i=la,la=16777216,ua(t,e,n),la=i):ua(t,e,n))}}function ca(t){var e=t.alternate;if(null!==e&&null!==(t=e.child)){e.child=null;do{e=t.sibling,t.sibling=null,t=e}while(null!==t)}}function ha(t){var e=t.deletions;if(16&t.flags){if(null!==e)for(var n=0;n<e.length;n++){var i=e[n];Uu=i,pa(i,t)}ca(t)}if(10256&t.subtreeFlags)for(t=t.child;null!==t;)fa(t),t=t.sibling}function fa(t){switch(t.tag){case 0:case 11:case 15:ha(t),2048&t.flags&&Eu(9,t,t.return);break;case 3:case 12:default:ha(t);break;case 22:var e=t.stateNode;null!==t.memoizedState&&2&e._visibility&&(null===t.return||13!==t.return.tag)?(e._visibility&=-3,da(t)):ha(t)}}function da(t){var e=t.deletions;if(16&t.flags){if(null!==e)for(var n=0;n<e.length;n++){var i=e[n];Uu=i,pa(i,t)}ca(t)}for(t=t.child;null!==t;){switch((e=t).tag){case 0:case 11:case 15:Eu(8,e,e.return),da(e);break;case 22:2&(n=e.stateNode)._visibility&&(n._visibility&=-3,da(e));break;default:da(e)}t=t.sibling}}function pa(t,e){for(;null!==Uu;){var n=Uu;switch(n.tag){case 0:case 11:case 15:Eu(8,n,e);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var i=n.memoizedState.cachePool.pool;null!=i&&i.refCount++}break;case 24:Hr(n.memoizedState.cache)}if(null!==(i=n.child))i.return=n,Uu=i;else t:for(n=t;null!==Uu;){var r=(i=Uu).sibling,o=i.return;if($u(i),i===n){Uu=null;break t}if(null!==r){r.return=o,Uu=r;break t}Uu=o}}}var ma={getCacheForType:function(t){var e=Lr(Vr),n=e.data.get(t);return void 0===n&&(n=t(),e.data.set(t,n)),n},cacheSignal:function(){return Lr(Vr).controller.signal}},va="function"==typeof WeakMap?WeakMap:Map,wa=0,ya=null,ga=null,ba=0,Ea=0,Sa=null,Ta=!1,ka=!1,Ia=!1,_a=0,Ca=0,Aa=0,Oa=0,Na=0,Ra=0,Pa=0,xa=null,Ma=null,Da=!1,La=0,Ua=0,Fa=1/0,$a=null,ja=null,Ga=0,Va=null,qa=null,Ha=0,Ba=0,Ja=null,za=null,Ka=0,Wa=null;function Ya(){return 2&wa&&0!==ba?ba&-ba:null!==F.T?Jc():Vt()}function Xa(){if(0===Ra)if(536870912&ba&&!mr)Ra=536870912;else{var t=At;!(3932160&(At<<=1))&&(At=262144),Ra=t}return null!==(t=Uo.current)&&(t.flags|=32),Ra}function Qa(t,e,n){(t!==ya||2!==Ea&&9!==Ea)&&null===t.cancelPendingCommit||(oc(t,0),nc(t,ba,Ra,!1)),Lt(t,n),2&wa&&t===ya||(t===ya&&(!(2&wa)&&(Oa|=n),4===Ca&&nc(t,ba,Ra,!1)),$c(t))}function Za(t,e,n){if(6&wa)throw Error(i(327));for(var r=!n&&!(127&e)&&0===(e&t.expiredLanes)||Pt(t,e),o=r?function(t,e){var n=wa;wa|=2;var r=uc(),o=ac();ya!==t||ba!==e?($a=null,Fa=ft()+500,oc(t,e)):ka=Pt(t,e);t:for(;;)try{if(0!==Ea&&null!==ga){e=ga;var s=Sa;e:switch(Ea){case 1:Ea=0,Sa=null,vc(t,e,s,1);break;case 2:case 9:if(oo(s)){Ea=0,Sa=null,mc(e);break}e=function(){2!==Ea&&9!==Ea||ya!==t||(Ea=7),$c(t)},s.then(e,e);break t;case 3:Ea=7;break t;case 4:Ea=5;break t;case 7:oo(s)?(Ea=0,Sa=null,mc(e)):(Ea=0,Sa=null,vc(t,e,s,7));break;case 5:var l=null;switch(ga.tag){case 26:l=ga.memoizedState;case 5:case 27:var u=ga;if(l?af(l):u.stateNode.complete){Ea=0,Sa=null;var a=u.sibling;if(null!==a)ga=a;else{var c=u.return;null!==c?(ga=c,wc(c)):ga=null}break e}}Ea=0,Sa=null,vc(t,e,s,5);break;case 6:Ea=0,Sa=null,vc(t,e,s,6);break;case 8:rc(),Ca=6;break t;default:throw Error(i(462))}}dc();break}catch(h){sc(t,h)}return Ar=Cr=null,F.H=r,F.A=o,wa=n,null!==ga?0:(ya=null,ba=0,Mi(),Ca)}(t,e):hc(t,e,!0),s=r;;){if(0===o){ka&&!r&&nc(t,e,0,!1);break}if(n=t.current.alternate,!s||ec(n)){if(2===o){if(s=e,t.errorRecoveryDisabledLanes&s)var l=0;else l=0!==(l=-536870913&t.pendingLanes)?l:536870912&l?536870912:0;if(0!==l){e=l;t:{var u=t;o=xa;var a=u.current.memoizedState.isDehydrated;if(a&&(oc(u,l).flags|=256),2!==(l=hc(u,l,!1))){if(Ia&&!a){u.errorRecoveryDisabledLanes|=s,Oa|=s,o=4;break t}s=Ma,Ma=o,null!==s&&(null===Ma?Ma=s:Ma.push.apply(Ma,s))}o=l}if(s=!1,2!==o)continue}}if(1===o){oc(t,0),nc(t,e,0,!0);break}t:{switch(r=t,s=o){case 0:case 1:throw Error(i(345));case 4:if((4194048&e)!==e)break;case 6:nc(r,e,Ra,!Ta);break t;case 2:Ma=null;break;case 3:case 5:break;default:throw Error(i(329))}if((62914560&e)===e&&10<(o=La+300-ft())){if(nc(r,e,Ra,!Ta),0!==Rt(r,0,!0))break t;Ha=e,r.timeoutHandle=Ih(tc.bind(null,r,n,Ma,$a,Da,e,Ra,Oa,Pa,Ta,s,"Throttled",-0,0),o)}else tc(r,n,Ma,$a,Da,e,Ra,Oa,Pa,Ta,s,null,-0,0)}break}o=hc(t,e,!1),s=!1}$c(t)}function tc(t,e,n,i,r,o,s,l,u,a,c,h,f,d){if(t.timeoutHandle=-1,8192&(h=e.subtreeFlags)||!(16785408&~h)){aa(e,o,h={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Le});var p=(62914560&o)===o?La-ft():(4194048&o)===o?Ua-ft():0;if(null!==(p=function(t,e){return t.stylesheets&&0===t.count&&df(t,t.stylesheets),0<t.count||0<t.imgCount?function(n){var i=setTimeout(function(){if(t.stylesheets&&df(t,t.stylesheets),t.unsuspend){var e=t.unsuspend;t.unsuspend=null,e()}},6e4+e);0<t.imgBytes&&0===cf&&(cf=62500*function(){if("function"==typeof performance.getEntriesByType){for(var t=0,e=0,n=performance.getEntriesByType("resource"),i=0;i<n.length;i++){var r=n[i],o=r.transferSize,s=r.initiatorType,l=r.duration;if(o&&l&&wh(s)){for(s=0,l=r.responseEnd,i+=1;i<n.length;i++){var u=n[i],a=u.startTime;if(a>l)break;var c=u.transferSize,h=u.initiatorType;c&&wh(h)&&(s+=c*((u=u.responseEnd)<l?1:(l-a)/(u-a)))}if(--i,e+=8*(o+s)/(r.duration/1e3),10<++t)break}}if(0<t)return e/t/1e6}return navigator.connection&&"number"==typeof(t=navigator.connection.downlink)?t:5}());var r=setTimeout(function(){if(t.waitingForImages=!1,0===t.count&&(t.stylesheets&&df(t,t.stylesheets),t.unsuspend)){var e=t.unsuspend;t.unsuspend=null,e()}},(t.imgBytes>cf?50:800)+e);return t.unsuspend=n,function(){t.unsuspend=null,clearTimeout(i),clearTimeout(r)}}:null}(h,p)))return Ha=o,t.cancelPendingCommit=p(gc.bind(null,t,e,o,n,i,r,s,l,u,c,h,null,f,d)),void nc(t,o,s,!a)}gc(t,e,o,n,i,r,s,l,u)}function ec(t){for(var e=t;;){var n=e.tag;if((0===n||11===n||15===n)&&16384&e.flags&&(null!==(n=e.updateQueue)&&null!==(n=n.stores)))for(var i=0;i<n.length;i++){var r=n[i],o=r.getSnapshot;r=r.value;try{if(!ni(o(),r))return!1}catch(s){return!1}}if(n=e.child,16384&e.subtreeFlags&&null!==n)n.return=e,e=n;else{if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function nc(t,e,n,i){e&=~Na,e&=~Oa,t.suspendedLanes|=e,t.pingedLanes&=~e,i&&(t.warmLanes|=e),i=t.expirationTimes;for(var r=e;0<r;){var o=31-kt(r),s=1<<o;i[o]=-1,r&=~s}0!==n&&Ut(t,n,e)}function ic(){return!!(6&wa)||(jc(0),!1)}function rc(){if(null!==ga){if(0===Ea)var t=ga.return;else Ar=Cr=null,hs(t=ga),ho=null,fo=0,t=ga;for(;null!==t;)gu(t.alternate,t),t=t.return;ga=null}}function oc(t,e){var n=t.timeoutHandle;-1!==n&&(t.timeoutHandle=-1,_h(n)),null!==(n=t.cancelPendingCommit)&&(t.cancelPendingCommit=null,n()),Ha=0,rc(),ya=t,ga=n=Hi(t.current,null),ba=e,Ea=0,Sa=null,Ta=!1,ka=Pt(t,e),Ia=!1,Pa=Ra=Na=Oa=Aa=Ca=0,Ma=xa=null,Da=!1,8&e&&(e|=32&e);var i=t.entangledLanes;if(0!==i)for(t=t.entanglements,i&=e;0<i;){var r=31-kt(i),o=1<<r;e|=t[r],i&=~o}return _a=e,Mi(),n}function sc(t,e){zo=null,F.H=gl,e===eo||e===io?(e=ao(),Ea=3):e===no?(e=ao(),Ea=4):Ea=e===Ll?8:null!==e&&"object"==typeof e&&"function"==typeof e.then?6:1,Sa=e,null===ga&&(Ca=1,Rl(t,Qi(e,t.current)))}function lc(){var t=Uo.current;return null===t||((4194048&ba)===ba?null===Fo:!!((62914560&ba)===ba||536870912&ba)&&t===Fo)}function uc(){var t=F.H;return F.H=gl,null===t?gl:t}function ac(){var t=F.A;return F.A=ma,t}function cc(){Ca=4,Ta||(4194048&ba)!==ba&&null!==Uo.current||(ka=!0),!(134217727&Aa)&&!(134217727&Oa)||null===ya||nc(ya,ba,Ra,!1)}function hc(t,e,n){var i=wa;wa|=2;var r=uc(),o=ac();ya===t&&ba===e||($a=null,oc(t,e)),e=!1;var s=Ca;t:for(;;)try{if(0!==Ea&&null!==ga){var l=ga,u=Sa;switch(Ea){case 8:rc(),s=6;break t;case 3:case 2:case 9:case 6:null===Uo.current&&(e=!0);var a=Ea;if(Ea=0,Sa=null,vc(t,l,u,a),n&&ka){s=0;break t}break;default:a=Ea,Ea=0,Sa=null,vc(t,l,u,a)}}fc(),s=Ca;break}catch(c){sc(t,c)}return e&&t.shellSuspendCounter++,Ar=Cr=null,wa=i,F.H=r,F.A=o,null===ga&&(ya=null,ba=0,Mi()),s}function fc(){for(;null!==ga;)pc(ga)}function dc(){for(;null!==ga&&!ct();)pc(ga)}function pc(t){var e=cu(t.alternate,t,_a);t.memoizedProps=t.pendingProps,null===e?wc(t):ga=e}function mc(t){var e=t,n=e.alternate;switch(e.tag){case 15:case 0:e=Wl(n,e,e.pendingProps,e.type,void 0,ba);break;case 11:e=Wl(n,e,e.pendingProps,e.type.render,e.ref,ba);break;case 5:hs(e);default:gu(n,e),e=cu(n,e=ga=Bi(e,_a),_a)}t.memoizedProps=t.pendingProps,null===e?wc(t):ga=e}function vc(t,e,n,r){Ar=Cr=null,hs(e),ho=null,fo=0;var o=e.return;try{if(function(t,e,n,r,o){if(n.flags|=32768,null!==r&&"object"==typeof r&&"function"==typeof r.then){if(null!==(e=n.alternate)&&xr(e,n,o,!0),null!==(n=Uo.current)){switch(n.tag){case 31:case 13:return null===Fo?cc():null===n.alternate&&0===Ca&&(Ca=3),n.flags&=-257,n.flags|=65536,n.lanes=o,r===ro?n.flags|=16384:(null===(e=n.updateQueue)?n.updateQueue=new Set([r]):e.add(r),Ac(t,r,o)),!1;case 22:return n.flags|=65536,r===ro?n.flags|=16384:(null===(e=n.updateQueue)?(e={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=e):null===(n=e.retryQueue)?e.retryQueue=new Set([r]):n.add(r),Ac(t,r,o)),!1}throw Error(i(435,n.tag))}return Ac(t,r,o),cc(),!1}if(mr)return null!==(e=Uo.current)?(!(65536&e.flags)&&(e.flags|=256),e.flags|=65536,e.lanes=o,r!==yr&&Ir(Qi(t=Error(i(422),{cause:r}),n))):(r!==yr&&Ir(Qi(e=Error(i(423),{cause:r}),n)),(t=t.current.alternate).flags|=65536,o&=-o,t.lanes|=o,r=Qi(r,n),_o(t,o=xl(t.stateNode,r,o)),4!==Ca&&(Ca=2)),!1;var s=Error(i(520),{cause:r});if(s=Qi(s,n),null===xa?xa=[s]:xa.push(s),4!==Ca&&(Ca=2),null===e)return!0;r=Qi(r,n),n=e;do{switch(n.tag){case 3:return n.flags|=65536,t=o&-o,n.lanes|=t,_o(n,t=xl(n.stateNode,r,t)),!1;case 1:if(e=n.type,s=n.stateNode,!(128&n.flags||"function"!=typeof e.getDerivedStateFromError&&(null===s||"function"!=typeof s.componentDidCatch||null!==ja&&ja.has(s))))return n.flags|=65536,o&=-o,n.lanes|=o,Dl(o=Ml(o),t,n,r),_o(n,o),!1}n=n.return}while(null!==n);return!1}(t,o,e,n,ba))return Ca=1,Rl(t,Qi(n,t.current)),void(ga=null)}catch(s){if(null!==o)throw ga=o,s;return Ca=1,Rl(t,Qi(n,t.current)),void(ga=null)}32768&e.flags?(mr||1===r?t=!0:ka||536870912&ba?t=!1:(Ta=t=!0,(2===r||9===r||3===r||6===r)&&(null!==(r=Uo.current)&&13===r.tag&&(r.flags|=16384))),yc(e,t)):wc(e)}function wc(t){var e=t;do{if(32768&e.flags)return void yc(e,Ta);t=e.return;var n=wu(e.alternate,e,_a);if(null!==n)return void(ga=n);if(null!==(e=e.sibling))return void(ga=e);ga=e=t}while(null!==e);0===Ca&&(Ca=5)}function yc(t,e){do{var n=yu(t.alternate,t);if(null!==n)return n.flags&=32767,void(ga=n);if(null!==(n=t.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!e&&null!==(t=t.sibling))return void(ga=t);ga=t=n}while(null!==t);Ca=6,ga=null}function gc(t,e,n,r,o,s,l,u,a){t.cancelPendingCommit=null;do{kc()}while(0!==Ga);if(6&wa)throw Error(i(327));if(null!==e){if(e===t.current)throw Error(i(177));if(s=e.lanes|e.childLanes,function(t,e,n,i,r,o){var s=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var l=t.entanglements,u=t.expirationTimes,a=t.hiddenUpdates;for(n=s&~n;0<n;){var c=31-kt(n),h=1<<c;l[c]=0,u[c]=-1;var f=a[c];if(null!==f)for(a[c]=null,c=0;c<f.length;c++){var d=f[c];null!==d&&(d.lane&=-536870913)}n&=~h}0!==i&&Ut(t,i,0),0!==o&&0===r&&0!==t.tag&&(t.suspendedLanes|=o&~(s&~e))}(t,n,s|=xi,l,u,a),t===ya&&(ga=ya=null,ba=0),qa=e,Va=t,Ha=n,Ba=s,Ja=o,za=r,10256&e.subtreeFlags||10256&e.flags?(t.callbackNode=null,t.callbackPriority=0,ut(vt,function(){return Ic(),null})):(t.callbackNode=null,t.callbackPriority=0),r=!!(13878&e.flags),13878&e.subtreeFlags||r){r=F.T,F.T=null,o=$.p,$.p=2,l=wa,wa|=4;try{!function(t,e){if(t=t.containerInfo,yh=kf,ui(t=li(t))){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else t:{var r=(n=(n=t.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var o=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(v){n=null;break t}var l=0,u=-1,a=-1,c=0,h=0,f=t,d=null;e:for(;;){for(var p;f!==n||0!==o&&3!==f.nodeType||(u=l+o),f!==s||0!==r&&3!==f.nodeType||(a=l+r),3===f.nodeType&&(l+=f.nodeValue.length),null!==(p=f.firstChild);)d=f,f=p;for(;;){if(f===t)break e;if(d===n&&++c===o&&(u=l),d===s&&++h===r&&(a=l),null!==(p=f.nextSibling))break;d=(f=d).parentNode}f=p}n=-1===u||-1===a?null:{start:u,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(gh={focusedElem:t,selectionRange:n},kf=!1,Uu=e;null!==Uu;)if(t=(e=Uu).child,1028&e.subtreeFlags&&null!==t)t.return=e,Uu=t;else for(;null!==Uu;){switch(s=(e=Uu).alternate,t=e.flags,e.tag){case 0:if(4&t&&null!==(t=null!==(t=e.updateQueue)?t.events:null))for(n=0;n<t.length;n++)(o=t[n]).ref.impl=o.nextImpl;break;case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(1024&t&&null!==s){t=void 0,n=e,o=s.memoizedProps,s=s.memoizedState,r=n.stateNode;try{var m=Cl(n.type,o);t=r.getSnapshotBeforeUpdate(m,s),r.vt=t}catch(w){Cc(n,n.return,w)}}break;case 3:if(1024&t)if(9===(n=(t=e.stateNode.containerInfo).nodeType))xh(t);else if(1===n)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":xh(t);break;default:t.textContent=""}break;default:if(1024&t)throw Error(i(163))}if(null!==(t=e.sibling)){t.return=e.return,Uu=t;break}Uu=e.return}}(t,e)}finally{wa=l,$.p=o,F.T=r}}Ga=1,bc(),Ec(),Sc()}}function bc(){if(1===Ga){Ga=0;var t=Va,e=qa,n=!!(13878&e.flags);if(13878&e.subtreeFlags||n){n=F.T,F.T=null;var i=$.p;$.p=2;var r=wa;wa|=4;try{Wu(e,t);var o=gh,s=li(t.containerInfo),l=o.focusedElem,u=o.selectionRange;if(s!==l&&l&&l.ownerDocument&&si(l.ownerDocument.documentElement,l)){if(null!==u&&ui(l)){var a=u.start,c=u.end;if(void 0===c&&(c=a),"selectionStart"in l)l.selectionStart=a,l.selectionEnd=Math.min(c,l.value.length);else{var h=l.ownerDocument||document,f=h&&h.defaultView||window;if(f.getSelection){var d=f.getSelection(),p=l.textContent.length,m=Math.min(u.start,p),v=void 0===u.end?m:Math.min(u.end,p);!d.extend&&m>v&&(s=v,v=m,m=s);var w=oi(l,m),y=oi(l,v);if(w&&y&&(1!==d.rangeCount||d.anchorNode!==w.node||d.anchorOffset!==w.offset||d.focusNode!==y.node||d.focusOffset!==y.offset)){var g=h.createRange();g.setStart(w.node,w.offset),d.removeAllRanges(),m>v?(d.addRange(g),d.extend(y.node,y.offset)):(g.setEnd(y.node,y.offset),d.addRange(g))}}}}for(h=[],d=l;d=d.parentNode;)1===d.nodeType&&h.push({element:d,left:d.scrollLeft,top:d.scrollTop});for("function"==typeof l.focus&&l.focus(),l=0;l<h.length;l++){var b=h[l];b.element.scrollLeft=b.left,b.element.scrollTop=b.top}}kf=!!yh,gh=yh=null}finally{wa=r,$.p=i,F.T=n}}t.current=e,Ga=2}}function Ec(){if(2===Ga){Ga=0;var t=Va,e=qa,n=!!(8772&e.flags);if(8772&e.subtreeFlags||n){n=F.T,F.T=null;var i=$.p;$.p=2;var r=wa;wa|=4;try{Fu(t,e.alternate,e)}finally{wa=r,$.p=i,F.T=n}}Ga=3}}function Sc(){if(4===Ga||3===Ga){Ga=0,ht();var t=Va,e=qa,n=Ha,i=za;10256&e.subtreeFlags||10256&e.flags?Ga=5:(Ga=0,qa=Va=null,Tc(t,t.pendingLanes));var r=t.pendingLanes;if(0===r&&(ja=null),Gt(n),e=e.stateNode,St&&"function"==typeof St.onCommitFiberRoot)try{St.onCommitFiberRoot(Et,e,void 0,!(128&~e.current.flags))}catch(u){}if(null!==i){e=F.T,r=$.p,$.p=2,F.T=null;try{for(var o=t.onRecoverableError,s=0;s<i.length;s++){var l=i[s];o(l.value,{componentStack:l.stack})}}finally{F.T=e,$.p=r}}3&Ha&&kc(),$c(t),r=t.pendingLanes,261930&n&&42&r?t===Wa?Ka++:(Ka=0,Wa=t):Ka=0,jc(0)}}function Tc(t,e){0===(t.pooledCacheLanes&=e)&&(null!=(e=t.pooledCache)&&(t.pooledCache=null,Hr(e)))}function kc(){return bc(),Ec(),Sc(),Ic()}function Ic(){if(5!==Ga)return!1;var t=Va,e=Ba;Ba=0;var n=Gt(Ha),r=F.T,o=$.p;try{$.p=32>n?32:n,F.T=null,n=Ja,Ja=null;var s=Va,l=Ha;if(Ga=0,qa=Va=null,Ha=0,6&wa)throw Error(i(331));var u=wa;if(wa|=4,fa(s.current),ra(s,s.current,l,n),wa=u,jc(0,!1),St&&"function"==typeof St.onPostCommitFiberRoot)try{St.onPostCommitFiberRoot(Et,s)}catch(a){}return!0}finally{$.p=o,F.T=r,Tc(t,e)}}function _c(t,e,n){e=Qi(n,e),null!==(t=ko(t,e=xl(t.stateNode,e,2),2))&&(Lt(t,2),$c(t))}function Cc(t,e,n){if(3===t.tag)_c(t,t,n);else for(;null!==e;){if(3===e.tag){_c(e,t,n);break}if(1===e.tag){var i=e.stateNode;if("function"==typeof e.type.getDerivedStateFromError||"function"==typeof i.componentDidCatch&&(null===ja||!ja.has(i))){t=Qi(n,t),null!==(i=ko(e,n=Ml(2),2))&&(Dl(n,i,e,t),Lt(i,2),$c(i));break}}e=e.return}}function Ac(t,e,n){var i=t.pingCache;if(null===i){i=t.pingCache=new va;var r=new Set;i.set(e,r)}else void 0===(r=i.get(e))&&(r=new Set,i.set(e,r));r.has(n)||(Ia=!0,r.add(n),t=Oc.bind(null,t,e,n),e.then(t,t))}function Oc(t,e,n){var i=t.pingCache;null!==i&&i.delete(e),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,ya===t&&(ba&n)===n&&(4===Ca||3===Ca&&(62914560&ba)===ba&&300>ft()-La?!(2&wa)&&oc(t,0):Na|=n,Pa===ba&&(Pa=0)),$c(t)}function Nc(t,e){0===e&&(e=Mt()),null!==(t=Ui(t,e))&&(Lt(t,e),$c(t))}function Rc(t){var e=t.memoizedState,n=0;null!==e&&(n=e.retryLane),Nc(t,n)}function Pc(t,e){var n=0;switch(t.tag){case 31:case 13:var r=t.stateNode,o=t.memoizedState;null!==o&&(n=o.retryLane);break;case 19:r=t.stateNode;break;case 22:r=t.stateNode._retryCache;break;default:throw Error(i(314))}null!==r&&r.delete(e),Nc(t,n)}var xc=null,Mc=null,Dc=!1,Lc=!1,Uc=!1,Fc=0;function $c(t){t!==Mc&&null===t.next&&(null===Mc?xc=Mc=t:Mc=Mc.next=t),Lc=!0,Dc||(Dc=!0,Ah(function(){6&wa?ut(pt,Gc):Vc()}))}function jc(t,e){if(!Uc&&Lc){Uc=!0;do{for(var n=!1,i=xc;null!==i;){if(0!==t){var r=i.pendingLanes;if(0===r)var o=0;else{var s=i.suspendedLanes,l=i.pingedLanes;o=(1<<31-kt(42|t)+1)-1,o=201326741&(o&=r&~(s&~l))?201326741&o|1:o?2|o:0}0!==o&&(n=!0,Bc(i,o))}else o=ba,!(3&(o=Rt(i,i===ya?o:0,null!==i.cancelPendingCommit||-1!==i.timeoutHandle)))||Pt(i,o)||(n=!0,Bc(i,o));i=i.next}}while(n);Uc=!1}}function Gc(){Vc()}function Vc(){Lc=Dc=!1;var t=0;0!==Fc&&function(){var t=window.event;if(t&&"popstate"===t.type)return t!==kh&&(kh=t,!0);return kh=null,!1}()&&(t=Fc);for(var e=ft(),n=null,i=xc;null!==i;){var r=i.next,o=qc(i,e);0===o?(i.next=null,null===n?xc=r:n.next=r,null===r&&(Mc=n)):(n=i,(0!==t||3&o)&&(Lc=!0)),i=r}0!==Ga&&5!==Ga||jc(t),0!==Fc&&(Fc=0)}function qc(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,o=-62914561&t.pendingLanes;0<o;){var s=31-kt(o),l=1<<s,u=r[s];-1===u?0!==(l&n)&&0===(l&i)||(r[s]=xt(l,e)):u<=e&&(t.expiredLanes|=l),o&=~l}if(n=ba,n=Rt(t,t===(e=ya)?n:0,null!==t.cancelPendingCommit||-1!==t.timeoutHandle),i=t.callbackNode,0===n||t===e&&(2===Ea||9===Ea)||null!==t.cancelPendingCommit)return null!==i&&null!==i&&at(i),t.callbackNode=null,t.callbackPriority=0;if(!(3&n)||Pt(t,n)){if((e=n&-n)===t.callbackPriority)return e;switch(null!==i&&at(i),Gt(n)){case 2:case 8:n=mt;break;case 32:default:n=vt;break;case 268435456:n=yt}return i=Hc.bind(null,t),n=ut(n,i),t.callbackPriority=e,t.callbackNode=n,e}return null!==i&&null!==i&&at(i),t.callbackPriority=2,t.callbackNode=null,2}function Hc(t,e){if(0!==Ga&&5!==Ga)return t.callbackNode=null,t.callbackPriority=0,null;var n=t.callbackNode;if(kc()&&t.callbackNode!==n)return null;var i=ba;return 0===(i=Rt(t,t===ya?i:0,null!==t.cancelPendingCommit||-1!==t.timeoutHandle))?null:(Za(t,i,e),qc(t,ft()),null!=t.callbackNode&&t.callbackNode===n?Hc.bind(null,t):null)}function Bc(t,e){if(kc())return null;Za(t,e,!0)}function Jc(){if(0===Fc){var t=zr;0===t&&(t=Ct,!(261888&(Ct<<=1))&&(Ct=256)),Fc=t}return Fc}function zc(t){return null==t||"symbol"==typeof t||"boolean"==typeof t?null:"function"==typeof t?t:De(""+t)}function Kc(t,e){var n=e.ownerDocument.createElement("input");return n.name=e.name,n.value=e.value,t.id&&n.setAttribute("form",t.id),e.parentNode.insertBefore(n,e),t=new FormData(t),n.parentNode.removeChild(n),t}for(var Wc=0;Wc<Ai.length;Wc++){var Yc=Ai[Wc];Oi(Yc.toLowerCase(),"on"+(Yc[0].toUpperCase()+Yc.slice(1)))}Oi(bi,"onAnimationEnd"),Oi(Ei,"onAnimationIteration"),Oi(Si,"onAnimationStart"),Oi("dblclick","onDoubleClick"),Oi("focusin","onFocus"),Oi("focusout","onBlur"),Oi(Ti,"onTransitionRun"),Oi(ki,"onTransitionStart"),Oi(Ii,"onTransitionCancel"),Oi(_i,"onTransitionEnd"),ue("onMouseEnter",["mouseout","mouseover"]),ue("onMouseLeave",["mouseout","mouseover"]),ue("onPointerEnter",["pointerout","pointerover"]),ue("onPointerLeave",["pointerout","pointerover"]),le("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),le("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),le("onBeforeInput",["compositionend","keypress","textInput","paste"]),le("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),le("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),le("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Qc=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Xc));function Zc(t,e){e=!!(4&e);for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;t:{var o=void 0;if(e)for(var s=i.length-1;0<=s;s--){var l=i[s],u=l.instance,a=l.currentTarget;if(l=l.listener,u!==o&&r.isPropagationStopped())break t;o=l,r.currentTarget=a;try{o(r)}catch(c){Ni(c)}r.currentTarget=null,o=u}else for(s=0;s<i.length;s++){if(u=(l=i[s]).instance,a=l.currentTarget,l=l.listener,u!==o&&r.isPropagationStopped())break t;o=l,r.currentTarget=a;try{o(r)}catch(c){Ni(c)}r.currentTarget=null,o=u}}}}function th(t,e){var n=e[Kt];void 0===n&&(n=e[Kt]=new Set);var i=t+"__bubble";n.has(i)||(rh(e,t,2,!1),n.add(i))}function eh(t,e,n){var i=0;e&&(i|=4),rh(n,t,i,e)}var nh="_reactListening"+Math.random().toString(36).slice(2);function ih(t){if(!t[nh]){t[nh]=!0,oe.forEach(function(e){"selectionchange"!==e&&(Qc.has(e)||eh(e,!1,t),eh(e,!0,t))});var e=9===t.nodeType?t:t.ownerDocument;null===e||e[nh]||(e[nh]=!0,eh("selectionchange",!1,e))}}function rh(t,e,n,i){switch(Rf(e)){case 2:var r=If;break;case 8:r=_f;break;default:r=Cf}n=r.bind(null,e,n,t),r=void 0,!Je||"touchstart"!==e&&"touchmove"!==e&&"wheel"!==e||(r=!0),i?void 0!==r?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):void 0!==r?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function oh(t,e,n,i,r){var s=i;if(!(1&e||2&e||null===i))t:for(;;){if(null===i)return;var l=i.tag;if(3===l||4===l){var u=i.stateNode.containerInfo;if(u===r)break;if(4===l)for(l=i.return;null!==l;){var a=l.tag;if((3===a||4===a)&&l.stateNode.containerInfo===r)return;l=l.return}for(;null!==u;){if(null===(l=te(u)))return;if(5===(a=l.tag)||6===a||26===a||27===a){i=s=l;continue t}u=u.parentNode}}i=i.return}qe(function(){var i=s,r=Fe(n),l=[];t:{var u=Ci.get(t);if(void 0!==u){var a=ln,c=t;switch(t){case"keypress":if(0===Qe(n))break t;case"keydown":case"keyup":a=Sn;break;case"focusin":c="focus",a=dn;break;case"focusout":c="blur",a=dn;break;case"beforeblur":case"afterblur":a=dn;break;case"click":if(2===n.button)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":a=hn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":a=fn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":a=kn;break;case bi:case Ei:case Si:a=pn;break;case _i:a=In;break;case"scroll":case"scrollend":a=an;break;case"wheel":a=_n;break;case"copy":case"cut":case"paste":a=mn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":a=Tn;break;case"toggle":case"beforetoggle":a=Cn}var h=!!(4&e),f=!h&&("scroll"===t||"scrollend"===t),d=h?null!==u?u+"Capture":null:u;h=[];for(var p,m=i;null!==m;){var v=m;if(p=v.stateNode,5!==(v=v.tag)&&26!==v&&27!==v||null===p||null===d||null!=(v=He(m,d))&&h.push(sh(m,v,p)),f)break;m=m.return}0<h.length&&(u=new a(u,c,null,n,r),l.push({event:u,listeners:h}))}}if(!(7&e)){if(a="mouseout"===t||"pointerout"===t,(!(u="mouseover"===t||"pointerover"===t)||n===Ue||!(c=n.relatedTarget||n.fromElement)||!te(c)&&!c[zt])&&(a||u)&&(u=r.window===r?r:(u=r.ownerDocument)?u.defaultView||u.parentWindow:window,a?(a=i,null!==(c=(c=n.relatedTarget||n.toElement)?te(c):null)&&(f=o(c),h=c.tag,c!==f||5!==h&&27!==h&&6!==h)&&(c=null)):(a=null,c=i),a!==c)){if(h=hn,v="onMouseLeave",d="onMouseEnter",m="mouse","pointerout"!==t&&"pointerover"!==t||(h=Tn,v="onPointerLeave",d="onPointerEnter",m="pointer"),f=null==a?u:ne(a),p=null==c?u:ne(c),(u=new h(v,m+"leave",a,n,r)).target=f,u.relatedTarget=p,v=null,te(r)===i&&((h=new h(d,m+"enter",c,n,r)).target=p,h.relatedTarget=f,v=h),f=v,a&&c)t:{for(h=uh,m=c,p=0,v=d=a;v;v=h(v))p++;v=0;for(var w=m;w;w=h(w))v++;for(;0<p-v;)d=h(d),p--;for(;0<v-p;)m=h(m),v--;for(;p--;){if(d===m||null!==m&&d===m.alternate){h=d;break t}d=h(d),m=h(m)}h=null}else h=null;null!==a&&ah(l,u,a,h,!1),null!==c&&null!==f&&ah(l,f,c,h,!0)}if("select"===(a=(u=i?ne(i):window).nodeName&&u.nodeName.toLowerCase())||"input"===a&&"file"===u.type)var y=Bn;else if($n(u))if(Jn)y=ei;else{y=Zn;var g=Qn}else!(a=u.nodeName)||"input"!==a.toLowerCase()||"checkbox"!==u.type&&"radio"!==u.type?i&&Pe(i.elementType)&&(y=Bn):y=ti;switch(y&&(y=y(t,i))?jn(l,y,n,r):(g&&g(t,u,i),"focusout"===t&&i&&"number"===u.type&&null!=i.memoizedProps.value&&ke(u,"number",u.value)),g=i?ne(i):window,t){case"focusin":($n(g)||"true"===g.contentEditable)&&(ci=g,hi=i,fi=null);break;case"focusout":fi=hi=ci=null;break;case"mousedown":di=!0;break;case"contextmenu":case"mouseup":case"dragend":di=!1,pi(l,n,r);break;case"selectionchange":if(ai)break;case"keydown":case"keyup":pi(l,n,r)}var b;if(On)t:{switch(t){case"compositionstart":var E="onCompositionStart";break t;case"compositionend":E="onCompositionEnd";break t;case"compositionupdate":E="onCompositionUpdate";break t}E=void 0}else Un?Dn(t,n)&&(E="onCompositionEnd"):"keydown"===t&&229===n.keyCode&&(E="onCompositionStart");E&&(Pn&&"ko"!==n.locale&&(Un||"onCompositionStart"!==E?"onCompositionEnd"===E&&Un&&(b=Xe()):(We="value"in(Ke=r)?Ke.value:Ke.textContent,Un=!0)),0<(g=lh(i,E)).length&&(E=new vn(E,t,null,n,r),l.push({event:E,listeners:g}),b?E.data=b:null!==(b=Ln(n))&&(E.data=b))),(b=Rn?function(t,e){switch(t){case"compositionend":return Ln(e);case"keypress":return 32!==e.which?null:(Mn=!0,xn);case"textInput":return(t=e.data)===xn&&Mn?null:t;default:return null}}(t,n):function(t,e){if(Un)return"compositionend"===t||!On&&Dn(t,e)?(t=Xe(),Ye=We=Ke=null,Un=!1,t):null;switch(t){case"paste":default:return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Pn&&"ko"!==e.locale?null:e.data}}(t,n))&&(0<(E=lh(i,"onBeforeInput")).length&&(g=new vn("onBeforeInput","beforeinput",null,n,r),l.push({event:g,listeners:E}),g.data=b)),function(t,e,n,i,r){if("submit"===e&&n&&n.stateNode===r){var o=zc((r[Jt]||null).action),s=i.submitter;s&&null!==(e=(e=s[Jt]||null)?zc(e.formAction):s.getAttribute("formAction"))&&(o=e,s=null);var l=new ln("action","action",null,i,r);t.push({event:l,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(0!==Fc){var t=s?Kc(r,s):new FormData(r);ol(n,{pending:!0,data:t,method:r.method,action:o},null,t)}}else"function"==typeof o&&(l.preventDefault(),t=s?Kc(r,s):new FormData(r),ol(n,{pending:!0,data:t,method:r.method,action:o},o,t))},currentTarget:r}]})}}(l,t,i,n,r)}Zc(l,e)})}function sh(t,e,n){return{instance:t,listener:e,currentTarget:n}}function lh(t,e){for(var n=e+"Capture",i=[];null!==t;){var r=t,o=r.stateNode;if(5!==(r=r.tag)&&26!==r&&27!==r||null===o||(null!=(r=He(t,n))&&i.unshift(sh(t,r,o)),null!=(r=He(t,e))&&i.push(sh(t,r,o))),3===t.tag)return i;t=t.return}return[]}function uh(t){if(null===t)return null;do{t=t.return}while(t&&5!==t.tag&&27!==t.tag);return t||null}function ah(t,e,n,i,r){for(var o=e._reactName,s=[];null!==n&&n!==i;){var l=n,u=l.alternate,a=l.stateNode;if(l=l.tag,null!==u&&u===i)break;5!==l&&26!==l&&27!==l||null===a||(u=a,r?null!=(a=He(n,o))&&s.unshift(sh(n,a,u)):r||null!=(a=He(n,o))&&s.push(sh(n,a,u))),n=n.return}0!==s.length&&t.push({event:e,listeners:s})}var ch=/\r\n?/g,hh=/\u0000|\uFFFD/g;function fh(t){return("string"==typeof t?t:""+t).replace(ch,"\n").replace(hh,"")}function dh(t,e){return e=fh(e),fh(t)===e}function ph(t,e,n,r,o,s){switch(n){case"children":"string"==typeof r?"body"===e||"textarea"===e&&""===r||Ae(t,r):("number"==typeof r||"bigint"==typeof r)&&"body"!==e&&Ae(t,""+r);break;case"className":de(t,"class",r);break;case"tabIndex":de(t,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":de(t,n,r);break;case"style":Re(t,r,s);break;case"data":if("object"!==e){de(t,"data",r);break}case"src":case"href":if(""===r&&("a"!==e||"href"!==n)){t.removeAttribute(n);break}if(null==r||"function"==typeof r||"symbol"==typeof r||"boolean"==typeof r){t.removeAttribute(n);break}r=De(""+r),t.setAttribute(n,r);break;case"action":case"formAction":if("function"==typeof r){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"==typeof s&&("formAction"===n?("input"!==e&&ph(t,e,"name",o.name,o,null),ph(t,e,"formEncType",o.formEncType,o,null),ph(t,e,"formMethod",o.formMethod,o,null),ph(t,e,"formTarget",o.formTarget,o,null)):(ph(t,e,"encType",o.encType,o,null),ph(t,e,"method",o.method,o,null),ph(t,e,"target",o.target,o,null))),null==r||"symbol"==typeof r||"boolean"==typeof r){t.removeAttribute(n);break}r=De(""+r),t.setAttribute(n,r);break;case"onClick":null!=r&&(t.onclick=Le);break;case"onScroll":null!=r&&th("scroll",t);break;case"onScrollEnd":null!=r&&th("scrollend",t);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!=typeof r||!("wt"in r))throw Error(i(61));if(null!=(n=r.wt)){if(null!=o.children)throw Error(i(60));t.innerHTML=n}}break;case"multiple":t.multiple=r&&"function"!=typeof r&&"symbol"!=typeof r;break;case"muted":t.muted=r&&"function"!=typeof r&&"symbol"!=typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"==typeof r||"boolean"==typeof r||"symbol"==typeof r){t.removeAttribute("xlink:href");break}n=De(""+r),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!=typeof r&&"symbol"!=typeof r?t.setAttribute(n,""+r):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!=typeof r&&"symbol"!=typeof r?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":!0===r?t.setAttribute(n,""):!1!==r&&null!=r&&"function"!=typeof r&&"symbol"!=typeof r?t.setAttribute(n,r):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!=typeof r&&"symbol"!=typeof r&&!isNaN(r)&&1<=r?t.setAttribute(n,r):t.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"==typeof r||"symbol"==typeof r||isNaN(r)?t.removeAttribute(n):t.setAttribute(n,r);break;case"popover":th("beforetoggle",t),th("toggle",t),fe(t,"popover",r);break;case"xlinkActuate":pe(t,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":pe(t,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":pe(t,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":pe(t,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":pe(t,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":pe(t,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":pe(t,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":pe(t,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":pe(t,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":fe(t,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&fe(t,n=xe.get(n)||n,r)}}function mh(t,e,n,r,o,s){switch(n){case"style":Re(t,r,s);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!=typeof r||!("wt"in r))throw Error(i(61));if(null!=(n=r.wt)){if(null!=o.children)throw Error(i(60));t.innerHTML=n}}break;case"children":"string"==typeof r?Ae(t,r):("number"==typeof r||"bigint"==typeof r)&&Ae(t,""+r);break;case"onScroll":null!=r&&th("scroll",t);break;case"onScrollEnd":null!=r&&th("scrollend",t);break;case"onClick":null!=r&&(t.onclick=Le);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:se.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(o=n.endsWith("Capture"),e=n.slice(2,o?n.length-7:void 0),"function"==typeof(s=null!=(s=t[Jt]||null)?s[n]:null)&&t.removeEventListener(e,s,o),"function"!=typeof r)?n in t?t[n]=r:!0===r?t.setAttribute(n,""):fe(t,n,r):("function"!=typeof s&&null!==s&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(e,r,o)))}}function vh(t,e,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":th("error",t),th("load",t);var r,o=!1,s=!1;for(r in n)if(n.hasOwnProperty(r)){var l=n[r];if(null!=l)switch(r){case"src":o=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,e));default:ph(t,e,r,l,n,null)}}return s&&ph(t,e,"srcSet",n.srcSet,n,null),void(o&&ph(t,e,"src",n.src,n,null));case"input":th("invalid",t);var u=r=l=s=null,a=null,c=null;for(o in n)if(n.hasOwnProperty(o)){var h=n[o];if(null!=h)switch(o){case"name":s=h;break;case"type":l=h;break;case"checked":a=h;break;case"defaultChecked":c=h;break;case"value":r=h;break;case"defaultValue":u=h;break;case"children":case"dangerouslySetInnerHTML":if(null!=h)throw Error(i(137,e));break;default:ph(t,e,o,h,n,null)}}return void Te(t,r,u,a,c,l,s,!1);case"select":for(s in th("invalid",t),o=l=r=null,n)if(n.hasOwnProperty(s)&&null!=(u=n[s]))switch(s){case"value":r=u;break;case"defaultValue":l=u;break;case"multiple":o=u;default:ph(t,e,s,u,n,null)}return e=r,n=l,t.multiple=!!o,void(null!=e?Ie(t,!!o,e,!1):null!=n&&Ie(t,!!o,n,!0));case"textarea":for(l in th("invalid",t),r=s=o=null,n)if(n.hasOwnProperty(l)&&null!=(u=n[l]))switch(l){case"value":o=u;break;case"defaultValue":s=u;break;case"children":r=u;break;case"dangerouslySetInnerHTML":if(null!=u)throw Error(i(91));break;default:ph(t,e,l,u,n,null)}return void Ce(t,o,s,r);case"option":for(a in n)if(n.hasOwnProperty(a)&&null!=(o=n[a]))if("selected"===a)t.selected=o&&"function"!=typeof o&&"symbol"!=typeof o;else ph(t,e,a,o,n,null);return;case"dialog":th("beforetoggle",t),th("toggle",t),th("cancel",t),th("close",t);break;case"iframe":case"object":th("load",t);break;case"video":case"audio":for(o=0;o<Xc.length;o++)th(Xc[o],t);break;case"image":th("error",t),th("load",t);break;case"details":th("toggle",t);break;case"embed":case"source":case"link":th("error",t),th("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in n)if(n.hasOwnProperty(c)&&null!=(o=n[c]))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,e));default:ph(t,e,c,o,n,null)}return;default:if(Pe(e)){for(h in n)n.hasOwnProperty(h)&&(void 0!==(o=n[h])&&mh(t,e,h,o,n,void 0));return}}for(u in n)n.hasOwnProperty(u)&&(null!=(o=n[u])&&ph(t,e,u,o,n,null))}function wh(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}var yh=null,gh=null;function bh(t){return 9===t.nodeType?t:t.ownerDocument}function Eh(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Sh(t,e){if(0===t)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return 1===t&&"foreignObject"===e?0:t}function Th(t,e){return"textarea"===t||"noscript"===t||"string"==typeof e.children||"number"==typeof e.children||"bigint"==typeof e.children||"object"==typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.wt}var kh=null;var Ih="function"==typeof setTimeout?setTimeout:void 0,_h="function"==typeof clearTimeout?clearTimeout:void 0,Ch="function"==typeof Promise?Promise:void 0,Ah="function"==typeof queueMicrotask?queueMicrotask:void 0!==Ch?function(t){return Ch.resolve(null).then(t).catch(Oh)}:Ih;function Oh(t){setTimeout(function(){throw t})}function Nh(t){return"head"===t}function Rh(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&8===r.nodeType)if("/$"===(n=r.data)||"/&"===n){if(0===i)return t.removeChild(r),void Wf(e);i--}else if("$"===n||"$?"===n||"$~"===n||"$!"===n||"&"===n)i++;else if("html"===n)Vh(t.ownerDocument.documentElement);else if("head"===n){Vh(n=t.ownerDocument.head);for(var o=n.firstChild;o;){var s=o.nextSibling,l=o.nodeName;o[Qt]||"SCRIPT"===l||"STYLE"===l||"LINK"===l&&"stylesheet"===o.rel.toLowerCase()||n.removeChild(o),o=s}}else"body"===n&&Vh(t.ownerDocument.body);n=r}while(n);Wf(e)}function Ph(t,e){var n=t;t=0;do{var i=n.nextSibling;if(1===n.nodeType?e?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",""===n.getAttribute("style")&&n.removeAttribute("style")):3===n.nodeType&&(e?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===t)break;t--}else"$"!==n&&"$?"!==n&&"$~"!==n&&"$!"!==n||t++;n=i}while(n)}function xh(t){var e=t.firstChild;for(e&&10===e.nodeType&&(e=e.nextSibling);e;){var n=e;switch(e=e.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":xh(n),Zt(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}t.removeChild(n)}}function Mh(t,e){for(;8!==t.nodeType;){if((1!==t.nodeType||"INPUT"!==t.nodeName||"hidden"!==t.type)&&!e)return null;if(null===(t=Uh(t.nextSibling)))return null}return t}function Dh(t){return"$?"===t.data||"$~"===t.data}function Lh(t){return"$!"===t.data||"$?"===t.data&&"loading"!==t.ownerDocument.readyState}function Uh(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break;if(8===e){if("$"===(e=t.data)||"$!"===e||"$?"===e||"$~"===e||"&"===e||"F!"===e||"F"===e)break;if("/$"===e||"/&"===e)return null}}return t}var Fh=null;function $h(t){t=t.nextSibling;for(var e=0;t;){if(8===t.nodeType){var n=t.data;if("/$"===n||"/&"===n){if(0===e)return Uh(t.nextSibling);e--}else"$"!==n&&"$!"!==n&&"$?"!==n&&"$~"!==n&&"&"!==n||e++}t=t.nextSibling}return null}function jh(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var n=t.data;if("$"===n||"$!"===n||"$?"===n||"$~"===n||"&"===n){if(0===e)return t;e--}else"/$"!==n&&"/&"!==n||e++}t=t.previousSibling}return null}function Gh(t,e,n){switch(e=bh(n),t){case"html":if(!(t=e.documentElement))throw Error(i(452));return t;case"head":if(!(t=e.head))throw Error(i(453));return t;case"body":if(!(t=e.body))throw Error(i(454));return t;default:throw Error(i(451))}}function Vh(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);Zt(t)}var qh=new Map,Hh=new Set;function Bh(t){return"function"==typeof t.getRootNode?t.getRootNode():9===t.nodeType?t:t.ownerDocument}var Jh=$.d;$.d={f:function(){var t=Jh.f(),e=ic();return t||e},r:function(t){var e=ee(t);null!==e&&5===e.tag&&"form"===e.type?ll(e):Jh.r(t)},D:function(t){Jh.D(t),Kh("dns-prefetch",t,null)},C:function(t,e){Jh.C(t,e),Kh("preconnect",t,e)},L:function(t,e,n){Jh.L(t,e,n);var i=zh;if(i&&t&&e){var r='link[rel="preload"][as="'+Ee(e)+'"]';"image"===e&&n&&n.imageSrcSet?(r+='[imagesrcset="'+Ee(n.imageSrcSet)+'"]',"string"==typeof n.imageSizes&&(r+='[imagesizes="'+Ee(n.imageSizes)+'"]')):r+='[href="'+Ee(t)+'"]';var o=r;switch(e){case"style":o=Yh(t);break;case"script":o=Zh(t)}qh.has(o)||(t=c({rel:"preload",href:"image"===e&&n&&n.imageSrcSet?void 0:t,as:e},n),qh.set(o,t),null!==i.querySelector(r)||"style"===e&&i.querySelector(Xh(o))||"script"===e&&i.querySelector(tf(o))||(vh(e=i.createElement("link"),"link",t),re(e),i.head.appendChild(e)))}},m:function(t,e){Jh.m(t,e);var n=zh;if(n&&t){var i=e&&"string"==typeof e.as?e.as:"script",r='link[rel="modulepreload"][as="'+Ee(i)+'"][href="'+Ee(t)+'"]',o=r;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":o=Zh(t)}if(!qh.has(o)&&(t=c({rel:"modulepreload",href:t},e),qh.set(o,t),null===n.querySelector(r))){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(tf(o)))return}vh(i=n.createElement("link"),"link",t),re(i),n.head.appendChild(i)}}},X:function(t,e){Jh.X(t,e);var n=zh;if(n&&t){var i=ie(n).hoistableScripts,r=Zh(t),o=i.get(r);o||((o=n.querySelector(tf(r)))||(t=c({src:t,async:!0},e),(e=qh.get(r))&&of(t,e),re(o=n.createElement("script")),vh(o,"link",t),n.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},i.set(r,o))}},S:function(t,e,n){Jh.S(t,e,n);var i=zh;if(i&&t){var r=ie(i).hoistableStyles,o=Yh(t);e=e||"default";var s=r.get(o);if(!s){var l={loading:0,preload:null};if(s=i.querySelector(Xh(o)))l.loading=5;else{t=c({rel:"stylesheet",href:t,"data-precedence":e},n),(n=qh.get(o))&&rf(t,n);var u=s=i.createElement("link");re(u),vh(u,"link",t),u._p=new Promise(function(t,e){u.onload=t,u.onerror=e}),u.addEventListener("load",function(){l.loading|=1}),u.addEventListener("error",function(){l.loading|=2}),l.loading|=4,nf(s,e,i)}s={type:"stylesheet",instance:s,count:1,state:l},r.set(o,s)}}},M:function(t,e){Jh.M(t,e);var n=zh;if(n&&t){var i=ie(n).hoistableScripts,r=Zh(t),o=i.get(r);o||((o=n.querySelector(tf(r)))||(t=c({src:t,async:!0,type:"module"},e),(e=qh.get(r))&&of(t,e),re(o=n.createElement("script")),vh(o,"link",t),n.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},i.set(r,o))}}};var zh="undefined"==typeof document?null:document;function Kh(t,e,n){var i=zh;if(i&&"string"==typeof e&&e){var r=Ee(e);r='link[rel="'+t+'"][href="'+r+'"]',"string"==typeof n&&(r+='[crossorigin="'+n+'"]'),Hh.has(r)||(Hh.add(r),t={rel:t,crossOrigin:n,href:e},null===i.querySelector(r)&&(vh(e=i.createElement("link"),"link",t),re(e),i.head.appendChild(e)))}}function Wh(t,e,n,r){var o,s,l,u,a=(a=Y.current)?Bh(a):null;if(!a)throw Error(i(446));switch(t){case"meta":case"title":return null;case"style":return"string"==typeof n.precedence&&"string"==typeof n.href?(e=Yh(n.href),(r=(n=ie(a).hoistableStyles).get(e))||(r={type:"style",instance:null,count:0,state:null},n.set(e,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"==typeof n.href&&"string"==typeof n.precedence){t=Yh(n.href);var c=ie(a).hoistableStyles,h=c.get(t);if(h||(a=a.ownerDocument||a,h={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},c.set(t,h),(c=a.querySelector(Xh(t)))&&!c._p&&(h.instance=c,h.state.loading=5),qh.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},qh.set(t,n),c||(o=a,s=t,l=n,u=h.state,o.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=o.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),vh(s,"link",l),re(s),o.head.appendChild(s))))),e&&null===r)throw Error(i(528,""));return h}if(e&&null!==r)throw Error(i(529,""));return null;case"script":return e=n.async,"string"==typeof(n=n.src)&&e&&"function"!=typeof e&&"symbol"!=typeof e?(e=Zh(n),(r=(n=ie(a).hoistableScripts).get(e))||(r={type:"script",instance:null,count:0,state:null},n.set(e,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,t))}}function Yh(t){return'href="'+Ee(t)+'"'}function Xh(t){return'link[rel="stylesheet"]['+t+"]"}function Qh(t){return c({},t,{"data-precedence":t.precedence,precedence:null})}function Zh(t){return'[src="'+Ee(t)+'"]'}function tf(t){return"script[async]"+t}function ef(t,e,n){if(e.count++,null===e.instance)switch(e.type){case"style":var r=t.querySelector('style[data-href~="'+Ee(n.href)+'"]');if(r)return e.instance=r,re(r),r;var o=c({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return re(r=(t.ownerDocument||t).createElement("style")),vh(r,"style",o),nf(r,n.precedence,t),e.instance=r;case"stylesheet":o=Yh(n.href);var s=t.querySelector(Xh(o));if(s)return e.state.loading|=4,e.instance=s,re(s),s;r=Qh(n),(o=qh.get(o))&&rf(r,o),re(s=(t.ownerDocument||t).createElement("link"));var l=s;return l._p=new Promise(function(t,e){l.onload=t,l.onerror=e}),vh(s,"link",r),e.state.loading|=4,nf(s,n.precedence,t),e.instance=s;case"script":return s=Zh(n.src),(o=t.querySelector(tf(s)))?(e.instance=o,re(o),o):(r=n,(o=qh.get(s))&&of(r=c({},n),o),re(o=(t=t.ownerDocument||t).createElement("script")),vh(o,"link",r),t.head.appendChild(o),e.instance=o);case"void":return null;default:throw Error(i(443,e.type))}else"stylesheet"===e.type&&!(4&e.state.loading)&&(r=e.instance,e.state.loading|=4,nf(r,n.precedence,t));return e.instance}function nf(t,e,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=i.length?i[i.length-1]:null,o=r,s=0;s<i.length;s++){var l=i[s];if(l.dataset.precedence===e)o=l;else if(o!==r)break}o?o.parentNode.insertBefore(t,o.nextSibling):(e=9===n.nodeType?n.head:n).insertBefore(t,e.firstChild)}function rf(t,e){null==t.crossOrigin&&(t.crossOrigin=e.crossOrigin),null==t.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),null==t.title&&(t.title=e.title)}function of(t,e){null==t.crossOrigin&&(t.crossOrigin=e.crossOrigin),null==t.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),null==t.integrity&&(t.integrity=e.integrity)}var sf=null;function lf(t,e,n){if(null===sf){var i=new Map,r=sf=new Map;r.set(n,i)}else(i=(r=sf).get(n))||(i=new Map,r.set(n,i));if(i.has(t))return i;for(i.set(t,null),n=n.getElementsByTagName(t),r=0;r<n.length;r++){var o=n[r];if(!(o[Qt]||o[Bt]||"link"===t&&"stylesheet"===o.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==o.namespaceURI){var s=o.getAttribute(e)||"";s=t+s;var l=i.get(s);l?l.push(o):i.set(s,[o])}}return i}function uf(t,e,n){(t=t.ownerDocument||t).head.insertBefore(n,"title"===e?t.querySelector("head > title"):null)}function af(t){return!!("stylesheet"!==t.type||3&t.state.loading)}var cf=0;function hf(){if(this.count--,0===this.count&&(0===this.imgCount||!this.waitingForImages))if(this.stylesheets)df(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}var ff=null;function df(t,e){t.stylesheets=null,null!==t.unsuspend&&(t.count++,ff=new Map,e.forEach(pf,t),ff=null,hf.call(t))}function pf(t,e){if(!(4&e.state.loading)){var n=ff.get(t);if(n)var i=n.get(null);else{n=new Map,ff.set(t,n);for(var r=t.querySelectorAll("link[data-precedence],style[data-precedence]"),o=0;o<r.length;o++){var s=r[o];"LINK"!==s.nodeName&&"not all"===s.getAttribute("media")||(n.set(s.dataset.precedence,s),i=s)}i&&n.set(null,i)}s=(r=e.instance).getAttribute("data-precedence"),(o=n.get(s)||i)===i&&n.set(null,r),n.set(s,r),this.count++,i=hf.bind(this),r.addEventListener("load",i),r.addEventListener("error",i),o?o.parentNode.insertBefore(r,o.nextSibling):(t=9===t.nodeType?t.head:t).insertBefore(r,t.firstChild),e.state.loading|=4}}var mf={$$typeof:E,Provider:null,Consumer:null,_currentValue:j,_currentValue2:j,_threadCount:0};function vf(t,e,n,i,r,o,s,l,u){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Dt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Dt(0),this.hiddenUpdates=Dt(null),this.identifierPrefix=i,this.onUncaughtError=r,this.onCaughtError=o,this.onRecoverableError=s,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=u,this.incompleteTransitions=new Map}function wf(t,e,n,i,r,o,s,l,u,a,c,h){return t=new vf(t,e,n,s,u,a,c,h,l),e=1,!0===o&&(e|=24),o=Vi(3,null,null,e),t.current=o,o.stateNode=t,(e=qr()).refCount++,t.pooledCache=e,e.refCount++,o.memoizedState={element:i,isDehydrated:n,cache:e},Eo(o),t}function yf(t){return t?t=ji:ji}function gf(t,e,n,i,r,o){r=yf(r),null===i.context?i.context=r:i.pendingContext=r,(i=To(e)).payload={element:n},null!==(o=void 0===o?null:o)&&(i.callback=o),null!==(n=ko(t,i,e))&&(Qa(n,0,e),Io(n,t,e))}function bf(t,e){if(null!==(t=t.memoizedState)&&null!==t.dehydrated){var n=t.retryLane;t.retryLane=0!==n&&n<e?n:e}}function Ef(t,e){bf(t,e),(t=t.alternate)&&bf(t,e)}function Sf(t){if(13===t.tag||31===t.tag){var e=Ui(t,67108864);null!==e&&Qa(e,0,67108864),Ef(t,67108864)}}function Tf(t){if(13===t.tag||31===t.tag){var e=Ya(),n=Ui(t,e=jt(e));null!==n&&Qa(n,0,e),Ef(t,e)}}var kf=!0;function If(t,e,n,i){var r=F.T;F.T=null;var o=$.p;try{$.p=2,Cf(t,e,n,i)}finally{$.p=o,F.T=r}}function _f(t,e,n,i){var r=F.T;F.T=null;var o=$.p;try{$.p=8,Cf(t,e,n,i)}finally{$.p=o,F.T=r}}function Cf(t,e,n,i){if(kf){var r=Af(i);if(null===r)oh(t,e,i,Of,n),jf(t,i);else if(function(t,e,n,i,r){switch(e){case"focusin":return xf=Gf(xf,t,e,n,i,r),!0;case"dragenter":return Mf=Gf(Mf,t,e,n,i,r),!0;case"mouseover":return Df=Gf(Df,t,e,n,i,r),!0;case"pointerover":var o=r.pointerId;return Lf.set(o,Gf(Lf.get(o)||null,t,e,n,i,r)),!0;case"gotpointercapture":return o=r.pointerId,Uf.set(o,Gf(Uf.get(o)||null,t,e,n,i,r)),!0}return!1}(r,t,e,n,i))i.stopPropagation();else if(jf(t,i),4&e&&-1<$f.indexOf(t)){for(;null!==r;){var o=ee(r);if(null!==o)switch(o.tag){case 3:if((o=o.stateNode).current.memoizedState.isDehydrated){var s=Nt(o.pendingLanes);if(0!==s){var l=o;for(l.pendingLanes|=2,l.entangledLanes|=2;s;){var u=1<<31-kt(s);l.entanglements[1]|=u,s&=~u}$c(o),!(6&wa)&&(Fa=ft()+500,jc(0))}}break;case 31:case 13:null!==(l=Ui(o,2))&&Qa(l,0,2),ic(),Ef(o,2)}if(null===(o=Af(i))&&oh(t,e,i,Of,n),o===r)break;r=o}null!==r&&i.stopPropagation()}else oh(t,e,i,null,n)}}function Af(t){return Nf(t=Fe(t))}var Of=null;function Nf(t){if(Of=null,null!==(t=te(t))){var e=o(t);if(null===e)t=null;else{var n=e.tag;if(13===n){if(null!==(t=s(e)))return t;t=null}else if(31===n){if(null!==(t=l(e)))return t;t=null}else if(3===n){if(e.stateNode.current.memoizedState.isDehydrated)return 3===e.tag?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return Of=t,null}function Rf(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(dt()){case pt:return 2;case mt:return 8;case vt:case wt:return 32;case yt:return 268435456;default:return 32}default:return 32}}var Pf=!1,xf=null,Mf=null,Df=null,Lf=new Map,Uf=new Map,Ff=[],$f="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function jf(t,e){switch(t){case"focusin":case"focusout":xf=null;break;case"dragenter":case"dragleave":Mf=null;break;case"mouseover":case"mouseout":Df=null;break;case"pointerover":case"pointerout":Lf.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Uf.delete(e.pointerId)}}function Gf(t,e,n,i,r,o){return null===t||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[r]},null!==e&&(null!==(e=ee(e))&&Sf(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,null!==r&&-1===e.indexOf(r)&&e.push(r),t)}function Vf(t){var e=te(t.target);if(null!==e){var n=o(e);if(null!==n)if(13===(e=n.tag)){if(null!==(e=s(n)))return t.blockedOn=e,void qt(t.priority,function(){Tf(n)})}else if(31===e){if(null!==(e=l(n)))return t.blockedOn=e,void qt(t.priority,function(){Tf(n)})}else if(3===e&&n.stateNode.current.memoizedState.isDehydrated)return void(t.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}t.blockedOn=null}function qf(t){if(null!==t.blockedOn)return!1;for(var e=t.targetContainers;0<e.length;){var n=Af(t.nativeEvent);if(null!==n)return null!==(e=ee(n))&&Sf(e),t.blockedOn=n,!1;var i=new(n=t.nativeEvent).constructor(n.type,n);Ue=i,n.target.dispatchEvent(i),Ue=null,e.shift()}return!0}function Hf(t,e,n){qf(t)&&n.delete(e)}function Bf(){Pf=!1,null!==xf&&qf(xf)&&(xf=null),null!==Mf&&qf(Mf)&&(Mf=null),null!==Df&&qf(Df)&&(Df=null),Lf.forEach(Hf),Uf.forEach(Hf)}function Jf(e,n){e.blockedOn===n&&(e.blockedOn=null,Pf||(Pf=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Bf)))}var zf=null;function Kf(e){zf!==e&&(zf=e,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){zf===e&&(zf=null);for(var t=0;t<e.length;t+=3){var n=e[t],i=e[t+1],r=e[t+2];if("function"!=typeof i){if(null===Nf(i||n))continue;break}var o=ee(n);null!==o&&(e.splice(t,3),t-=3,ol(o,{pending:!0,data:r,method:n.method,action:i},i,r))}}))}function Wf(t){function e(e){return Jf(e,t)}null!==xf&&Jf(xf,t),null!==Mf&&Jf(Mf,t),null!==Df&&Jf(Df,t),Lf.forEach(e),Uf.forEach(e);for(var n=0;n<Ff.length;n++){var i=Ff[n];i.blockedOn===t&&(i.blockedOn=null)}for(;0<Ff.length&&null===(n=Ff[0]).blockedOn;)Vf(n),null===n.blockedOn&&Ff.shift();if(null!=(n=(t.ownerDocument||t).$$reactFormReplay))for(i=0;i<n.length;i+=3){var r=n[i],o=n[i+1],s=r[Jt]||null;if("function"==typeof o)s||Kf(n);else if(s){var l=null;if(o&&o.hasAttribute("formAction")){if(r=o,s=o[Jt]||null)l=s.formAction;else if(null!==Nf(r))continue}else l=s.action;"function"==typeof l?n[i+1]=l:(n.splice(i,3),i-=3),Kf(n)}}}function Yf(){function t(t){t.canIntercept&&"react-transition"===t.info&&t.intercept({handler:function(){return new Promise(function(t){return r=t})},focusReset:"manual",scroll:"manual"})}function e(){null!==r&&(r(),r=null),i||setTimeout(n,20)}function n(){if(!i&&!navigation.transition){var t=navigation.currentEntry;t&&null!=t.url&&navigation.navigate(t.url,{state:t.getState(),info:"react-transition",history:"replace"})}}if("object"==typeof navigation){var i=!1,r=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",e),navigation.addEventListener("navigateerror",e),setTimeout(n,100),function(){i=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",e),navigation.removeEventListener("navigateerror",e),null!==r&&(r(),r=null)}}}function Xf(t){this._internalRoot=t}function Qf(t){this._internalRoot=t}Qf.prototype.render=Xf.prototype.render=function(t){var e=this._internalRoot;if(null===e)throw Error(i(409));gf(e.current,Ya(),t,e,null,null)},Qf.prototype.unmount=Xf.prototype.unmount=function(){var t=this._internalRoot;if(null!==t){this._internalRoot=null;var e=t.containerInfo;gf(t.current,2,null,t,null,null),ic(),e[zt]=null}},Qf.prototype.unstable_scheduleHydration=function(t){if(t){var e=Vt();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ff.length&&0!==e&&e<Ff[n].priority;n++);Ff.splice(n,0,t),0===n&&Vf(t)}};var Zf=e.version;if("19.2.1"!==Zf)throw Error(i(527,Zf,"19.2.1"));$.findDOMNode=function(t){var e=t._reactInternals;if(void 0===e){if("function"==typeof t.render)throw Error(i(188));throw t=Object.keys(t).join(","),Error(i(268,t))}return t=function(t){var e=t.alternate;if(!e){if(null===(e=o(t)))throw Error(i(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(null===s)break;var l=s.alternate;if(null===l){if(null!==(r=s.return)){n=r;continue}break}if(s.child===l.child){for(l=s.child;l;){if(l===n)return u(s),t;if(l===r)return u(s),e;l=l.sibling}throw Error(i(188))}if(n.return!==r.return)n=s,r=l;else{for(var a=!1,c=s.child;c;){if(c===n){a=!0,n=s,r=l;break}if(c===r){a=!0,r=s,n=l;break}c=c.sibling}if(!a){for(c=l.child;c;){if(c===n){a=!0,n=l,r=s;break}if(c===r){a=!0,r=l,n=s;break}c=c.sibling}if(!a)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?t:e}(e),t=null===(t=null!==t?a(t):null)?null:t.stateNode};var td={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:F,reconcilerVersion:"19.2.1"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ed=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ed.isDisabled&&ed.supportsFiber)try{Et=ed.inject(td),St=ed}catch(id){}}return w.createRoot=function(t,e){if(!r(t))throw Error(i(299));var n=!1,o="",s=Al,l=Ol,u=Nl;return null!=e&&(!0===e.unstable_strictMode&&(n=!0),void 0!==e.identifierPrefix&&(o=e.identifierPrefix),void 0!==e.onUncaughtError&&(s=e.onUncaughtError),void 0!==e.onCaughtError&&(l=e.onCaughtError),void 0!==e.onRecoverableError&&(u=e.onRecoverableError)),e=wf(t,1,!1,null,0,n,o,null,s,l,u,Yf),t[zt]=e.current,ih(t),new Xf(e)},w.hydrateRoot=function(t,e,n){if(!r(t))throw Error(i(299));var o=!1,s="",l=Al,u=Ol,a=Nl,c=null;return null!=n&&(!0===n.unstable_strictMode&&(o=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onUncaughtError&&(l=n.onUncaughtError),void 0!==n.onCaughtError&&(u=n.onCaughtError),void 0!==n.onRecoverableError&&(a=n.onRecoverableError),void 0!==n.formState&&(c=n.formState)),(e=wf(t,1,!0,e,0,o,s,c,l,u,a,Yf)).context=yf(null),n=e.current,(s=To(o=jt(o=Ya()))).callback=null,ko(n,s,o),n=o,e.current.lanes=n,Lt(e,n),$c(e),t[zt]=e.current,ih(t),new Qf(e)},w.version="19.2.1",w}const O=t((k||(k=1,function t(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){}}(),v.exports=A()),v.exports));var N={};const R=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=63&r|128):55296==(64512&r)&&i+1<t.length&&56320==(64512&t.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&t.charCodeAt(++i)),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=63&r|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=63&r|128)}return e},P={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const e=t[r],o=r+1<t.length,s=o?t[r+1]:0,l=r+2<t.length,u=l?t[r+2]:0,a=e>>2,c=(3&e)<<4|s>>4;let h=(15&s)<<2|u>>6,f=63&u;l||(f=64,o||(h=64)),i.push(n[a],n[c],n[h],n[f])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(R(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=t[n++];e[i++]=String.fromCharCode((31&r)<<6|63&o)}else if(r>239&&r<365){const o=((7&r)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[i++]=String.fromCharCode(55296+(o>>10)),e[i++]=String.fromCharCode(56320+(1023&o))}else{const o=t[n++],s=t[n++];e[i++]=String.fromCharCode((15&r)<<12|(63&o)<<6|63&s)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const e=n[t.charAt(r++)],o=r<t.length?n[t.charAt(r)]:0;++r;const s=r<t.length?n[t.charAt(r)]:64;++r;const l=r<t.length?n[t.charAt(r)]:64;if(++r,null==e||null==o||null==s||null==l)throw new x;const u=e<<2|o>>4;if(i.push(u),64!==s){const t=o<<4&240|s>>2;if(i.push(t),64!==l){const t=s<<6&192|l;i.push(t)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class x extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const M=function(t){return function(t){const e=R(t);return P.encodeByteArray(e,!0)}(t).replace(/\./g,"")},D=function(t){try{return P.decodeString(t,!0)}catch(e){}return null};const L=()=>function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().gt,U=()=>{try{return L()||(()=>{if("undefined"==typeof process)return;const t=N.gt;return t?JSON.parse(t):void 0})()||(()=>{if("undefined"==typeof document)return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const e=t&&D(t[1]);return e&&JSON.parse(e)})()}catch(t){return}},F=t=>{var e,n;return null==(n=null==(e=U())?void 0:e.emulatorHosts)?void 0:n[t]},$=()=>{var t;return null==(t=U())?void 0:t.config},j=t=>{var e;return null==(e=U())?void 0:e[`_${t}`]};class G{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,n)=>{e?this.reject(e):this.resolve(n),"function"==typeof t&&(this.promise.catch(()=>{}),1===t.length?t(e):t(e,n))}}}function V(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function q(t){return(await fetch(t,{credentials:"include"})).ok}const H={};let B=!1;function J(t,e){if("undefined"==typeof window||"undefined"==typeof document||!V(window.location.host)||H[t]===e||H[t]||B)return;function n(t){return`__firebase__banner__${t}`}H[t]=e;const i="__firebase__banner",r=function(){const t={prod:[],emulator:[]};for(const e of Object.keys(H))H[e]?t.emulator.push(e):t.prod.push(e);return t}().prod.length>0;function o(){const t=document.createElement("span");return t.style.cursor="pointer",t.style.marginLeft="16px",t.style.fontSize="24px",t.innerHTML=" &times;",t.onclick=()=>{B=!0,function(){const t=document.getElementById(i);t&&t.remove()}()},t}function s(){const t=function(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}(i),e=n("text"),s=document.getElementById(e)||document.createElement("span"),l=n("learnmore"),u=document.getElementById(l)||document.createElement("a"),a=n("preprendIcon"),c=document.getElementById(a)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(t.created){const e=t.element;!function(t){t.style.display="flex",t.style.background="#7faaf0",t.style.position="fixed",t.style.bottom="5px",t.style.left="5px",t.style.padding=".5em",t.style.borderRadius="5px",t.style.alignItems="center"}(e),function(t,e){t.setAttribute("id",e),t.innerText="Learn more",t.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",t.setAttribute("target","__blank"),t.style.paddingLeft="5px",t.style.textDecoration="underline"}(u,l);const n=o();!function(t,e){t.setAttribute("width","24"),t.setAttribute("id",e),t.setAttribute("height","24"),t.setAttribute("viewBox","0 0 24 24"),t.setAttribute("fill","none"),t.style.marginLeft="-6px"}(c,a),e.append(c,s,u,n),document.body.appendChild(e)}r?(s.innerText="Preview backend disconnected.",c.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(c.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',s.innerText="Preview backend running in this workspace."),s.setAttribute("id",e)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",s):s()}function z(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function K(){return!function(){var t;const e=null==(t=U())?void 0:t.forceEnvironment;if("node"===e)return!0;if("browser"===e)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(n){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}class W extends Error{constructor(t,e,n){super(e),this.code=t,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,W.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Y.prototype.create)}}class Y{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n}create(t,...e){const n=e[0]||{},i=`${this.service}/${t}`,r=this.errors[t],o=r?function(t,e){return t.replace(X,(t,n)=>{const i=e[n];return null!=i?String(i):`<${n}?>`})}(r,n):"Error",s=`${this.serviceName}: ${o} (${i}).`;return new W(i,s,n)}}const X=/\{\$([^}]+)}/g;function Q(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const n=t[r],o=e[r];if(Z(n)&&Z(o)){if(!Q(n,o))return!1}else if(n!==o)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function Z(t){return null!==t&&"object"==typeof t}function tt(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(t=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(t))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}class et{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(t=>{this.error(t)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,n){let i;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");i=function(t,e){if("object"!=typeof t||null===t)return!1;for(const n of e)if(n in t&&"function"==typeof t[n])return!0;return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n},void 0===i.next&&(i.next=nt),void 0===i.error&&(i.error=nt),void 0===i.complete&&(i.complete=nt);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch(t){}}),this.observers.push(i),r}unsubscribeOne(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[t])try{e(this.observers[t])}catch(n){"undefined"!=typeof console&&console.error}})}close(t){this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function nt(){}function it(t){return t&&t._delegate?t._delegate:t}class rt{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const ot="[DEFAULT]";class st{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const t=new G;if(this.instancesDeferred.set(e,t),this.isInitialized(e)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:e});n&&t.resolve(n)}catch(n){}}return this.instancesDeferred.get(e).promise}getImmediate(t){const e=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),n=(null==t?void 0:t.optional)??!1;if(!this.isInitialized(e)&&!this.shouldAutoInitialize()){if(n)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:e})}catch(i){if(n)return null;throw i}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:ot})}catch(e){}for(const[t,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const t=this.getOrInitializeService({instanceIdentifier:i});n.resolve(t)}catch(e){}}}}clearInstance(t=ot){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...t.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return null!=this.component}isInitialized(t=ot){return this.instances.has(t)}getOptions(t=ot){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:e});for(const[r,o]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(r)&&o.resolve(i)}return i}onInit(t,e){const n=this.normalizeInstanceIdentifier(e),i=this.onInitCallbacks.get(n)??new Set;i.add(t),this.onInitCallbacks.set(n,i);const r=this.instances.get(n);return r&&t(r,n),()=>{i.delete(t)}}invokeOnInitCallbacks(t,e){const n=this.onInitCallbacks.get(e);if(n)for(const i of n)try{i(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===ot?void 0:i),options:e}),this.instances.set(t,n),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch{}var i;return n||null}normalizeInstanceIdentifier(t=ot){return this.component?this.component.multipleInstances?t:ot:t}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class lt{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new st(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}var ut,at;(at=ut||(ut={}))[at.DEBUG=0]="DEBUG",at[at.VERBOSE=1]="VERBOSE",at[at.INFO=2]="INFO",at[at.WARN=3]="WARN",at[at.ERROR=4]="ERROR",at[at.SILENT=5]="SILENT";const ct={debug:ut.DEBUG,verbose:ut.VERBOSE,info:ut.INFO,warn:ut.WARN,error:ut.ERROR,silent:ut.SILENT},ht=ut.INFO,ft={[ut.DEBUG]:"log",[ut.VERBOSE]:"log",[ut.INFO]:"info",[ut.WARN]:"warn",[ut.ERROR]:"error"},dt=(t,e,...n)=>{if(e<t.logLevel)return;(new Date).toISOString();if(!ft[e])throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class pt{constructor(t){this.name=t,this._logLevel=ht,this._logHandler=dt,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in ut))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel="string"==typeof t?ct[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,ut.DEBUG,...t),this._logHandler(this,ut.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,ut.VERBOSE,...t),this._logHandler(this,ut.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,ut.INFO,...t),this._logHandler(this,ut.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,ut.WARN,...t),this._logHandler(this,ut.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,ut.ERROR,...t),this._logHandler(this,ut.ERROR,...t)}}let mt,vt;const wt=new WeakMap,yt=new WeakMap,gt=new WeakMap,bt=new WeakMap,Et=new WeakMap;let St={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return yt.get(t);if("objectStoreNames"===e)return t.objectStoreNames||gt.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return It(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function Tt(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(vt||(vt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(_t(this),e),It(wt.get(this))}:function(...e){return It(t.apply(_t(this),e))}:function(e,...n){const i=t.call(_t(this),e,...n);return gt.set(i,e.sort?e.sort():[e]),It(i)}}function kt(t){return"function"==typeof t?Tt(t):(t instanceof IDBTransaction&&function(t){if(yt.has(t))return;const e=new Promise((e,n)=>{const i=()=>{t.removeEventListener("complete",r),t.removeEventListener("error",o),t.removeEventListener("abort",o)},r=()=>{e(),i()},o=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",r),t.addEventListener("error",o),t.addEventListener("abort",o)});yt.set(t,e)}(t),e=t,(mt||(mt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(t=>e instanceof t)?new Proxy(t,St):t);var e}function It(t){if(t instanceof IDBRequest)return function(t){const e=new Promise((e,n)=>{const i=()=>{t.removeEventListener("success",r),t.removeEventListener("error",o)},r=()=>{e(It(t.result)),i()},o=()=>{n(t.error),i()};t.addEventListener("success",r),t.addEventListener("error",o)});return e.then(e=>{e instanceof IDBCursor&&wt.set(e,t)}).catch(()=>{}),Et.set(e,t),e}(t);if(bt.has(t))return bt.get(t);const e=kt(t);return e!==t&&(bt.set(t,e),Et.set(e,t)),e}const _t=t=>Et.get(t);const Ct=["get","getKey","getAll","getAllKeys","count"],At=["put","add","delete","clear"],Ot=new Map;function Nt(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(Ot.get(e))return Ot.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=At.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!r&&!Ct.includes(n))return;const o=async function(t,...e){const o=this.transaction(t,r?"readwrite":"readonly");let s=o.store;return i&&(s=s.index(e.shift())),(await Promise.all([s[n](...e),r&&o.done]))[0]};return Ot.set(e,o),o}St=(t=>({...t,get:(e,n,i)=>Nt(e,n)||t.get(e,n,i),has:(e,n)=>!!Nt(e,n)||t.has(e,n)}))(St);class Rt{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(function(t){const e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){const e=t.getImmediate();return`${e.library}/${e.version}`}return null}).filter(t=>t).join(" ")}}const Pt="@firebase/app",xt="0.14.6",Mt=new pt("@firebase/app"),Dt="@firebase/app-compat",Lt="@firebase/analytics-compat",Ut="@firebase/analytics",Ft="@firebase/app-check-compat",$t="@firebase/app-check",jt="@firebase/auth",Gt="@firebase/auth-compat",Vt="@firebase/database",qt="@firebase/data-connect",Ht="@firebase/database-compat",Bt="@firebase/functions",Jt="@firebase/functions-compat",zt="@firebase/installations",Kt="@firebase/installations-compat",Wt="@firebase/messaging",Yt="@firebase/messaging-compat",Xt="@firebase/performance",Qt="@firebase/performance-compat",Zt="@firebase/remote-config",te="@firebase/remote-config-compat",ee="@firebase/storage",ne="@firebase/storage-compat",ie="@firebase/firestore",re="@firebase/ai",oe="@firebase/firestore-compat",se="firebase",le="[DEFAULT]",ue={[Pt]:"fire-core",[Dt]:"fire-core-compat",[Ut]:"fire-analytics",[Lt]:"fire-analytics-compat",[$t]:"fire-app-check",[Ft]:"fire-app-check-compat",[jt]:"fire-auth",[Gt]:"fire-auth-compat",[Vt]:"fire-rtdb",[qt]:"fire-data-connect",[Ht]:"fire-rtdb-compat",[Bt]:"fire-fn",[Jt]:"fire-fn-compat",[zt]:"fire-iid",[Kt]:"fire-iid-compat",[Wt]:"fire-fcm",[Yt]:"fire-fcm-compat",[Xt]:"fire-perf",[Qt]:"fire-perf-compat",[Zt]:"fire-rc",[te]:"fire-rc-compat",[ee]:"fire-gcs",[ne]:"fire-gcs-compat",[ie]:"fire-fst",[oe]:"fire-fst-compat",[re]:"fire-vertex","fire-js":"fire-js",[se]:"fire-js-all"},ae=new Map,ce=new Map,he=new Map;function fe(t,e){try{t.container.addComponent(e)}catch(n){Mt.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function de(t){const e=t.name;if(he.has(e))return Mt.debug(`There were multiple attempts to register component ${e}.`),!1;he.set(e,t);for(const n of ae.values())fe(n,t);for(const n of ce.values())fe(n,t);return!0}function pe(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function me(t){return null!=t&&void 0!==t.settings}const ve=new Y("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class we{constructor(t,e,n){this._isDeleted=!1,this._options={...t},this._config={...e},this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new rt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw ve.create("app-deleted",{appName:this._name})}}const ye="12.6.0";function ge(t,e={}){let n=t;if("object"!=typeof e){e={name:e}}const i={name:le,automaticDataCollectionEnabled:!0,...e},r=i.name;if("string"!=typeof r||!r)throw ve.create("bad-app-name",{appName:String(r)});if(n||(n=$()),!n)throw ve.create("no-options");const o=ae.get(r);if(o){if(Q(n,o.options)&&Q(i,o.config))return o;throw ve.create("duplicate-app",{appName:r})}const s=new lt(r);for(const u of he.values())s.addComponent(u);const l=new we(n,i,s);return ae.set(r,l),l}function be(t=le){const e=ae.get(t);if(!e&&t===le&&$())return ge();if(!e)throw ve.create("no-app",{appName:t});return e}function Ee(t,e,n){let i=ue[t]??t;n&&(i+=`-${n}`);const r=i.match(/\s|\//),o=e.match(/\s|\//);if(r||o){const t=[`Unable to register library "${i}" with version "${e}":`];return r&&t.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&o&&t.push("and"),o&&t.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void Mt.warn(t.join(" "))}de(new rt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const Se="firebase-heartbeat-store";let Te=null;function ke(){return Te||(Te=function(t,e,{blocked:n,upgrade:i,blocking:r,terminated:o}={}){const s=indexedDB.open(t,e),l=It(s);return i&&s.addEventListener("upgradeneeded",t=>{i(It(s.result),t.oldVersion,t.newVersion,It(s.transaction),t)}),n&&s.addEventListener("blocked",t=>n(t.oldVersion,t.newVersion,t)),l.then(t=>{o&&t.addEventListener("close",()=>o()),r&&t.addEventListener("versionchange",t=>r(t.oldVersion,t.newVersion,t))}).catch(()=>{}),l}("firebase-heartbeat-database",1,{upgrade:(t,e)=>{if(0===e)try{t.createObjectStore(Se)}catch(n){}}}).catch(t=>{throw ve.create("idb-open",{originalErrorMessage:t.message})})),Te}async function Ie(t,e){try{const n=(await ke()).transaction(Se,"readwrite"),i=n.objectStore(Se);await i.put(e,_e(t)),await n.done}catch(n){if(n instanceof W)Mt.warn(n.message);else{const t=ve.create("idb-set",{originalErrorMessage:null==n?void 0:n.message});Mt.warn(t.message)}}}function _e(t){return`${t.name}!${t.options.appId}`}class Ce{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new Oe(e),this._heartbeatsCachePromise=this._storage.read().then(t=>(this._heartbeatsCache=t,t))}async triggerHeartbeat(){var t,e;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Ae();if(null==(null==(t=this._heartbeatsCache)?void 0:t.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null==(e=this._heartbeatsCache)?void 0:e.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(t=>t.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats.length>30){const t=function(t){if(0===t.length)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(t,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){Mt.warn(n)}}async getHeartbeatsHeader(){var t;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null==(t=this._heartbeatsCache)?void 0:t.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const e=Ae(),{heartbeatsToSend:n,unsentEntries:i}=function(t,e=1024){const n=[];let i=t.slice();for(const r of t){const t=n.find(t=>t.agent===r.agent);if(t){if(t.dates.push(r.date),Ne(n)>e){t.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Ne(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}(this._heartbeatsCache.heartbeats),r=M(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return Mt.warn(e),""}}}function Ae(){return(new Date).toISOString().substring(0,10)}class Oe{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!function(){try{return"object"==typeof indexedDB}catch(t){return!1}}()&&new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var t;e((null==(t=r.error)?void 0:t.message)||"")}}catch(n){e(n)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const t=await async function(t){try{const e=(await ke()).transaction(Se),n=await e.objectStore(Se).get(_e(t));return await e.done,n}catch(e){if(e instanceof W)Mt.warn(e.message);else{const t=ve.create("idb-get",{originalErrorMessage:null==e?void 0:e.message});Mt.warn(t.message)}}}(this.app);return(null==t?void 0:t.heartbeats)?t:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const e=await this.read();return Ie(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??e.lastSentHeartbeatDate,heartbeats:t.heartbeats})}}async add(t){if(await this._canUseIndexedDBPromise){const e=await this.read();return Ie(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??e.lastSentHeartbeatDate,heartbeats:[...e.heartbeats,...t.heartbeats]})}}}function Ne(t){return M(JSON.stringify({version:2,heartbeats:t})).length}var Re;Re="",de(new rt("platform-logger",t=>new Rt(t),"PRIVATE")),de(new rt("heartbeat",t=>new Ce(t),"PRIVATE")),Ee(Pt,xt,Re),Ee(Pt,xt,"esm2020"),Ee("fire-js","");Ee("firebase","12.6.0","app");var Pe,xe,Me="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};(function(){var t;function e(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}function n(t,e,n){n||(n=0);const i=Array(16);if("string"==typeof e)for(var r=0;r<16;++r)i[r]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(r=0;r<16;++r)i[r]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],r=t.g[2];let o,s=t.g[3];o=e+(s^n&(r^s))+i[0]+3614090360&4294967295,o=s+(r^(e=n+(o<<7&4294967295|o>>>25))&(n^r))+i[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=r+(n^s&(e^n))+i[2]+606105819&4294967295,o=n+(e^(r=s+(o<<17&4294967295|o>>>15))&(s^e))+i[3]+3250441966&4294967295,o=e+(s^(n=r+(o<<22&4294967295|o>>>10))&(r^s))+i[4]+4118548399&4294967295,o=s+(r^(e=n+(o<<7&4294967295|o>>>25))&(n^r))+i[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=r+(n^s&(e^n))+i[6]+2821735955&4294967295,o=n+(e^(r=s+(o<<17&4294967295|o>>>15))&(s^e))+i[7]+4249261313&4294967295,o=e+(s^(n=r+(o<<22&4294967295|o>>>10))&(r^s))+i[8]+1770035416&4294967295,o=s+(r^(e=n+(o<<7&4294967295|o>>>25))&(n^r))+i[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=r+(n^s&(e^n))+i[10]+4294925233&4294967295,o=n+(e^(r=s+(o<<17&4294967295|o>>>15))&(s^e))+i[11]+2304563134&4294967295,o=e+(s^(n=r+(o<<22&4294967295|o>>>10))&(r^s))+i[12]+1804603682&4294967295,o=s+(r^(e=n+(o<<7&4294967295|o>>>25))&(n^r))+i[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=r+(n^s&(e^n))+i[14]+2792965006&4294967295,o=n+(e^(r=s+(o<<17&4294967295|o>>>15))&(s^e))+i[15]+1236535329&4294967295,o=e+(r^s&((n=r+(o<<22&4294967295|o>>>10))^r))+i[1]+4129170786&4294967295,o=s+(n^r&((e=n+(o<<5&4294967295|o>>>27))^n))+i[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=r+(e^n&(s^e))+i[11]+643717713&4294967295,o=n+(s^e&((r=s+(o<<14&4294967295|o>>>18))^s))+i[0]+3921069994&4294967295,o=e+(r^s&((n=r+(o<<20&4294967295|o>>>12))^r))+i[5]+3593408605&4294967295,o=s+(n^r&((e=n+(o<<5&4294967295|o>>>27))^n))+i[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=r+(e^n&(s^e))+i[15]+3634488961&4294967295,o=n+(s^e&((r=s+(o<<14&4294967295|o>>>18))^s))+i[4]+3889429448&4294967295,o=e+(r^s&((n=r+(o<<20&4294967295|o>>>12))^r))+i[9]+568446438&4294967295,o=s+(n^r&((e=n+(o<<5&4294967295|o>>>27))^n))+i[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=r+(e^n&(s^e))+i[3]+4107603335&4294967295,o=n+(s^e&((r=s+(o<<14&4294967295|o>>>18))^s))+i[8]+1163531501&4294967295,o=e+(r^s&((n=r+(o<<20&4294967295|o>>>12))^r))+i[13]+2850285829&4294967295,o=s+(n^r&((e=n+(o<<5&4294967295|o>>>27))^n))+i[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=r+(e^n&(s^e))+i[7]+1735328473&4294967295,o=n+(s^e&((r=s+(o<<14&4294967295|o>>>18))^s))+i[12]+2368359562&4294967295,o=e+((n=r+(o<<20&4294967295|o>>>12))^r^s)+i[5]+4294588738&4294967295,o=s+((e=n+(o<<4&4294967295|o>>>28))^n^r)+i[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=r+(s^e^n)+i[11]+1839030562&4294967295,o=n+((r=s+(o<<16&4294967295|o>>>16))^s^e)+i[14]+4259657740&4294967295,o=e+((n=r+(o<<23&4294967295|o>>>9))^r^s)+i[1]+2763975236&4294967295,o=s+((e=n+(o<<4&4294967295|o>>>28))^n^r)+i[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=r+(s^e^n)+i[7]+4139469664&4294967295,o=n+((r=s+(o<<16&4294967295|o>>>16))^s^e)+i[10]+3200236656&4294967295,o=e+((n=r+(o<<23&4294967295|o>>>9))^r^s)+i[13]+681279174&4294967295,o=s+((e=n+(o<<4&4294967295|o>>>28))^n^r)+i[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=r+(s^e^n)+i[3]+3572445317&4294967295,o=n+((r=s+(o<<16&4294967295|o>>>16))^s^e)+i[6]+76029189&4294967295,o=e+((n=r+(o<<23&4294967295|o>>>9))^r^s)+i[9]+3654602809&4294967295,o=s+((e=n+(o<<4&4294967295|o>>>28))^n^r)+i[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=r+(s^e^n)+i[15]+530742520&4294967295,o=n+((r=s+(o<<16&4294967295|o>>>16))^s^e)+i[2]+3299628645&4294967295,o=e+(r^((n=r+(o<<23&4294967295|o>>>9))|~s))+i[0]+4096336452&4294967295,o=s+(n^((e=n+(o<<6&4294967295|o>>>26))|~r))+i[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=r+(e^(s|~n))+i[14]+2878612391&4294967295,o=n+(s^((r=s+(o<<15&4294967295|o>>>17))|~e))+i[5]+4237533241&4294967295,o=e+(r^((n=r+(o<<21&4294967295|o>>>11))|~s))+i[12]+1700485571&4294967295,o=s+(n^((e=n+(o<<6&4294967295|o>>>26))|~r))+i[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=r+(e^(s|~n))+i[10]+4293915773&4294967295,o=n+(s^((r=s+(o<<15&4294967295|o>>>17))|~e))+i[1]+2240044497&4294967295,o=e+(r^((n=r+(o<<21&4294967295|o>>>11))|~s))+i[8]+1873313359&4294967295,o=s+(n^((e=n+(o<<6&4294967295|o>>>26))|~r))+i[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=r+(e^(s|~n))+i[6]+2734768916&4294967295,o=n+(s^((r=s+(o<<15&4294967295|o>>>17))|~e))+i[13]+1309151649&4294967295,o=e+(r^((n=r+(o<<21&4294967295|o>>>11))|~s))+i[4]+4149444226&4294967295,o=s+(n^((e=n+(o<<6&4294967295|o>>>26))|~r))+i[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=r+(e^(s|~n))+i[2]+718787259&4294967295,o=n+(s^((r=s+(o<<15&4294967295|o>>>17))|~e))+i[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(r+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+r&4294967295,t.g[3]=t.g[3]+s&4294967295}function i(t,e){this.h=e;const n=[];let i=!0;for(let r=t.length-1;r>=0;r--){const o=0|t[r];i&&o==e||(n[r]=o,i=!1)}this.g=n}!function(t,e){function n(){}n.prototype=e.prototype,t.F=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.D=function(t,n,i){for(var r=Array(arguments.length-2),o=2;o<arguments.length;o++)r[o-2]=arguments[o];return e.prototype[n].apply(t,r)}}(e,function(){this.blockSize=-1}),e.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},e.prototype.v=function(t,e){void 0===e&&(e=t.length);const i=e-this.blockSize,r=this.C;let o=this.h,s=0;for(;s<e;){if(0==o)for(;s<=i;)n(this,t,s),s+=this.blockSize;if("string"==typeof t){for(;s<e;)if(r[o++]=t.charCodeAt(s++),o==this.blockSize){n(this,r),o=0;break}}else for(;s<e;)if(r[o++]=t[s++],o==this.blockSize){n(this,r),o=0;break}}this.h=o,this.o+=e},e.prototype.A=function(){var t=Array((this.h<56?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;e=8*this.o;for(var n=t.length-8;n<t.length;++n)t[n]=255&e,e/=256;for(this.v(t),t=Array(16),e=0,n=0;n<4;++n)for(let i=0;i<32;i+=8)t[e++]=this.g[n]>>>i&255;return t};var r={};function o(t){return-128<=t&&t<128?function(t,e){var n=r;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,function(t){return new i([0|t],t<0?-1:0)}):new i([0|t],t<0?-1:0)}function s(t){if(isNaN(t)||!isFinite(t))return l;if(t<0)return f(s(-t));const e=[];let n=1;for(let i=0;t>=n;i++)e[i]=t/n|0,n*=4294967296;return new i(e,0)}var l=o(0),u=o(1),a=o(16777216);function c(t){if(0!=t.h)return!1;for(let e=0;e<t.g.length;e++)if(0!=t.g[e])return!1;return!0}function h(t){return-1==t.h}function f(t){const e=t.g.length,n=[];for(let i=0;i<e;i++)n[i]=~t.g[i];return new i(n,~t.h).add(u)}function d(t,e){return t.add(f(e))}function p(t,e){for(;(65535&t[e])!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function m(t,e){this.g=t,this.h=e}function v(t,e){if(c(e))throw Error("division by zero");if(c(t))return new m(l,l);if(h(t))return e=v(f(t),e),new m(f(e.g),f(e.h));if(h(e))return e=v(t,f(e)),new m(f(e.g),e.h);if(t.g.length>30){if(h(t)||h(e))throw Error("slowDivide_ only works with positive integers.");for(var n=u,i=e;i.l(t)<=0;)n=w(n),i=w(i);var r=y(n,1),o=y(i,1);for(i=y(i,2),n=y(n,2);!c(i);){var a=o.add(i);a.l(t)<=0&&(r=r.add(n),o=a),i=y(i,1),n=y(n,1)}return e=d(t,r.j(e)),new m(r,e)}for(r=l;t.l(e)>=0;){for(n=Math.max(1,Math.floor(t.m()/e.m())),i=(i=Math.ceil(Math.log(n)/Math.LN2))<=48?1:Math.pow(2,i-48),a=(o=s(n)).j(e);h(a)||a.l(t)>0;)a=(o=s(n-=i)).j(e);c(o)&&(o=u),r=r.add(o),t=d(t,a)}return new m(r,t)}function w(t){const e=t.g.length+1,n=[];for(let i=0;i<e;i++)n[i]=t.i(i)<<1|t.i(i-1)>>>31;return new i(n,t.h)}function y(t,e){const n=e>>5;e%=32;const r=t.g.length-n,o=[];for(let i=0;i<r;i++)o[i]=e>0?t.i(i+n)>>>e|t.i(i+n+1)<<32-e:t.i(i+n);return new i(o,t.h)}(t=i.prototype).m=function(){if(h(this))return-f(this).m();let t=0,e=1;for(let n=0;n<this.g.length;n++){const i=this.i(n);t+=(i>=0?i:4294967296+i)*e,e*=4294967296}return t},t.toString=function(t){if((t=t||10)<2||36<t)throw Error("radix out of range: "+t);if(c(this))return"0";if(h(this))return"-"+f(this).toString(t);const e=s(Math.pow(t,6));var n=this;let i="";for(;;){const r=v(n,e).g;let o=(((n=d(n,r.j(e))).g.length>0?n.g[0]:n.h)>>>0).toString(t);if(c(n=r))return o+i;for(;o.length<6;)o="0"+o;i=o+i}},t.i=function(t){return t<0?0:t<this.g.length?this.g[t]:this.h},t.l=function(t){return h(t=d(this,t))?-1:c(t)?0:1},t.abs=function(){return h(this)?f(this):this},t.add=function(t){const e=Math.max(this.g.length,t.g.length),n=[];let r=0;for(let i=0;i<=e;i++){let e=r+(65535&this.i(i))+(65535&t.i(i)),o=(e>>>16)+(this.i(i)>>>16)+(t.i(i)>>>16);r=o>>>16,e&=65535,o&=65535,n[i]=o<<16|e}return new i(n,-2147483648&n[n.length-1]?-1:0)},t.j=function(t){if(c(this)||c(t))return l;if(h(this))return h(t)?f(this).j(f(t)):f(f(this).j(t));if(h(t))return f(this.j(f(t)));if(this.l(a)<0&&t.l(a)<0)return s(this.m()*t.m());const e=this.g.length+t.g.length,n=[];for(var r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(let e=0;e<t.g.length;e++){const i=this.i(r)>>>16,o=65535&this.i(r),s=t.i(e)>>>16,l=65535&t.i(e);n[2*r+2*e]+=o*l,p(n,2*r+2*e),n[2*r+2*e+1]+=i*l,p(n,2*r+2*e+1),n[2*r+2*e+1]+=o*s,p(n,2*r+2*e+1),n[2*r+2*e+2]+=i*s,p(n,2*r+2*e+2)}for(t=0;t<e;t++)n[t]=n[2*t+1]<<16|n[2*t];for(t=e;t<2*e;t++)n[t]=0;return new i(n,0)},t.B=function(t){return v(this,t).h},t.and=function(t){const e=Math.max(this.g.length,t.g.length),n=[];for(let i=0;i<e;i++)n[i]=this.i(i)&t.i(i);return new i(n,this.h&t.h)},t.or=function(t){const e=Math.max(this.g.length,t.g.length),n=[];for(let i=0;i<e;i++)n[i]=this.i(i)|t.i(i);return new i(n,this.h|t.h)},t.xor=function(t){const e=Math.max(this.g.length,t.g.length),n=[];for(let i=0;i<e;i++)n[i]=this.i(i)^t.i(i);return new i(n,this.h^t.h)},e.prototype.digest=e.prototype.A,e.prototype.reset=e.prototype.u,e.prototype.update=e.prototype.v,xe=e,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.B,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=s,i.fromString=function t(e,n){if(0==e.length)throw Error("number format error: empty string");if((n=n||10)<2||36<n)throw Error("radix out of range: "+n);if("-"==e.charAt(0))return f(t(e.substring(1),n));if(e.indexOf("-")>=0)throw Error('number format error: interior "-" character');const i=s(Math.pow(n,8));let r=l;for(let l=0;l<e.length;l+=8){var o=Math.min(8,e.length-l);const t=parseInt(e.substring(l,l+o),n);o<8?(o=s(Math.pow(n,o)),r=r.j(o).add(s(t))):(r=r.j(i),r=r.add(s(t)))}return r},Pe=i}).apply(void 0!==Me?Me:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var De,Le,Ue,Fe,$e,je,Ge,Ve,qe="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};(function(){var t,e=Object.defineProperty;var n=function(t){t=["object"==typeof globalThis&&globalThis,t,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof qe&&qe];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);function i(t,i){if(i)t:{var r=n;t=t.split(".");for(var o=0;o<t.length-1;o++){var s=t[o];if(!(s in r))break t;r=r[s]}(i=i(o=r[t=t[t.length-1]]))!=o&&null!=i&&e(r,t,{configurable:!0,writable:!0,value:i})}}i("Symbol.dispose",function(t){return t||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(t){return t||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(t){return t||function(t){var e,n=[];for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&n.push([e,t[e]]);return n}});var r=r||{},o=this||self;function s(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function l(t,e,n){return t.call.apply(t.bind,arguments)}function u(t,e,n){return(u=l).apply(null,arguments)}function a(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function c(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Ob=function(t,n,i){for(var r=Array(arguments.length-2),o=2;o<arguments.length;o++)r[o-2]=arguments[o];return e.prototype[n].apply(t,r)}}var h="undefined"!=typeof AsyncContext&&"function"==typeof AsyncContext.Snapshot?t=>t&&AsyncContext.Snapshot.wrap(t):t=>t;function f(t){const e=t.length;if(e>0){const n=Array(e);for(let i=0;i<e;i++)n[i]=t[i];return n}return[]}function d(t,e){for(let i=1;i<arguments.length;i++){const e=arguments[i];var n=typeof e;if("array"==(n="object"!=n?n:e?Array.isArray(e)?"array":n:"null")||"object"==n&&"number"==typeof e.length){n=t.length||0;const i=e.length||0;t.length=n+i;for(let r=0;r<i;r++)t[n+r]=e[r]}else t.push(e)}}function p(t){o.setTimeout(()=>{throw t},0)}function m(){var t=b;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var v=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return this.h>0?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}(()=>new w,t=>t.reset());class w{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}let y,g=!1,b=new class{constructor(){this.h=this.g=null}add(t,e){const n=v.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n}},E=()=>{const t=Promise.resolve(void 0);y=()=>{t.then(S)}};function S(){for(var t;t=m();){try{t.h.call(t.g)}catch(n){p(n)}var e=v;e.j(t),e.h<100&&(e.h++,t.next=e.g,e.g=t)}g=!1}function T(){this.u=this.u,this.C=this.C}function k(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}T.prototype.u=!1,T.prototype.dispose=function(){this.u||(this.u=!0,this.N())},T.prototype[Symbol.dispose]=function(){this.dispose()},T.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},k.prototype.h=function(){this.defaultPrevented=!0};var I=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{const t=()=>{};o.addEventListener("test",t,e),o.removeEventListener("test",t,e)}catch(n){}return t}();function _(t){return/^[\s\xa0]*$/.test(t)}function C(t,e){k.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t&&this.init(t,e)}c(C,k),C.prototype.init=function(t,e){const n=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;this.target=t.target||t.srcElement,this.g=e,(e=t.relatedTarget)||("mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement)),this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=t.pointerType,this.state=t.state,this.i=t,t.defaultPrevented&&C.Z.h.call(this)},C.prototype.h=function(){C.Z.h.call(this);const t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var A="closure_listenable_"+(1e6*Math.random()|0),O=0;function N(t,e,n,i,r){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!i,this.ha=r,this.key=++O,this.da=this.fa=!1}function R(t){t.da=!0,t.listener=null,t.proxy=null,t.src=null,t.ha=null}function P(t,e,n){for(const i in t)e.call(n,t[i],i,t)}function x(t){const e={};for(const n in t)e[n]=t[n];return e}const M="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(t,e){let n,i;for(let r=1;r<arguments.length;r++){for(n in i=arguments[r],i)t[n]=i[n];for(let e=0;e<M.length;e++)n=M[e],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}function L(t){this.src=t,this.g={},this.h=0}function U(t,e){const n=e.type;if(n in t.g){var i,r=t.g[n],o=Array.prototype.indexOf.call(r,e,void 0);(i=o>=0)&&Array.prototype.splice.call(r,o,1),i&&(R(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function F(t,e,n,i){for(let r=0;r<t.length;++r){const o=t[r];if(!o.da&&o.listener==e&&o.capture==!!n&&o.ha==i)return r}return-1}L.prototype.add=function(t,e,n,i,r){const o=t.toString();(t=this.g[o])||(t=this.g[o]=[],this.h++);const s=F(t,e,i,r);return s>-1?(e=t[s],n||(e.fa=!1)):((e=new N(e,this.src,o,!!i,r)).fa=n,t.push(e)),e};var $="closure_lm_"+(1e6*Math.random()|0),j={};function G(t,e,n,i,r){if(Array.isArray(e)){for(let o=0;o<e.length;o++)G(t,e[o],n,i,r);return null}return n=K(n),t&&t[A]?t.J(e,n,!!s(i)&&!!i.capture,r):function(t,e,n,i,r,o){if(!e)throw Error("Invalid event type");const l=s(r)?!!r.capture:!!r;let u=J(t);if(u||(t[$]=u=new L(t)),n=u.add(e,n,i,l,o),n.proxy)return n;if(i=function(){function t(n){return e.call(t.src,t.listener,n)}const e=B;return t}(),n.proxy=i,i.src=t,i.listener=n,t.addEventListener)I||(r=l),void 0===r&&(r=!1),t.addEventListener(e.toString(),i,r);else if(t.attachEvent)t.attachEvent(H(e.toString()),i);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(i)}return n}(t,e,n,!1,i,r)}function V(t,e,n,i,r){if(Array.isArray(e))for(var o=0;o<e.length;o++)V(t,e[o],n,i,r);else i=s(i)?!!i.capture:!!i,n=K(n),t&&t[A]?(t=t.i,(o=String(e).toString())in t.g&&((n=F(e=t.g[o],n,i,r))>-1&&(R(e[n]),Array.prototype.splice.call(e,n,1),0==e.length&&(delete t.g[o],t.h--)))):t&&(t=J(t))&&(e=t.g[e.toString()],t=-1,e&&(t=F(e,n,i,r)),(n=t>-1?e[t]:null)&&q(n))}function q(t){if("number"!=typeof t&&t&&!t.da){var e=t.src;if(e&&e[A])U(e.i,t);else{var n=t.type,i=t.proxy;e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent(H(n),i):e.addListener&&e.removeListener&&e.removeListener(i),(n=J(e))?(U(n,t),0==n.h&&(n.src=null,e[$]=null)):R(t)}}}function H(t){return t in j?j[t]:j[t]="on"+t}function B(t,e){if(t.da)t=!0;else{e=new C(e,this);const n=t.listener,i=t.ha||t.src;t.fa&&q(t),t=n.call(i,e)}return t}function J(t){return(t=t[$])instanceof L?t:null}var z="__closure_events_fn_"+(1e9*Math.random()>>>0);function K(t){return"function"==typeof t?t:(t[z]||(t[z]=function(e){return t.handleEvent(e)}),t[z])}function W(){T.call(this),this.i=new L(this),this.M=this,this.G=null}function Y(t,e){var n,i=t.G;if(i)for(n=[];i;i=i.G)n.push(i);if(t=t.M,i=e.type||e,"string"==typeof e)e=new k(e,t);else if(e instanceof k)e.target=e.target||t;else{var r=e;D(e=new k(i,t),r)}let o,s;if(r=!0,n)for(s=n.length-1;s>=0;s--)o=e.g=n[s],r=X(o,i,!0,e)&&r;if(o=e.g=t,r=X(o,i,!0,e)&&r,r=X(o,i,!1,e)&&r,n)for(s=0;s<n.length;s++)o=e.g=n[s],r=X(o,i,!1,e)&&r}function X(t,e,n,i){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();let r=!0;for(let o=0;o<e.length;++o){const s=e[o];if(s&&!s.da&&s.capture==n){const e=s.listener,n=s.ha||s.src;s.fa&&U(t.i,s),r=!1!==e.call(n,i)&&r}}return r&&!i.defaultPrevented}function Q(t){t.g=function(t,e){if("function"!=typeof t){if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=u(t.handleEvent,t)}return Number(e)>2147483647?-1:o.setTimeout(t,e||0)}(()=>{t.g=null,t.i&&(t.i=!1,Q(t))},t.l);const e=t.h;t.h=null,t.m.apply(null,e)}c(W,T),W.prototype[A]=!0,W.prototype.removeEventListener=function(t,e,n,i){V(this,t,e,n,i)},W.prototype.N=function(){if(W.Z.N.call(this),this.i){var t=this.i;for(const e in t.g){const n=t.g[e];for(let t=0;t<n.length;t++)R(n[t]);delete t.g[e],t.h--}}this.G=null},W.prototype.J=function(t,e,n,i){return this.i.add(String(t),e,!1,n,i)},W.prototype.K=function(t,e,n,i){return this.i.add(String(t),e,!0,n,i)};class Z extends T{constructor(t,e){super(),this.m=t,this.l=e,this.h=null,this.i=!1,this.g=null}j(t){this.h=arguments,this.g?this.i=!0:Q(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function tt(t){T.call(this),this.h=t,this.g={}}c(tt,T);var et=[];function nt(t){P(t.g,function(t,e){this.g.hasOwnProperty(e)&&q(t)},t),t.g={}}tt.prototype.N=function(){tt.Z.N.call(this),nt(this)},tt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var it=o.JSON.stringify,rt=o.JSON.parse,ot=class{stringify(t){return o.JSON.stringify(t,void 0)}parse(t){return o.JSON.parse(t,void 0)}};function st(){}function lt(){}var ut={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function at(){k.call(this,"d")}function ct(){k.call(this,"c")}c(at,k),c(ct,k);var ht={},ft=null;function dt(){return ft=ft||new W}function pt(t){k.call(this,ht.Ia,t)}function mt(t){const e=dt();Y(e,new pt(e))}function vt(t,e){k.call(this,ht.STAT_EVENT,t),this.stat=e}function wt(t){const e=dt();Y(e,new vt(e,t))}function yt(t,e){k.call(this,ht.Ja,t),this.size=e}function gt(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){t()},e)}function bt(){this.g=!0}function Et(t,e,n,i){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{const o=JSON.parse(e);if(o)for(t=0;t<o.length;t++)if(Array.isArray(o[t])){var n=o[t];if(!(n.length<2)){var i=n[1];if(Array.isArray(i)&&!(i.length<1)){var r=i[0];if("noop"!=r&&"stop"!=r&&"close"!=r)for(let t=1;t<i.length;t++)i[t]=""}}}return it(o)}catch(o){return e}}(t,n)+(i?" "+i:"")})}ht.Ia="serverreachability",c(pt,k),ht.STAT_EVENT="statevent",c(vt,k),ht.Ja="timingevent",c(yt,k),bt.prototype.ua=function(){this.g=!1},bt.prototype.info=function(){};var St,Tt={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},kt={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"};function It(){}function _t(t){return encodeURIComponent(String(t))}function Ct(t){var e=1;t=t.split(":");const n=[];for(;e>0&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function At(t,e,n,i){this.j=t,this.i=e,this.l=n,this.S=i||1,this.V=new tt(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ot}function Ot(){this.i=null,this.g="",this.h=!1}c(It,st),It.prototype.g=function(){return new XMLHttpRequest},St=new It;var Nt={},Rt={};function Pt(t,e,n){t.M=1,t.A=ie(Qt(e)),t.u=n,t.R=!0,xt(t,null)}function xt(t,e){t.F=Date.now(),Lt(t),t.B=Qt(t.A);var n=t.B,i=t.S;Array.isArray(i)||(i=[String(i)]),we(n.i,"t",i),t.C=0,n=t.j.L,t.h=new Ot,t.g=dn(t.j,n?e:null,!t.u),t.P>0&&(t.O=new Z(u(t.Y,t,t.g),t.P)),e=t.V,n=t.g,i=t.ba;var r="readystatechange";Array.isArray(r)||(r&&(et[0]=r.toString()),r=et);for(let o=0;o<r.length;o++){const t=G(n,r[o],i||e.handleEvent,!1,e.h||e);if(!t)break;e.g[t.key]=t}e=t.J?x(t.J):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.B,t.v,t.u,e)):(t.v="GET",t.g.ea(t.B,t.v,null,e)),mt(),function(t,e,n,i,r,o){t.info(function(){if(t.g)if(o){var s="",l=o.split("&");for(let t=0;t<l.length;t++){var u=l[t].split("=");if(u.length>1){const t=u[0];u=u[1];const e=t.split("_");s=e.length>=2&&"type"==e[1]?s+(t+"=")+u+"&":s+(t+"=redacted&")}}}else s=null;else s=o;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+"\n"+n+"\n"+s})}(t.i,t.v,t.B,t.l,t.S,t.u)}function Mt(t){return!!t.g&&("GET"==t.v&&2!=t.M&&t.j.Aa)}function Dt(t,e){var n=t.C,i=e.indexOf("\n",n);return-1==i?Rt:(n=Number(e.substring(n,i)),isNaN(n)?Nt:(i+=1)+n>e.length?Rt:(e=e.slice(i,i+n),t.C=i+n,e))}function Lt(t){t.T=Date.now()+t.H,Ut(t,t.H)}function Ut(t,e){if(null!=t.D)throw Error("WatchDog timer not null");t.D=gt(u(t.aa,t),e)}function Ft(t){t.D&&(o.clearTimeout(t.D),t.D=null)}function $t(t){0==t.j.I||t.K||un(t.j,t)}function jt(t){Ft(t);var e=t.O;e&&"function"==typeof e.dispose&&e.dispose(),t.O=null,nt(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.dispose())}function Gt(t,e){try{var n=t.j;if(0!=n.I&&(n.g==t||Jt(n.h,t)))if(!t.L&&Jt(n.h,t)&&3==n.I){try{var i=n.Ba.g.parse(e)}catch(c){i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){t:if(!n.v){if(n.g){if(!(n.g.F+3e3<t.F))break t;ln(n),Ye(n)}rn(n),wt(18)}}else n.xa=r[1],0<n.xa-n.K&&r[2]<37500&&n.F&&0==n.A&&!n.C&&(n.C=gt(u(n.Va,n),6e3));Bt(n.h)<=1&&n.ta&&(n.ta=void 0)}else cn(n,11)}else if((t.L||n.g==t)&&ln(n),!_(e))for(r=n.Ba.g.parse(e),e=0;e<r.length;e++){let u=r[e];const c=u[0];if(!(c<=n.K))if(n.K=c,u=u[1],2==n.I)if("c"==u[0]){n.M=u[1],n.ba=u[2];const e=u[3];null!=e&&(n.ka=e,n.j.info("VER="+n.ka));const r=u[4];null!=r&&(n.za=r,n.j.info("SVER="+n.za));const c=u[5];null!=c&&"number"==typeof c&&c>0&&(i=1.5*c,n.O=i,n.j.info("backChannelRequestTimeoutMs_="+i)),i=n;const h=t.g;if(h){const t=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(t){var o=i.h;o.g||-1==t.indexOf("spdy")&&-1==t.indexOf("quic")&&-1==t.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(zt(o,o.h),o.h=null))}if(i.G){const t=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;t&&(i.wa=t,ne(i.J,i.G,t))}}n.I=3,n.l&&n.l.ra(),n.aa&&(n.T=Date.now()-t.F,n.j.info("Handshake RTT: "+n.T+"ms"));var s=t;if((i=n).na=fn(i,i.L?i.ba:null,i.W),s.L){Kt(i.h,s);var l=s,a=i.O;a&&(l.H=a),l.D&&(Ft(l),Lt(l)),i.g=s}else nn(i);n.i.length>0&&Qe(n)}else"stop"!=u[0]&&"close"!=u[0]||cn(n,7);else 3==n.I&&("stop"==u[0]||"close"==u[0]?"stop"==u[0]?cn(n,7):We(n):"noop"!=u[0]&&n.l&&n.l.qa(u),n.A=0)}mt()}catch(c){}}At.prototype.ba=function(t){t=t.target;const e=this.O;e&&3==Be(t)?e.j():this.Y(t)},At.prototype.Y=function(t){try{if(t==this.g)t:{const u=Be(this.g),a=this.g.ya();this.g.ca();if(!(u<3)&&(3!=u||this.g&&(this.h.h||this.g.la()||Je(this.g)))){this.K||4!=u||7==a||mt(),Ft(this);var e=this.g.ca();this.X=e;var n=function(t){if(!Mt(t))return t.g.la();const e=Je(t.g);if(""===e)return"";let n="";const i=e.length,r=4==Be(t.g);if(!t.h.i){if("undefined"==typeof TextDecoder)return jt(t),$t(t),"";t.h.i=new o.TextDecoder}for(let o=0;o<i;o++)t.h.h=!0,n+=t.h.i.decode(e[o],{stream:!(r&&o==i-1)});return e.length=0,t.h.g+=n,t.C=0,t.h.g}(this);if(this.o=200==e,function(t,e,n,i,r,o,s){t.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+"\n"+n+"\n"+o+" "+s})}(this.i,this.v,this.B,this.l,this.S,u,e),this.o){if(this.U&&!this.L){e:{if(this.g){var i,r=this.g;if((i=r.g?r.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(i)){var s=i;break e}}s=null}if(!(t=s)){this.o=!1,this.m=3,wt(12),jt(this),$t(this);break t}Et(this.i,this.l,t,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Gt(this,t)}if(this.R){let e;for(t=!0;!this.K&&this.C<n.length;){if(e=Dt(this,n),e==Rt){4==u&&(this.m=4,wt(14),t=!1),Et(this.i,this.l,null,"[Incomplete Response]");break}if(e==Nt){this.m=4,wt(15),Et(this.i,this.l,n,"[Invalid Chunk]"),t=!1;break}Et(this.i,this.l,e,null),Gt(this,e)}if(Mt(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=u||0!=n.length||this.h.h||(this.m=1,wt(16),t=!1),this.o=this.o&&t,t){if(n.length>0&&!this.W){this.W=!0;var l=this.j;l.g==this&&l.aa&&!l.P&&(l.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),on(l),l.P=!0,wt(11))}}else Et(this.i,this.l,n,"[Invalid Chunked Response]"),jt(this),$t(this)}else Et(this.i,this.l,n,null),Gt(this,n);4==u&&jt(this),this.o&&!this.K&&(4==u?un(this.j,this):(this.o=!1,Lt(this)))}else(function(t){const e={};t=(t.g&&Be(t)>=2&&t.g.getAllResponseHeaders()||"").split("\r\n");for(let i=0;i<t.length;i++){if(_(t[i]))continue;var n=Ct(t[i]);const r=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const o=e[r]||[];e[r]=o,o.push(n)}!function(t,e){for(const n in t)e.call(void 0,t[n],n,t)}(e,function(t){return t.join(", ")})})(this.g),400==e&&n.indexOf("Unknown SID")>0?(this.m=3,wt(12)):(this.m=0,wt(13)),jt(this),$t(this)}}}catch(u){}},At.prototype.cancel=function(){this.K=!0,jt(this)},At.prototype.aa=function(){this.D=null;const t=Date.now();t-this.T>=0?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.i,this.B),2!=this.M&&(mt(),wt(17)),jt(this),this.m=2,$t(this)):Ut(this,this.T-t)};var Vt=class{constructor(t,e){this.g=t,this.map=e}};function qt(t){this.l=t||10,o.PerformanceNavigationTiming?t=(t=o.performance.getEntriesByType("navigation")).length>0&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=t?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ht(t){return!!t.h||!!t.g&&t.g.size>=t.j}function Bt(t){return t.h?1:t.g?t.g.size:0}function Jt(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function zt(t,e){t.g?t.g.add(e):t.h=e}function Kt(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function Wt(t){if(null!=t.h)return t.i.concat(t.h.G);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.G);return e}return f(t.i)}qt.prototype.cancel=function(){if(this.i=Wt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}};var Yt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Xt(t){let e;this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1,t instanceof Xt?(this.l=t.l,Zt(this,t.j),this.o=t.o,this.g=t.g,te(this,t.u),this.h=t.h,ee(this,ye(t.i)),this.m=t.m):t&&(e=String(t).match(Yt))?(this.l=!1,Zt(this,e[1]||"",!0),this.o=re(e[2]||""),this.g=re(e[3]||"",!0),te(this,e[4]),this.h=re(e[5]||"",!0),ee(this,e[6]||"",!0),this.m=re(e[7]||"")):(this.l=!1,this.i=new fe(null,this.l))}function Qt(t){return new Xt(t)}function Zt(t,e,n){t.j=n?re(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function te(t,e){if(e){if(e=Number(e),isNaN(e)||e<0)throw Error("Bad port number "+e);t.u=e}else t.u=null}function ee(t,e,n){e instanceof fe?(t.i=e,function(t,e){e&&!t.j&&(de(t),t.i=null,t.g.forEach(function(t,e){const n=e.toLowerCase();e!=n&&(pe(this,e),we(this,n,t))},t)),t.j=e}(t.i,t.l)):(n||(e=oe(e,ce)),t.i=new fe(e,t.l))}function ne(t,e,n){t.i.set(e,n)}function ie(t){return ne(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function re(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function oe(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,se),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function se(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Xt.prototype.toString=function(){const t=[];var e=this.j;e&&t.push(oe(e,le,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.o)&&t.push(oe(e,le,!0),"@"),t.push(_t(n).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.u)&&t.push(":",String(n))),(n=this.h)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(oe(n,"/"==n.charAt(0)?ae:ue,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.m)&&t.push("#",oe(n,he)),t.join("")},Xt.prototype.resolve=function(t){const e=Qt(this);let n=!!t.j;n?Zt(e,t.j):n=!!t.o,n?e.o=t.o:n=!!t.g,n?e.g=t.g:n=null!=t.u;var i=t.h;if(n)te(e,t.u);else if(n=!!t.h){if("/"!=i.charAt(0))if(this.g&&!this.h)i="/"+i;else{var r=e.h.lastIndexOf("/");-1!=r&&(i=e.h.slice(0,r+1)+i)}if(".."==(r=i)||"."==r)i="";else if(-1!=r.indexOf("./")||-1!=r.indexOf("/.")){i=0==r.lastIndexOf("/",0),r=r.split("/");const t=[];for(let e=0;e<r.length;){const n=r[e++];"."==n?i&&e==r.length&&t.push(""):".."==n?((t.length>1||1==t.length&&""!=t[0])&&t.pop(),i&&e==r.length&&t.push("")):(t.push(n),i=!0)}i=t.join("/")}else i=r}return n?e.h=i:n=""!==t.i.toString(),n?ee(e,ye(t.i)):n=!!t.m,n&&(e.m=t.m),e};var le=/[#\/\?@]/g,ue=/[#\?:]/g,ae=/[#\?]/g,ce=/[#\?@]/g,he=/#/g;function fe(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function de(t){t.g||(t.g=new Map,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(let n=0;n<t.length;n++){const i=t[n].indexOf("=");let r,o=null;i>=0?(r=t[n].substring(0,i),o=t[n].substring(i+1)):r=t[n],e(r,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function pe(t,e){de(t),e=ge(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function me(t,e){return de(t),e=ge(t,e),t.g.has(e)}function ve(t,e){de(t);let n=[];if("string"==typeof e)me(t,e)&&(n=n.concat(t.g.get(ge(t,e))));else for(t=Array.from(t.g.values()),e=0;e<t.length;e++)n=n.concat(t[e]);return n}function we(t,e,n){pe(t,e),n.length>0&&(t.i=null,t.g.set(ge(t,e),f(n)),t.h+=n.length)}function ye(t){const e=new fe;return e.i=t.i,t.g&&(e.g=new Map(t.g),e.h=t.h),e}function ge(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function be(t,e,n,i,r){try{r&&(r.onload=null,r.onerror=null,r.onabort=null,r.ontimeout=null),i(n)}catch(o){}}function Ee(){this.g=new ot}function Se(t){this.i=t.Sb||null,this.h=t.ab||!1}function Te(t,e){W.call(this),this.H=t,this.o=e,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}function ke(t){t.j.read().then(t.Ma.bind(t)).catch(t.ga.bind(t))}function Ie(t){t.readyState=4,t.l=null,t.j=null,t.B=null,_e(t)}function _e(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function Ce(t){let e="";return P(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}function Ae(t,e,n){t:{for(i in n){var i=!1;break t}i=!0}i||(n=Ce(n),"string"==typeof t?null!=n&&_t(n):ne(t,e,n))}function Oe(t){W.call(this),this.headers=new Map,this.L=t||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}(t=fe.prototype).add=function(t,e){de(this),this.i=null,t=ge(this,t);let n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},t.forEach=function(t,e){de(this),this.g.forEach(function(n,i){n.forEach(function(n){t.call(e,n,i,this)},this)},this)},t.set=function(t,e){return de(this),this.i=null,me(this,t=ge(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},t.get=function(t,e){return t&&(t=ve(this,t)).length>0?String(t[0]):e},t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(let i=0;i<e.length;i++){var n=e[i];const r=_t(n);n=ve(this,n);for(let e=0;e<n.length;e++){let i=r;""!==n[e]&&(i+="="+_t(n[e])),t.push(i)}}return this.i=t.join("&")},c(Se,st),Se.prototype.g=function(){return new Te(this.i,this.h)},c(Te,W),(t=Te.prototype).open=function(t,e){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.F=t,this.D=e,this.readyState=1,_e(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const e={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};t&&(e.body=t),(this.H||o).fetch(new Request(this.D,e)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&4!=this.readyState&&(this.g=!1,Ie(this)),this.readyState=0},t.Pa=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,_e(this)),this.g&&(this.readyState=3,_e(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(void 0!==o.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ke(this)}else t.text().then(this.Oa.bind(this),this.ga.bind(this))},t.Ma=function(t){if(this.g){if(this.o&&t.value)this.response.push(t.value);else if(!this.o){var e=t.value?t.value:new Uint8Array(0);(e=this.B.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Ie(this):_e(this),3==this.readyState&&ke(this)}},t.Oa=function(t){this.g&&(this.response=this.responseText=t,Ie(this))},t.Na=function(t){this.g&&(this.response=t,Ie(this))},t.ga=function(){this.g&&Ie(this)},t.setRequestHeader=function(t,e){this.A.append(t,e)},t.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(Te.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}}),c(Oe,W);var Ne=/^https?$/i,Re=["POST","PUT"];function Pe(t,e){t.h=!1,t.g&&(t.j=!0,t.g.abort(),t.j=!1),t.l=e,t.o=5,xe(t),He(t)}function xe(t){t.A||(t.A=!0,Y(t,"complete"),Y(t,"error"))}function Me(t){if(t.h&&void 0!==r)if(t.v&&4==Be(t))setTimeout(t.Ca.bind(t),0);else if(Y(t,"readystatechange"),4==Be(t)){t.h=!1;try{const r=t.ca();t:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}var n;if(!(n=e)){var i;if(i=0===r){let e=String(t.D).match(Yt)[1]||null;!e&&o.self&&o.self.location&&(e=o.self.location.protocol.slice(0,-1)),i=!Ne.test(e?e.toLowerCase():"")}n=i}if(n)Y(t,"complete"),Y(t,"success");else{t.o=6;try{var s=Be(t)>2?t.g.statusText:""}catch(l){s=""}t.l=s+" ["+t.ca()+"]",xe(t)}}finally{He(t)}}}function He(t,e){if(t.g){t.m&&(clearTimeout(t.m),t.m=null);const i=t.g;t.g=null,e||Y(t,"ready");try{i.onreadystatechange=null}catch(n){}}}function Be(t){return t.g?t.g.readyState:0}function Je(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.F){case"":case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(e){return null}}function ze(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Ke(t){this.za=0,this.i=[],this.j=new bt,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ze("failFast",!1,t),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ze("baseRetryDelayMs",5e3,t),this.Za=ze("retryDelaySeedMs",1e4,t),this.Ta=ze("forwardChannelMaxRetries",2,t),this.va=ze("forwardChannelRequestTimeoutMs",2e4,t),this.ma=t&&t.xmlHttpFactory||void 0,this.Ua=t&&t.Rb||void 0,this.Aa=t&&t.useFetchStreams||!1,this.O=void 0,this.L=t&&t.supportsCrossDomainXhr||!1,this.M="",this.h=new qt(t&&t.concurrentRequestLimit),this.Ba=new Ee,this.S=t&&t.fastHandshake||!1,this.R=t&&t.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=t&&t.Pb||!1,t&&t.ua&&this.j.ua(),t&&t.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&t&&t.detectBufferingProxy||!1,this.ia=void 0,t&&t.longPollingTimeout&&t.longPollingTimeout>0&&(this.ia=t.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}function We(t){if(Xe(t),3==t.I){var e=t.V++,n=Qt(t.J);if(ne(n,"SID",t.M),ne(n,"RID",e),ne(n,"TYPE","terminate"),tn(t,n),(e=new At(t,t.j,e)).M=2,e.A=ie(Qt(n)),n=!1,o.navigator&&o.navigator.sendBeacon)try{n=o.navigator.sendBeacon(e.A.toString(),"")}catch(i){}!n&&o.Image&&((new Image).src=e.A,n=!0),n||(e.g=dn(e.j,null),e.g.ea(e.A)),e.F=Date.now(),Lt(e)}hn(t)}function Ye(t){t.g&&(on(t),t.g.cancel(),t.g=null)}function Xe(t){Ye(t),t.v&&(o.clearTimeout(t.v),t.v=null),ln(t),t.h.cancel(),t.m&&("number"==typeof t.m&&o.clearTimeout(t.m),t.m=null)}function Qe(t){if(!Ht(t.h)&&!t.m){t.m=!0;var e=t.Ea;y||E(),g||(y(),g=!0),b.add(e,t),t.D=0}}function Ze(t,e){var n;n=e?e.l:t.V++;const i=Qt(t.J);ne(i,"SID",t.M),ne(i,"RID",n),ne(i,"AID",t.K),tn(t,i),t.u&&t.o&&Ae(i,t.u,t.o),n=new At(t,t.j,n,t.D+1),null===t.u&&(n.J=t.o),e&&(t.i=e.G.concat(t.i)),e=en(t,n,1e3),n.H=Math.round(.5*t.va)+Math.round(.5*t.va*Math.random()),zt(t.h,n),Pt(n,i,e)}function tn(t,e){t.H&&P(t.H,function(t,n){ne(e,n,t)}),t.l&&P({},function(t,n){ne(e,n,t)})}function en(t,e,n){n=Math.min(t.i.length,n);const i=t.l?u(t.l.Ka,t.l,t):null;t:{var r=t.i;let e=-1;for(;;){const t=["count="+n];-1==e?n>0?(e=r[0].g,t.push("ofs="+e)):e=0:t.push("ofs="+e);let u=!0;for(let c=0;c<n;c++){var o=r[c].g;const n=r[c].map;if((o-=e)<0)e=Math.max(0,r[c].g-100),u=!1;else try{o="req"+o+"_"||"";try{var l=n instanceof Map?n:Object.entries(n);for(const[e,n]of l){let i=n;s(n)&&(i=it(n)),t.push(o+e+"="+encodeURIComponent(i))}}catch(a){throw t.push(o+"type="+encodeURIComponent("_badmap")),a}}catch(a){i&&i(n)}}if(u){l=t.join("&");break t}}l=void 0}return t=t.i.splice(0,n),e.G=t,l}function nn(t){if(!t.g&&!t.v){t.Y=1;var e=t.Da;y||E(),g||(y(),g=!0),b.add(e,t),t.A=0}}function rn(t){return!(t.g||t.v||t.A>=3)&&(t.Y++,t.v=gt(u(t.Da,t),an(t,t.A)),t.A++,!0)}function on(t){null!=t.B&&(o.clearTimeout(t.B),t.B=null)}function sn(t){t.g=new At(t,t.j,"rpc",t.Y),null===t.u&&(t.g.J=t.o),t.g.P=0;var e=Qt(t.na);ne(e,"RID","rpc"),ne(e,"SID",t.M),ne(e,"AID",t.K),ne(e,"CI",t.F?"0":"1"),!t.F&&t.ia&&ne(e,"TO",t.ia),ne(e,"TYPE","xmlhttp"),tn(t,e),t.u&&t.o&&Ae(e,t.u,t.o),t.O&&(t.g.H=t.O);var n=t.g;t=t.ba,n.M=1,n.A=ie(Qt(e)),n.u=null,n.R=!0,xt(n,t)}function ln(t){null!=t.C&&(o.clearTimeout(t.C),t.C=null)}function un(t,e){var n=null;if(t.g==e){ln(t),on(t),t.g=null;var i=2}else{if(!Jt(t.h,e))return;n=e.G,Kt(t.h,e),i=1}if(0!=t.I)if(e.o)if(1==i){n=e.u?e.u.length:0,e=Date.now()-e.F;var r=t.D;Y(i=dt(),new yt(i,n)),Qe(t)}else nn(t);else if(3==(r=e.m)||0==r&&e.X>0||!(1==i&&function(t,e){return!(Bt(t.h)>=t.h.j-(t.m?1:0)||(t.m?(t.i=e.G.concat(t.i),0):1==t.I||2==t.I||t.D>=(t.Sa?0:t.Ta)||(t.m=gt(u(t.Ea,t,e),an(t,t.D)),t.D++,0)))}(t,e)||2==i&&rn(t)))switch(n&&n.length>0&&(e=t.h,e.i=e.i.concat(n)),r){case 1:cn(t,5);break;case 4:cn(t,10);break;case 3:cn(t,6);break;default:cn(t,2)}}function an(t,e){let n=t.Qa+Math.floor(Math.random()*t.Za);return t.isActive()||(n*=2),n*e}function cn(t,e){if(t.j.info("Error code "+e),2==e){var n=u(t.bb,t),i=t.Ua;const e=!i;i=new Xt(i||"//www.google.com/images/cleardot.gif"),o.location&&"http"==o.location.protocol||Zt(i,"https"),ie(i),e?function(t,e){const n=new bt;if(o.Image){const i=new Image;i.onload=a(be,n,"TestLoadImage: loaded",!0,e,i),i.onerror=a(be,n,"TestLoadImage: error",!1,e,i),i.onabort=a(be,n,"TestLoadImage: abort",!1,e,i),i.ontimeout=a(be,n,"TestLoadImage: timeout",!1,e,i),o.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=t}else e(!1)}(i.toString(),n):function(t,e){new bt;const n=new AbortController,i=setTimeout(()=>{n.abort(),be(0,0,!1,e)},1e4);fetch(t,{signal:n.signal}).then(t=>{clearTimeout(i),t.ok?be(0,0,!0,e):be(0,0,!1,e)}).catch(()=>{clearTimeout(i),be(0,0,!1,e)})}(i.toString(),n)}else wt(2);t.I=0,t.l&&t.l.pa(e),hn(t),Xe(t)}function hn(t){if(t.I=0,t.ja=[],t.l){const e=Wt(t.h);0==e.length&&0==t.i.length||(d(t.ja,e),d(t.ja,t.i),t.h.i.length=0,f(t.i),t.i.length=0),t.l.oa()}}function fn(t,e,n){var i=n instanceof Xt?Qt(n):new Xt(n);if(""!=i.g)e&&(i.g=e+"."+i.g),te(i,i.u);else{var r=o.location;i=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;const t=new Xt(null);i&&Zt(t,i),e&&(t.g=e),r&&te(t,r),n&&(t.h=n),i=t}return n=t.G,e=t.wa,n&&e&&ne(i,n,e),ne(i,"VER",t.ka),tn(t,i),i}function dn(t,e,n){if(e&&!t.L)throw Error("Can't create secondary domain capable XhrIo object.");return(e=t.Aa&&!t.ma?new Oe(new Se({ab:n})):new Oe(t.ma)).Fa(t.L),e}function pn(){}function mn(){}function vn(t,e){W.call(this),this.g=new Ke(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.o=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.sa&&(t?t["X-WebChannel-Client-Profile"]=e.sa:t={"X-WebChannel-Client-Profile":e.sa}),this.g.U=t,(t=e&&e.Qb)&&!_(t)&&(this.g.u=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!_(e)&&(this.g.G=e,null!==(t=this.h)&&e in t&&(e in(t=this.h)&&delete t[e])),this.j=new gn(this)}function wn(t){at.call(this),t.bt&&(this.headers=t.bt,this.statusCode=t.kt,delete t.bt,delete t.kt);var e=t.Ct;if(e){t:{for(const n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function yn(){ct.call(this),this.status=1}function gn(t){this.g=t}(t=Oe.prototype).Fa=function(t){this.H=t},t.ea=function(t,e,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+t);e=e?e.toUpperCase():"GET",this.D=t,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():St.g(),this.g.onreadystatechange=h(u(this.Ca,this));try{this.B=!0,this.g.open(e,String(t),!0),this.B=!1}catch(s){return void Pe(this,s)}if(t=n||"",n=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)n.set(r,i[r]);else{if("function"!=typeof i.keys||"function"!=typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const t of i.keys())n.set(t,i.get(t))}i=Array.from(n.keys()).find(t=>"content-type"==t.toLowerCase()),r=o.FormData&&t instanceof o.FormData,!(Array.prototype.indexOf.call(Re,e,void 0)>=0)||i||r||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,l]of n)this.g.setRequestHeader(o,l);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(t),this.v=!1}catch(s){Pe(this,s)}},t.abort=function(t){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=t||7,Y(this,"complete"),Y(this,"abort"),He(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),He(this,!0)),Oe.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Me(this):this.Xa())},t.Xa=function(){Me(this)},t.isActive=function(){return!!this.g},t.ca=function(){try{return Be(this)>2?this.g.status:-1}catch(t){return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch(t){return""}},t.La=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),rt(e)}},t.ya=function(){return this.o},t.Ha=function(){return"string"==typeof this.l?this.l:String(this.l)},(t=Ke.prototype).ka=8,t.I=1,t.connect=function(t,e,n,i){wt(0),this.W=t,this.H=e||{},n&&void 0!==i&&(this.H.OSID=n,this.H.OAID=i),this.F=this.X,this.J=fn(this,null,this.W),Qe(this)},t.Ea=function(t){if(this.m)if(this.m=null,1==this.I){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;const r=new At(this,this.j,t);let o=this.o;if(this.U&&(o?(o=x(o),D(o,this.U)):o=this.U),null!==this.u||this.R||(r.J=o,o=null),this.S)t:{for(var e=0,n=0;n<this.i.length;n++){var i=this.i[n];if(void 0===(i="Ot"in i.map&&"string"==typeof(i=i.map.Ot)?i.length:void 0))break;if((e+=i)>4096){e=n;break t}if(4096===e||n===this.i.length-1){e=n+1;break t}}e=1e3}else e=1e3;e=en(this,r,e),ne(n=Qt(this.J),"RID",t),ne(n,"CVER",22),this.G&&ne(n,"X-HTTP-Session-Id",this.G),tn(this,n),o&&(this.R?e="headers="+_t(Ce(o))+"&"+e:this.u&&Ae(n,this.u,o)),zt(this.h,r),this.Ra&&ne(n,"TYPE","init"),this.S?(ne(n,"$req",e),ne(n,"SID","null"),r.U=!0,Pt(r,n,null)):Pt(r,n,e),this.I=2}}else 3==this.I&&(t?Ze(this,t):0==this.i.length||Ht(this.h)||Ze(this))},t.Da=function(){if(this.v=null,sn(this),this.aa&&!(this.P||null==this.g||this.T<=0)){var t=4*this.T;this.j.info("BP detection timer enabled: "+t),this.B=gt(u(this.Wa,this),t)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,wt(10),Ye(this),sn(this))},t.Va=function(){null!=this.C&&(this.C=null,Ye(this),rn(this),wt(19))},t.bb=function(t){t?(this.j.info("Successfully pinged google.com"),wt(2)):(this.j.info("Failed to ping google.com"),wt(1))},t.isActive=function(){return!!this.l&&this.l.isActive(this)},(t=pn.prototype).ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){},mn.prototype.g=function(t,e){return new vn(t,e)},c(vn,W),vn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},vn.prototype.close=function(){We(this.g)},vn.prototype.o=function(t){var e=this.g;if("string"==typeof t){var n={};n.Ot=t,t=n}else this.v&&((n={}).Ot=it(t),t=n);e.i.push(new Vt(e.Ya++,t)),3==e.I&&Qe(e)},vn.prototype.N=function(){this.g.l=null,delete this.j,We(this.g),delete this.g,vn.Z.N.call(this)},c(wn,at),c(yn,ct),c(gn,pn),gn.prototype.ra=function(){Y(this.g,"a")},gn.prototype.qa=function(t){Y(this.g,new wn(t))},gn.prototype.pa=function(t){Y(this.g,new yn)},gn.prototype.oa=function(){Y(this.g,"b")},mn.prototype.createWebChannel=mn.prototype.g,vn.prototype.send=vn.prototype.o,vn.prototype.open=vn.prototype.m,vn.prototype.close=vn.prototype.close,Ve=function(){return new mn},Ge=function(){return dt()},je=ht,$e={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Tt.NO_ERROR=0,Tt.TIMEOUT=8,Tt.HTTP_ERROR=6,Fe=Tt,kt.COMPLETE="complete",Ue=kt,lt.EventType=ut,ut.OPEN="a",ut.CLOSE="b",ut.ERROR="c",ut.MESSAGE="d",W.prototype.listen=W.prototype.J,Le=lt,Oe.prototype.listenOnce=Oe.prototype.K,Oe.prototype.getLastError=Oe.prototype.Ha,Oe.prototype.getLastErrorCode=Oe.prototype.ya,Oe.prototype.getStatus=Oe.prototype.ca,Oe.prototype.getResponseJson=Oe.prototype.La,Oe.prototype.getResponseText=Oe.prototype.la,Oe.prototype.send=Oe.prototype.ea,Oe.prototype.setWithCredentials=Oe.prototype.Fa,De=Oe}).apply(void 0!==qe?qe:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});const He="@firebase/firestore",Be="4.9.2";class Je{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Je.UNAUTHENTICATED=new Je(null),Je.GOOGLE_CREDENTIALS=new Je("google-credentials-uid"),Je.FIRST_PARTY=new Je("first-party-uid"),Je.MOCK_USER=new Je("mock-user");let ze="12.3.0";const Ke=new pt("@firebase/firestore");function We(){return Ke.logLevel}function Ye(t,...e){if(Ke.logLevel<=ut.DEBUG){const n=e.map(Ze);Ke.debug(`Firestore (${ze}): ${t}`,...n)}}function Xe(t,...e){if(Ke.logLevel<=ut.ERROR){const n=e.map(Ze);Ke.error(`Firestore (${ze}): ${t}`,...n)}}function Qe(t,...e){if(Ke.logLevel<=ut.WARN){const n=e.map(Ze);Ke.warn(`Firestore (${ze}): ${t}`,...n)}}function Ze(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(n){return t}var e}function tn(t,e,n){let i="Unexpected state";"string"==typeof e?i=e:n=e,en(t,i,n)}function en(t,e,n){let i=`FIRESTORE (${ze}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(void 0!==n)try{i+=" CONTEXT: "+JSON.stringify(n)}catch(r){i+=" CONTEXT: "+n}throw Xe(i),new Error(i)}function nn(t,e,n,i){let r="Unexpected state";"string"==typeof n?r=n:i=n,t||en(e,r,i)}function rn(t,e){return t}const on={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class sn extends W{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ln{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}class un{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class an{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(Je.UNAUTHENTICATED))}shutdown(){}}class cn{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class hn{constructor(t){this.t=t,this.currentUser=Je.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){nn(void 0===this.o,42304);let n=this.i;const i=t=>this.i!==n?(n=this.i,e(t)):Promise.resolve();let r=new ln;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new ln,t.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const e=r;t.enqueueRetryable(async()=>{await e.promise,await i(this.currentUser)})},s=t=>{Ye("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=t,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(t=>s(t)),setTimeout(()=>{if(!this.auth){const t=this.t.getImmediate({optional:!0});t?s(t):(Ye("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new ln)}},0),o()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(e=>this.i!==t?(Ye("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):e?(nn("string"==typeof e.accessToken,31837,{l:e}),new un(e.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return nn(null===t||"string"==typeof t,2055,{h:t}),new Je(t)}}class fn{constructor(t,e,n){this.P=t,this.T=e,this.I=n,this.type="FirstParty",this.user=Je.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class dn{constructor(t,e,n){this.P=t,this.T=e,this.I=n}getToken(){return Promise.resolve(new fn(this.P,this.T,this.I))}start(t,e){t.enqueueRetryable(()=>e(Je.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class pn{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class mn{constructor(t,e){this.V=e,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,me(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,e){nn(void 0===this.o,3512);const n=t=>{null!=t.error&&Ye("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${t.error.message}`);const n=t.token!==this.m;return this.m=t.token,Ye("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?e(t.token):Promise.resolve()};this.o=e=>{t.enqueueRetryable(()=>n(e))};const i=t=>{Ye("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=t,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(t=>i(t)),setTimeout(()=>{if(!this.appCheck){const t=this.V.getImmediate({optional:!0});t?i(t):Ye("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new pn(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(t=>t?(nn("string"==typeof t.token,44558,{tokenResult:t}),this.m=t.token,new pn(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function vn(t){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}class wn{static newId(){const t=62*Math.floor(256/62);let e="";for(;e.length<20;){const n=vn(40);for(let i=0;i<n.length;++i)e.length<20&&n[i]<t&&(e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[i]%62))}return e}}function yn(t,e){return t<e?-1:t>e?1:0}function gn(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const n=t.charAt(i),r=e.charAt(i);if(n!==r)return Sn(n)===Sn(r)?yn(n,r):Sn(n)?1:-1}return yn(t.length,e.length)}const bn=55296,En=57343;function Sn(t){const e=t.charCodeAt(0);return e>=bn&&e<=En}function Tn(t,e,n){return t.length===e.length&&t.every((t,i)=>n(t,e[i]))}const kn="__name__";class In{constructor(t,e,n){void 0===e?e=0:e>t.length&&tn(637,{offset:e,range:t.length}),void 0===n?n=t.length-e:n>t.length-e&&tn(1746,{length:n,range:t.length-e}),this.segments=t,this.offset=e,this.len=n}get length(){return this.len}isEqual(t){return 0===In.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof In?t.forEach(t=>{e.push(t)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const n=In.compareSegments(t.get(i),e.get(i));if(0!==n)return n}return yn(t.length,e.length)}static compareSegments(t,e){const n=In.isNumericId(t),i=In.isNumericId(e);return n&&!i?-1:!n&&i?1:n&&i?In.extractNumericId(t).compare(In.extractNumericId(e)):gn(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Pe.fromString(t.substring(4,t.length-2))}}class _n extends In{construct(t,e,n){return new _n(t,e,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const n of t){if(n.indexOf("//")>=0)throw new sn(on.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);e.push(...n.split("/").filter(t=>t.length>0))}return new _n(e)}static emptyPath(){return new _n([])}}const Cn=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class An extends In{construct(t,e,n){return new An(t,e,n)}static isValidIdentifier(t){return Cn.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),An.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===kn}static keyField(){return new An([kn])}static fromServerFormat(t){const e=[];let n="",i=0;const r=()=>{if(0===n.length)throw new sn(on.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(n),n=""};let o=!1;for(;i<t.length;){const e=t[i];if("\\"===e){if(i+1===t.length)throw new sn(on.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const e=t[i+1];if("\\"!==e&&"."!==e&&"`"!==e)throw new sn(on.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=e,i+=2}else"`"===e?(o=!o,i++):"."!==e||o?(n+=e,i++):(r(),i++)}if(r(),o)throw new sn(on.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new An(e)}static emptyPath(){return new An([])}}class On{constructor(t){this.path=t}static fromPath(t){return new On(_n.fromString(t))}static fromName(t){return new On(_n.fromString(t).popFirst(5))}static empty(){return new On(_n.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===_n.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return _n.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new On(new _n(t.slice()))}}function Nn(t,e,n){if(!n)throw new sn(on.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Rn(t){if(!On.isDocumentKey(t))throw new sn(on.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Pn(t){if(On.isDocumentKey(t))throw new sn(on.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function xn(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}function Mn(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const n=(e=t).constructor?e.constructor.name:null;return n?`a custom ${n} object`:"an object"}}var e;return"function"==typeof t?"a function":tn(12329,{type:typeof t})}function Dn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new sn(on.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Mn(t);throw new sn(on.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Ln(t,e){const n={typeString:t};return e&&(n.value=e),n}function Un(t,e){if(!xn(t))throw new sn(on.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const r=e[i].typeString,o="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const s=t[i];if(r&&typeof s!==r){n=`JSON field '${i}' must be a ${r}.`;break}if(void 0!==o&&s!==o.value){n=`Expected '${i}' field to equal '${o.value}'`;break}}if(n)throw new sn(on.INVALID_ARGUMENT,n);return!0}const Fn=-62135596800,$n=1e6;class jn{static now(){return jn.fromMillis(Date.now())}static fromDate(t){return jn.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),n=Math.floor((t-1e3*e)*$n);return new jn(e,n)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new sn(on.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new sn(on.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<Fn)throw new sn(on.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new sn(on.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/$n}_compareTo(t){return this.seconds===t.seconds?yn(this.nanoseconds,t.nanoseconds):yn(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:jn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Un(t,jn._jsonSchema))return new jn(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-Fn;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}jn._jsonSchemaVersion="firestore/timestamp/1.0",jn._jsonSchema={type:Ln("string",jn._jsonSchemaVersion),seconds:Ln("number"),nanoseconds:Ln("number")};class Gn{static fromTimestamp(t){return new Gn(t)}static min(){return new Gn(new jn(0,0))}static max(){return new Gn(new jn(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function Vn(t){return new qn(t.readTime,t.key,-1)}class qn{constructor(t,e,n){this.readTime=t,this.documentKey=e,this.largestBatchId=n}static min(){return new qn(Gn.min(),On.empty(),-1)}static max(){return new qn(Gn.max(),On.empty(),-1)}}function Hn(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=On.comparator(t.documentKey,e.documentKey),0!==n?n:yn(t.largestBatchId,e.largestBatchId))}class Bn{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}async function Jn(t){if(t.code!==on.FAILED_PRECONDITION||"The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab."!==t.message)throw t;Ye("LocalStore","Unexpectedly lost primary lease")}class zn{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&tn(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new zn((n,i)=>{this.nextCallback=e=>{this.wrapSuccess(t,e).next(n,i)},this.catchCallback=t=>{this.wrapFailure(e,t).next(n,i)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof zn?e:zn.resolve(e)}catch(e){return zn.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):zn.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):zn.reject(e)}static resolve(t){return new zn((e,n)=>{e(t)})}static reject(t){return new zn((e,n)=>{n(t)})}static waitFor(t){return new zn((e,n)=>{let i=0,r=0,o=!1;t.forEach(t=>{++i,t.next(()=>{++r,o&&r===i&&e()},t=>n(t))}),o=!0,r===i&&e()})}static or(t){let e=zn.resolve(!1);for(const n of t)e=e.next(t=>t?zn.resolve(t):n());return e}static forEach(t,e){const n=[];return t.forEach((t,i)=>{n.push(e.call(this,t,i))}),this.waitFor(n)}static mapArray(t,e){return new zn((n,i)=>{const r=t.length,o=new Array(r);let s=0;for(let l=0;l<r;l++){const u=l;e(t[u]).next(t=>{o[u]=t,++s,s===r&&n(o)},t=>i(t))}})}static doWhile(t,e){return new zn((n,i)=>{const r=()=>{!0===t()?e().next(()=>{r()},i):n()};r()})}}function Kn(t){return"IndexedDbTransactionError"===t.name}class Wn{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=t=>this.ae(t),this.ue=t=>e.writeSequenceNumber(t))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}Wn.ce=-1;function Yn(t){return null==t}function Xn(t){return 0===t&&1/t==-1/0}function Qn(t,e){let n=e;const i=t.length;for(let r=0;r<i;r++){const e=t.charAt(r);switch(e){case"\0":n+="";break;case"":n+="";break;default:n+=e}}return n}function Zn(t){return t+""}function ti(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ei(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function ni(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class ii{constructor(t,e){this.comparator=t,this.root=e||oi.EMPTY}insert(t,e){return new ii(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,oi.BLACK,null,null))}remove(t){return new ii(this.comparator,this.root.remove(t,this.comparator).copy(null,null,oi.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}indexOf(t){let e=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(0===i)return e+n.left.size;i<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,n)=>(t(e,n),!1))}toString(){const t=[];return this.inorderTraversal((e,n)=>(t.push(`${e}:${n}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new ri(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new ri(this.root,t,this.comparator,!1)}getReverseIterator(){return new ri(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new ri(this.root,t,this.comparator,!0)}}class ri{constructor(t,e,n,i){this.isReverse=i,this.nodeStack=[];let r=1;for(;!t.isEmpty();)if(r=e?n(t.key,e):1,e&&i&&(r*=-1),r<0)t=this.isReverse?t.left:t.right;else{if(0===r){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class oi{constructor(t,e,n,i,r){this.key=t,this.value=e,this.color=null!=n?n:oi.RED,this.left=null!=i?i:oi.EMPTY,this.right=null!=r?r:oi.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,n,i,r){return new oi(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=i?i:this.left,null!=r?r:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let i=this;const r=n(t,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(t,e,n),null):0===r?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return oi.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let n,i=this;if(e(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,e),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===e(t,i.key)){if(i.right.isEmpty())return oi.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,e))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,oi.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,oi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw tn(43730,{key:this.key,value:this.value});if(this.right.isRed())throw tn(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw tn(27949);return t+(this.isRed()?0:1)}}oi.EMPTY=null,oi.RED=!0,oi.BLACK=!1,oi.EMPTY=new class{constructor(){this.size=0}get key(){throw tn(57766)}get value(){throw tn(16141)}get color(){throw tn(16727)}get left(){throw tn(29726)}get right(){throw tn(36894)}copy(t,e,n,i,r){return this}insert(t,e,n){return new oi(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class si{constructor(t){this.comparator=t,this.data=new ii(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,n)=>(t(e),!1))}forEachInRange(t,e){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,t[1])>=0)return;e(i.key)}}forEachWhile(t,e){let n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new li(this.data.getIterator())}getIteratorFrom(t){return new li(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(t=>{e=e.add(t)}),e}isEqual(t){if(!(t instanceof si))return!1;if(this.size!==t.size)return!1;const e=this.data.getIterator(),n=t.data.getIterator();for(;e.hasNext();){const t=e.getNext().key,i=n.getNext().key;if(0!==this.comparator(t,i))return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new si(this.comparator);return e.data=t,e}}class li{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class ui{constructor(t){this.fields=t,t.sort(An.comparator)}static empty(){return new ui([])}unionWith(t){let e=new si(An.comparator);for(const n of this.fields)e=e.add(n);for(const n of t)e=e.add(n);return new ui(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Tn(this.fields,t.fields,(t,e)=>t.isEqual(e))}}class ai extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ci{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(t){try{return atob(t)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new ai("Invalid base64 string: "+e):e}}(t);return new ci(e)}static fromUint8Array(t){const e=function(t){let e="";for(let n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t);return new ci(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return t=this.binaryString,btoa(t);var t}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return yn(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}ci.EMPTY_BYTE_STRING=new ci("");const hi=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function fi(t){if(nn(!!t,39018),"string"==typeof t){let e=0;const n=hi.exec(t);if(nn(!!n,46558,{timestamp:t}),n[1]){let t=n[1];t=(t+"000000000").substr(0,9),e=Number(t)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:di(t.seconds),nanos:di(t.nanos)}}function di(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function pi(t){return"string"==typeof t?ci.fromBase64String(t):ci.fromUint8Array(t)}const mi="server_timestamp",vi="__type__",wi="__previous_value__",yi="__local_write_time__";function gi(t){var e,n;return(null==(n=((null==(e=null==t?void 0:t.mapValue)?void 0:e.fields)||{})[vi])?void 0:n.stringValue)===mi}function bi(t){const e=t.mapValue.fields[wi];return gi(e)?bi(e):e}function Ei(t){const e=fi(t.mapValue.fields[yi].timestampValue);return new jn(e.seconds,e.nanos)}class Si{constructor(t,e,n,i,r,o,s,l,u,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=i,this.ssl=r,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=a}}const Ti="(default)";class ki{constructor(t,e){this.projectId=t,this.database=e||Ti}static empty(){return new ki("","")}get isDefaultDatabase(){return this.database===Ti}isEqual(t){return t instanceof ki&&t.projectId===this.projectId&&t.database===this.database}}const Ii="__type__",_i="__max__",Ci={},Ai="__vector__",Oi="value";function Ni(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?gi(t)?4:function(t){return(((t.mapValue||{}).fields||{}).Nt||{}).stringValue===_i}(t)?9007199254740991:function(t){var e,n;const i=null==(n=((null==(e=null==t?void 0:t.mapValue)?void 0:e.fields)||{})[Ii])?void 0:n.stringValue;return i===Ai}(t)?10:11:tn(28295,{value:t})}function Ri(t,e){if(t===e)return!0;const n=Ni(t);if(n!==Ni(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ei(t).isEqual(Ei(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;const n=fi(t.timestampValue),i=fi(e.timestampValue);return n.seconds===i.seconds&&n.nanos===i.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return i=e,pi(t.bytesValue).isEqual(pi(i.bytesValue));case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return di(t.geoPointValue.latitude)===di(e.geoPointValue.latitude)&&di(t.geoPointValue.longitude)===di(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return di(t.integerValue)===di(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){const n=di(t.doubleValue),i=di(e.doubleValue);return n===i?Xn(n)===Xn(i):isNaN(n)&&isNaN(i)}return!1}(t,e);case 9:return Tn(t.arrayValue.values||[],e.arrayValue.values||[],Ri);case 10:case 11:return function(t,e){const n=t.mapValue.fields||{},i=e.mapValue.fields||{};if(ti(n)!==ti(i))return!1;for(const r in n)if(n.hasOwnProperty(r)&&(void 0===i[r]||!Ri(n[r],i[r])))return!1;return!0}(t,e);default:return tn(52216,{left:t})}var i}function Pi(t,e){return void 0!==(t.values||[]).find(t=>Ri(t,e))}function xi(t,e){if(t===e)return 0;const n=Ni(t),i=Ni(e);if(n!==i)return yn(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return yn(t.booleanValue,e.booleanValue);case 2:return function(t,e){const n=di(t.integerValue||t.doubleValue),i=di(e.integerValue||e.doubleValue);return n<i?-1:n>i?1:n===i?0:isNaN(n)?isNaN(i)?0:-1:1}(t,e);case 3:return Mi(t.timestampValue,e.timestampValue);case 4:return Mi(Ei(t),Ei(e));case 5:return gn(t.stringValue,e.stringValue);case 6:return function(t,e){const n=pi(t),i=pi(e);return n.compareTo(i)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){const n=t.split("/"),i=e.split("/");for(let r=0;r<n.length&&r<i.length;r++){const t=yn(n[r],i[r]);if(0!==t)return t}return yn(n.length,i.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){const n=yn(di(t.latitude),di(e.latitude));return 0!==n?n:yn(di(t.longitude),di(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Di(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n,i,r,o;const s=t.fields||{},l=e.fields||{},u=null==(n=s[Oi])?void 0:n.arrayValue,a=null==(i=l[Oi])?void 0:i.arrayValue,c=yn((null==(r=null==u?void 0:u.values)?void 0:r.length)||0,(null==(o=null==a?void 0:a.values)?void 0:o.length)||0);return 0!==c?c:Di(u,a)}(t.mapValue,e.mapValue);case 11:return function(t,e){if(t===Ci&&e===Ci)return 0;if(t===Ci)return 1;if(e===Ci)return-1;const n=t.fields||{},i=Object.keys(n),r=e.fields||{},o=Object.keys(r);i.sort(),o.sort();for(let s=0;s<i.length&&s<o.length;++s){const t=gn(i[s],o[s]);if(0!==t)return t;const e=xi(n[i[s]],r[o[s]]);if(0!==e)return e}return yn(i.length,o.length)}(t.mapValue,e.mapValue);default:throw tn(23264,{he:n})}}function Mi(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return yn(t,e);const n=fi(t),i=fi(e),r=yn(n.seconds,i.seconds);return 0!==r?r:yn(n.nanos,i.nanos)}function Di(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const t=xi(n[r],i[r]);if(t)return t}return yn(n.length,i.length)}function Li(t){return Ui(t)}function Ui(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){const e=fi(t);return`time(${e.seconds},${e.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?pi(t.bytesValue).toBase64():"referenceValue"in t?function(t){return On.fromName(t).toString()}(t.referenceValue):"geoPointValue"in t?function(t){return`geo(${t.latitude},${t.longitude})`}(t.geoPointValue):"arrayValue"in t?function(t){let e="[",n=!0;for(const i of t.values||[])n?n=!1:e+=",",e+=Ui(i);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){const e=Object.keys(t.fields||{}).sort();let n="{",i=!0;for(const r of e)i?i=!1:n+=",",n+=`${r}:${Ui(t.fields[r])}`;return n+"}"}(t.mapValue):tn(61005,{value:t})}function Fi(t){switch(Ni(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=bi(t);return e?16+Fi(e):16;case 5:return 2*t.stringValue.length;case 6:return pi(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(t.arrayValue.values||[]).reduce((t,e)=>t+Fi(e),0);case 10:case 11:return function(t){let e=0;return ei(t.fields,(t,n)=>{e+=t.length+Fi(n)}),e}(t.mapValue);default:throw tn(13486,{value:t})}}function $i(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function ji(t){return!!t&&"integerValue"in t}function Gi(t){return!!t&&"arrayValue"in t}function Vi(t){return!!t&&"nullValue"in t}function qi(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Hi(t){return!!t&&"mapValue"in t}function Bi(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return ei(t.mapValue.fields,(t,n)=>e.mapValue.fields[t]=Bi(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Bi(t.arrayValue.values[n]);return e}return{...t}}class Ji{constructor(t){this.value=t}static empty(){return new Ji({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let n=0;n<t.length-1;++n)if(e=(e.mapValue.fields||{})[t.get(n)],!Hi(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Bi(e)}setAll(t){let e=An.emptyPath(),n={},i=[];t.forEach((t,r)=>{if(!e.isImmediateParentOf(r)){const t=this.getFieldsMap(e);this.applyChanges(t,n,i),n={},i=[],e=r.popLast()}t?n[r.lastSegment()]=Bi(t):i.push(r.lastSegment())});const r=this.getFieldsMap(e);this.applyChanges(r,n,i)}delete(t){const e=this.field(t.popLast());Hi(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Ri(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let n=0;n<t.length;++n){let i=e.mapValue.fields[t.get(n)];Hi(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=i),e=i}return e.mapValue.fields}applyChanges(t,e,n){ei(e,(e,n)=>t[e]=n);for(const i of n)delete t[i]}clone(){return new Ji(Bi(this.value))}}function zi(t){const e=[];return ei(t.fields,(t,n)=>{const i=new An([t]);if(Hi(n)){const t=zi(n.mapValue).fields;if(0===t.length)e.push(i);else for(const n of t)e.push(i.child(n))}else e.push(i)}),new ui(e)}class Ki{constructor(t,e,n,i,r,o,s){this.key=t,this.documentType=e,this.version=n,this.readTime=i,this.createTime=r,this.data=o,this.documentState=s}static newInvalidDocument(t){return new Ki(t,0,Gn.min(),Gn.min(),Gn.min(),Ji.empty(),0)}static newFoundDocument(t,e,n,i){return new Ki(t,1,e,Gn.min(),n,i,0)}static newNoDocument(t,e){return new Ki(t,2,e,Gn.min(),Gn.min(),Ji.empty(),0)}static newUnknownDocument(t,e){return new Ki(t,3,e,Gn.min(),Gn.min(),Ji.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(Gn.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Ji.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Ji.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Gn.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof Ki&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Ki(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Wi{constructor(t,e){this.position=t,this.inclusive=e}}function Yi(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const o=e[r],s=t.position[r];if(i=o.field.isKeyField()?On.comparator(On.fromName(s.referenceValue),n.key):xi(s,n.data.field(o.field)),"desc"===o.dir&&(i*=-1),0!==i)break}return i}function Xi(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ri(t.position[n],e.position[n]))return!1;return!0}class Qi{constructor(t,e="asc"){this.field=t,this.dir=e}}function Zi(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class tr{}class er extends tr{constructor(t,e,n){super(),this.field=t,this.op=e,this.value=n}static create(t,e,n){return t.isKeyField()?"in"===e||"not-in"===e?this.createKeyFieldInFilter(t,e,n):new ur(t,e,n):"array-contains"===e?new fr(t,n):"in"===e?new dr(t,n):"not-in"===e?new pr(t,n):"array-contains-any"===e?new mr(t,n):new er(t,e,n)}static createKeyFieldInFilter(t,e,n){return"in"===e?new ar(t,n):new cr(t,n)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&void 0===e.nullValue&&this.matchesComparison(xi(e,this.value)):null!==e&&Ni(this.value)===Ni(e)&&this.matchesComparison(xi(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return tn(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class nr extends tr{constructor(t,e){super(),this.filters=t,this.op=e,this.Pe=null}static create(t,e){return new nr(t,e)}matches(t){return ir(this)?void 0===this.filters.find(e=>!e.matches(t)):void 0!==this.filters.find(e=>e.matches(t))}getFlattenedFilters(){return null!==this.Pe||(this.Pe=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function ir(t){return"and"===t.op}function rr(t){return function(t){for(const e of t.filters)if(e instanceof nr)return!1;return!0}(t)&&ir(t)}function or(t){if(t instanceof er)return t.field.canonicalString()+t.op.toString()+Li(t.value);if(rr(t))return t.filters.map(t=>or(t)).join(",");{const e=t.filters.map(t=>or(t)).join(",");return`${t.op}(${e})`}}function sr(t,e){return t instanceof er?(n=t,(i=e)instanceof er&&n.op===i.op&&n.field.isEqual(i.field)&&Ri(n.value,i.value)):t instanceof nr?function(t,e){return e instanceof nr&&t.op===e.op&&t.filters.length===e.filters.length&&t.filters.reduce((t,n,i)=>t&&sr(n,e.filters[i]),!0)}(t,e):void tn(19439);var n,i}function lr(t){return t instanceof er?`${(e=t).field.canonicalString()} ${e.op} ${Li(e.value)}`:t instanceof nr?function(t){return t.op.toString()+" {"+t.getFilters().map(lr).join(" ,")+"}"}(t):"Filter";var e}class ur extends er{constructor(t,e,n){super(t,e,n),this.key=On.fromName(n.referenceValue)}matches(t){const e=On.comparator(t.key,this.key);return this.matchesComparison(e)}}class ar extends er{constructor(t,e){super(t,"in",e),this.keys=hr("in",e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class cr extends er{constructor(t,e){super(t,"not-in",e),this.keys=hr("not-in",e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function hr(t,e){var n;return((null==(n=e.arrayValue)?void 0:n.values)||[]).map(t=>On.fromName(t.referenceValue))}class fr extends er{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return Gi(e)&&Pi(e.arrayValue,this.value)}}class dr extends er{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&Pi(this.value.arrayValue,e)}}class pr extends er{constructor(t,e){super(t,"not-in",e)}matches(t){if(Pi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&void 0===e.nullValue&&!Pi(this.value.arrayValue,e)}}class mr extends er{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!Gi(e)||!e.arrayValue.values)&&e.arrayValue.values.some(t=>Pi(this.value.arrayValue,t))}}class vr{constructor(t,e=null,n=[],i=[],r=null,o=null,s=null){this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=i,this.limit=r,this.startAt=o,this.endAt=s,this.Te=null}}function wr(t,e=null,n=[],i=[],r=null,o=null,s=null){return new vr(t,e,n,i,r,o,s)}function yr(t){const e=rn(t);if(null===e.Te){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(t=>or(t)).join(","),t+="|ob:",t+=e.orderBy.map(t=>{return(e=t).field.canonicalString()+e.dir;var e}).join(","),Yn(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(t=>Li(t)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(t=>Li(t)).join(",")),e.Te=t}return e.Te}function gr(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Zi(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!sr(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Xi(t.startAt,e.startAt)&&Xi(t.endAt,e.endAt)}function br(t){return On.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}class Er{constructor(t,e=null,n=[],i=[],r=null,o="F",s=null,l=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=i,this.limit=r,this.limitType=o,this.startAt=s,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Sr(t){return new Er(t)}function Tr(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function kr(t){return null!==t.collectionGroup}function Ir(t){const e=rn(t);if(null===e.Ie){e.Ie=[];const t=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),t.add(i.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(t){let e=new si(An.comparator);return t.filters.forEach(t=>{t.getFlattenedFilters().forEach(t=>{t.isInequality()&&(e=e.add(t.field))})}),e})(e).forEach(i=>{t.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Qi(i,n))}),t.has(An.keyField().canonicalString())||e.Ie.push(new Qi(An.keyField(),n))}return e.Ie}function _r(t){const e=rn(t);return e.Ee||(e.Ee=function(t,e){if("F"===t.limitType)return wr(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(t=>{const e="desc"===t.dir?"asc":"desc";return new Qi(t.field,e)});const n=t.endAt?new Wi(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Wi(t.startAt.position,t.startAt.inclusive):null;return wr(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}(e,Ir(t))),e.Ee}function Cr(t,e){const n=t.filters.concat([e]);return new Er(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Ar(t,e,n){return new Er(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Or(t,e){return gr(_r(t),_r(e))&&t.limitType===e.limitType}function Nr(t){return`${yr(_r(t))}|lt:${t.limitType}`}function Rr(t){return`Query(target=${function(t){let e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map(t=>lr(t)).join(", ")}]`),Yn(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map(t=>{return`${(e=t).field.canonicalString()} (${e.dir})`;var e}).join(", ")}]`),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(t=>Li(t)).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(t=>Li(t)).join(",")),`Target(${e})`}(_r(t))}; limitType=${t.limitType})`}function Pr(t,e){return e.isFoundDocument()&&function(t,e){const n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):On.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(const n of Ir(t))if(!n.field.isKeyField()&&null===e.data.field(n.field))return!1;return!0}(t,e)&&function(t,e){for(const n of t.filters)if(!n.matches(e))return!1;return!0}(t,e)&&(i=e,!((n=t).startAt&&!function(t,e,n){const i=Yi(t,e,n);return t.inclusive?i<=0:i<0}(n.startAt,Ir(n),i)||n.endAt&&!function(t,e,n){const i=Yi(t,e,n);return t.inclusive?i>=0:i>0}(n.endAt,Ir(n),i)));var n,i}function xr(t){return(e,n)=>{let i=!1;for(const r of Ir(t)){const t=Mr(r,e,n);if(0!==t)return t;i=i||r.field.isKeyField()}return 0}}function Mr(t,e,n){const i=t.field.isKeyField()?On.comparator(e.key,n.key):function(t,e,n){const i=e.data.field(t),r=n.data.field(t);return null!==i&&null!==r?xi(i,r):tn(42886)}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return tn(19790,{direction:t.dir})}}class Dr{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(const[i,r]of n)if(this.equalsFn(i,t))return r}has(t){return void 0!==this.get(t)}set(t,e){const n=this.mapKeyFn(t),i=this.inner[n];if(void 0===i)return this.inner[n]=[[t,e]],void this.innerSize++;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return void(i[r]=[t,e]);i.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],t))return 1===n.length?delete this.inner[e]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(t){ei(this.inner,(e,n)=>{for(const[i,r]of n)t(i,r)})}isEmpty(){return ni(this.inner)}size(){return this.innerSize}}const Lr=new ii(On.comparator);function Ur(){return Lr}const Fr=new ii(On.comparator);function $r(...t){let e=Fr;for(const n of t)e=e.insert(n.key,n);return e}function jr(t){let e=Fr;return t.forEach((t,n)=>e=e.insert(t,n.overlayedDocument)),e}function Gr(){return qr()}function Vr(){return qr()}function qr(){return new Dr(t=>t.toString(),(t,e)=>t.isEqual(e))}const Hr=new ii(On.comparator),Br=new si(On.comparator);function Jr(...t){let e=Br;for(const n of t)e=e.add(n);return e}const zr=new si(yn);function Kr(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Xn(e)?"-0":e}}function Wr(t){return{integerValue:""+t}}function Yr(t,e){return function(t){return"number"==typeof t&&Number.isInteger(t)&&!Xn(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}(e)?Wr(e):Kr(t,e)}class Xr{constructor(){this._=void 0}}function Qr(t,e,n){return t instanceof eo?function(t,e){const n={fields:{[vi]:{stringValue:mi},[yi]:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&gi(e)&&(e=bi(e)),e&&(n.fields[wi]=e),{mapValue:n}}(n,e):t instanceof no?io(t,e):t instanceof ro?oo(t,e):function(t,e){const n=to(t,e),i=lo(n)+lo(t.Ae);return ji(n)&&ji(t.Ae)?Wr(i):Kr(t.serializer,i)}(t,e)}function Zr(t,e,n){return t instanceof no?io(t,e):t instanceof ro?oo(t,e):n}function to(t,e){return t instanceof so?ji(n=e)||(i=n)&&"doubleValue"in i?e:{integerValue:0}:null;var n,i}class eo extends Xr{}class no extends Xr{constructor(t){super(),this.elements=t}}function io(t,e){const n=uo(e);for(const i of t.elements)n.some(t=>Ri(t,i))||n.push(i);return{arrayValue:{values:n}}}class ro extends Xr{constructor(t){super(),this.elements=t}}function oo(t,e){let n=uo(e);for(const i of t.elements)n=n.filter(t=>!Ri(t,i));return{arrayValue:{values:n}}}class so extends Xr{constructor(t,e){super(),this.serializer=t,this.Ae=e}}function lo(t){return di(t.integerValue||t.doubleValue)}function uo(t){return Gi(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class ao{constructor(t,e){this.field=t,this.transform=e}}class co{constructor(t,e){this.version=t,this.transformResults=e}}class ho{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new ho}static exists(t){return new ho(void 0,t)}static updateTime(t){return new ho(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function fo(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class po{}function mo(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new Io(t.key,ho.none()):new bo(t.key,t.data,ho.none());{const n=t.data,i=Ji.empty();let r=new si(An.comparator);for(let t of e.fields)if(!r.has(t)){let e=n.field(t);null===e&&t.length>1&&(t=t.popLast(),e=n.field(t)),null===e?i.delete(t):i.set(t,e),r=r.add(t)}return new Eo(t.key,i,new ui(r.toArray()),ho.none())}}function vo(t,e,n){var i;t instanceof bo?function(t,e,n){const i=t.value.clone(),r=To(t.fieldTransforms,e,n.transformResults);i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(t,e,n):t instanceof Eo?function(t,e,n){if(!fo(t.precondition,e))return void e.convertToUnknownDocument(n.version);const i=To(t.fieldTransforms,e,n.transformResults),r=e.data;r.setAll(So(t)),r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):(i=n,e.convertToNoDocument(i.version).setHasCommittedMutations())}function wo(t,e,n,i){return t instanceof bo?function(t,e,n,i){if(!fo(t.precondition,e))return n;const r=t.value.clone(),o=ko(t.fieldTransforms,i,e);return r.setAll(o),e.convertToFoundDocument(e.version,r).setHasLocalMutations(),null}(t,e,n,i):t instanceof Eo?function(t,e,n,i){if(!fo(t.precondition,e))return n;const r=ko(t.fieldTransforms,i,e),o=e.data;return o.setAll(So(t)),o.setAll(r),e.convertToFoundDocument(e.version,o).setHasLocalMutations(),null===n?null:n.unionWith(t.fieldMask.fields).unionWith(t.fieldTransforms.map(t=>t.field))}(t,e,n,i):(r=e,o=n,fo(t.precondition,r)?(r.convertToNoDocument(r.version).setHasLocalMutations(),null):o);var r,o}function yo(t,e){let n=null;for(const i of t.fieldTransforms){const t=e.data.field(i.field),r=to(i.transform,t||null);null!=r&&(null===n&&(n=Ji.empty()),n.set(i.field,r))}return n||null}function go(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&(n=t.fieldTransforms,i=e.fieldTransforms,!!(void 0===n&&void 0===i||n&&i&&Tn(n,i,(t,e)=>function(t,e){return t.field.isEqual(e.field)&&(n=t.transform,i=e.transform,n instanceof no&&i instanceof no||n instanceof ro&&i instanceof ro?Tn(n.elements,i.elements,Ri):n instanceof so&&i instanceof so?Ri(n.Ae,i.Ae):n instanceof eo&&i instanceof eo);var n,i}(t,e)))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask)));var n,i}class bo extends po{constructor(t,e,n,i=[]){super(),this.key=t,this.value=e,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Eo extends po{constructor(t,e,n,i,r=[]){super(),this.key=t,this.data=e,this.fieldMask=n,this.precondition=i,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function So(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function To(t,e,n){const i=new Map;nn(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let r=0;r<n.length;r++){const o=t[r],s=o.transform,l=e.data.field(o.field);i.set(o.field,Zr(s,l,n[r]))}return i}function ko(t,e,n){const i=new Map;for(const r of t){const t=r.transform,o=n.data.field(r.field);i.set(r.field,Qr(t,o,e))}return i}class Io extends po{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class _o extends po{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Co{constructor(t,e,n,i){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(t,e){const n=e.mutationResults;for(let i=0;i<this.mutations.length;i++){const e=this.mutations[i];e.key.isEqual(t.key)&&vo(e,t,n[i])}}applyToLocalView(t,e){for(const n of this.baseMutations)n.key.isEqual(t.key)&&(e=wo(n,t,e,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(t.key)&&(e=wo(n,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const n=Vr();return this.mutations.forEach(i=>{const r=t.get(i.key),o=r.overlayedDocument;let s=this.applyToLocalView(o,r.mutatedFields);s=e.has(i.key)?null:s;const l=mo(o,s);null!==l&&n.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(Gn.min())}),n}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),Jr())}isEqual(t){return this.batchId===t.batchId&&Tn(this.mutations,t.mutations,(t,e)=>go(t,e))&&Tn(this.baseMutations,t.baseMutations,(t,e)=>go(t,e))}}class Ao{constructor(t,e,n,i){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=i}static from(t,e,n){nn(t.mutations.length===n.length,58842,{me:t.mutations.length,fe:n.length});let i=function(){return Hr}();const r=t.mutations;for(let o=0;o<r.length;o++)i=i.insert(r[o].key,n[o].version);return new Ao(t,e,n,i)}}class Oo{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class No{constructor(t,e){this.count=t,this.unchangedNames=e}}var Ro,Po;function xo(t){if(void 0===t)return Xe("GRPC error has no .code"),on.UNKNOWN;switch(t){case Ro.OK:return on.OK;case Ro.CANCELLED:return on.CANCELLED;case Ro.UNKNOWN:return on.UNKNOWN;case Ro.DEADLINE_EXCEEDED:return on.DEADLINE_EXCEEDED;case Ro.RESOURCE_EXHAUSTED:return on.RESOURCE_EXHAUSTED;case Ro.INTERNAL:return on.INTERNAL;case Ro.UNAVAILABLE:return on.UNAVAILABLE;case Ro.UNAUTHENTICATED:return on.UNAUTHENTICATED;case Ro.INVALID_ARGUMENT:return on.INVALID_ARGUMENT;case Ro.NOT_FOUND:return on.NOT_FOUND;case Ro.ALREADY_EXISTS:return on.ALREADY_EXISTS;case Ro.PERMISSION_DENIED:return on.PERMISSION_DENIED;case Ro.FAILED_PRECONDITION:return on.FAILED_PRECONDITION;case Ro.ABORTED:return on.ABORTED;case Ro.OUT_OF_RANGE:return on.OUT_OF_RANGE;case Ro.UNIMPLEMENTED:return on.UNIMPLEMENTED;case Ro.DATA_LOSS:return on.DATA_LOSS;default:return tn(39323,{code:t})}}(Po=Ro||(Ro={}))[Po.OK=0]="OK",Po[Po.CANCELLED=1]="CANCELLED",Po[Po.UNKNOWN=2]="UNKNOWN",Po[Po.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Po[Po.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Po[Po.NOT_FOUND=5]="NOT_FOUND",Po[Po.ALREADY_EXISTS=6]="ALREADY_EXISTS",Po[Po.PERMISSION_DENIED=7]="PERMISSION_DENIED",Po[Po.UNAUTHENTICATED=16]="UNAUTHENTICATED",Po[Po.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Po[Po.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Po[Po.ABORTED=10]="ABORTED",Po[Po.OUT_OF_RANGE=11]="OUT_OF_RANGE",Po[Po.UNIMPLEMENTED=12]="UNIMPLEMENTED",Po[Po.INTERNAL=13]="INTERNAL",Po[Po.UNAVAILABLE=14]="UNAVAILABLE",Po[Po.DATA_LOSS=15]="DATA_LOSS";const Mo=new Pe([4294967295,4294967295],0);function Do(t){const e=(new TextEncoder).encode(t),n=new xe;return n.update(e),new Uint8Array(n.digest())}function Lo(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Pe([n,i],0),new Pe([r,o],0)]}class Uo{constructor(t,e,n){if(this.bitmap=t,this.padding=e,this.hashCount=n,e<0||e>=8)throw new Fo(`Invalid padding: ${e}`);if(n<0)throw new Fo(`Invalid hash count: ${n}`);if(t.length>0&&0===this.hashCount)throw new Fo(`Invalid hash count: ${n}`);if(0===t.length&&0!==e)throw new Fo(`Invalid padding when bitmap length is 0: ${e}`);this.ge=8*t.length-e,this.pe=Pe.fromNumber(this.ge)}ye(t,e,n){let i=t.add(e.multiply(Pe.fromNumber(n)));return 1===i.compare(Mo)&&(i=new Pe([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(0===this.ge)return!1;const e=Do(t),[n,i]=Lo(e);for(let r=0;r<this.hashCount;r++){const t=this.ye(n,i,r);if(!this.we(t))return!1}return!0}static create(t,e,n){const i=t%8==0?0:8-t%8,r=new Uint8Array(Math.ceil(t/8)),o=new Uo(r,i,e);return n.forEach(t=>o.insert(t)),o}insert(t){if(0===this.ge)return;const e=Do(t),[n,i]=Lo(e);for(let r=0;r<this.hashCount;r++){const t=this.ye(n,i,r);this.Se(t)}}Se(t){const e=Math.floor(t/8),n=t%8;this.bitmap[e]|=1<<n}}class Fo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class $o{constructor(t,e,n,i,r){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(t,e,n){const i=new Map;return i.set(t,jo.createSynthesizedTargetChangeForCurrentChange(t,e,n)),new $o(Gn.min(),i,new ii(yn),Ur(),Jr())}}class jo{constructor(t,e,n,i,r){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(t,e,n){return new jo(n,e,Jr(),Jr(),Jr())}}class Go{constructor(t,e,n,i){this.be=t,this.removedTargetIds=e,this.key=n,this.De=i}}class Vo{constructor(t,e){this.targetId=t,this.Ce=e}}class qo{constructor(t,e,n=ci.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=i}}class Ho{constructor(){this.ve=0,this.Fe=zo(),this.Me=ci.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return 0!==this.ve}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Jr(),e=Jr(),n=Jr();return this.Fe.forEach((i,r)=>{switch(r){case 0:t=t.add(i);break;case 2:e=e.add(i);break;case 1:n=n.add(i);break;default:tn(38017,{changeType:r})}}),new jo(this.Me,this.xe,t,e,n)}qe(){this.Oe=!1,this.Fe=zo()}Qe(t,e){this.Oe=!0,this.Fe=this.Fe.insert(t,e)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,nn(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Bo{constructor(t){this.Ge=t,this.ze=new Map,this.je=Ur(),this.Je=Jo(),this.He=Jo(),this.Ye=new ii(yn)}Ze(t){for(const e of t.be)t.De&&t.De.isFoundDocument()?this.Xe(e,t.De):this.et(e,t.key,t.De);for(const e of t.removedTargetIds)this.et(e,t.key,t.De)}tt(t){this.forEachTarget(t,e=>{const n=this.nt(e);switch(t.state){case 0:this.rt(e)&&n.Le(t.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(t.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(e);break;case 3:this.rt(e)&&(n.We(),n.Le(t.resumeToken));break;case 4:this.rt(e)&&(this.it(e),n.Le(t.resumeToken));break;default:tn(56790,{state:t.state})}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.ze.forEach((t,n)=>{this.rt(n)&&e(n)})}st(t){const e=t.targetId,n=t.Ce.count,i=this.ot(e);if(i){const r=i.target;if(br(r))if(0===n){const t=new On(r.path);this.et(e,t,Ki.newNoDocument(t,Gn.min()))}else nn(1===n,20013,{expectedCount:n});else{const i=this._t(e);if(i!==n){const n=this.ut(t),r=n?this.ct(n,t,i):1;if(0!==r){this.it(e);const t=2===r?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(e,t)}}}}}ut(t){const e=t.Ce.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:r=0}=e;let o,s;try{o=pi(n).toUint8Array()}catch(l){if(l instanceof ai)return Qe("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{s=new Uo(o,i,r)}catch(l){return Qe(l instanceof Fo?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return 0===s.ge?null:s}ct(t,e,n){return e.Ce.count===n-this.Pt(t,e.targetId)?0:2}Pt(t,e){const n=this.Ge.getRemoteKeysForTarget(e);let i=0;return n.forEach(n=>{const r=this.Ge.ht(),o=`projects/${r.projectId}/databases/${r.database}/documents/${n.path.canonicalString()}`;t.mightContain(o)||(this.et(e,n,null),i++)}),i}Tt(t){const e=new Map;this.ze.forEach((n,i)=>{const r=this.ot(i);if(r){if(n.current&&br(r.target)){const e=new On(r.target.path);this.It(e).has(i)||this.Et(i,e)||this.et(i,e,Ki.newNoDocument(e,t))}n.Be&&(e.set(i,n.ke()),n.qe())}});let n=Jr();this.He.forEach((t,e)=>{let i=!0;e.forEachWhile(t=>{const e=this.ot(t);return!e||"TargetPurposeLimboResolution"===e.purpose||(i=!1,!1)}),i&&(n=n.add(t))}),this.je.forEach((e,n)=>n.setReadTime(t));const i=new $o(t,e,this.Ye,this.je,n);return this.je=Ur(),this.Je=Jo(),this.He=Jo(),this.Ye=new ii(yn),i}Xe(t,e){if(!this.rt(t))return;const n=this.Et(t,e.key)?2:0;this.nt(t).Qe(e.key,n),this.je=this.je.insert(e.key,e),this.Je=this.Je.insert(e.key,this.It(e.key).add(t)),this.He=this.He.insert(e.key,this.dt(e.key).add(t))}et(t,e,n){if(!this.rt(t))return;const i=this.nt(t);this.Et(t,e)?i.Qe(e,1):i.$e(e),this.He=this.He.insert(e,this.dt(e).delete(t)),this.He=this.He.insert(e,this.dt(e).add(t)),n&&(this.je=this.je.insert(e,n))}removeTarget(t){this.ze.delete(t)}_t(t){const e=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let e=this.ze.get(t);return e||(e=new Ho,this.ze.set(t,e)),e}dt(t){let e=this.He.get(t);return e||(e=new si(yn),this.He=this.He.insert(t,e)),e}It(t){let e=this.Je.get(t);return e||(e=new si(yn),this.Je=this.Je.insert(t,e)),e}rt(t){const e=null!==this.ot(t);return e||Ye("WatchChangeAggregator","Detected inactive target",t),e}ot(t){const e=this.ze.get(t);return e&&e.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new Ho),this.Ge.getRemoteKeysForTarget(t).forEach(e=>{this.et(t,e,null)})}Et(t,e){return this.Ge.getRemoteKeysForTarget(t).has(e)}}function Jo(){return new ii(On.comparator)}function zo(){return new ii(On.comparator)}const Ko=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),Wo=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),Yo=(()=>({and:"AND",or:"OR"}))();class Xo{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function Qo(t,e){return t.useProto3Json||Yn(e)?e:{value:e}}function Zo(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ts(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function es(t,e){return Zo(t,e.toTimestamp())}function ns(t){return nn(!!t,49232),Gn.fromTimestamp(function(t){const e=fi(t);return new jn(e.seconds,e.nanos)}(t))}function is(t,e){return rs(t,e).canonicalString()}function rs(t,e){const n=(i=t,new _n(["projects",i.projectId,"databases",i.database])).child("documents");var i;return void 0===e?n:n.child(e)}function os(t){const e=_n.fromString(t);return nn(Ts(e),10190,{key:e.toString()}),e}function ss(t,e){return is(t.databaseId,e.path)}function ls(t,e){const n=os(e);if(n.get(1)!==t.databaseId.projectId)throw new sn(on.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new sn(on.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new On(cs(n))}function us(t,e){return is(t.databaseId,e)}function as(t){return new _n(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function cs(t){return nn(t.length>4&&"documents"===t.get(4),29091,{key:t.toString()}),t.popFirst(5)}function hs(t,e,n){return{name:ss(t,e),fields:n.value.mapValue.fields}}function fs(t,e){return{documents:[us(t,e.path)]}}function ds(t,e){const n={structuredQuery:{}},i=e.path;let r;null!==e.collectionGroup?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=us(t,r);const o=function(t){if(0!==t.length)return Es(nr.create(t,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const s=function(t){if(0!==t.length)return t.map(t=>{return{field:gs((e=t).field),direction:vs(e.dir)};var e})}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const l=Qo(t,e.limit);return null!==l&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt={before:(u=e.startAt).inclusive,values:u.position}),e.endAt&&(n.structuredQuery.endAt=function(t){return{before:!t.inclusive,values:t.position}}(e.endAt)),{ft:n,parent:r};var u}function ps(t){let e=function(t){const e=os(t);return 4===e.length?_n.emptyPath():cs(e)}(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){nn(1===i,65062);const t=n.from[0];t.allDescendants?r=t.collectionId:e=e.child(t.collectionId)}let o=[];n.where&&(o=function(t){const e=ms(t);return e instanceof nr&&rr(e)?e.getFilters():[e]}(n.where));let s=[];n.orderBy&&(s=n.orderBy.map(t=>{return new Qi(bs((e=t).field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction));var e}));let l=null;n.limit&&(l=function(t){let e;return e="object"==typeof t?t.value:t,Yn(e)?null:e}(n.limit));let u=null;n.startAt&&(u=function(t){const e=!!t.before,n=t.values||[];return new Wi(n,e)}(n.startAt));let a=null;return n.endAt&&(a=function(t){const e=!t.before,n=t.values||[];return new Wi(n,e)}(n.endAt)),function(t,e,n,i,r,o,s,l){return new Er(t,e,n,i,r,o,s,l)}(e,r,s,o,l,"F",u,a)}function ms(t){return void 0!==t.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const e=bs(t.unaryFilter.field);return er.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=bs(t.unaryFilter.field);return er.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=bs(t.unaryFilter.field);return er.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=bs(t.unaryFilter.field);return er.create(r,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return tn(61313);default:return tn(60726)}}(t):void 0!==t.fieldFilter?(e=t,er.create(bs(e.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return tn(58110);default:return tn(50506)}}(e.fieldFilter.op),e.fieldFilter.value)):void 0!==t.compositeFilter?function(t){return nr.create(t.compositeFilter.filters.map(t=>ms(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return tn(1026)}}(t.compositeFilter.op))}(t):tn(30097,{filter:t});var e}function vs(t){return Ko[t]}function ws(t){return Wo[t]}function ys(t){return Yo[t]}function gs(t){return{fieldPath:t.canonicalString()}}function bs(t){return An.fromServerFormat(t.fieldPath)}function Es(t){return t instanceof er?function(t){if("=="===t.op){if(qi(t.value))return{unaryFilter:{field:gs(t.field),op:"IS_NAN"}};if(Vi(t.value))return{unaryFilter:{field:gs(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(qi(t.value))return{unaryFilter:{field:gs(t.field),op:"IS_NOT_NAN"}};if(Vi(t.value))return{unaryFilter:{field:gs(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:gs(t.field),op:ws(t.op),value:t.value}}}(t):t instanceof nr?function(t){const e=t.getFilters().map(t=>Es(t));return 1===e.length?e[0]:{compositeFilter:{op:ys(t.op),filters:e}}}(t):tn(54877,{filter:t})}function Ss(t){const e=[];return t.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Ts(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}class ks{constructor(t,e,n,i,r=Gn.min(),o=Gn.min(),s=ci.EMPTY_BYTE_STRING,l=null){this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s,this.expectedCount=l}withSequenceNumber(t){return new ks(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new ks(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new ks(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new ks(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class Is{constructor(t){this.yt=t}}function _s(t){const e=ps({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Ar(e,e.limit,"L"):e}class Cs{constructor(){this.Cn=new As}addToCollectionParentIndex(t,e){return this.Cn.add(e),zn.resolve()}getCollectionParents(t,e){return zn.resolve(this.Cn.getEntries(e))}addFieldIndex(t,e){return zn.resolve()}deleteFieldIndex(t,e){return zn.resolve()}deleteAllFieldIndexes(t){return zn.resolve()}createTargetIndexes(t,e){return zn.resolve()}getDocumentsMatchingTarget(t,e){return zn.resolve(null)}getIndexType(t,e){return zn.resolve(0)}getFieldIndexes(t,e){return zn.resolve([])}getNextCollectionGroupToUpdate(t){return zn.resolve(null)}getMinOffset(t,e){return zn.resolve(qn.min())}getMinOffsetFromCollectionGroup(t,e){return zn.resolve(qn.min())}updateCollectionGroup(t,e,n){return zn.resolve()}updateIndexEntries(t,e){return zn.resolve()}}class As{constructor(){this.index={}}add(t){const e=t.lastSegment(),n=t.popLast(),i=this.index[e]||new si(_n.comparator),r=!i.has(n);return this.index[e]=i.add(n),r}has(t){const e=t.lastSegment(),n=t.popLast(),i=this.index[e];return i&&i.has(n)}getEntries(t){return(this.index[t]||new si(_n.comparator)).toArray()}}const Os={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ns=41943040;class Rs{static withCacheSize(t){return new Rs(t,Rs.DEFAULT_COLLECTION_PERCENTILE,Rs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}}Rs.DEFAULT_COLLECTION_PERCENTILE=10,Rs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Rs.DEFAULT=new Rs(Ns,Rs.DEFAULT_COLLECTION_PERCENTILE,Rs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Rs.DISABLED=new Rs(-1,0,0);class Ps{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new Ps(0)}static cr(){return new Ps(-1)}}const xs="LruGarbageCollector";function Ms([t,e],[n,i]){const r=yn(t,n);return 0===r?yn(e,i):r}class Ds{constructor(t){this.Ir=t,this.buffer=new si(Ms),this.Er=0}dr(){return++this.Er}Ar(t){const e=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(e);else{const t=this.buffer.last();Ms(e,t)<0&&(this.buffer=this.buffer.delete(t).add(e))}}get maxValue(){return this.buffer.last()[0]}}class Ls{constructor(t,e,n){this.garbageCollector=t,this.asyncQueue=e,this.localStore=n,this.Rr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return null!==this.Rr}Vr(t){Ye(xs,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Kn(t)?Ye(xs,"Ignoring IndexedDB error during garbage collection: ",t):await Jn(t)}await this.Vr(3e5)})}}class Us{constructor(t,e){this.mr=t,this.params=e}calculateTargetCount(t,e){return this.mr.gr(t).next(t=>Math.floor(e/100*t))}nthSequenceNumber(t,e){if(0===e)return zn.resolve(Wn.ce);const n=new Ds(e);return this.mr.forEachTarget(t,t=>n.Ar(t.sequenceNumber)).next(()=>this.mr.pr(t,t=>n.Ar(t))).next(()=>n.maxValue)}removeTargets(t,e,n){return this.mr.removeTargets(t,e,n)}removeOrphanedDocuments(t,e){return this.mr.removeOrphanedDocuments(t,e)}collect(t,e){return-1===this.params.cacheSizeCollectionThreshold?(Ye("LruGarbageCollector","Garbage collection skipped; disabled"),zn.resolve(Os)):this.getCacheSize(t).next(n=>n<this.params.cacheSizeCollectionThreshold?(Ye("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Os):this.yr(t,e))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,e){let n,i,r,o,s,l,u;const a=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(e=>(e>this.params.maximumSequenceNumbersToCollect?(Ye("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${e}`),i=this.params.maximumSequenceNumbersToCollect):i=e,o=Date.now(),this.nthSequenceNumber(t,i))).next(i=>(n=i,s=Date.now(),this.removeTargets(t,n,e))).next(e=>(r=e,l=Date.now(),this.removeOrphanedDocuments(t,n))).next(t=>(u=Date.now(),We()<=ut.DEBUG&&Ye("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-a}ms\n\tDetermined least recently used ${i} in `+(s-o)+`ms\n\tRemoved ${r} targets in `+(l-s)+`ms\n\tRemoved ${t} documents in `+(u-l)+`ms\nTotal Duration: ${u-a}ms`),zn.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:r,documentsRemoved:t})))}}class Fs{constructor(){this.changes=new Dr(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,Ki.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const n=this.changes.get(e);return void 0!==n?zn.resolve(n):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class $s{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}class js{constructor(t,e,n,i){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=n,this.indexManager=i}getDocument(t,e){let n=null;return this.documentOverlayCache.getOverlay(t,e).next(i=>(n=i,this.remoteDocumentCache.getEntry(t,e))).next(t=>(null!==n&&wo(n.mutation,t,ui.empty(),jn.now()),t))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(e=>this.getLocalViewOfDocuments(t,e,Jr()).next(()=>e))}getLocalViewOfDocuments(t,e,n=Jr()){const i=Gr();return this.populateOverlays(t,i,e).next(()=>this.computeViews(t,e,i,n).next(t=>{let e=$r();return t.forEach((t,n)=>{e=e.insert(t,n.overlayedDocument)}),e}))}getOverlayedDocuments(t,e){const n=Gr();return this.populateOverlays(t,n,e).next(()=>this.computeViews(t,e,n,Jr()))}populateOverlays(t,e,n){const i=[];return n.forEach(t=>{e.has(t)||i.push(t)}),this.documentOverlayCache.getOverlays(t,i).next(t=>{t.forEach((t,n)=>{e.set(t,n)})})}computeViews(t,e,n,i){let r=Ur();const o=qr(),s=qr();return e.forEach((t,e)=>{const s=n.get(e.key);i.has(e.key)&&(void 0===s||s.mutation instanceof Eo)?r=r.insert(e.key,e):void 0!==s?(o.set(e.key,s.mutation.getFieldMask()),wo(s.mutation,e,s.mutation.getFieldMask(),jn.now())):o.set(e.key,ui.empty())}),this.recalculateAndSaveOverlays(t,r).next(t=>(t.forEach((t,e)=>o.set(t,e)),e.forEach((t,e)=>s.set(t,new $s(e,o.get(t)??null))),s))}recalculateAndSaveOverlays(t,e){const n=qr();let i=new ii((t,e)=>t-e),r=Jr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(t=>{for(const r of t)r.keys().forEach(t=>{const o=e.get(t);if(null===o)return;let s=n.get(t)||ui.empty();s=r.applyToLocalView(o,s),n.set(t,s);const l=(i.get(r.batchId)||Jr()).add(t);i=i.insert(r.batchId,l)})}).next(()=>{const o=[],s=i.getReverseIterator();for(;s.hasNext();){const i=s.getNext(),l=i.key,u=i.value,a=Vr();u.forEach(t=>{if(!r.has(t)){const i=mo(e.get(t),n.get(t));null!==i&&a.set(t,i),r=r.add(t)}}),o.push(this.documentOverlayCache.saveOverlays(t,l,a))}return zn.waitFor(o)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(e=>this.recalculateAndSaveOverlays(t,e))}getDocumentsMatchingQuery(t,e,n,i){return r=e,On.isDocumentKey(r.path)&&null===r.collectionGroup&&0===r.filters.length?this.getDocumentsMatchingDocumentQuery(t,e.path):kr(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,n,i):this.getDocumentsMatchingCollectionQuery(t,e,n,i);var r}getNextDocuments(t,e,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,n,i).next(r=>{const o=i-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,n.largestBatchId,i-r.size):zn.resolve(Gr());let s=-1,l=r;return o.next(e=>zn.forEach(e,(e,n)=>(s<n.largestBatchId&&(s=n.largestBatchId),r.get(e)?zn.resolve():this.remoteDocumentCache.getEntry(t,e).next(t=>{l=l.insert(e,t)}))).next(()=>this.populateOverlays(t,e,r)).next(()=>this.computeViews(t,l,e,Jr())).next(t=>({batchId:s,changes:jr(t)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new On(e)).next(t=>{let e=$r();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e})}getDocumentsMatchingCollectionGroupQuery(t,e,n,i){const r=e.collectionGroup;let o=$r();return this.indexManager.getCollectionParents(t,r).next(s=>zn.forEach(s,s=>{const l=(u=e,a=s.child(r),new Er(a,null,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt));var u,a;return this.getDocumentsMatchingCollectionQuery(t,l,n,i).next(t=>{t.forEach((t,e)=>{o=o.insert(t,e)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,e,n,i){let r;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,n.largestBatchId).next(o=>(r=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,n,r,i))).next(t=>{r.forEach((e,n)=>{const i=n.getKey();null===t.get(i)&&(t=t.insert(i,Ki.newInvalidDocument(i)))});let n=$r();return t.forEach((t,i)=>{const o=r.get(t);void 0!==o&&wo(o.mutation,i,ui.empty(),jn.now()),Pr(e,i)&&(n=n.insert(t,i))}),n})}}class Gs{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,e){return zn.resolve(this.Lr.get(e))}saveBundleMetadata(t,e){return this.Lr.set(e.id,{id:(n=e).id,version:n.version,createTime:ns(n.createTime)}),zn.resolve();var n}getNamedQuery(t,e){return zn.resolve(this.kr.get(e))}saveNamedQuery(t,e){return this.kr.set(e.name,{name:(n=e).name,query:_s(n.bundledQuery),readTime:ns(n.readTime)}),zn.resolve();var n}}class Vs{constructor(){this.overlays=new ii(On.comparator),this.qr=new Map}getOverlay(t,e){return zn.resolve(this.overlays.get(e))}getOverlays(t,e){const n=Gr();return zn.forEach(e,e=>this.getOverlay(t,e).next(t=>{null!==t&&n.set(e,t)})).next(()=>n)}saveOverlays(t,e,n){return n.forEach((n,i)=>{this.St(t,e,i)}),zn.resolve()}removeOverlaysForBatchId(t,e,n){const i=this.qr.get(n);return void 0!==i&&(i.forEach(t=>this.overlays=this.overlays.remove(t)),this.qr.delete(n)),zn.resolve()}getOverlaysForCollection(t,e,n){const i=Gr(),r=e.length+1,o=new On(e.child("")),s=this.overlays.getIteratorFrom(o);for(;s.hasNext();){const t=s.getNext().value,o=t.getKey();if(!e.isPrefixOf(o.path))break;o.path.length===r&&t.largestBatchId>n&&i.set(t.getKey(),t)}return zn.resolve(i)}getOverlaysForCollectionGroup(t,e,n,i){let r=new ii((t,e)=>t-e);const o=this.overlays.getIterator();for(;o.hasNext();){const t=o.getNext().value;if(t.getKey().getCollectionGroup()===e&&t.largestBatchId>n){let e=r.get(t.largestBatchId);null===e&&(e=Gr(),r=r.insert(t.largestBatchId,e)),e.set(t.getKey(),t)}}const s=Gr(),l=r.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((t,e)=>s.set(t,e)),!(s.size()>=i)););return zn.resolve(s)}St(t,e,n){const i=this.overlays.get(n.key);if(null!==i){const t=this.qr.get(i.largestBatchId).delete(n.key);this.qr.set(i.largestBatchId,t)}this.overlays=this.overlays.insert(n.key,new Oo(e,n));let r=this.qr.get(e);void 0===r&&(r=Jr(),this.qr.set(e,r)),this.qr.set(e,r.add(n.key))}}class qs{constructor(){this.sessionToken=ci.EMPTY_BYTE_STRING}getSessionToken(t){return zn.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,zn.resolve()}}class Hs{constructor(){this.Qr=new si(Bs.$r),this.Ur=new si(Bs.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,e){const n=new Bs(t,e);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(t,e){t.forEach(t=>this.addReference(t,e))}removeReference(t,e){this.Gr(new Bs(t,e))}zr(t,e){t.forEach(t=>this.removeReference(t,e))}jr(t){const e=new On(new _n([])),n=new Bs(e,t),i=new Bs(e,t+1),r=[];return this.Ur.forEachInRange([n,i],t=>{this.Gr(t),r.push(t.key)}),r}Jr(){this.Qr.forEach(t=>this.Gr(t))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const e=new On(new _n([])),n=new Bs(e,t),i=new Bs(e,t+1);let r=Jr();return this.Ur.forEachInRange([n,i],t=>{r=r.add(t.key)}),r}containsKey(t){const e=new Bs(t,0),n=this.Qr.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)}}class Bs{constructor(t,e){this.key=t,this.Yr=e}static $r(t,e){return On.comparator(t.key,e.key)||yn(t.Yr,e.Yr)}static Kr(t,e){return yn(t.Yr,e.Yr)||On.comparator(t.key,e.key)}}class Js{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.tr=1,this.Zr=new si(Bs.$r)}checkEmpty(t){return zn.resolve(0===this.mutationQueue.length)}addMutationBatch(t,e,n,i){const r=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Co(r,e,n,i);this.mutationQueue.push(o);for(const s of i)this.Zr=this.Zr.add(new Bs(s.key,r)),this.indexManager.addToCollectionParentIndex(t,s.key.path.popLast());return zn.resolve(o)}lookupMutationBatch(t,e){return zn.resolve(this.Xr(e))}getNextMutationBatchAfterBatchId(t,e){const n=e+1,i=this.ei(n),r=i<0?0:i;return zn.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return zn.resolve(0===this.mutationQueue.length?-1:this.tr-1)}getAllMutationBatches(t){return zn.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const n=new Bs(e,0),i=new Bs(e,Number.POSITIVE_INFINITY),r=[];return this.Zr.forEachInRange([n,i],t=>{const e=this.Xr(t.Yr);r.push(e)}),zn.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new si(yn);return e.forEach(t=>{const e=new Bs(t,0),i=new Bs(t,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([e,i],t=>{n=n.add(t.Yr)})}),zn.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,i=n.length+1;let r=n;On.isDocumentKey(r)||(r=r.child(""));const o=new Bs(new On(r),0);let s=new si(yn);return this.Zr.forEachWhile(t=>{const e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===i&&(s=s.add(t.Yr)),!0)},o),zn.resolve(this.ti(s))}ti(t){const e=[];return t.forEach(t=>{const n=this.Xr(t);null!==n&&e.push(n)}),e}removeMutationBatch(t,e){nn(0===this.ni(e.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Zr;return zn.forEach(e.mutations,i=>{const r=new Bs(i.key,e.batchId);return n=n.delete(r),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.Zr=n})}ir(t){}containsKey(t,e){const n=new Bs(e,0),i=this.Zr.firstAfterOrEqual(n);return zn.resolve(e.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,zn.resolve()}ni(t,e){return this.ei(t)}ei(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}Xr(t){const e=this.ei(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class zs{constructor(t){this.ri=t,this.docs=new ii(On.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const n=e.key,i=this.docs.get(n),r=i?i.size:0,o=this.ri(e);return this.docs=this.docs.insert(n,{document:e.mutableCopy(),size:o}),this.size+=o-r,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const n=this.docs.get(e);return zn.resolve(n?n.document.mutableCopy():Ki.newInvalidDocument(e))}getEntries(t,e){let n=Ur();return e.forEach(t=>{const e=this.docs.get(t);n=n.insert(t,e?e.document.mutableCopy():Ki.newInvalidDocument(t))}),zn.resolve(n)}getDocumentsMatchingQuery(t,e,n,i){let r=Ur();const o=e.path,s=new On(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(s);for(;l.hasNext();){const{key:t,value:{document:s}}=l.getNext();if(!o.isPrefixOf(t.path))break;t.path.length>o.length+1||Hn(Vn(s),n)<=0||(i.has(s.key)||Pr(e,s))&&(r=r.insert(s.key,s.mutableCopy()))}return zn.resolve(r)}getAllFromCollectionGroup(t,e,n,i){tn(9500)}ii(t,e){return zn.forEach(this.docs,t=>e(t))}newChangeBuffer(t){return new Ks(this)}getSize(t){return zn.resolve(this.size)}}class Ks extends Fs{constructor(t){super(),this.Nr=t}applyChanges(t){const e=[];return this.changes.forEach((n,i)=>{i.isValidDocument()?e.push(this.Nr.addEntry(t,i)):this.Nr.removeEntry(n)}),zn.waitFor(e)}getFromCache(t,e){return this.Nr.getEntry(t,e)}getAllFromCache(t,e){return this.Nr.getEntries(t,e)}}class Ws{constructor(t){this.persistence=t,this.si=new Dr(t=>yr(t),gr),this.lastRemoteSnapshotVersion=Gn.min(),this.highestTargetId=0,this.oi=0,this._i=new Hs,this.targetCount=0,this.ai=Ps.ur()}forEachTarget(t,e){return this.si.forEach((t,n)=>e(n)),zn.resolve()}getLastRemoteSnapshotVersion(t){return zn.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return zn.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),zn.resolve(this.highestTargetId)}setTargetsMetadata(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.oi&&(this.oi=e),zn.resolve()}Pr(t){this.si.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.ai=new Ps(e),this.highestTargetId=e),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,e){return this.Pr(e),this.targetCount+=1,zn.resolve()}updateTargetData(t,e){return this.Pr(e),zn.resolve()}removeTargetData(t,e){return this.si.delete(e.target),this._i.jr(e.targetId),this.targetCount-=1,zn.resolve()}removeTargets(t,e,n){let i=0;const r=[];return this.si.forEach((o,s)=>{s.sequenceNumber<=e&&null===n.get(s.targetId)&&(this.si.delete(o),r.push(this.removeMatchingKeysForTargetId(t,s.targetId)),i++)}),zn.waitFor(r).next(()=>i)}getTargetCount(t){return zn.resolve(this.targetCount)}getTargetData(t,e){const n=this.si.get(e)||null;return zn.resolve(n)}addMatchingKeys(t,e,n){return this._i.Wr(e,n),zn.resolve()}removeMatchingKeys(t,e,n){this._i.zr(e,n);const i=this.persistence.referenceDelegate,r=[];return i&&e.forEach(e=>{r.push(i.markPotentiallyOrphaned(t,e))}),zn.waitFor(r)}removeMatchingKeysForTargetId(t,e){return this._i.jr(e),zn.resolve()}getMatchingKeysForTargetId(t,e){const n=this._i.Hr(e);return zn.resolve(n)}containsKey(t,e){return zn.resolve(this._i.containsKey(e))}}class Ys{constructor(t,e){this.ui={},this.overlays={},this.ci=new Wn(0),this.li=!1,this.li=!0,this.hi=new qs,this.referenceDelegate=t(this),this.Pi=new Ws(this),this.indexManager=new Cs,this.remoteDocumentCache=new zs(t=>this.referenceDelegate.Ti(t)),this.serializer=new Is(e),this.Ii=new Gs(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new Vs,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let n=this.ui[t.toKey()];return n||(n=new Js(e,this.referenceDelegate),this.ui[t.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,e,n){Ye("MemoryPersistence","Starting transaction:",t);const i=new Xs(this.ci.next());return this.referenceDelegate.Ei(),n(i).next(t=>this.referenceDelegate.di(i).next(()=>t)).toPromise().then(t=>(i.raiseOnCommittedEvent(),t))}Ai(t,e){return zn.or(Object.values(this.ui).map(n=>()=>n.containsKey(t,e)))}}class Xs extends Bn{constructor(t){super(),this.currentSequenceNumber=t}}class Qs{constructor(t){this.persistence=t,this.Ri=new Hs,this.Vi=null}static mi(t){return new Qs(t)}get fi(){if(this.Vi)return this.Vi;throw tn(60996)}addReference(t,e,n){return this.Ri.addReference(n,e),this.fi.delete(n.toString()),zn.resolve()}removeReference(t,e,n){return this.Ri.removeReference(n,e),this.fi.add(n.toString()),zn.resolve()}markPotentiallyOrphaned(t,e){return this.fi.add(e.toString()),zn.resolve()}removeTarget(t,e){this.Ri.jr(e.targetId).forEach(t=>this.fi.add(t.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,e.targetId).next(t=>{t.forEach(t=>this.fi.add(t.toString()))}).next(()=>n.removeTargetData(t,e))}Ei(){this.Vi=new Set}di(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return zn.forEach(this.fi,n=>{const i=On.fromPath(n);return this.gi(t,i).next(t=>{t||e.removeEntry(i,Gn.min())})}).next(()=>(this.Vi=null,e.apply(t)))}updateLimboDocument(t,e){return this.gi(t,e).next(t=>{t?this.fi.delete(e.toString()):this.fi.add(e.toString())})}Ti(t){return 0}gi(t,e){return zn.or([()=>zn.resolve(this.Ri.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ai(t,e)])}}class Zs{constructor(t,e){this.persistence=t,this.pi=new Dr(t=>function(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Zn(e)),e=Qn(t.get(n),e);return Zn(e)}(t.path),(t,e)=>t.isEqual(e)),this.garbageCollector=function(t,e){return new Us(t,e)}(this,e)}static mi(t,e){return new Zs(t,e)}Ei(){}di(t){return zn.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}gr(t){const e=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next(t=>e.next(e=>t+e))}wr(t){let e=0;return this.pr(t,t=>{e++}).next(()=>e)}pr(t,e){return zn.forEach(this.pi,(n,i)=>this.br(t,n,i).next(t=>t?zn.resolve():e(i)))}removeTargets(t,e,n){return this.persistence.getTargetCache().removeTargets(t,e,n)}removeOrphanedDocuments(t,e){let n=0;const i=this.persistence.getRemoteDocumentCache(),r=i.newChangeBuffer();return i.ii(t,i=>this.br(t,i,e).next(t=>{t||(n++,r.removeEntry(i,Gn.min()))})).next(()=>r.apply(t)).next(()=>n)}markPotentiallyOrphaned(t,e){return this.pi.set(e,t.currentSequenceNumber),zn.resolve()}removeTarget(t,e){const n=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,n)}addReference(t,e,n){return this.pi.set(n,t.currentSequenceNumber),zn.resolve()}removeReference(t,e,n){return this.pi.set(n,t.currentSequenceNumber),zn.resolve()}updateLimboDocument(t,e){return this.pi.set(e,t.currentSequenceNumber),zn.resolve()}Ti(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=Fi(t.data.value)),e}br(t,e,n){return zn.or([()=>this.persistence.Ai(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const t=this.pi.get(e);return zn.resolve(void 0!==t&&t>n)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}class tl{constructor(t,e,n,i){this.targetId=t,this.fromCache=e,this.Es=n,this.ds=i}static As(t,e){let n=Jr(),i=Jr();for(const r of e.docChanges)switch(r.type){case 0:n=n.add(r.doc.key);break;case 1:i=i.add(r.doc.key)}return new tl(t,e.fromCache,n,i)}}class el{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}class nl{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=K()?8:function(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}(z())>0?6:4}initialize(t,e){this.ps=t,this.indexManager=e,this.Rs=!0}getDocumentsMatchingQuery(t,e,n,i){const r={result:null};return this.ys(t,e).next(t=>{r.result=t}).next(()=>{if(!r.result)return this.ws(t,e,i,n).next(t=>{r.result=t})}).next(()=>{if(r.result)return;const n=new el;return this.Ss(t,e,n).next(i=>{if(r.result=i,this.Vs)return this.bs(t,e,n,i.size)})}).next(()=>r.result)}bs(t,e,n,i){return n.documentReadCount<this.fs?(We()<=ut.DEBUG&&Ye("QueryEngine","SDK will not create cache indexes for query:",Rr(e),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),zn.resolve()):(We()<=ut.DEBUG&&Ye("QueryEngine","Query:",Rr(e),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.gs*i?(We()<=ut.DEBUG&&Ye("QueryEngine","The SDK decides to create cache indexes for query:",Rr(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,_r(e))):zn.resolve())}ys(t,e){if(Tr(e))return zn.resolve(null);let n=_r(e);return this.indexManager.getIndexType(t,n).next(i=>0===i?null:(null!==e.limit&&1===i&&(e=Ar(e,null,"F"),n=_r(e)),this.indexManager.getDocumentsMatchingTarget(t,n).next(i=>{const r=Jr(...i);return this.ps.getDocuments(t,r).next(i=>this.indexManager.getMinOffset(t,n).next(n=>{const o=this.Ds(e,i);return this.Cs(e,o,r,n.readTime)?this.ys(t,Ar(e,null,"F")):this.vs(t,o,e,n)}))})))}ws(t,e,n,i){return Tr(e)||i.isEqual(Gn.min())?zn.resolve(null):this.ps.getDocuments(t,n).next(r=>{const o=this.Ds(e,r);return this.Cs(e,o,n,i)?zn.resolve(null):(We()<=ut.DEBUG&&Ye("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Rr(e)),this.vs(t,o,e,function(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=Gn.fromTimestamp(1e9===i?new jn(n+1,0):new jn(n,i));return new qn(r,On.empty(),e)}(i,-1)).next(t=>t))})}Ds(t,e){let n=new si(xr(t));return e.forEach((e,i)=>{Pr(t,i)&&(n=n.add(i))}),n}Cs(t,e,n,i){if(null===t.limit)return!1;if(n.size!==e.size)return!0;const r="F"===t.limitType?e.last():e.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(i)>0)}Ss(t,e,n){return We()<=ut.DEBUG&&Ye("QueryEngine","Using full collection scan to execute query:",Rr(e)),this.ps.getDocumentsMatchingQuery(t,e,qn.min(),n)}vs(t,e,n,i){return this.ps.getDocumentsMatchingQuery(t,n,i).next(t=>(e.forEach(e=>{t=t.insert(e.key,e)}),t))}}const il="LocalStore";class rl{constructor(t,e,n,i){this.persistence=t,this.Fs=e,this.serializer=i,this.Ms=new ii(yn),this.xs=new Dr(t=>yr(t),gr),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(n)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new js(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.Ms))}}async function ol(t,e){const n=rn(t);return await n.persistence.runTransaction("Handle user change","readonly",t=>{let i;return n.mutationQueue.getAllMutationBatches(t).next(r=>(i=r,n.Bs(e),n.mutationQueue.getAllMutationBatches(t))).next(e=>{const r=[],o=[];let s=Jr();for(const t of i){r.push(t.batchId);for(const e of t.mutations)s=s.add(e.key)}for(const t of e){o.push(t.batchId);for(const e of t.mutations)s=s.add(e.key)}return n.localDocuments.getDocuments(t,s).next(t=>({Ls:t,removedBatchIds:r,addedBatchIds:o}))})})}function sl(t){const e=rn(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Pi.getLastRemoteSnapshotVersion(t))}function ll(t,e){const n=rn(t),i=e.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",t=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const s=[];e.targetChanges.forEach((o,l)=>{const u=r.get(l);if(!u)return;s.push(n.Pi.removeMatchingKeys(t,o.removedDocuments,l).next(()=>n.Pi.addMatchingKeys(t,o.addedDocuments,l)));let a=u.withSequenceNumber(t.currentSequenceNumber);null!==e.targetMismatches.get(l)?a=a.withResumeToken(ci.EMPTY_BYTE_STRING,Gn.min()).withLastLimboFreeSnapshotVersion(Gn.min()):o.resumeToken.approximateByteSize()>0&&(a=a.withResumeToken(o.resumeToken,i)),r=r.insert(l,a),function(t,e,n){if(0===t.resumeToken.approximateByteSize())return!0;if(e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8)return!0;return n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(u,a,o)&&s.push(n.Pi.updateTargetData(t,a))});let l=Ur(),u=Jr();if(e.documentUpdates.forEach(i=>{e.resolvedLimboDocuments.has(i)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(t,i))}),s.push(function(t,e,n){let i=Jr(),r=Jr();return n.forEach(t=>i=i.add(t)),e.getEntries(t,i).next(t=>{let i=Ur();return n.forEach((n,o)=>{const s=t.get(n);o.isFoundDocument()!==s.isFoundDocument()&&(r=r.add(n)),o.isNoDocument()&&o.version.isEqual(Gn.min())?(e.removeEntry(n,o.readTime),i=i.insert(n,o)):!s.isValidDocument()||o.version.compareTo(s.version)>0||0===o.version.compareTo(s.version)&&s.hasPendingWrites?(e.addEntry(o),i=i.insert(n,o)):Ye(il,"Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",o.version)}),{ks:i,qs:r}})}(t,o,e.documentUpdates).next(t=>{l=t.ks,u=t.qs})),!i.isEqual(Gn.min())){const e=n.Pi.getLastRemoteSnapshotVersion(t).next(e=>n.Pi.setTargetsMetadata(t,t.currentSequenceNumber,i));s.push(e)}return zn.waitFor(s).next(()=>o.apply(t)).next(()=>n.localDocuments.getLocalViewOfDocuments(t,l,u)).next(()=>l)}).then(t=>(n.Ms=r,t))}function ul(t,e){const n=rn(t);return n.persistence.runTransaction("Get next mutation batch","readonly",t=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(t,e)))}async function al(t,e,n){const i=rn(t),r=i.Ms.get(e),o=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",o,t=>i.persistence.referenceDelegate.removeTarget(t,r))}catch(s){if(!Kn(s))throw s;Ye(il,`Failed to update sequence numbers for target ${e}: ${s}`)}i.Ms=i.Ms.remove(e),i.xs.delete(r.target)}function cl(t,e,n){const i=rn(t);let r=Gn.min(),o=Jr();return i.persistence.runTransaction("Execute query","readwrite",t=>function(t,e,n){const i=rn(t),r=i.xs.get(n);return void 0!==r?zn.resolve(i.Ms.get(r)):i.Pi.getTargetData(e,n)}(i,t,_r(e)).next(e=>{if(e)return r=e.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(t,e.targetId).next(t=>{o=t})}).next(()=>i.Fs.getDocumentsMatchingQuery(t,e,n?r:Gn.min(),n?o:Jr())).next(t=>(function(t,e,n){let i=t.Os.get(e)||Gn.min();n.forEach((t,e)=>{e.readTime.compareTo(i)>0&&(i=e.readTime)}),t.Os.set(e,i)}(i,function(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}(e),t),{documents:t,Qs:o})))}class hl{constructor(){this.activeTargetIds=zr}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class fl{constructor(){this.Mo=new hl,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,n){}addLocalQueryTarget(t,e=!0){return e&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,e,n){this.xo[t]=e}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new hl,Promise.resolve()}handleUserChange(t,e,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class dl{Oo(t){}shutdown(){}}const pl="ConnectivityMonitor";class ml{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Ye(pl,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){Ye(pl,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let vl=null;function wl(){return null===vl?vl=268435456+Math.round(2147483648*Math.random()):vl++,"0x"+vl.toString(16)}const yl="RestConnection",gl={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class bl{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=e+"://"+t.host,this.Ko=`projects/${n}/databases/${i}`,this.Wo=this.databaseId.database===Ti?`project_id=${n}`:`project_id=${n}&database_id=${i}`}Go(t,e,n,i,r){const o=wl(),s=this.zo(t,e.toUriEncodedString());Ye(yl,`Sending RPC '${t}' ${o}:`,s,n);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,i,r);const{host:u}=new URL(s),a=V(u);return this.Jo(t,s,l,n,a).then(e=>(Ye(yl,`Received RPC '${t}' ${o}: `,e),e),e=>{throw Qe(yl,`RPC '${t}' ${o} failed with error: `,e,"url: ",s,"request:",n),e})}Ho(t,e,n,i,r,o){return this.Go(t,e,n,i,r)}jo(t,e,n){t["X-Goog-Api-Client"]="gl-js/ fire/"+ze,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((e,n)=>t[n]=e),n&&n.headers.forEach((e,n)=>t[n]=e)}zo(t,e){const n=gl[t];return`${this.Uo}/v1/${e}:${n}`}terminate(){}}class El{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}xt(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}const Sl="WebChannelConnection";class Tl extends bl{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,e,n,i,r){const o=wl();return new Promise((r,s)=>{const l=new De;l.setWithCredentials(!0),l.listenOnce(Ue.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Fe.NO_ERROR:const e=l.getResponseJson();Ye(Sl,`XHR for RPC '${t}' ${o} received:`,JSON.stringify(e)),r(e);break;case Fe.TIMEOUT:Ye(Sl,`RPC '${t}' ${o} timed out`),s(new sn(on.DEADLINE_EXCEEDED,"Request time out"));break;case Fe.HTTP_ERROR:const n=l.getStatus();if(Ye(Sl,`RPC '${t}' ${o} failed with status:`,n,"response text:",l.getResponseText()),n>0){let t=l.getResponseJson();Array.isArray(t)&&(t=t[0]);const e=null==t?void 0:t.error;if(e&&e.status&&e.message){const t=function(t){const e=t.toLowerCase().replace(/_/g,"-");return Object.values(on).indexOf(e)>=0?e:on.UNKNOWN}(e.status);s(new sn(t,e.message))}else s(new sn(on.UNKNOWN,"Server responded with status "+l.getStatus()))}else s(new sn(on.UNAVAILABLE,"Connection failed."));break;default:tn(9055,{l_:t,streamId:o,h_:l.getLastErrorCode(),P_:l.getLastError()})}}finally{Ye(Sl,`RPC '${t}' ${o} completed.`)}});const u=JSON.stringify(i);Ye(Sl,`RPC '${t}' ${o} sending request:`,i),l.send(e,"POST",u,n,15)})}T_(t,e,n){const i=wl(),r=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=Ve(),s=Ge(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;void 0!==u&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,e,n),l.encodeInitMessageHeaders=!0;const a=r.join("");Ye(Sl,`Creating RPC '${t}' stream ${i}: ${a}`,l);const c=o.createWebChannel(a,l);this.I_(c);let h=!1,f=!1;const d=new El({Yo:e=>{f?Ye(Sl,`Not sending because RPC '${t}' stream ${i} is closed:`,e):(h||(Ye(Sl,`Opening RPC '${t}' stream ${i} transport.`),c.open(),h=!0),Ye(Sl,`RPC '${t}' stream ${i} sending:`,e),c.send(e))},Zo:()=>c.close()}),p=(t,e,n)=>{t.listen(e,t=>{try{n(t)}catch(e){setTimeout(()=>{throw e},0)}})};return p(c,Le.EventType.OPEN,()=>{f||(Ye(Sl,`RPC '${t}' stream ${i} transport opened.`),d.o_())}),p(c,Le.EventType.CLOSE,()=>{f||(f=!0,Ye(Sl,`RPC '${t}' stream ${i} transport closed`),d.a_(),this.E_(c))}),p(c,Le.EventType.ERROR,e=>{f||(f=!0,Qe(Sl,`RPC '${t}' stream ${i} transport errored. Name:`,e.name,"Message:",e.message),d.a_(new sn(on.UNAVAILABLE,"The operation could not be completed")))}),p(c,Le.EventType.MESSAGE,e=>{var n;if(!f){const r=e.data[0];nn(!!r,16349);const o=r,s=(null==o?void 0:o.error)||(null==(n=o[0])?void 0:n.error);if(s){Ye(Sl,`RPC '${t}' stream ${i} received error:`,s);const e=s.status;let n=function(t){const e=Ro[t];if(void 0!==e)return xo(e)}(e),r=s.message;void 0===n&&(n=on.INTERNAL,r="Unknown error status: "+e+" with message "+s.message),f=!0,d.a_(new sn(n,r)),c.close()}else Ye(Sl,`RPC '${t}' stream ${i} received:`,r),d.u_(r)}}),p(s,je.STAT_EVENT,e=>{e.stat===$e.PROXY?Ye(Sl,`RPC '${t}' stream ${i} detected buffering proxy`):e.stat===$e.NOPROXY&&Ye(Sl,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{d.xt()},0),d}terminate(){this.c_.forEach(t=>t.close()),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter(e=>e===t)}}function kl(){return"undefined"!=typeof document?document:null}function Il(t){return new Xo(t,!0)}class _l{constructor(t,e,n=1e3,i=1.5,r=6e4){this.Mi=t,this.timerId=e,this.d_=n,this.A_=i,this.R_=r,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const e=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),i=Math.max(0,e-n);i>0&&Ye("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${e} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),t())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){null!==this.m_&&(this.m_.skipDelay(),this.m_=null)}cancel(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const Cl="PersistentStream";class Al{constructor(t,e,n,i,r,o,s,l){this.Mi=t,this.S_=n,this.b_=i,this.connection=r,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new _l(t,e)}x_(){return 1===this.state||5===this.state||this.O_()}O_(){return 2===this.state||3===this.state}start(){this.F_=0,4!==this.state?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&null===this.C_&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,e){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,4!==t?this.M_.reset():e&&e.code===on.RESOURCE_EXHAUSTED?(Xe(e.toString()),Xe("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):e&&e.code===on.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(e)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),e=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([t,n])=>{this.D_===e&&this.G_(t,n)},e=>{t(()=>{const t=new sn(on.UNKNOWN,"Fetching auth token failed: "+e.message);return this.z_(t)})})}G_(t,e){const n=this.W_(this.D_);this.stream=this.j_(t,e),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(t=>{n(()=>this.z_(t))}),this.stream.onMessage(t=>{n(()=>1==++this.F_?this.J_(t):this.onNext(t))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(t){return Ye(Cl,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return e=>{this.Mi.enqueueAndForget(()=>this.D_===t?e():(Ye(Cl,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Ol extends Al{constructor(t,e,n,i,r,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,n,i,o),this.serializer=r}j_(t,e){return this.connection.T_("Listen",t,e)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const e=function(t,e){let n;if("targetChange"in e){e.targetChange;const r="NO_CHANGE"===(i=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===i?1:"REMOVE"===i?2:"CURRENT"===i?3:"RESET"===i?4:tn(39313,{state:i}),o=e.targetChange.targetIds||[],s=function(t,e){return t.useProto3Json?(nn(void 0===e||"string"==typeof e,58123),ci.fromBase64String(e||"")):(nn(void 0===e||e instanceof Buffer||e instanceof Uint8Array,16193),ci.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),l=e.targetChange.cause,u=l&&function(t){const e=void 0===t.code?on.UNKNOWN:xo(t.code);return new sn(e,t.message||"")}(l);n=new qo(r,o,s,u||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=ls(t,i.document.name),o=ns(i.document.updateTime),s=i.document.createTime?ns(i.document.createTime):Gn.min(),l=new Ji({mapValue:{fields:i.document.fields}}),u=Ki.newFoundDocument(r,o,s,l),a=i.targetIds||[],c=i.removedTargetIds||[];n=new Go(a,c,u.key,u)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=ls(t,i.document),o=i.readTime?ns(i.readTime):Gn.min(),s=Ki.newNoDocument(r,o),l=i.removedTargetIds||[];n=new Go([],l,s.key,s)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=ls(t,i.document),o=i.removedTargetIds||[];n=new Go([],o,r,null)}else{if(!("filter"in e))return tn(11601,{Rt:e});{e.filter;const t=e.filter;t.targetId;const{count:i=0,unchangedNames:r}=t,o=new No(i,r),s=t.targetId;n=new Vo(s,o)}}var i;return n}(this.serializer,t),n=function(t){if(!("targetChange"in t))return Gn.min();const e=t.targetChange;return e.targetIds&&e.targetIds.length?Gn.min():e.readTime?ns(e.readTime):Gn.min()}(t);return this.listener.H_(e,n)}Y_(t){const e={};e.database=as(this.serializer),e.addTarget=function(t,e){let n;const i=e.target;if(n=br(i)?{documents:fs(t,i)}:{query:ds(t,i).ft},n.targetId=e.targetId,e.resumeToken.approximateByteSize()>0){n.resumeToken=ts(t,e.resumeToken);const i=Qo(t,e.expectedCount);null!==i&&(n.expectedCount=i)}else if(e.snapshotVersion.compareTo(Gn.min())>0){n.readTime=Zo(t,e.snapshotVersion.toTimestamp());const i=Qo(t,e.expectedCount);null!==i&&(n.expectedCount=i)}return n}(this.serializer,t);const n=function(t,e){const n=function(t){switch(t){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return tn(28987,{purpose:t})}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,t);n&&(e.labels=n),this.q_(e)}Z_(t){const e={};e.database=as(this.serializer),e.removeTarget=t,this.q_(e)}}class Nl extends Al{constructor(t,e,n,i,r,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,n,i,o),this.serializer=r}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,e){return this.connection.T_("Write",t,e)}J_(t){return nn(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,nn(!t.writeResults||0===t.writeResults.length,55816),this.listener.ta()}onNext(t){nn(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const e=function(t,e){return t&&t.length>0?(nn(void 0!==e,14353),t.map(t=>function(t,e){let n=t.updateTime?ns(t.updateTime):ns(e);return n.isEqual(Gn.min())&&(n=ns(e)),new co(n,t.transformResults||[])}(t,e))):[]}(t.writeResults,t.commitTime),n=ns(t.commitTime);return this.listener.na(n,e)}ra(){const t={};t.database=as(this.serializer),this.q_(t)}ea(t){const e={streamToken:this.lastStreamToken,writes:t.map(t=>function(t,e){let n;if(e instanceof bo)n={update:hs(t,e.key,e.value)};else if(e instanceof Io)n={delete:ss(t,e.key)};else if(e instanceof Eo)n={update:hs(t,e.key,e.data),updateMask:Ss(e.fieldMask)};else{if(!(e instanceof _o))return tn(16599,{Vt:e.type});n={verify:ss(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(t=>function(t,e){const n=e.transform;if(n instanceof eo)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof no)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof ro)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof so)return{fieldPath:e.field.canonicalString(),increment:n.Ae};throw tn(20930,{transform:e.transform})}(0,t))),e.precondition.isNone||(n.currentDocument=(i=t,void 0!==(r=e.precondition).updateTime?{updateTime:es(i,r.updateTime)}:void 0!==r.exists?{exists:r.exists}:tn(27497))),n;var i,r}(this.serializer,t))};this.q_(e)}}class Rl{}class Pl extends Rl{constructor(t,e,n,i){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=n,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new sn(on.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,e,n,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,o])=>this.connection.Go(t,rs(e,n),i,r,o)).catch(t=>{throw"FirebaseError"===t.name?(t.code===on.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new sn(on.UNKNOWN,t.toString())})}Ho(t,e,n,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Ho(t,rs(e,n),i,o,s,r)).catch(t=>{throw"FirebaseError"===t.name?(t.code===on.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new sn(on.UNKNOWN,t.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class xl{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){0===this.oa&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(t){"Online"===this.state?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,"Online"===t&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Xe(e),this.aa=!1):Ye("OnlineStateTracker",e)}Pa(){null!==this._a&&(this._a.cancel(),this._a=null)}}const Ml="RemoteStore";class Dl{constructor(t,e,n,i,r){this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=r,this.Aa.Oo(t=>{n.enqueueAndForget(async()=>{Hl(this)&&(Ye(Ml,"Restarting streams for network reachability change."),await async function(t){const e=rn(t);e.Ea.add(4),await Ul(e),e.Ra.set("Unknown"),e.Ea.delete(4),await Ll(e)}(this))})}),this.Ra=new xl(n,i)}}async function Ll(t){if(Hl(t))for(const e of t.da)await e(!0)}async function Ul(t){for(const e of t.da)await e(!1)}function Fl(t,e){const n=rn(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),ql(n)?Vl(n):uu(n).O_()&&jl(n,e))}function $l(t,e){const n=rn(t),i=uu(n);n.Ia.delete(e),i.O_()&&Gl(n,e),0===n.Ia.size&&(i.O_()?i.L_():Hl(n)&&n.Ra.set("Unknown"))}function jl(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Gn.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}uu(t).Y_(e)}function Gl(t,e){t.Va.Ue(e),uu(t).Z_(e)}function Vl(t){t.Va=new Bo({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),uu(t).start(),t.Ra.ua()}function ql(t){return Hl(t)&&!uu(t).x_()&&t.Ia.size>0}function Hl(t){return 0===rn(t).Ea.size}function Bl(t){t.Va=void 0}async function Jl(t){t.Ra.set("Online")}async function zl(t){t.Ia.forEach((e,n)=>{jl(t,e)})}async function Kl(t,e){Bl(t),ql(t)?(t.Ra.ha(e),Vl(t)):t.Ra.set("Unknown")}async function Wl(t,e,n){if(t.Ra.set("Online"),e instanceof qo&&2===e.state&&e.cause)try{await async function(t,e){const n=e.cause;for(const i of e.targetIds)t.Ia.has(i)&&(await t.remoteSyncer.rejectListen(i,n),t.Ia.delete(i),t.Va.removeTarget(i))}(t,e)}catch(i){Ye(Ml,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Yl(t,i)}else if(e instanceof Go?t.Va.Ze(e):e instanceof Vo?t.Va.st(e):t.Va.tt(e),!n.isEqual(Gn.min()))try{const e=await sl(t.localStore);n.compareTo(e)>=0&&await function(t,e){const n=t.Va.Tt(e);return n.targetChanges.forEach((n,i)=>{if(n.resumeToken.approximateByteSize()>0){const r=t.Ia.get(i);r&&t.Ia.set(i,r.withResumeToken(n.resumeToken,e))}}),n.targetMismatches.forEach((e,n)=>{const i=t.Ia.get(e);if(!i)return;t.Ia.set(e,i.withResumeToken(ci.EMPTY_BYTE_STRING,i.snapshotVersion)),Gl(t,e);const r=new ks(i.target,e,n,i.sequenceNumber);jl(t,r)}),t.remoteSyncer.applyRemoteEvent(n)}(t,n)}catch(r){Ye(Ml,"Failed to raise snapshot:",r),await Yl(t,r)}}async function Yl(t,e,n){if(!Kn(e))throw e;t.Ea.add(1),await Ul(t),t.Ra.set("Offline"),n||(n=()=>sl(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Ye(Ml,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Ll(t)})}function Xl(t,e){return e().catch(n=>Yl(t,n,e))}async function Ql(t){const e=rn(t),n=au(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:-1;for(;Zl(e);)try{const t=await ul(e.localStore,i);if(null===t){0===e.Ta.length&&n.L_();break}i=t.batchId,tu(e,t)}catch(r){await Yl(e,r)}eu(e)&&nu(e)}function Zl(t){return Hl(t)&&t.Ta.length<10}function tu(t,e){t.Ta.push(e);const n=au(t);n.O_()&&n.X_&&n.ea(e.mutations)}function eu(t){return Hl(t)&&!au(t).x_()&&t.Ta.length>0}function nu(t){au(t).start()}async function iu(t){au(t).ra()}async function ru(t){const e=au(t);for(const n of t.Ta)e.ea(n.mutations)}async function ou(t,e,n){const i=t.Ta.shift(),r=Ao.from(i,e,n);await Xl(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await Ql(t)}async function su(t,e){e&&au(t).X_&&await async function(t,e){if(function(t){switch(t){case on.OK:return tn(64938);case on.CANCELLED:case on.UNKNOWN:case on.DEADLINE_EXCEEDED:case on.RESOURCE_EXHAUSTED:case on.INTERNAL:case on.UNAVAILABLE:case on.UNAUTHENTICATED:return!1;case on.INVALID_ARGUMENT:case on.NOT_FOUND:case on.ALREADY_EXISTS:case on.PERMISSION_DENIED:case on.FAILED_PRECONDITION:case on.ABORTED:case on.OUT_OF_RANGE:case on.UNIMPLEMENTED:case on.DATA_LOSS:return!0;default:return tn(15467,{code:t})}}(n=e.code)&&n!==on.ABORTED){const n=t.Ta.shift();au(t).B_(),await Xl(t,()=>t.remoteSyncer.rejectFailedWrite(n.batchId,e)),await Ql(t)}var n}(t,e),eu(t)&&nu(t)}async function lu(t,e){const n=rn(t);n.asyncQueue.verifyOperationInProgress(),Ye(Ml,"RemoteStore received new credentials");const i=Hl(n);n.Ea.add(3),await Ul(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Ll(n)}function uu(t){return t.ma||(t.ma=function(t,e,n){const i=rn(t);return i.sa(),new Ol(e,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)}(t.datastore,t.asyncQueue,{Xo:Jl.bind(null,t),t_:zl.bind(null,t),r_:Kl.bind(null,t),H_:Wl.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),ql(t)?Vl(t):t.Ra.set("Unknown")):(await t.ma.stop(),Bl(t))})),t.ma}function au(t){return t.fa||(t.fa=function(t,e,n){const i=rn(t);return i.sa(),new Nl(e,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:iu.bind(null,t),r_:su.bind(null,t),ta:ru.bind(null,t),na:ou.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Ql(t)):(await t.fa.stop(),t.Ta.length>0&&(Ye(Ml,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}class cu{constructor(t,e,n,i,r){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=i,this.removalCallback=r,this.deferred=new ln,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(t=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,n,i,r){const o=Date.now()+n,s=new cu(t,e,o,i,r);return s.start(n),s}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new sn(on.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function hu(t,e){if(Xe("AsyncQueue",`${e}: ${t}`),Kn(t))return new sn(on.UNAVAILABLE,`${e}: ${t}`);throw t}class fu{static emptySet(t){return new fu(t.comparator)}constructor(t){this.comparator=t?(e,n)=>t(e,n)||On.comparator(e.key,n.key):(t,e)=>On.comparator(t.key,e.key),this.keyedMap=$r(),this.sortedSet=new ii(this.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,n)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof fu))return!1;if(this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;e.hasNext();){const t=e.getNext().key,i=n.getNext().key;if(!t.isEqual(i))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const n=new fu;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=e,n}}class du{constructor(){this.ga=new ii(On.comparator)}track(t){const e=t.doc.key,n=this.ga.get(e);n?0!==t.type&&3===n.type?this.ga=this.ga.insert(e,t):3===t.type&&1!==n.type?this.ga=this.ga.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.ga=this.ga.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.ga=this.ga.remove(e):1===t.type&&2===n.type?this.ga=this.ga.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):tn(63341,{Rt:t,pa:n}):this.ga=this.ga.insert(e,t)}ya(){const t=[];return this.ga.inorderTraversal((e,n)=>{t.push(n)}),t}}class pu{constructor(t,e,n,i,r,o,s,l,u){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=r,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(t,e,n,i,r){const o=[];return e.forEach(t=>{o.push({type:0,doc:t})}),new pu(t,e,fu.emptySet(e),o,n,i,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Or(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(let i=0;i<e.length;i++)if(e[i].type!==n[i].type||!e[i].doc.isEqual(n[i].doc))return!1;return!0}}class mu{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(t=>t.Da())}}class vu{constructor(){this.queries=wu(),this.onlineState="Unknown",this.Ca=new Set}terminate(){!function(t,e){const n=rn(t),i=n.queries;n.queries=wu(),i.forEach((t,n)=>{for(const i of n.Sa)i.onError(e)})}(this,new sn(on.ABORTED,"Firestore shutting down"))}}function wu(){return new Dr(t=>Nr(t),Or)}async function yu(t,e){const n=rn(t);let i=3;const r=e.query;let o=n.queries.get(r);o?!o.ba()&&e.Da()&&(i=2):(o=new mu,i=e.Da()?0:1);try{switch(i){case 0:o.wa=await n.onListen(r,!0);break;case 1:o.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(s){const t=hu(s,`Initialization of query '${Rr(e.query)}' failed`);return void e.onError(t)}n.queries.set(r,o),o.Sa.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&Su(n)}async function gu(t,e){const n=rn(t),i=e.query;let r=3;const o=n.queries.get(i);if(o){const t=o.Sa.indexOf(e);t>=0&&(o.Sa.splice(t,1),0===o.Sa.length?r=e.Da()?0:1:!o.ba()&&e.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function bu(t,e){const n=rn(t);let i=!1;for(const r of e){const t=r.query,e=n.queries.get(t);if(e){for(const t of e.Sa)t.Fa(r)&&(i=!0);e.wa=r}}i&&Su(n)}function Eu(t,e,n){const i=rn(t),r=i.queries.get(e);if(r)for(const o of r.Sa)o.onError(n);i.queries.delete(e)}function Su(t){t.Ca.forEach(t=>{t.next()})}var Tu,ku;(ku=Tu||(Tu={})).Ma="default",ku.Cache="cache";class Iu{constructor(t,e,n){this.query=t,this.xa=e,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(t){if(!this.options.includeMetadataChanges){const e=[];for(const n of t.docChanges)3!==n.type&&e.push(n);t=new pu(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),e=!0):this.La(t,this.onlineState)&&(this.ka(t),e=!0),this.Na=t,e}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let e=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),e=!0),e}La(t,e){if(!t.fromCache)return!0;if(!this.Da())return!0;const n="Offline"!==e;return(!this.options.qa||!n)&&(!t.docs.isEmpty()||t.hasCachedResults||"Offline"===e)}Ba(t){if(t.docChanges.length>0)return!0;const e=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges}ka(t){t=pu.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==Tu.Cache}}class _u{constructor(t){this.key=t}}class Cu{constructor(t){this.key=t}}class Au{constructor(t,e){this.query=t,this.Ya=e,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Jr(),this.mutatedKeys=Jr(),this.eu=xr(t),this.tu=new fu(this.eu)}get nu(){return this.Ya}ru(t,e){const n=e?e.iu:new du,i=e?e.tu:this.tu;let r=e?e.mutatedKeys:this.mutatedKeys,o=i,s=!1;const l="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,u="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((t,e)=>{const a=i.get(t),c=Pr(this.query,e)?e:null,h=!!a&&this.mutatedKeys.has(a.key),f=!!c&&(c.hasLocalMutations||this.mutatedKeys.has(c.key)&&c.hasCommittedMutations);let d=!1;a&&c?a.data.isEqual(c.data)?h!==f&&(n.track({type:3,doc:c}),d=!0):this.su(a,c)||(n.track({type:2,doc:c}),d=!0,(l&&this.eu(c,l)>0||u&&this.eu(c,u)<0)&&(s=!0)):!a&&c?(n.track({type:0,doc:c}),d=!0):a&&!c&&(n.track({type:1,doc:a}),d=!0,(l||u)&&(s=!0)),d&&(c?(o=o.add(c),r=f?r.add(t):r.delete(t)):(o=o.delete(t),r=r.delete(t)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const t="F"===this.query.limitType?o.last():o.first();o=o.delete(t.key),r=r.delete(t.key),n.track({type:1,doc:t})}return{tu:o,iu:n,Cs:s,mutatedKeys:r}}su(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,n,i){const r=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const o=t.iu.ya();o.sort((t,e)=>function(t,e){const n=t=>{switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return tn(20277,{Rt:t})}};return n(t)-n(e)}(t.type,e.type)||this.eu(t.doc,e.doc)),this.ou(n),i=i??!1;const s=e&&!i?this._u():[],l=0===this.Xa.size&&this.current&&!i?1:0,u=l!==this.Za;return this.Za=l,0!==o.length||u?{snapshot:new pu(this.query,t.tu,r,o,t.mutatedKeys,0===l,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:s}:{au:s}}va(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({tu:this.tu,iu:new du,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach(t=>this.Ya=this.Ya.add(t)),t.modifiedDocuments.forEach(t=>{}),t.removedDocuments.forEach(t=>this.Ya=this.Ya.delete(t)),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Jr(),this.tu.forEach(t=>{this.uu(t.key)&&(this.Xa=this.Xa.add(t.key))});const e=[];return t.forEach(t=>{this.Xa.has(t)||e.push(new Cu(t))}),this.Xa.forEach(n=>{t.has(n)||e.push(new _u(n))}),e}cu(t){this.Ya=t.Qs,this.Xa=Jr();const e=this.ru(t.documents);return this.applyChanges(e,!0)}lu(){return pu.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,0===this.Za,this.hasCachedResults)}}const Ou="SyncEngine";class Nu{constructor(t,e,n){this.query=t,this.targetId=e,this.view=n}}class Ru{constructor(t){this.key=t,this.hu=!1}}class Pu{constructor(t,e,n,i,r,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=i,this.currentUser=r,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Dr(t=>Nr(t),Or),this.Iu=new Map,this.Eu=new Set,this.du=new ii(On.comparator),this.Au=new Map,this.Ru=new Hs,this.Vu={},this.mu=new Map,this.fu=Ps.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return!0===this.gu}}async function xu(t,e,n=!0){const i=ta(t);let r;const o=i.Tu.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.lu()):r=await Du(i,e,n,!0),r}async function Mu(t,e){const n=ta(t);await Du(n,e,!0,!1)}async function Du(t,e,n,i){const r=await function(t,e){const n=rn(t);return n.persistence.runTransaction("Allocate target","readwrite",t=>{let i;return n.Pi.getTargetData(t,e).next(r=>r?(i=r,zn.resolve(i)):n.Pi.allocateTargetId(t).next(r=>(i=new ks(e,r,"TargetPurposeListen",t.currentSequenceNumber),n.Pi.addTargetData(t,i).next(()=>i))))}).then(t=>{const i=n.Ms.get(t.targetId);return(null===i||t.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(t.targetId,t),n.xs.set(e,t.targetId)),t})}(t.localStore,_r(e)),o=r.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n);let l;return i&&(l=await async function(t,e,n,i,r){t.pu=(e,n,i)=>async function(t,e,n,i){let r=e.view.ru(n);r.Cs&&(r=await cl(t.localStore,e.query,!1).then(({documents:t})=>e.view.ru(t,r)));const o=i&&i.targetChanges.get(e.targetId),s=i&&null!=i.targetMismatches.get(e.targetId),l=e.view.applyChanges(r,t.isPrimaryClient,o,s);return Ku(t,e.targetId,l.au),l.snapshot}(t,e,n,i);const o=await cl(t.localStore,e,!0),s=new Au(e,o.Qs),l=s.ru(o.documents),u=jo.createSynthesizedTargetChangeForCurrentChange(n,i&&"Offline"!==t.onlineState,r),a=s.applyChanges(l,t.isPrimaryClient,u);Ku(t,n,a.au);const c=new Nu(e,n,s);return t.Tu.set(e,c),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),a.snapshot}(t,e,o,"current"===s,r.resumeToken)),t.isPrimaryClient&&n&&Fl(t.remoteStore,r),l}async function Lu(t,e,n){const i=rn(t),r=i.Tu.get(e),o=i.Iu.get(r.targetId);if(o.length>1)return i.Iu.set(r.targetId,o.filter(t=>!Or(t,e))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await al(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&$l(i.remoteStore,r.targetId),Ju(i,r.targetId)}).catch(Jn)):(Ju(i,r.targetId),await al(i.localStore,r.targetId,!0))}async function Uu(t,e){const n=rn(t),i=n.Tu.get(e),r=n.Iu.get(i.targetId);n.isPrimaryClient&&1===r.length&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),$l(n.remoteStore,i.targetId))}async function Fu(t,e,n){const i=function(t){const e=rn(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Vu.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=qu.bind(null,e),e}(t);try{const t=await function(t,e){const n=rn(t),i=jn.now(),r=e.reduce((t,e)=>t.add(e.key),Jr());let o,s;return n.persistence.runTransaction("Locally write mutations","readwrite",t=>{let l=Ur(),u=Jr();return n.Ns.getEntries(t,r).next(t=>{l=t,l.forEach((t,e)=>{e.isValidDocument()||(u=u.add(t))})}).next(()=>n.localDocuments.getOverlayedDocuments(t,l)).next(r=>{o=r;const s=[];for(const t of e){const e=yo(t,o.get(t.key).overlayedDocument);null!=e&&s.push(new Eo(t.key,e,zi(e.value.mapValue),ho.exists(!0)))}return n.mutationQueue.addMutationBatch(t,i,s,e)}).next(e=>{s=e;const i=e.applyToLocalDocumentSet(o,u);return n.documentOverlayCache.saveOverlays(t,e.batchId,i)})}).then(()=>({batchId:s.batchId,changes:jr(o)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(t.batchId),function(t,e,n){let i=t.Vu[t.currentUser.toKey()];i||(i=new ii(yn)),i=i.insert(e,n),t.Vu[t.currentUser.toKey()]=i}(i,t.batchId,n),await Xu(i,t.changes),await Ql(i.remoteStore)}catch(r){const t=hu(r,"Failed to persist write");n.reject(t)}}async function $u(t,e){const n=rn(t);try{const t=await ll(n.localStore,e);e.targetChanges.forEach((t,e)=>{const i=n.Au.get(e);i&&(nn(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1,22616),t.addedDocuments.size>0?i.hu=!0:t.modifiedDocuments.size>0?nn(i.hu,14607):t.removedDocuments.size>0&&(nn(i.hu,42227),i.hu=!1))}),await Xu(n,t,e)}catch(i){await Jn(i)}}function ju(t,e,n){const i=rn(t);if(i.isPrimaryClient&&0===n||!i.isPrimaryClient&&1===n){const t=[];i.Tu.forEach((n,i)=>{const r=i.view.va(e);r.snapshot&&t.push(r.snapshot)}),function(t,e){const n=rn(t);n.onlineState=e;let i=!1;n.queries.forEach((t,n)=>{for(const r of n.Sa)r.va(e)&&(i=!0)}),i&&Su(n)}(i.eventManager,e),t.length&&i.Pu.H_(t),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function Gu(t,e,n){const i=rn(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Au.get(e),o=r&&r.key;if(o){let t=new ii(On.comparator);t=t.insert(o,Ki.newNoDocument(o,Gn.min()));const n=Jr().add(o),r=new $o(Gn.min(),new Map,new ii(yn),t,n);await $u(i,r),i.du=i.du.remove(o),i.Au.delete(e),Yu(i)}else await al(i.localStore,e,!1).then(()=>Ju(i,e,n)).catch(Jn)}async function Vu(t,e){const n=rn(t),i=e.batch.batchId;try{const t=await function(t,e){const n=rn(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",t=>{const i=e.batch.keys(),r=n.Ns.newChangeBuffer({trackRemovals:!0});return function(t,e,n,i){const r=n.batch,o=r.keys();let s=zn.resolve();return o.forEach(t=>{s=s.next(()=>i.getEntry(e,t)).next(e=>{const o=n.docVersions.get(t);nn(null!==o,48541),e.version.compareTo(o)<0&&(r.applyToRemoteDocument(e,n),e.isValidDocument()&&(e.setReadTime(n.commitVersion),i.addEntry(e)))})}),s.next(()=>t.mutationQueue.removeMutationBatch(e,r))}(n,t,e,r).next(()=>r.apply(t)).next(()=>n.mutationQueue.performConsistencyCheck(t)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(t,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,function(t){let e=Jr();for(let n=0;n<t.mutationResults.length;++n)t.mutationResults[n].transformResults.length>0&&(e=e.add(t.batch.mutations[n].key));return e}(e))).next(()=>n.localDocuments.getDocuments(t,i))})}(n.localStore,e);Bu(n,i,null),Hu(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Xu(n,t)}catch(r){await Jn(r)}}async function qu(t,e,n){const i=rn(t);try{const t=await function(t,e){const n=rn(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",t=>{let i;return n.mutationQueue.lookupMutationBatch(t,e).next(e=>(nn(null!==e,37113),i=e.keys(),n.mutationQueue.removeMutationBatch(t,e))).next(()=>n.mutationQueue.performConsistencyCheck(t)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(t,i,e)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,i)).next(()=>n.localDocuments.getDocuments(t,i))})}(i.localStore,e);Bu(i,e,n),Hu(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Xu(i,t)}catch(r){await Jn(r)}}function Hu(t,e){(t.mu.get(e)||[]).forEach(t=>{t.resolve()}),t.mu.delete(e)}function Bu(t,e,n){const i=rn(t);let r=i.Vu[i.currentUser.toKey()];if(r){const t=r.get(e);t&&(n?t.reject(n):t.resolve(),r=r.remove(e)),i.Vu[i.currentUser.toKey()]=r}}function Ju(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Iu.get(e))t.Tu.delete(i),n&&t.Pu.yu(i,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(e=>{t.Ru.containsKey(e)||zu(t,e)})}function zu(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);null!==n&&($l(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Yu(t))}function Ku(t,e,n){for(const i of n)i instanceof _u?(t.Ru.addReference(i.key,e),Wu(t,i)):i instanceof Cu?(Ye(Ou,"Document no longer in limbo: "+i.key),t.Ru.removeReference(i.key,e),t.Ru.containsKey(i.key)||zu(t,i.key)):tn(19791,{wu:i})}function Wu(t,e){const n=e.key,i=n.path.canonicalString();t.du.get(n)||t.Eu.has(i)||(Ye(Ou,"New document in limbo: "+n),t.Eu.add(i),Yu(t))}function Yu(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new On(_n.fromString(e)),i=t.fu.next();t.Au.set(i,new Ru(n)),t.du=t.du.insert(n,i),Fl(t.remoteStore,new ks(_r(Sr(n.path)),i,"TargetPurposeLimboResolution",Wn.ce))}}async function Xu(t,e,n){const i=rn(t),r=[],o=[],s=[];i.Tu.isEmpty()||(i.Tu.forEach((t,l)=>{s.push(i.pu(l,e,n).then(t=>{var e;if((t||n)&&i.isPrimaryClient){const r=t?!t.fromCache:null==(e=null==n?void 0:n.targetChanges.get(l.targetId))?void 0:e.current;i.sharedClientState.updateQueryState(l.targetId,r?"current":"not-current")}if(t){r.push(t);const e=tl.As(l.targetId,t);o.push(e)}}))}),await Promise.all(s),i.Pu.H_(r),await async function(t,e){const n=rn(t);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",t=>zn.forEach(e,e=>zn.forEach(e.Es,i=>n.persistence.referenceDelegate.addReference(t,e.targetId,i)).next(()=>zn.forEach(e.ds,i=>n.persistence.referenceDelegate.removeReference(t,e.targetId,i)))))}catch(i){if(!Kn(i))throw i;Ye(il,"Failed to update sequence numbers: "+i)}for(const r of e){const t=r.targetId;if(!r.fromCache){const e=n.Ms.get(t),i=e.snapshotVersion,r=e.withLastLimboFreeSnapshotVersion(i);n.Ms=n.Ms.insert(t,r)}}}(i.localStore,o))}async function Qu(t,e){const n=rn(t);if(!n.currentUser.isEqual(e)){Ye(Ou,"User change. New user:",e.toKey());const t=await ol(n.localStore,e);n.currentUser=e,r="'waitForPendingWrites' promise is rejected due to a user change.",(i=n).mu.forEach(t=>{t.forEach(t=>{t.reject(new sn(on.CANCELLED,r))})}),i.mu.clear(),n.sharedClientState.handleUserChange(e,t.removedBatchIds,t.addedBatchIds),await Xu(n,t.Ls)}var i,r}function Zu(t,e){const n=rn(t),i=n.Au.get(e);if(i&&i.hu)return Jr().add(i.key);{let t=Jr();const i=n.Iu.get(e);if(!i)return t;for(const e of i){const i=n.Tu.get(e);t=t.unionWith(i.view.nu)}return t}}function ta(t){const e=rn(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=$u.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Zu.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Gu.bind(null,e),e.Pu.H_=bu.bind(null,e.eventManager),e.Pu.yu=Eu.bind(null,e.eventManager),e}class ea{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Il(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,e){return null}Mu(t,e){return null}vu(t){return function(t,e,n,i){return new rl(t,e,n,i)}(this.persistence,new nl,t.initialUser,this.serializer)}Cu(t){return new Ys(Qs.mi,this.serializer)}Du(t){return new fl}async terminate(){var t,e;null==(t=this.gcScheduler)||t.stop(),null==(e=this.indexBackfillerScheduler)||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ea.provider={build:()=>new ea};class na extends ea{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,e){nn(this.persistence.referenceDelegate instanceof Zs,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new Ls(n,t.asyncQueue,e)}Cu(t){const e=void 0!==this.cacheSizeBytes?Rs.withCacheSize(this.cacheSizeBytes):Rs.DEFAULT;return new Ys(t=>Zs.mi(t,e),this.serializer)}}class ia{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=t=>ju(this.syncEngine,t,1),this.remoteStore.remoteSyncer.handleCredentialChange=Qu.bind(null,this.syncEngine),await async function(t,e){const n=rn(t);e?(n.Ea.delete(2),await Ll(n)):e||(n.Ea.add(2),await Ul(n),n.Ra.set("Unknown"))}(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return new vu}createDatastore(t){const e=Il(t.databaseInfo.databaseId),n=(i=t.databaseInfo,new Tl(i));var i;return function(t,e,n,i){return new Pl(t,e,n,i)}(t.authCredentials,t.appCheckCredentials,n,e)}createRemoteStore(t){return e=this.localStore,n=this.datastore,i=t.asyncQueue,r=t=>ju(this.syncEngine,t,0),o=ml.v()?new ml:new dl,new Dl(e,n,i,r,o);var e,n,i,r,o}createSyncEngine(t,e){return function(t,e,n,i,r,o,s){const l=new Pu(t,e,n,i,r,o);return s&&(l.gu=!0),l}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t,e;await async function(t){const e=rn(t);Ye(Ml,"RemoteStore shutting down."),e.Ea.add(5),await Ul(e),e.Aa.shutdown(),e.Ra.set("Unknown")}(this.remoteStore),null==(t=this.datastore)||t.terminate(),null==(e=this.eventManager)||e.terminate()}}ia.provider={build:()=>new ia};class ra{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):Xe("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,e){setTimeout(()=>{this.muted||t(e)},0)}}const oa="FirestoreClient";class sa{constructor(t,e,n,i,r){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=n,this.databaseInfo=i,this.user=Je.UNAUTHENTICATED,this.clientId=wn.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=r,this.authCredentials.start(n,async t=>{Ye(oa,"Received user=",t.uid),await this.authCredentialListener(t),this.user=t}),this.appCheckCredentials.start(n,t=>(Ye(oa,"Received new app check token=",t),this.appCheckCredentialListener(t,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new ln;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const n=hu(e,"Failed to shutdown persistence");t.reject(n)}}),t.promise}}async function la(t,e){t.asyncQueue.verifyOperationInProgress(),Ye(oa,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async t=>{i.isEqual(t)||(await ol(e.localStore,t),i=t)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function ua(t,e){t.asyncQueue.verifyOperationInProgress();const n=await async function(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ye(oa,"Using user provided OfflineComponentProvider");try{await la(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!("FirebaseError"===(n=r).name?n.code===on.FAILED_PRECONDITION||n.code===on.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code))throw r;Qe("Error using user provided cache. Falling back to memory cache: "+r),await la(t,new ea)}}else Ye(oa,"Using default OfflineComponentProvider"),await la(t,new na(void 0));var n;return t._offlineComponents}(t);Ye(oa,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(t=>lu(e.remoteStore,t)),t.setAppCheckTokenChangeListener((t,n)=>lu(e.remoteStore,n)),t._onlineComponents=e}async function aa(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ye(oa,"Using user provided OnlineComponentProvider"),await ua(t,t._uninitializedComponentsProvider._online)):(Ye(oa,"Using default OnlineComponentProvider"),await ua(t,new ia))),t._onlineComponents}async function ca(t){const e=await aa(t),n=e.eventManager;return n.onListen=xu.bind(null,e.syncEngine),n.onUnlisten=Lu.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Mu.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Uu.bind(null,e.syncEngine),n}function ha(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e}const fa=new Map,da="firestore.googleapis.com",pa=!0;class ma{constructor(t){if(void 0===t.host){if(void 0!==t.ssl)throw new sn(on.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=da,this.ssl=pa}else this.host=t.host,this.ssl=t.ssl??pa;if(this.isUsingEmulator=void 0!==t.emulatorOptions,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=Ns;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new sn(on.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}(function(t,e,n,i){if(!0===e&&!0===i)throw new sn(on.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)})("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ha(t.experimentalLongPollingOptions??{}),function(t){if(void 0!==t.timeoutSeconds){if(isNaN(t.timeoutSeconds))throw new sn(on.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (must not be NaN)`);if(t.timeoutSeconds<5)throw new sn(on.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (minimum allowed value is 5)`);if(t.timeoutSeconds>30)throw new sn(on.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(e=this.experimentalLongPollingOptions,n=t.experimentalLongPollingOptions,e.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams;var e,n}}class va{constructor(t,e,n,i){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ma({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new sn(on.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new sn(on.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ma(t),this._emulatorOptions=t.emulatorOptions||{},void 0!==t.credentials&&(this._authCredentials=function(t){if(!t)return new an;switch(t.type){case"firstParty":return new dn(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new sn(on.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=fa.get(t);e&&(Ye("ComponentProvider","Removing Datastore"),fa.delete(t),e.terminate())}(this),Promise.resolve()}}function wa(t,e,n,i={}){var r;t=Dn(t,va);const o=V(e),s=t._getSettings(),l={...s,emulatorOptions:t._getEmulatorOptions()},u=`${e}:${n}`;o&&(q(`https://${u}`),J("Firestore",!0)),s.host!==da&&s.host!==u&&Qe("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const a={...s,host:u,ssl:o,emulatorOptions:i};if(!Q(a,l)&&(t._setSettings(a),i.mockUserToken)){let e,n;if("string"==typeof i.mockUserToken)e=i.mockUserToken,n=Je.MOCK_USER;else{e=function(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=e||"demo-project",i=t.iat||0,r=t.sub||t.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}},...t};return[M(JSON.stringify({alg:"none",type:"JWT"})),M(JSON.stringify(o)),""].join(".")}(i.mockUserToken,null==(r=t._app)?void 0:r.options.projectId);const o=i.mockUserToken.sub||i.mockUserToken.user_id;if(!o)throw new sn(on.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Je(o)}t._authCredentials=new cn(new un(e,n))}}class ya{constructor(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new ya(this.firestore,t,this._query)}}class ga{constructor(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ba(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new ga(this.firestore,t,this._key)}toJSON(){return{type:ga._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,e,n){if(Un(e,ga._jsonSchema))return new ga(t,n||null,new On(_n.fromString(e.referencePath)))}}ga._jsonSchemaVersion="firestore/documentReference/1.0",ga._jsonSchema={type:Ln("string",ga._jsonSchemaVersion),referencePath:Ln("string")};class ba extends ya{constructor(t,e,n){super(t,e,Sr(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new ga(this.firestore,null,new On(t))}withConverter(t){return new ba(this.firestore,t,this._path)}}function Ea(t,e,...n){if(t=it(t),1===arguments.length&&(e=wn.newId()),Nn("doc","path",e),t instanceof va){const i=_n.fromString(e,...n);return Rn(i),new ga(t,null,new On(i))}{if(!(t instanceof ga||t instanceof ba))throw new sn(on.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(_n.fromString(e,...n));return Rn(i),new ga(t.firestore,t instanceof ba?t.converter:null,new On(i))}}const Sa="AsyncQueue";class Ta{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new _l(this,"async_queue_retry"),this._c=()=>{const t=kl();t&&Ye(Sa,"Visibility state changed to "+t.visibilityState),this.M_.w_()},this.ac=t;const e=kl();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const e=kl();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise(()=>{});const e=new ln;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Xu.push(t),this.lc()))}async lc(){if(0!==this.Xu.length){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!Kn(t))throw t;Ye(Sa,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(t){const e=this.ac.then(()=>(this.rc=!0,t().catch(t=>{throw this.nc=t,this.rc=!1,Xe("INTERNAL UNHANDLED ERROR: ",ka(t)),t}).then(t=>(this.rc=!1,t))));return this.ac=e,e}enqueueAfterDelay(t,e,n){this.uc(),this.oc.indexOf(t)>-1&&(e=0);const i=cu.createAndSchedule(this,t,e,n,t=>this.hc(t));return this.tc.push(i),i}uc(){this.nc&&tn(47125,{Pc:ka(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do{t=this.ac,await t}while(t!==this.ac)}Ic(t){for(const e of this.tc)if(e.timerId===t)return!0;return!1}Ec(t){return this.Tc().then(()=>{this.tc.sort((t,e)=>t.targetTimeMs-e.targetTimeMs);for(const e of this.tc)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.Tc()})}dc(t){this.oc.push(t)}hc(t){const e=this.tc.indexOf(t);this.tc.splice(e,1)}}function ka(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}class Ia extends va{constructor(t,e,n,i){super(t,e,n,i),this.type="firestore",this._queue=new Ta,this._persistenceKey=(null==i?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new Ta(t),this._firestoreClient=void 0,await t}}}function _a(t){if(t._terminated)throw new sn(on.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||function(t){var e,n,i;const r=t._freezeSettings(),o=(s=t._databaseId,l=(null==(e=t._app)?void 0:e.options.appId)||"",u=t._persistenceKey,a=r,new Si(s,l,u,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,ha(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator));var s,l,u,a;t._componentsProvider||(null==(n=r.localCache)?void 0:n._offlineComponentProvider)&&(null==(i=r.localCache)?void 0:i._onlineComponentProvider)&&(t._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),t._firestoreClient=new sa(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(t){const e=null==t?void 0:t._online.build();return{_offline:null==t?void 0:t._offline.build(e),_online:e}}(t._componentsProvider))}(t),t._firestoreClient}class Ca{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Ca(ci.fromBase64String(t))}catch(e){throw new sn(on.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new Ca(ci.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Ca._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Un(t,Ca._jsonSchema))return Ca.fromBase64String(t.bytes)}}Ca._jsonSchemaVersion="firestore/bytes/1.0",Ca._jsonSchema={type:Ln("string",Ca._jsonSchemaVersion),bytes:Ln("string")};class Aa{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new sn(on.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new An(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class Oa{constructor(t){this._methodName=t}}class Na{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new sn(on.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new sn(on.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return yn(this._lat,t._lat)||yn(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Na._jsonSchemaVersion}}static fromJSON(t){if(Un(t,Na._jsonSchema))return new Na(t.latitude,t.longitude)}}Na._jsonSchemaVersion="firestore/geoPoint/1.0",Na._jsonSchema={type:Ln("string",Na._jsonSchemaVersion),latitude:Ln("number"),longitude:Ln("number")};class Ra{constructor(t){this._values=(t||[]).map(t=>t)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0}(this._values,t._values)}toJSON(){return{type:Ra._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Un(t,Ra._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(t=>"number"==typeof t))return new Ra(t.vectorValues);throw new sn(on.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ra._jsonSchemaVersion="firestore/vectorValue/1.0",Ra._jsonSchema={type:Ln("string",Ra._jsonSchemaVersion),vectorValues:Ln("object")};const Pa=/^__.*__$/;class xa{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return null!==this.fieldMask?new Eo(t,this.data,this.fieldMask,e,this.fieldTransforms):new bo(t,this.data,e,this.fieldTransforms)}}class Ma{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return new Eo(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function Da(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw tn(40011,{Ac:t})}}class La{constructor(t,e,n,i,r,o){this.settings=t,this.databaseId=e,this.serializer=n,this.ignoreUndefinedProperties=i,void 0===r&&this.Rc(),this.fieldTransforms=r||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new La({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){var e;const n=null==(e=this.path)?void 0:e.child(t),i=this.Vc({path:n,fc:!1});return i.gc(t),i}yc(t){var e;const n=null==(e=this.path)?void 0:e.child(t),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return Wa(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return void 0!==this.fieldMask.find(e=>t.isPrefixOf(e))||void 0!==this.fieldTransforms.find(e=>t.isPrefixOf(e.field))}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(0===t.length)throw this.Sc("Document fields must not be empty");if(Da(this.Ac)&&Pa.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class Ua{constructor(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=n||Il(t)}Cc(t,e,n,i=!1){return new La({Ac:t,methodName:e,Dc:n,path:An.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Fa(t){const e=t._freezeSettings(),n=Il(t._databaseId);return new Ua(t._databaseId,!!e.ignoreUndefinedProperties,n)}function $a(t,e,n,i,r,o={}){const s=t.Cc(o.merge||o.mergeFields?2:0,e,n,r);Ba("Data must be an object, but it was:",s,i);const l=qa(i,s);let u,a;if(o.merge)u=new ui(s.fieldMask),a=s.fieldTransforms;else if(o.mergeFields){const t=[];for(const i of o.mergeFields){const r=Ja(e,i,n);if(!s.contains(r))throw new sn(on.INVALID_ARGUMENT,`Field '${r}' is specified in your field mask but missing from your input data.`);Ya(t,r)||t.push(r)}u=new ui(t),a=s.fieldTransforms.filter(t=>u.covers(t.field))}else u=null,a=s.fieldTransforms;return new xa(new Ji(l),u,a)}class ja extends Oa{_toFieldTransform(t){if(2!==t.Ac)throw 1===t.Ac?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof ja}}class Ga extends Oa{constructor(t,e){super(t),this.Fc=e}_toFieldTransform(t){const e=new so(t.serializer,Yr(t.serializer,this.Fc));return new ao(t.path,e)}isEqual(t){return t instanceof Ga&&this.Fc===t.Fc}}function Va(t,e){if(Ha(t=it(t)))return Ba("Unsupported field value:",e,t),qa(t,e);if(t instanceof Oa)return function(t,e){if(!Da(e.Ac))throw e.Sc(`${t._methodName}() can only be used with update() and set()`);if(!e.path)throw e.Sc(`${t._methodName}() is not currently supported inside arrays`);const n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&4!==e.Ac)throw e.Sc("Nested arrays are not supported");return function(t,e){const n=[];let i=0;for(const r of t){let t=Va(r,e.wc(i));null==t&&(t={nullValue:"NULL_VALUE"}),n.push(t),i++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=it(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Yr(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const n=jn.fromDate(t);return{timestampValue:Zo(e.serializer,n)}}if(t instanceof jn){const n=new jn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Zo(e.serializer,n)}}if(t instanceof Na)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Ca)return{bytesValue:ts(e.serializer,t._byteString)};if(t instanceof ga){const n=e.databaseId,i=t.firestore._databaseId;if(!i.isEqual(n))throw e.Sc(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:is(t.firestore._databaseId||e.databaseId,t._key.path)}}if(t instanceof Ra)return n=t,i=e,{mapValue:{fields:{[Ii]:{stringValue:Ai},[Oi]:{arrayValue:{values:n.toArray().map(t=>{if("number"!=typeof t)throw i.Sc("VectorValues must only contain numeric values.");return Kr(i.serializer,t)})}}}}};var n,i;throw e.Sc(`Unsupported field value: ${Mn(t)}`)}(t,e)}function qa(t,e){const n={};return ni(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ei(t,(t,i)=>{const r=Va(i,e.mc(t));null!=r&&(n[t]=r)}),{mapValue:{fields:n}}}function Ha(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof jn||t instanceof Na||t instanceof Ca||t instanceof ga||t instanceof Oa||t instanceof Ra)}function Ba(t,e,n){if(!Ha(n)||!xn(n)){const i=Mn(n);throw"an object"===i?e.Sc(t+" a custom object"):e.Sc(t+" "+i)}}function Ja(t,e,n){if((e=it(e))instanceof Aa)return e._internalPath;if("string"==typeof e)return Ka(t,e);throw Wa("Field path arguments must be of type string or ",t,!1,void 0,n)}const za=new RegExp("[~\\*/\\[\\]]");function Ka(t,e,n){if(e.search(za)>=0)throw Wa(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Aa(...e.split("."))._internalPath}catch(i){throw Wa(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Wa(t,e,n,i,r){const o=i&&!i.isEmpty(),s=void 0!==r;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${i}`),s&&(u+=` in document ${r}`),u+=")"),new sn(on.INVALID_ARGUMENT,l+t+u)}function Ya(t,e){return t.some(t=>t.isEqual(e))}class Xa{constructor(t,e,n,i,r){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=i,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new ga(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new Qa(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(Za("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class Qa extends Xa{data(){return super.data()}}function Za(t,e){return"string"==typeof e?Ka(t,e):e instanceof Aa?e._internalPath:e._delegate._internalPath}class tc{}class ec extends tc{}class nc extends ec{constructor(t,e,n){super(),this._field=t,this._op=e,this._value=n,this.type="where"}static _create(t,e,n){return new nc(t,e,n)}_apply(t){const e=this._parse(t);return uc(t._query,e),new ya(t.firestore,t.converter,Cr(t._query,e))}_parse(t){const e=Fa(t.firestore),n=function(t,e,n,i,r,o,s){let l;if(r.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new sn(on.INVALID_ARGUMENT,`Invalid Query. You can't perform '${o}' queries on documentId().`);if("in"===o||"not-in"===o){lc(s,o);const e=[];for(const n of s)e.push(sc(i,t,n));l={arrayValue:{values:e}}}else l=sc(i,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||lc(s,o),l=function(t,e,n,i=!1){return Va(n,t.Cc(i?4:3,e))}(n,e,s,"in"===o||"not-in"===o);return er.create(r,o,l)}(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value);return n}}class ic extends tc{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new ic(t,e)}_parse(t){const e=this._queryConstraints.map(e=>e._parse(t)).filter(t=>t.getFilters().length>0);return 1===e.length?e[0]:nr.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return 0===e.getFilters().length?t:(function(t,e){let n=t;const i=e.getFlattenedFilters();for(const r of i)uc(n,r),n=Cr(n,r)}(t._query,e),new ya(t.firestore,t.converter,Cr(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class rc extends ec{constructor(t,e){super(),this._field=t,this._direction=e,this.type="orderBy"}static _create(t,e){return new rc(t,e)}_apply(t){const e=function(t,e,n){if(null!==t.startAt)throw new sn(on.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new sn(on.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Qi(e,n)}(t._query,this._field,this._direction);return new ya(t.firestore,t.converter,function(t,e){const n=t.explicitOrderBy.concat([e]);return new Er(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))}}class oc extends ec{constructor(t,e,n){super(),this.type=t,this._limit=e,this._limitType=n}static _create(t,e,n){return new oc(t,e,n)}_apply(t){return new ya(t.firestore,t.converter,Ar(t._query,this._limit,this._limitType))}}function sc(t,e,n){if("string"==typeof(n=it(n))){if(""===n)throw new sn(on.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!kr(e)&&-1!==n.indexOf("/"))throw new sn(on.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(_n.fromString(n));if(!On.isDocumentKey(i))throw new sn(on.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return $i(t,new On(i))}if(n instanceof ga)return $i(t,n._key);throw new sn(on.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Mn(n)}.`)}function lc(t,e){if(!Array.isArray(t)||0===t.length)throw new sn(on.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function uc(t,e){const n=function(t,e){for(const n of t)for(const t of n.getFlattenedFilters())if(e.indexOf(t.op)>=0)return t.op;return null}(t.filters,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw n===e.op?new sn(on.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new sn(on.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class ac{convertValue(t,e="none"){switch(Ni(t)){case 0:return null;case 1:return t.booleanValue;case 2:return di(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(pi(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw tn(62114,{value:t})}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const n={};return ei(t,(t,i)=>{n[t]=this.convertValue(i,e)}),n}convertVectorValue(t){var e,n,i;const r=null==(i=null==(n=null==(e=t.fields)?void 0:e[Oi].arrayValue)?void 0:n.values)?void 0:i.map(t=>di(t.doubleValue));return new Ra(r)}convertGeoPoint(t){return new Na(di(t.latitude),di(t.longitude))}convertArray(t,e){return(t.values||[]).map(t=>this.convertValue(t,e))}convertServerTimestamp(t,e){switch(e){case"previous":const n=bi(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(Ei(t));default:return null}}convertTimestamp(t){const e=fi(t);return new jn(e.seconds,e.nanos)}convertDocumentKey(t,e){const n=_n.fromString(t);nn(Ts(n),9688,{name:t});const i=new ki(n.get(1),n.get(3)),r=new On(n.popFirst(5));return i.isEqual(e)||Xe(`Document ${r} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),r}}class cc{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class hc extends Xa{constructor(t,e,n,i,r,o){super(t,e,n,i,o),this._firestore=t,this._firestoreImpl=t,this.metadata=r}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new fc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const n=this._document.data.field(Za("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new sn(on.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,e={};return e.type=hc._jsonSchemaVersion,e.bundle="",e.bundleSource="DocumentSnapshot",e.bundleName=this._key.toString(),t&&t.isValidDocument()&&t.isFoundDocument()?(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),e.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),e):e}}hc._jsonSchemaVersion="firestore/documentSnapshot/1.0",hc._jsonSchema={type:Ln("string",hc._jsonSchemaVersion),bundleSource:Ln("string","DocumentSnapshot"),bundleName:Ln("string"),bundle:Ln("string")};class fc extends hc{data(t={}){return super.data(t)}}class dc{constructor(t,e,n,i){this._firestore=t,this._userDataWriter=e,this._snapshot=i,this.metadata=new cc(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach(n=>{t.call(e,new fc(this._firestore,this._userDataWriter,n.key,n,new cc(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new sn(on.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){let e=0;return t._snapshot.docChanges.map(n=>{const i=new fc(t._firestore,t._userDataWriter,n.doc.key,n.doc,new cc(t._snapshot.mutatedKeys.has(n.doc.key),t._snapshot.fromCache),t.query.converter);return n.doc,{type:"added",doc:i,oldIndex:-1,newIndex:e++}})}{let n=t._snapshot.oldDocs;return t._snapshot.docChanges.filter(t=>e||3!==t.type).map(e=>{const i=new fc(t._firestore,t._userDataWriter,e.doc.key,e.doc,new cc(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter);let r=-1,o=-1;return 0!==e.type&&(r=n.indexOf(e.doc.key),n=n.delete(e.doc.key)),1!==e.type&&(n=n.add(e.doc),o=n.indexOf(e.doc.key)),{type:pc(e.type),doc:i,oldIndex:r,newIndex:o}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new sn(on.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=dc._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=wn.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const e=[],n=[],i=[];return this.docs.forEach(t=>{null!==t._document&&(e.push(t._document),n.push(this._userDataWriter.convertObjectMap(t._document.data.value.mapValue.fields,"previous")),i.push(t.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function pc(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return tn(61501,{type:t})}}function mc(t){t=Dn(t,ga);const e=Dn(t.firestore,Ia);return function(t,e,n={}){const i=new ln;return t.asyncQueue.enqueueAndForget(async()=>function(t,e,n,i,r){const o=new ra({next:l=>{o.Nu(),e.enqueueAndForget(()=>gu(t,s));const u=l.docs.has(n);!u&&l.fromCache?r.reject(new sn(on.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&l.fromCache&&i&&"server"===i.source?r.reject(new sn(on.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):r.resolve(l)},error:t=>r.reject(t)}),s=new Iu(Sr(n.path),o,{includeMetadataChanges:!0,qa:!0});return yu(t,s)}(await ca(t),t.asyncQueue,e,n,i)),i.promise}(_a(e),t._key).then(n=>function(t,e,n){const i=n.docs.get(e._key),r=new vc(t);return new hc(t,r,e._key,i,new cc(n.hasPendingWrites,n.fromCache),e.converter)}(e,t,n))}dc._jsonSchemaVersion="firestore/querySnapshot/1.0",dc._jsonSchema={type:Ln("string",dc._jsonSchemaVersion),bundleSource:Ln("string","QuerySnapshot"),bundleName:Ln("string"),bundle:Ln("string")};class vc extends ac{constructor(t){super(),this.firestore=t}convertBytes(t){return new Ca(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new ga(this.firestore,null,e)}}function wc(t){t=Dn(t,ya);const e=Dn(t.firestore,Ia),n=_a(e),i=new vc(e);return function(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new sn(on.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(t._query),function(t,e,n={}){const i=new ln;return t.asyncQueue.enqueueAndForget(async()=>function(t,e,n,i,r){const o=new ra({next:n=>{o.Nu(),e.enqueueAndForget(()=>gu(t,s)),n.fromCache&&"server"===i.source?r.reject(new sn(on.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):r.resolve(n)},error:t=>r.reject(t)}),s=new Iu(n,o,{includeMetadataChanges:!0,qa:!0});return yu(t,s)}(await ca(t),t.asyncQueue,e,n,i)),i.promise}(n,t._query).then(n=>new dc(e,i,t,n))}function yc(t,e,n,...i){t=Dn(t,ga);const r=Dn(t.firestore,Ia),o=Fa(r);let s;return s="string"==typeof(e=it(e))||e instanceof Aa?function(t,e,n,i,r,o){const s=t.Cc(1,e,n),l=[Ja(e,i,n)],u=[r];if(o.length%2!=0)throw new sn(on.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<o.length;f+=2)l.push(Ja(e,o[f])),u.push(o[f+1]);const a=[],c=Ji.empty();for(let f=l.length-1;f>=0;--f)if(!Ya(a,l[f])){const t=l[f];let e=u[f];e=it(e);const n=s.yc(t);if(e instanceof ja)a.push(t);else{const i=Va(e,n);null!=i&&(a.push(t),c.set(t,i))}}const h=new ui(a);return new Ma(c,h,s.fieldTransforms)}(o,"updateDoc",t._key,e,n,i):function(t,e,n,i){const r=t.Cc(1,e,n);Ba("Data must be an object, but it was:",r,i);const o=[],s=Ji.empty();ei(i,(t,i)=>{const l=Ka(e,t,n);i=it(i);const u=r.yc(l);if(i instanceof ja)o.push(l);else{const t=Va(i,u);null!=t&&(o.push(l),s.set(l,t))}});const l=new ui(o);return new Ma(s,l,r.fieldTransforms)}(o,"updateDoc",t._key,e),gc(r,[s.toMutation(t._key,ho.exists(!0))])}function gc(t,e){return function(t,e){const n=new ln;return t.asyncQueue.enqueueAndForget(async()=>Fu(await function(t){return aa(t).then(t=>t.syncEngine)}(t),e,n)),n.promise}(_a(t),e)}function bc(t){return new Ga("increment",t)}function Ec(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}!function(t,e=!0){ze=ye,de(new rt("firestore",(t,{instanceIdentifier:n,options:i})=>{const r=t.getProvider("app").getImmediate(),o=new Ia(new hn(t.getProvider("auth-internal")),new mn(r,t.getProvider("app-check-internal")),function(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new sn(on.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ki(t.options.projectId,e)}(r,n),r);return i={useFetchStreams:e,...i},o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),Ee(He,Be,t),Ee(He,Be,"esm2020")}();const Sc=Ec,Tc=new Y("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),kc=new pt("@firebase/auth");function Ic(t,...e){kc.logLevel<=ut.ERROR&&kc.error(`Auth (${ye}): ${t}`,...e)}function _c(t,...e){throw Nc(t,...e)}function Cc(t,...e){return Nc(t,...e)}function Ac(t,e,n){const i={...Sc(),[e]:n};return new Y("auth","Firebase",i).create(e,{appName:t.name})}function Oc(t){return Ac(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Nc(t,...e){if("string"!=typeof t){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return Tc.create(t,...e)}function Rc(t,e,...n){if(!t)throw Nc(e,...n)}function Pc(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Ic(e),new Error(e)}function xc(t,e){t||Pc(e)}function Mc(){var t;return"undefined"!=typeof self&&(null==(t=self.location)?void 0:t.href)||""}function Dc(){var t;return"undefined"!=typeof self&&(null==(t=self.location)?void 0:t.protocol)||null}function Lc(){return"undefined"==typeof navigator||!navigator||!("onLine"in navigator)||"boolean"!=typeof navigator.onLine||"http:"!==Dc()&&"https:"!==Dc()&&!function(){const t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}()&&!("connection"in navigator)||navigator.onLine}class Uc{constructor(t,e){this.shortDelay=t,this.longDelay=e,xc(e>t,"Short delay should be less than long delay!"),this.isMobile="undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(z())||"object"==typeof navigator&&"ReactNative"===navigator.product}get(){return Lc()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Fc(t,e){xc(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class $c{static initialize(t,e,n){this.fetchImpl=t,e&&(this.headersImpl=e),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:"undefined"!=typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!=typeof fetch?fetch:void Pc("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:"undefined"!=typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!=typeof Headers?Headers:void Pc("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:"undefined"!=typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!=typeof Response?Response:void Pc("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const jc={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Gc=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Vc=new Uc(3e4,6e4);function qc(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Hc(t,e,n,i,r={}){return Bc(t,r,async()=>{let r={},o={};i&&("GET"===e?o=i:r={body:JSON.stringify(i)});const s=tt({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:l,...r};return"undefined"!=typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&V(t.emulatorConfig.host)&&(u.credentials="include"),$c.fetch()(await zc(t,t.config.apiHost,n,s),u)})}async function Bc(t,e,n){t._canInitEmulator=!1;const i={...jc,...e};try{const e=new Kc(t),r=await Promise.race([n(),e.promise]);e.clearNetworkTimeout();const o=await r.json();if("needConfirmation"in o)throw Wc(t,"account-exists-with-different-credential",o);if(r.ok&&!("errorMessage"in o))return o;{const e=r.ok?o.errorMessage:o.error.message,[n,s]=e.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Wc(t,"credential-already-in-use",o);if("EMAIL_EXISTS"===n)throw Wc(t,"email-already-in-use",o);if("USER_DISABLED"===n)throw Wc(t,"user-disabled",o);const l=i[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(s)throw Ac(t,l,s);_c(t,l)}}catch(r){if(r instanceof W)throw r;_c(t,"network-request-failed",{message:String(r)})}}async function Jc(t,e,n,i,r={}){const o=await Hc(t,e,n,i,r);return"mfaPendingCredential"in o&&_c(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function zc(t,e,n,i){const r=`${e}${n}?${i}`,o=t,s=o.config.emulator?Fc(t.config,r):`${t.config.apiScheme}://${r}`;if(Gc.includes(n)&&(await o._persistenceManagerAvailable,"COOKIE"===o._getPersistenceType())){return o._getPersistence()._getFinalTarget(s).toString()}return s}class Kc{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((t,e)=>{this.timer=setTimeout(()=>e(Cc(this.auth,"network-request-failed")),Vc.get())})}}function Wc(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Cc(t,e,i);return r.customData._tokenResponse=n,r}async function Yc(t,e){return Hc(t,"POST","/v1/accounts:lookup",e)}function Xc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch(e){}}function Qc(t){return 1e3*Number(t)}function Zc(t){const[e,n,i]=t.split(".");if(void 0===e||void 0===n||void 0===i)return Ic("JWT malformed, contained fewer than 3 sections"),null;try{const t=D(n);return t?JSON.parse(t):(Ic("Failed to decode base64 JWT payload"),null)}catch(r){return Ic("Caught error parsing JWT payload as JSON",null==r?void 0:r.toString()),null}}function th(t){const e=Zc(t);return Rc(e,"internal-error"),Rc(void 0!==e.exp,"internal-error"),Rc(void 0!==e.iat,"internal-error"),Number(e.exp)-Number(e.iat)}async function eh(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof W&&function({code:t}){return"auth/user-disabled"===t||"auth/user-token-expired"===t}(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}class nh{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(t){if(t){const t=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),t}{this.errorBackoff=3e4;const t=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,t)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===(null==t?void 0:t.code)&&this.schedule(!0))}this.schedule()}}class ih{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xc(this.lastLoginAt),this.creationTime=Xc(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function rh(t){var e;const n=t.auth,i=await t.getIdToken(),r=await eh(t,Yc(n,{idToken:i}));Rc(null==r?void 0:r.users.length,n,"internal-error");const o=r.users[0];t._notifyReloadListener(o);const s=(null==(e=o.providerUserInfo)?void 0:e.length)?oh(o.providerUserInfo):[],l=(u=t.providerData,a=s,[...u.filter(t=>!a.some(e=>e.providerId===t.providerId)),...a]);var u,a;const c=t.isAnonymous,h=!(t.email&&o.passwordHash||(null==l?void 0:l.length)),f=!!c&&h,d={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new ih(o.createdAt,o.lastLoginAt),isAnonymous:f};Object.assign(t,d)}function oh(t){return t.map(({providerId:t,...e})=>({providerId:t,uid:e.rawId||"",displayName:e.displayName||null,email:e.email||null,phoneNumber:e.phoneNumber||null,photoURL:e.photoUrl||null}))}class sh{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Rc(t.idToken,"internal-error"),Rc(void 0!==t.idToken,"internal-error"),Rc(void 0!==t.refreshToken,"internal-error");const e="expiresIn"in t&&void 0!==t.expiresIn?Number(t.expiresIn):th(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}updateFromIdToken(t){Rc(0!==t.length,"internal-error");const e=th(t);this.updateTokensAndExpiration(t,null,e)}async getToken(t,e=!1){return e||!this.accessToken||this.isExpired?(Rc(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:n,refreshToken:i,expiresIn:r}=await async function(t,e){const n=await Bc(t,{},async()=>{const n=tt({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:r}=t.config,o=await zc(t,i,"/v1/token",`key=${r}`),s=await t._getAdditionalHeaders();s["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:s,body:n};return t.emulatorConfig&&V(t.emulatorConfig.host)&&(l.credentials="include"),$c.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(t,e);this.updateTokensAndExpiration(n,i,Number(r))}updateTokensAndExpiration(t,e,n){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(t,e){const{refreshToken:n,accessToken:i,expirationTime:r}=e,o=new sh;return n&&(Rc("string"==typeof n,"internal-error",{appName:t}),o.refreshToken=n),i&&(Rc("string"==typeof i,"internal-error",{appName:t}),o.accessToken=i),r&&(Rc("number"==typeof r,"internal-error",{appName:t}),o.expirationTime=r),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new sh,this.toJSON())}_performRefresh(){return Pc("not implemented")}}function lh(t,e){Rc("string"==typeof t||void 0===t,"internal-error",{appName:e})}class uh{constructor({uid:t,auth:e,stsTokenManager:n,...i}){this.providerId="firebase",this.proactiveRefresh=new nh(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=e,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new ih(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(t){const e=await eh(this,this.stsTokenManager.getToken(this.auth,t));return Rc(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return async function(t,e=!1){const n=it(t),i=await n.getIdToken(e),r=Zc(i);Rc(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const o="object"==typeof r.firebase?r.firebase:void 0,s=null==o?void 0:o.sign_in_provider;return{claims:r,token:i,authTime:Xc(Qc(r.auth_time)),issuedAtTime:Xc(Qc(r.iat)),expirationTime:Xc(Qc(r.exp)),signInProvider:s||null,signInSecondFactor:(null==o?void 0:o.sign_in_second_factor)||null}}(this,t)}reload(){return async function(t){const e=it(t);await rh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}(this)}_assign(t){this!==t&&(Rc(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(t=>({...t})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const e=new uh({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return e.metadata._copy(this.metadata),e}_onReload(t){Rc(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let n=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),n=!0),e&&await rh(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(me(this.auth.app))return Promise.reject(Oc(this.auth));const t=await this.getIdToken();return await eh(this,async function(t,e){return Hc(t,"POST","/v1/accounts:delete",e)}(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){const n=e.displayName??void 0,i=e.email??void 0,r=e.phoneNumber??void 0,o=e.photoURL??void 0,s=e.tenantId??void 0,l=e._redirectEventId??void 0,u=e.createdAt??void 0,a=e.lastLoginAt??void 0,{uid:c,emailVerified:h,isAnonymous:f,providerData:d,stsTokenManager:p}=e;Rc(c&&p,t,"internal-error");const m=sh.fromJSON(this.name,p);Rc("string"==typeof c,t,"internal-error"),lh(n,t.name),lh(i,t.name),Rc("boolean"==typeof h,t,"internal-error"),Rc("boolean"==typeof f,t,"internal-error"),lh(r,t.name),lh(o,t.name),lh(s,t.name),lh(l,t.name),lh(u,t.name),lh(a,t.name);const v=new uh({uid:c,auth:t,email:i,emailVerified:h,displayName:n,isAnonymous:f,photoURL:o,phoneNumber:r,tenantId:s,stsTokenManager:m,createdAt:u,lastLoginAt:a});return d&&Array.isArray(d)&&(v.providerData=d.map(t=>({...t}))),l&&(v._redirectEventId=l),v}static async _fromIdTokenResponse(t,e,n=!1){const i=new sh;i.updateFromServerResponse(e);const r=new uh({uid:e.localId,auth:t,stsTokenManager:i,isAnonymous:n});return await rh(r),r}static async _fromGetAccountInfoResponse(t,e,n){const i=e.users[0];Rc(void 0!==i.localId,"internal-error");const r=void 0!==i.providerUserInfo?oh(i.providerUserInfo):[],o=!(i.email&&i.passwordHash||(null==r?void 0:r.length)),s=new sh;s.updateFromIdToken(n);const l=new uh({uid:i.localId,auth:t,stsTokenManager:s,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:r,metadata:new ih(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash||(null==r?void 0:r.length))};return Object.assign(l,u),l}}const ah=new Map;function ch(t){xc(t instanceof Function,"Expected a class definition");let e=ah.get(t);return e?(xc(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,ah.set(t,e),e)}class hh{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return void 0===e?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}hh.type="NONE";const fh=hh;function dh(t,e,n){return`firebase:${t}:${e}:${n}`}class ph{constructor(t,e,n){this.persistence=t,this.auth=e,this.userKey=n;const{config:i,name:r}=this.auth;this.fullUserKey=dh(this.userKey,i.apiKey,r),this.fullPersistenceKey=dh("persistence",i.apiKey,r),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if("string"==typeof t){const e=await Yc(this.auth,{idToken:t}).catch(()=>{});return e?uh._fromGetAccountInfoResponse(this.auth,e,t):null}return uh._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=t,e?this.setCurrentUser(e):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,n="authUser"){if(!e.length)return new ph(ch(fh),t,n);const i=(await Promise.all(e.map(async t=>{if(await t._isAvailable())return t}))).filter(t=>t);let r=i[0]||ch(fh);const o=dh(n,t.config.apiKey,t.name);let s=null;for(const u of e)try{const e=await u._get(o);if(e){let n;if("string"==typeof e){const i=await Yc(t,{idToken:e}).catch(()=>{});if(!i)break;n=await uh._fromGetAccountInfoResponse(t,i,e)}else n=uh._fromJSON(t,e);u!==r&&(s=n),r=u;break}}catch{}const l=i.filter(t=>t._shouldAllowMigration);return r._shouldAllowMigration&&l.length?(r=l[0],s&&await r._set(o,s.toJSON()),await Promise.all(e.map(async t=>{if(t!==r)try{await t._remove(o)}catch{}})),new ph(r,t,n)):new ph(r,t,n)}}function mh(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(gh(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(vh(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Eh(e))return"Blackberry";if(Sh(e))return"Webos";if(wh(e))return"Safari";if((e.includes("chrome/")||yh(e))&&!e.includes("edge/"))return"Chrome";if(bh(e))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(e);if(2===(null==n?void 0:n.length))return n[1]}return"Other"}function vh(t=z()){return/firefox\//i.test(t)}function wh(t=z()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function yh(t=z()){return/crios\//i.test(t)}function gh(t=z()){return/iemobile/i.test(t)}function bh(t=z()){return/android/i.test(t)}function Eh(t=z()){return/blackberry/i.test(t)}function Sh(t=z()){return/webos/i.test(t)}function Th(t=z()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function kh(){return function(){const t=z();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}()&&10===document.documentMode}function Ih(t=z()){return Th(t)||bh(t)||Sh(t)||Eh(t)||/windows phone/i.test(t)||gh(t)}function _h(t,e=[]){let n;switch(t){case"Browser":n=mh(z());break;case"Worker":n=`${mh(z())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ye}/${i}`}class Ch{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const n=e=>new Promise((n,i)=>{try{n(t(e))}catch(r){i(r)}});n.onAbort=e,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const e=[];try{for(const n of this.queue)await n(t),n.onAbort&&e.push(n.onAbort)}catch(n){e.reverse();for(const t of e)try{t()}catch(i){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null==n?void 0:n.message})}}}class Ah{constructor(t){var e;const n=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??6,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),void 0!==n.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),void 0!==n.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),void 0!==n.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),void 0!==n.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(null==(e=t.allowedNonAlphanumericCharacters)?void 0:e.join(""))??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const e={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,e),this.validatePasswordCharacterOptions(t,e),e.isValid&&(e.isValid=e.meetsMinPasswordLength??!0),e.isValid&&(e.isValid=e.meetsMaxPasswordLength??!0),e.isValid&&(e.isValid=e.containsLowercaseLetter??!0),e.isValid&&(e.isValid=e.containsUppercaseLetter??!0),e.isValid&&(e.isValid=e.containsNumericCharacter??!0),e.isValid&&(e.isValid=e.containsNonAlphanumericCharacter??!0),e}validatePasswordLengthOptions(t,e){const n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(e.meetsMinPasswordLength=t.length>=n),i&&(e.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,e){let n;this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);for(let i=0;i<t.length;i++)n=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(e,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(t,e,n,i,r){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=r))}}class Oh{constructor(t,e,n,i){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Rh(this),this.idTokenSubscription=new Rh(this),this.beforeStateQueue=new Ch(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Tc,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(t=>this._resolvePersistenceManagerAvailable=t)}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=ch(e)),this._initializationPromise=this.queue(async()=>{var n,i,r;if(!this._deleted&&(this.persistenceManager=await ph.create(this,t),null==(n=this._resolvePersistenceManagerAvailable)||n.call(this),!this._deleted)){if(null==(i=this._popupRedirectResolver)?void 0:i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(o){}await this.initializeCurrentUser(e),this.lastNotifiedUid=(null==(r=this.currentUser)?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();return this.currentUser||t?this.currentUser&&t&&this.currentUser.uid===t.uid?(this._currentUser._assign(t),void(await this.currentUser.getIdToken())):void(await this._updateCurrentUser(t,!0)):void 0}async initializeCurrentUserFromIdToken(t){try{const e=await Yc(this,{idToken:t}),n=await uh._fromGetAccountInfoResponse(this,e,t);await this.directlySetCurrentUser(n)}catch(e){await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var e;if(me(this.app)){const t=this.app.settings.authIdToken;return t?new Promise(e=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(t).then(e,e))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null==(e=this.redirectUser)?void 0:e._redirectEventId,o=null==i?void 0:i._redirectEventId,s=await this.tryRedirectSignIn(t);n&&n!==o||!(null==s?void 0:s.user)||(i=s.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Rc(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch(n){await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await rh(t)}catch(e){if("auth/network-request-failed"!==(null==e?void 0:e.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(me(this.app))return Promise.reject(Oc(this));const e=t?it(t):null;return e&&Rc(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t,e=!1){if(!this._deleted)return t&&Rc(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return me(this.app)?Promise.reject(Oc(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return me(this.app)?Promise.reject(Oc(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ch(t))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await async function(t,e={}){return Hc(t,"GET","/v2/passwordPolicy",qc(t,e))}(this),e=new Ah(t);null===this.tenantId?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Y("auth","Firebase",t())}onAuthStateChanged(t,e,n){return this.registerStateListener(this.authStateSubscription,t,e,n)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,n){return this.registerStateListener(this.idTokenSubscription,t,e,n)}authStateReady(){return new Promise((t,e)=>{if(this.currentUser)t();else{const n=this.onAuthStateChanged(()=>{n(),t()},e)}})}async revokeAccessToken(t){if(this.currentUser){const e={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(e.tenantId=this.tenantId),await async function(t,e){return Hc(t,"POST","/v2/accounts:revokeToken",qc(t,e))}(this,e)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null==(t=this._currentUser)?void 0:t.toJSON()}}async _setRedirectUser(t,e){const n=await this.getOrInitRedirectPersistenceManager(e);return null===t?n.removeCurrentUser():n.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&ch(t)||this._popupRedirectResolver;Rc(e,this,"argument-error"),this.redirectPersistenceManager=await ph.create(this,[ch(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var e,n;return this._isInitialized&&await this.queue(async()=>{}),(null==(e=this._currentUser)?void 0:e._redirectEventId)===t?this._currentUser:(null==(n=this.redirectUser)?void 0:n._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=(null==(t=this.currentUser)?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,n,i){if(this._deleted)return()=>{};const r="function"==typeof e?e:e.next.bind(e);let o=!1;const s=this._isInitialized?Promise.resolve():this._initializationPromise;if(Rc(s,this,"internal-error"),s.then(()=>{o||r(this.currentUser)}),"function"==typeof e){const r=t.addObserver(e,n,i);return()=>{o=!0,r()}}{const n=t.addObserver(e);return()=>{o=!0,n()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Rc(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){t&&!this.frameworks.includes(t)&&(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=_h(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null==(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))?void 0:t.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;if(me(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await(null==(t=this.appCheckServiceProvider.getImmediate({optional:!0}))?void 0:t.getToken());return(null==e?void 0:e.error)&&function(t,...e){kc.logLevel<=ut.WARN&&kc.warn(`Auth (${ye}): ${t}`,...e)}(`Error while retrieving App Check token: ${e.error}`),null==e?void 0:e.token}}function Nh(t){return it(t)}class Rh{constructor(t){this.auth=t,this.observer=null,this.addObserver=function(t,e){const n=new et(t,e);return n.subscribe.bind(n)}(t=>this.observer=t)}get next(){return Rc(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Ph={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function xh(t,e,n){const i=Nh(t);Rc(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=Mh(e),{host:o,port:s}=function(t){const e=Mh(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const t=r[1];return{host:t,port:Dh(i.substr(t.length+1))}}{const[t,e]=i.split(":");return{host:t,port:Dh(e)}}}(e),l=null===s?"":`:${s}`,u={url:`${r}//${o}${l}/`},a=Object.freeze({host:o,port:s,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:!1})});if(!i._canInitEmulator)return Rc(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),void Rc(Q(u,i.config.emulator)&&Q(a,i.emulatorConfig),i,"emulator-config-failed");i.config.emulator=u,i.emulatorConfig=a,i.settings.appVerificationDisabledForTesting=!0,V(o)?(q(`${r}//${o}${l}`),J("Auth",!0)):function(){function t(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}"undefined"!=typeof console&&console.info;"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",t):t())}()}function Mh(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Dh(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}class Lh{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return Pc("not implemented")}_getIdTokenResponse(t){return Pc("not implemented")}_linkToIdToken(t,e){return Pc("not implemented")}_getReauthenticationResolver(t){return Pc("not implemented")}}async function Uh(t,e){return Jc(t,"POST","/v1/accounts:signInWithIdp",qc(t,e))}class Fh extends Lh{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new Fh(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):_c("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e="string"==typeof t?JSON.parse(t):t,{providerId:n,signInMethod:i,...r}=e;if(!n||!i)return null;const o=new Fh(n,i);return o.idToken=r.idToken||void 0,o.accessToken=r.accessToken||void 0,o.secret=r.secret,o.nonce=r.nonce,o.pendingToken=r.pendingToken||null,o}_getIdTokenResponse(t){return Uh(t,this.buildRequest())}_linkToIdToken(t,e){const n=this.buildRequest();return n.idToken=e,Uh(t,n)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,Uh(t,e)}buildRequest(){const t={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=tt(e)}return t}}class $h{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}class jh extends $h{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}class Gh extends jh{constructor(){super("facebook.com")}static credential(t){return Fh._fromParams({providerId:Gh.PROVIDER_ID,signInMethod:Gh.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Gh.credentialFromTaggedObject(t)}static credentialFromError(t){return Gh.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Gh.credential(t.oauthAccessToken)}catch{return null}}}Gh.FACEBOOK_SIGN_IN_METHOD="facebook.com",Gh.PROVIDER_ID="facebook.com";class Vh extends jh{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return Fh._fromParams({providerId:Vh.PROVIDER_ID,signInMethod:Vh.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return Vh.credentialFromTaggedObject(t)}static credentialFromError(t){return Vh.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:n}=t;if(!e&&!n)return null;try{return Vh.credential(e,n)}catch{return null}}}Vh.GOOGLE_SIGN_IN_METHOD="google.com",Vh.PROVIDER_ID="google.com";class qh extends jh{constructor(){super("github.com")}static credential(t){return Fh._fromParams({providerId:qh.PROVIDER_ID,signInMethod:qh.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return qh.credentialFromTaggedObject(t)}static credentialFromError(t){return qh.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return qh.credential(t.oauthAccessToken)}catch{return null}}}qh.GITHUB_SIGN_IN_METHOD="github.com",qh.PROVIDER_ID="github.com";class Hh extends jh{constructor(){super("twitter.com")}static credential(t,e){return Fh._fromParams({providerId:Hh.PROVIDER_ID,signInMethod:Hh.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return Hh.credentialFromTaggedObject(t)}static credentialFromError(t){return Hh.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:n}=t;if(!e||!n)return null;try{return Hh.credential(e,n)}catch{return null}}}Hh.TWITTER_SIGN_IN_METHOD="twitter.com",Hh.PROVIDER_ID="twitter.com";class Bh{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,n,i=!1){const r=await uh._fromIdTokenResponse(t,n,i),o=Jh(n);return new Bh({user:r,providerId:o,_tokenResponse:n,operationType:e})}static async _forOperation(t,e,n){await t._updateTokensIfNecessary(n,!0);const i=Jh(n);return new Bh({user:t,providerId:i,_tokenResponse:n,operationType:e})}}function Jh(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}async function zh(t){var e;if(me(t.app))return Promise.reject(Oc(t));const n=Nh(t);if(await n._initializationPromise,null==(e=n.currentUser)?void 0:e.isAnonymous)return new Bh({user:n.currentUser,providerId:null,operationType:"signIn"});const i=await async function(t,e){return Jc(t,"POST","/v1/accounts:signUp",qc(t,e))}(n,{returnSecureToken:!0}),r=await Bh._fromIdTokenResponse(n,"signIn",i,!0);return await n._updateCurrentUser(r.user),r}class Kh extends W{constructor(t,e,n,i){super(e.code,e.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,Kh.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:e.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(t,e,n,i){return new Kh(t,e,n,i)}}function Wh(t,e,n,i){return("reauthenticate"===e?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(n=>{if("auth/multi-factor-auth-required"===n.code)throw Kh._fromErrorAndOperation(t,n,e,i);throw n})}const Yh="__sak";class Xh{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(Yh,"1"),this.storage.removeItem(Yh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}class Qh extends Xh{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Ih(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const n=this.storage.getItem(e),i=this.localCache[e];n!==i&&t(e,i,n)}}onStorageEvent(t,e=!1){if(!t.key)return void this.forAllChangedKeys((t,e,n)=>{this.notifyListeners(t,n)});const n=t.key;e?this.detachListener():this.stopPolling();const i=()=>{const t=this.storage.getItem(n);(e||this.localCache[n]!==t)&&this.notifyListeners(n,t)},r=this.storage.getItem(n);kh()&&r!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,10):i()}notifyListeners(t,e){this.localCache[t]=e;const n=this.listeners[t];if(n)for(const i of Array.from(n))i(e?JSON.parse(e):e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,e,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}Qh.type="LOCAL";const Zh=Qh;class tf extends Xh{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,e){}_removeListener(t,e){}}tf.type="SESSION";const ef=tf;class nf{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find(e=>e.isListeningto(t));if(e)return e;const n=new nf(t);return this.receivers.push(n),n}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:n,eventType:i,data:r}=e.data,o=this.handlersMap[i];if(!(null==o?void 0:o.size))return;e.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const s=Array.from(o).map(async t=>t(e.origin,r)),l=await function(t){return Promise.all(t.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(e){return{fulfilled:!1,reason:e}}}))}(s);e.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:l})}_subscribe(t,e){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),e&&0!==this.handlersMap[t].size||delete this.handlersMap[t],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function rf(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(10*Math.random());return t+n}nf.receivers=[];class of{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,n=50){const i="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let r,o;return new Promise((s,l)=>{const u=rf("",20);i.port1.start();const a=setTimeout(()=>{l(new Error("unsupported_event"))},n);o={messageChannel:i,onMessage(t){const e=t;if(e.data.eventId===u)switch(e.data.status){case"ack":clearTimeout(a),r=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),s(e.data.response);break;default:clearTimeout(a),clearTimeout(r),l(new Error("invalid_response"))}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:u,data:e},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}function sf(){return window}function lf(){return void 0!==sf().WorkerGlobalScope&&"function"==typeof sf().importScripts}const uf="firebaseLocalStorageDb",af="firebaseLocalStorage",cf="fbase_key";class hf{constructor(t){this.request=t}toPromise(){return new Promise((t,e)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{e(this.request.error)})})}}function ff(t,e){return t.transaction([af],e?"readwrite":"readonly").objectStore(af)}function df(){const t=indexedDB.open(uf,1);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const e=t.result;try{e.createObjectStore(af,{keyPath:cf})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(af)?e(n):(n.close(),await function(){const t=indexedDB.deleteDatabase(uf);return new hf(t).toPromise()}(),e(await df()))})})}async function pf(t,e,n){const i=ff(t,!0).put({[cf]:e,value:n});return new hf(i).toPromise()}function mf(t,e){const n=ff(t,!0).delete(e);return new hf(n).toPromise()}class vf{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await df()),this.db}async _withRetries(t){let e=0;for(;;)try{const e=await this._openDb();return await t(e)}catch(n){if(e++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return lf()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=nf._getInstance(lf()?self:null),this.receiver._subscribe("keyChanged",async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)})),this.receiver._subscribe("ping",async(t,e)=>["keyChanged"])}async initializeSender(){var t,e;if(this.activeServiceWorker=await async function(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}(),!this.activeServiceWorker)return;this.sender=new of(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null==(t=n[0])?void 0:t.fulfilled)&&(null==(e=n[0])?void 0:e.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){var e;if(this.sender&&this.activeServiceWorker&&((null==(e=null==navigator?void 0:navigator.serviceWorker)?void 0:e.controller)||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await df();return await pf(t,Yh,"1"),await mf(t,Yh),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite(async()=>(await this._withRetries(n=>pf(n,t,e)),this.localCache[t]=e,this.notifyServiceWorker(t)))}async _get(t){const e=await this._withRetries(e=>async function(t,e){const n=ff(t,!1).get(e),i=await new hf(n).toPromise();return void 0===i?null:i.value}(e,t));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(e=>mf(e,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(t=>{const e=ff(t,!1).getAll();return new hf(e).toPromise()});if(!t)return[];if(0!==this.pendingWrites)return[];const e=[],n=new Set;if(0!==t.length)for(const{fbase_key:i,value:r}of t)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(r)&&(this.notifyListeners(i,r),e.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),e.push(i));return e}notifyListeners(t,e){this.localCache[t]=e;const n=this.listeners[t];if(n)for(const i of Array.from(n))i(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&this.stopPolling()}}vf.type="LOCAL";const wf=vf;new Uc(3e4,6e4);class yf extends Lh{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Uh(t,this._buildIdpRequest())}_linkToIdToken(t,e){return Uh(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return Uh(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function gf(t){return async function(t,e,n=!1){if(me(t.app))return Promise.reject(Oc(t));const i="signIn",r=await Wh(t,i,e),o=await Bh._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(o.user),o}(t.auth,new yf(t),t.bypassAuthState)}function bf(t){const{auth:e,user:n}=t;return Rc(n,e,"internal-error"),async function(t,e,n=!1){const{auth:i}=t;if(me(i.app))return Promise.reject(Oc(i));const r="reauthenticate";try{const o=await eh(t,Wh(i,r,e,t),n);Rc(o.idToken,i,"internal-error");const s=Zc(o.idToken);Rc(s,i,"internal-error");const{sub:l}=s;return Rc(t.uid===l,i,"user-mismatch"),Bh._forOperation(t,r,o)}catch(o){throw"auth/user-not-found"===(null==o?void 0:o.code)&&_c(i,"user-mismatch"),o}}(n,new yf(t),t.bypassAuthState)}async function Ef(t){const{auth:e,user:n}=t;return Rc(n,e,"internal-error"),async function(t,e,n=!1){const i=await eh(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Bh._forOperation(t,"link",i)}(n,new yf(t),t.bypassAuthState)}class Sf{constructor(t,e,n,i,r=!1){this.auth=t,this.resolver=n,this.user=i,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise(async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(t){const{urlResponse:e,sessionId:n,postBody:i,tenantId:r,error:o,type:s}=t;if(o)return void this.reject(o);const l={auth:this.auth,requestUri:e,sessionId:n,tenantId:r||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(s)(l))}catch(u){this.reject(u)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return gf;case"linkViaPopup":case"linkViaRedirect":return Ef;case"reauthViaPopup":case"reauthViaRedirect":return bf;default:_c(this.auth,"internal-error")}}resolve(t){xc(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){xc(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Tf=new Uc(2e3,1e4);class kf extends Sf{constructor(t,e,n,i,r){super(t,e,i,r),this.provider=n,this.authWindow=null,this.pollId=null,kf.currentPopupAction&&kf.currentPopupAction.cancel(),kf.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Rc(t,this.auth,"internal-error"),t}async onExecution(){xc(1===this.filter.length,"Popup operations only handle one event");const t=rf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Cc(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return(null==(t=this.authWindow)?void 0:t.associatedEvent)||null}cancel(){this.reject(Cc(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,kf.currentPopupAction=null}pollUserCancellation(){const t=()=>{var e,n;(null==(n=null==(e=this.authWindow)?void 0:e.window)?void 0:n.closed)?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Cc(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(t,Tf.get())};t()}}kf.currentPopupAction=null;const If="pendingRedirect",_f=new Map;class Cf extends Sf{constructor(t,e,n=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,n),this.eventId=null}async execute(){let t=_f.get(this.auth._key());if(!t){try{const e=await async function(t,e){const n=function(t){return dh(If,t.config.apiKey,t.name)}(e),i=function(t){return ch(t._redirectPersistence)}(t);if(!(await i._isAvailable()))return!1;const r="true"===await i._get(n);return await i._remove(n),r}(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(e)}catch(e){t=()=>Promise.reject(e)}_f.set(this.auth._key(),t)}return this.bypassAuthState||_f.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if("signInViaRedirect"===t.type)return super.onAuthEvent(t);if("unknown"!==t.type){if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Af(t,e){_f.set(t._key(),e)}async function Of(t,e,n=!1){if(me(t.app))return Promise.reject(Oc(t));const i=Nh(t),r=function(t,e){return e?ch(e):(Rc(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}(i,e),o=new Cf(i,r,n),s=await o.execute();return s&&!n&&(delete s.user._redirectEventId,await i._persistUserIfCurrent(s.user),await i._setRedirectUser(null,e)),s}class Nf{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(t,n)&&(e=!0,this.sendToConsumer(t,n),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!function(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Pf(t);default:return!1}}(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){var n;if(t.error&&!Pf(t)){const i=(null==(n=t.error.code)?void 0:n.split("auth/")[1])||"internal-error";e.onError(Cc(this.auth,i))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const n=null===e.eventId||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&n}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Rf(t))}saveEventToCache(t){this.cachedEventUids.add(Rf(t)),this.lastProcessedEventTime=Date.now()}}function Rf(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(t=>t).join("-")}function Pf({type:t,error:e}){return"unknown"===t&&"auth/no-auth-event"===(null==e?void 0:e.code)}const xf=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Mf=/^https?/;async function Df(t){if(t.config.emulator)return;const{authorizedDomains:e}=await async function(t,e={}){return Hc(t,"GET","/v1/projects",e)}(t);for(const n of e)try{if(Lf(n))return}catch{}_c(t,"unauthorized-domain")}function Lf(t){const e=Mc(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const r=new URL(t);return""===r.hostname&&""===i?"chrome-extension:"===n&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===n&&r.hostname===i}if(!Mf.test(n))return!1;if(xf.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}const Uf=new Uc(3e4,6e4);function Ff(){const t=sf().Mt;if(null==t?void 0:t.H)for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}function $f(t){return new Promise((e,n)=>{var i,r,o,s;function l(){Ff(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ff(),n(Cc(t,"network-request-failed"))},timeout:Uf.get()})}if(null==(r=null==(i=sf().gapi)?void 0:i.iframes)?void 0:r.Iframe)e(gapi.iframes.getContext());else{if(!(null==(o=sf().gapi)?void 0:o.load)){const e=`__${"iframefcb"}${Math.floor(1e6*Math.random())}`;return sf()[e]=()=>{gapi.load?l():n(Cc(t,"network-request-failed"))},(s=`${Ph.gapiScript}?onload=${e}`,Ph.loadJS(s)).catch(t=>n(t))}l()}}).catch(t=>{throw jf=null,t})}let jf=null;const Gf=new Uc(5e3,15e3),Vf={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},qf=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Hf(t){const e=t.config;Rc(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Fc(e,"emulator/auth/iframe"):`https://${t.config.authDomain}/__/auth/iframe`,i={apiKey:e.apiKey,appName:t.name,v:ye},r=qf.get(t.config.apiHost);r&&(i.eid=r);const o=t._getFrameworks();return o.length&&(i.fw=o.join(",")),`${n}?${tt(i).slice(1)}`}async function Bf(t){const e=await function(t){return jf=jf||$f(t),jf}(t),n=sf().gapi;return Rc(n,t,"internal-error"),e.open({where:document.body,url:Hf(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Vf,dontclear:!0},e=>new Promise(async(n,i)=>{await e.restyle({setHideOnLeave:!1});const r=Cc(t,"network-request-failed"),o=sf().setTimeout(()=>{i(r)},Gf.get());function s(){sf().clearTimeout(o),n(e)}e.ping(s).then(s,()=>{i(r)})}))}const Jf={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class zf{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(t){}}}function Kf(t,e,n,i=500,r=600){const o=Math.max((window.screen.availHeight-r)/2,0).toString(),s=Math.max((window.screen.availWidth-i)/2,0).toString();let l="";const u={...Jf,width:i.toString(),height:r.toString(),top:o,left:s},a=z().toLowerCase();n&&(l=yh(a)?"_blank":n),vh(a)&&(e=e||"http://localhost",u.scrollbars="yes");const c=Object.entries(u).reduce((t,[e,n])=>`${t}${e}=${n},`,"");if(function(t=z()){var e;return Th(t)&&!!(null==(e=window.navigator)?void 0:e.standalone)}(a)&&"_self"!==l)return function(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}(e||"",l),new zf(null);const h=window.open(e||"",l,c);Rc(h,t,"popup-blocked");try{h.focus()}catch(f){}return new zf(h)}const Wf="__/auth/handler",Yf="emulator/auth/handler",Xf=encodeURIComponent("fac");async function Qf(t,e,n,i,r,o){Rc(t.config.authDomain,t,"auth-domain-config-required"),Rc(t.config.apiKey,t,"invalid-api-key");const s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:ye,eventId:r};if(e instanceof $h){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",function(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[t,e]of Object.entries({}))s[t]=e}if(e instanceof jh){const t=e.getScopes().filter(t=>""!==t);t.length>0&&(s.scopes=t.join(","))}t.tenantId&&(s.tid=t.tenantId);const l=s;for(const c of Object.keys(l))void 0===l[c]&&delete l[c];const u=await t._getAppCheckToken(),a=u?`#${Xf}=${encodeURIComponent(u)}`:"";return`${function({config:t}){if(!t.emulator)return`https://${t.authDomain}/${Wf}`;return Fc(t,Yf)}(t)}?${tt(l).slice(1)}${a}`}const Zf="webStorageSupport";const td=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ef,this._completeRedirectFn=Of,this._overrideRedirectResult=Af}async _openPopup(t,e,n,i){var r;xc(null==(r=this.eventManagers[t._key()])?void 0:r.manager,"_initialize() not called before _openPopup()");return Kf(t,await Qf(t,e,n,Mc(),i),rf())}async _openRedirect(t,e,n,i){await this._originValidation(t);return function(t){sf().location.href=t}(await Qf(t,e,n,Mc(),i)),new Promise(()=>{})}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:t,promise:n}=this.eventManagers[e];return t?Promise.resolve(t):(xc(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(t);return this.eventManagers[e]={promise:n},n.catch(()=>{delete this.eventManagers[e]}),n}async initAndGetManager(t){const e=await Bf(t),n=new Nf(t);return e.register("authEvent",e=>{Rc(null==e?void 0:e.authEvent,t,"invalid-auth-event");return{status:n.onEvent(e.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:n},this.iframes[t._key()]=e,n}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(Zf,{type:Zf},n=>{var i;const r=null==(i=null==n?void 0:n[0])?void 0:i[Zf];void 0!==r&&e(!!r),_c(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=Df(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return Ih()||wh()||Th()}};var ed="@firebase/auth",nd="1.11.1";class id{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),(null==(t=this.auth.currentUser)?void 0:t.uid)||null}async getToken(t){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(t)}}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged(e=>{t((null==e?void 0:e.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){Rc(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const rd=j("authIdTokenMaxAge")||300;let od=null;var sd;Ph={loadJS:t=>new Promise((e,n)=>{const i=document.createElement("script");var r;i.setAttribute("src",t),i.onload=e,i.onerror=t=>{const e=Cc("internal-error");e.customData=t,n(e)},i.type="text/javascript",i.charset="UTF-8",((null==(r=document.getElementsByTagName("head"))?void 0:r[0])??document).appendChild(i)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},sd="Browser",de(new rt("auth",(t,{options:e})=>{const n=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),r=t.getProvider("app-check-internal"),{apiKey:o,authDomain:s}=n.options;Rc(o&&!o.includes(":"),"invalid-api-key",{appName:n.name});const l={apiKey:o,authDomain:s,clientPlatform:sd,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_h(sd)},u=new Oh(n,i,r,l);return function(t,e){const n=(null==e?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(ch);(null==e?void 0:e.errorMap)&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,null==e?void 0:e.popupRedirectResolver)}(u,e),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider("auth-internal").initialize()})),de(new rt("auth-internal",t=>{const e=Nh(t.getProvider("auth").getImmediate());return new id(e)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ee(ed,nd,function(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(sd)),Ee(ed,nd,"esm2020");const ld={apiKey:"AIzaSyC8Ro6nGLkqXgDU0rTL_rKkuL3vEmJEhTw",authDomain:"photoquest-72441.firebaseapp.com",projectId:"photoquest-72441",storageBucket:"photoquest-72441.firebasestorage.app",messagingSenderId:"368649991850",appId:"1:368649991850:web:cb7e782e83239865f0c2d3",measurementId:"G-GM6GWQWSJB"};let ud=null,ad=null;try{const t=ge(ld);ud=function(t){const e="object"==typeof t?t:be(),n="string"==typeof t?t:Ti,i=pe(e,"firestore").getImmediate({identifier:n});if(!i._initialized){const t=(()=>{const t=F("firestore");if(!t)return;const e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const n=parseInt(t.substring(e+1),10);return"["===t[0]?[t.substring(1,e-1),n]:[t.substring(0,e),n]})();t&&wa(i,...t)}return i}(t),ad=function(t=be()){const e=pe(t,"auth");if(e.isInitialized())return e.getImmediate();const n=function(t,e){const n=pe(t,"auth");if(n.isInitialized()){const t=n.getImmediate();if(Q(n.getOptions(),e??{}))return t;_c(t,"already-initialized")}return n.initialize({options:e})}(t,{popupRedirectResolver:td,persistence:[wf,Zh,ef]}),i=j("authTokenSyncURL");if(i&&"boolean"==typeof isSecureContext&&isSecureContext){const t=new URL(i,location.origin);if(location.origin===t.origin){const e=(r=t.toString(),async t=>{const e=t&&await t.getIdTokenResult(),n=e&&((new Date).getTime()-Date.parse(e.issuedAtTime))/1e3;if(n&&n>rd)return;const i=null==e?void 0:e.token;od!==i&&(od=i,await fetch(r,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});!function(t,e,n){it(t).beforeAuthStateChanged(e,n)}(n,e,()=>e(n.currentUser)),function(t,e,n,i){it(t).onIdTokenChanged(e,n,i)}(n,t=>e(t))}}var r;const o=F("auth");return o&&xh(n,`http://${o}`),n}(t)}catch(Fg){}const cd=()=>!!ud,hd=t=>t.toLowerCase().trim().replace(/[\s\.]/g,"_"),fd=async(t,e)=>{if(!ud)throw new Error("   .");if(ad)try{await zh(ad)}catch(Fg){}const n=hd(t);if((await mc(Ea(ud,"users",n))).exists())throw new Error("   .     .");const i={username:t,password:e||"",score:0,tasksCompleted:0,joinedAt:(new Date).toISOString(),currentTask:null,skipsUsedToday:0,lastSkipDate:(new Date).toDateString()};try{await function(t,e,n){t=Dn(t,ga);const i=Dn(t.firestore,Ia),r=function(t,e){let n;return n=t?t.toFirestore(e):e,n}(t.converter,e);return gc(i,[$a(Fa(i),"setDoc",t._key,r,null!==t.converter,n).toMutation(t._key,ho.none())])}(Ea(ud,"users",n),i)}catch(Fg){if("permission-denied"===Fg.code)throw new Error("   .");throw Fg}localStorage.setItem("pq_userid",n);return{username:i.username,score:i.score,tasksCompleted:i.tasksCompleted,joinedAt:i.joinedAt,currentTask:i.currentTask,skipsUsedToday:i.skipsUsedToday,lastSkipDate:i.lastSkipDate}},dd=async t=>{if(!ud)return;const e=hd(t.username);try{const n=JSON.parse(JSON.stringify(t));await yc(Ea(ud,"users",e),n)}catch(Fg){}},pd=async t=>{if(!ud)return[];try{const t=function(t,e,...n){let i=[];e instanceof tc&&i.push(e),i=i.concat(n),function(t){const e=t.filter(t=>t instanceof ic).length,n=t.filter(t=>t instanceof nc).length;if(e>1||e>0&&n>0)throw new sn(on.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)t=r._apply(t);return t}(function(t,e,...n){if(t=it(t),Nn("collection","path",e),t instanceof va){const i=_n.fromString(e,...n);return Pn(i),new ba(t,null,i)}{if(!(t instanceof ga||t instanceof ba))throw new sn(on.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(_n.fromString(e,...n));return Pn(i),new ba(t.firestore,null,i)}}(ud,"users"),function(t,e="asc"){const n=e,i=Za("orderBy",t);return rc._create(i,n)}("score","desc"),(e=50,oc._create("limit",e,"F"))),n=await wc(t),i=localStorage.getItem("pq_userid");return n.docs.map((t,e)=>{const n=t.data();return{rank:e+1,username:n.username,score:n.score,isCurrentUser:t.id===i}})}catch(e){return[]}var e},md="photoquest_user";let vd=!1;const wd=()=>{const t=localStorage.getItem(md);return t?JSON.parse(t):null},yd=t=>{localStorage.setItem(md,JSON.stringify(t))},gd=["","","2024","_","_","_","_","_","_","_","","","","77",""],bd=async(t,e)=>{if(cd()&&!vd)try{const n=await(async(t,e)=>{if(!ud)return null;const n=hd(t);try{const t=await mc(Ea(ud,"users",n));if(t.exists()){const i=t.data();if(i.password&&i.password!==e)throw new Error(" ");return localStorage.setItem("pq_userid",n),{username:i.username,score:i.score,tasksCompleted:i.tasksCompleted,joinedAt:i.joinedAt,currentTask:i.currentTask,skipsUsedToday:i.skipsUsedToday,lastSkipDate:i.lastSkipDate}}throw new Error("  ")}catch(Fg){throw Fg}})(t,e);if(n)return yd(n),n}catch(Fg){if(Fg.message.includes("")||Fg.message.includes(""))throw Fg;vd=!0}const n=wd();return n&&n.username.toLowerCase()===t.toLowerCase()?n:null},Ed=async()=>{if(cd()&&!vd)try{const t=await(async()=>{if(!ud)return null;const t=localStorage.getItem("pq_userid");if(!t)return null;try{const e=await mc(Ea(ud,"users",t));if(e.exists())return e.data()}catch(Fg){}return null})();if(t)return yd(t),t}catch(Fg){}return wd()},Sd=async t=>{const e=wd();if(e&&(e.score+=t,e.tasksCompleted+=1,e.currentTask=null,yd(e)),cd()&&!vd)try{await(async t=>{if(!ud)return;const e=localStorage.getItem("pq_userid");if(!e)return;const n=Ea(ud,"users",e);try{await yc(n,{score:bc(t),tasksCompleted:bc(1),currentTask:null,lastActive:(new Date).toISOString()})}catch(Fg){}})(t)}catch(Fg){vd=!0}},Td=async t=>{if(cd()&&!vd)try{return await pd()}catch(Fg){vd=!0}return await new Promise(t=>setTimeout(t,600)),(t=>{const e=wd(),n="day"===t?(new Date).getHours():(new Date).getDate(),i=gd.map((e,i)=>{const r=(17*i+n)%100;let o=0;return o="day"===t?50+5*r:"week"===t?300+20*r:1500+50*r,{rank:0,username:e,score:o,isCurrentUser:!1}});return e&&i.push({rank:0,username:e.username,score:e.score,isCurrentUser:!0}),i.sort((t,e)=>e.score-t.score),i.map((t,e)=>({...t,rank:e+1}))})(t)};var kd=(t=>(t.REGISTER="REGISTER",t.GAME="GAME",t.LEADERBOARD="LEADERBOARD",t.PROFILE="PROFILE",t))(kd||{});const Id=({children:t,variant:e="primary",isLoading:n=!1,className:i="",disabled:r,...o})=>l.jsx("button",{className:`px-6 py-3 rounded-xl font-bold transition-all active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 ${{primary:"bg-gradient-to-r from-indigo-500 to-purple-600 text-white shadow-lg shadow-indigo-500/30",secondary:"bg-slate-700 text-white hover:bg-slate-600",danger:"bg-red-500 text-white hover:bg-red-600",ghost:"bg-transparent text-slate-300 hover:text-white"}[e]} ${i}`,disabled:r||n,...o,children:n?l.jsx("span",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):t}),_d=({onCapture:t,isProcessing:e})=>{const n=f.useRef(null),i=f.useRef(null),[r,o]=f.useState(null),s=f.useCallback(async()=>{try{const t=await navigator.mediaDevices.getUserMedia({video:{facingMode:{ideal:"environment"},width:{ideal:1280},height:{ideal:720}},audio:!1});n.current&&(n.current.srcObject=t),o(null)}catch(t){o("     . ,     .")}},[]);f.useEffect(()=>(s(),()=>{if(n.current&&n.current.srcObject){n.current.srcObject.getTracks().forEach(t=>t.stop())}}),[s]);return r?l.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-6 text-center bg-slate-900",children:[l.jsx("div",{className:"text-red-400 mb-4 text-4xl",children:""}),l.jsx("p",{className:"text-slate-300 mb-6",children:r}),l.jsx(Id,{onClick:()=>window.location.reload(),children:" "})]}):l.jsxs("div",{className:"relative w-full h-full bg-black overflow-hidden rounded-2xl shadow-2xl",children:[l.jsx("video",{ref:n,autoPlay:!0,playsInline:!0,muted:!0,className:"absolute inset-0 w-full h-full object-cover"}),l.jsx("canvas",{ref:i,className:"hidden"}),l.jsx("div",{className:"absolute bottom-8 left-0 right-0 flex justify-center pb-20 md:pb-8",children:l.jsx("button",{onClick:()=>{if(n.current&&i.current){const e=n.current,r=i.current;r.width=e.videoWidth,r.height=e.videoHeight;const o=r.getContext("2d");if(o){o.drawImage(e,0,0,r.width,r.height);const n=r.toDataURL("image/jpeg",.8);t(n)}}},disabled:e,className:`\n            w-20 h-20 rounded-full border-4 border-white flex items-center justify-center\n            bg-white/20 backdrop-blur-sm transition-transform active:scale-95\n            ${e?"opacity-50 cursor-not-allowed":"hover:bg-white/30"}\n          `,children:e?l.jsx("span",{className:"w-8 h-8 border-2 border-white/50 border-t-white rounded-full animate-spin"}):l.jsx("div",{className:"w-16 h-16 bg-white rounded-full"})})})]})};let Cd,Ad;function Od(t,e,n,i){var r,o;if(!(null==t?void 0:t.baseUrl)){const t={geminiUrl:Cd,vertexUrl:Ad};return e?null!==(r=t.vertexUrl)&&void 0!==r?r:n:null!==(o=t.geminiUrl)&&void 0!==o?o:i}return t.baseUrl}class Nd{}function Rd(t,e){return t.replace(/\{([^}]+)\}/g,(t,n)=>{if(Object.prototype.hasOwnProperty.call(e,n)){const t=e[n];return null!=t?String(t):""}throw new Error(`Key '${n}' not found in valueMap.`)})}function Pd(t,e,n){for(let o=0;o<e.length-1;o++){const i=e[o];if(i.endsWith("[]")){const r=i.slice(0,-2);if(!(r in t)){if(!Array.isArray(n))throw new Error(`Value must be a list given an array path ${i}`);t[r]=Array.from({length:n.length},()=>({}))}if(Array.isArray(t[r])){const i=t[r];if(Array.isArray(n))for(let t=0;t<i.length;t++){Pd(i[t],e.slice(o+1),n[t])}else for(const t of i)Pd(t,e.slice(o+1),n)}return}if(i.endsWith("[0]")){const r=i.slice(0,-3);r in t||(t[r]=[{}]);return void Pd(t[r][0],e.slice(o+1),n)}t[i]&&"object"==typeof t[i]||(t[i]={}),t=t[i]}const i=e[e.length-1],r=t[i];if(void 0!==r){if(!n||"object"==typeof n&&0===Object.keys(n).length)return;if(n===r)return;if("object"!=typeof r||"object"!=typeof n||null===r||null===n)throw new Error(`Cannot set value for an existing key. Key: ${i}`);Object.assign(r,n)}else if("_self"!==i||"object"!=typeof n||null===n||Array.isArray(n))t[i]=n;else{const e=n;Object.assign(t,e)}}function xd(t,e,n=void 0){try{if(1===e.length&&"_self"===e[0])return t;for(let i=0;i<e.length;i++){if("object"!=typeof t||null===t)return n;const r=e[i];if(r.endsWith("[]")){const o=r.slice(0,-2);if(o in t){const r=t[o];return Array.isArray(r)?r.map(t=>xd(t,e.slice(i+1),n)):n}return n}t=t[r]}return t}catch(i){if(i instanceof TypeError)return n;throw i}}function Md(t,e,n,i,r){if(i>=e.length)return;if("object"!=typeof t||null===t)return;const o=e[i];if(o.endsWith("[]")){const s=o.slice(0,-2),l=t;if(s in l&&Array.isArray(l[s]))for(const t of l[s])Md(t,e,n,i+1,r)}else if("*"===o){if("object"==typeof t&&null!==t&&!Array.isArray(t)){const e=t,o=Object.keys(e).filter(t=>!t.startsWith("_")&&!r.has(t)),s={};for(const t of o)s[t]=e[t];for(const[t,r]of Object.entries(s)){const o=[];for(const e of n.slice(i))"*"===e?o.push(t):o.push(e);Pd(e,o,r)}for(const t of o)delete e[t]}}else{o in t&&Md(t[o],e,n,i+1,r)}}function Dd(t){if("string"!=typeof t)throw new Error("fromImageBytes must be a string");return t}function Ld(t){const e={},n=xd(t,["name"]);null!=n&&Pd(e,["name"],n);const i=xd(t,["metadata"]);null!=i&&Pd(e,["metadata"],i);const r=xd(t,["done"]);null!=r&&Pd(e,["done"],r);const o=xd(t,["error"]);null!=o&&Pd(e,["error"],o);const s=xd(t,["response","generateVideoResponse"]);return null!=s&&Pd(e,["response"],function(t){const e={},n=xd(t,["generatedSamples"]);if(null!=n){let t=n;Array.isArray(t)&&(t=t.map(t=>function(t){const e={},n=xd(t,["video"]);null!=n&&Pd(e,["video"],function(t){const e={},n=xd(t,["uri"]);null!=n&&Pd(e,["uri"],n);const i=xd(t,["encodedVideo"]);null!=i&&Pd(e,["videoBytes"],Dd(i));const r=xd(t,["encoding"]);null!=r&&Pd(e,["mimeType"],r);return e}(n));return e}(t))),Pd(e,["generatedVideos"],t)}const i=xd(t,["raiMediaFilteredCount"]);null!=i&&Pd(e,["raiMediaFilteredCount"],i);const r=xd(t,["raiMediaFilteredReasons"]);null!=r&&Pd(e,["raiMediaFilteredReasons"],r);return e}(s)),e}function Ud(t){const e={},n=xd(t,["name"]);null!=n&&Pd(e,["name"],n);const i=xd(t,["metadata"]);null!=i&&Pd(e,["metadata"],i);const r=xd(t,["done"]);null!=r&&Pd(e,["done"],r);const o=xd(t,["error"]);null!=o&&Pd(e,["error"],o);const s=xd(t,["response"]);return null!=s&&Pd(e,["response"],function(t){const e={},n=xd(t,["videos"]);if(null!=n){let t=n;Array.isArray(t)&&(t=t.map(t=>function(t){const e={},n=xd(t,["_self"]);null!=n&&Pd(e,["video"],function(t){const e={},n=xd(t,["gcsUri"]);null!=n&&Pd(e,["uri"],n);const i=xd(t,["bytesBase64Encoded"]);null!=i&&Pd(e,["videoBytes"],Dd(i));const r=xd(t,["mimeType"]);null!=r&&Pd(e,["mimeType"],r);return e}(n));return e}(t))),Pd(e,["generatedVideos"],t)}const i=xd(t,["raiMediaFilteredCount"]);null!=i&&Pd(e,["raiMediaFilteredCount"],i);const r=xd(t,["raiMediaFilteredReasons"]);null!=r&&Pd(e,["raiMediaFilteredReasons"],r);return e}(s)),e}function Fd(t){const e={},n=xd(t,["name"]);null!=n&&Pd(e,["name"],n);const i=xd(t,["metadata"]);null!=i&&Pd(e,["metadata"],i);const r=xd(t,["done"]);null!=r&&Pd(e,["done"],r);const o=xd(t,["error"]);null!=o&&Pd(e,["error"],o);const s=xd(t,["response"]);return null!=s&&Pd(e,["response"],function(t){const e={},n=xd(t,["sdkHttpResponse"]);null!=n&&Pd(e,["sdkHttpResponse"],n);const i=xd(t,["parent"]);null!=i&&Pd(e,["parent"],i);const r=xd(t,["documentName"]);null!=r&&Pd(e,["documentName"],r);return e}(s)),e}function $d(t){const e={},n=xd(t,["name"]);null!=n&&Pd(e,["name"],n);const i=xd(t,["metadata"]);null!=i&&Pd(e,["metadata"],i);const r=xd(t,["done"]);null!=r&&Pd(e,["done"],r);const o=xd(t,["error"]);null!=o&&Pd(e,["error"],o);const s=xd(t,["response"]);return null!=s&&Pd(e,["response"],function(t){const e={},n=xd(t,["sdkHttpResponse"]);null!=n&&Pd(e,["sdkHttpResponse"],n);const i=xd(t,["parent"]);null!=i&&Pd(e,["parent"],i);const r=xd(t,["documentName"]);null!=r&&Pd(e,["documentName"],r);return e}(s)),e}var jd,Gd,Vd,qd,Hd,Bd,Jd,zd,Kd,Wd,Yd,Xd,Qd,Zd,tp,ep,np,ip,rp,op,sp,lp,up,ap,cp,hp,fp,dp,pp,mp,vp,wp,yp,gp,bp,Ep,Sp,Tp,kp,Ip,_p,Cp,Ap,Op,Np,Rp,Pp,xp,Mp,Dp,Lp,Up,Fp,$p,jp,Gp,Vp,qp,Hp,Bp,Jp,zp,Kp,Wp,Yp,Xp,Qp,Zp,tm,em,nm,im,rm,om,sm,lm,um,am,cm,hm,fm,dm,pm,mm,vm,wm,ym,gm,bm,Em,Sm,Tm,km,Im,_m,Cm,Am,Om,Nm,Rm,Pm,xm,Mm,Dm,Lm,Um,Fm,$m,jm,Gm,Vm,qm;(Gd=jd||(jd={})).OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",Gd.OUTCOME_OK="OUTCOME_OK",Gd.OUTCOME_FAILED="OUTCOME_FAILED",Gd.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED",(qd=Vd||(Vd={})).LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",qd.PYTHON="PYTHON",(Bd=Hd||(Hd={})).SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",Bd.SILENT="SILENT",Bd.WHEN_IDLE="WHEN_IDLE",Bd.INTERRUPT="INTERRUPT",(zd=Jd||(Jd={})).TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",zd.STRING="STRING",zd.NUMBER="NUMBER",zd.INTEGER="INTEGER",zd.BOOLEAN="BOOLEAN",zd.ARRAY="ARRAY",zd.OBJECT="OBJECT",zd.NULL="NULL",(Wd=Kd||(Kd={})).MODE_UNSPECIFIED="MODE_UNSPECIFIED",Wd.MODE_DYNAMIC="MODE_DYNAMIC",(Xd=Yd||(Yd={})).API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",Xd.SIMPLE_SEARCH="SIMPLE_SEARCH",Xd.ELASTIC_SEARCH="ELASTIC_SEARCH",(Zd=Qd||(Qd={})).AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",Zd.NO_AUTH="NO_AUTH",Zd.API_KEY_AUTH="API_KEY_AUTH",Zd.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",Zd.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",Zd.OAUTH="OAUTH",Zd.OIDC_AUTH="OIDC_AUTH",(ep=tp||(tp={})).HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",ep.HTTP_IN_QUERY="HTTP_IN_QUERY",ep.HTTP_IN_HEADER="HTTP_IN_HEADER",ep.HTTP_IN_PATH="HTTP_IN_PATH",ep.HTTP_IN_BODY="HTTP_IN_BODY",ep.HTTP_IN_COOKIE="HTTP_IN_COOKIE",(ip=np||(np={})).PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",ip.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",ip.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",ip.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",ip.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",ip.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",ip.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH",(op=rp||(rp={})).THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",op.LOW="LOW",op.HIGH="HIGH",(lp=sp||(sp={})).HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",lp.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",lp.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",lp.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",lp.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",lp.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",lp.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",lp.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",lp.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",lp.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",lp.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK",(ap=up||(up={})).HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",ap.SEVERITY="SEVERITY",ap.PROBABILITY="PROBABILITY",(hp=cp||(cp={})).HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",hp.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",hp.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",hp.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",hp.BLOCK_NONE="BLOCK_NONE",hp.OFF="OFF",(dp=fp||(fp={})).FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",dp.STOP="STOP",dp.MAX_TOKENS="MAX_TOKENS",dp.SAFETY="SAFETY",dp.RECITATION="RECITATION",dp.LANGUAGE="LANGUAGE",dp.OTHER="OTHER",dp.BLOCKLIST="BLOCKLIST",dp.PROHIBITED_CONTENT="PROHIBITED_CONTENT",dp.SPII="SPII",dp.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",dp.IMAGE_SAFETY="IMAGE_SAFETY",dp.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",dp.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",dp.NO_IMAGE="NO_IMAGE",(mp=pp||(pp={})).HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",mp.NEGLIGIBLE="NEGLIGIBLE",mp.LOW="LOW",mp.MEDIUM="MEDIUM",mp.HIGH="HIGH",(wp=vp||(vp={})).HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",wp.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",wp.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",wp.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",wp.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH",(gp=yp||(yp={})).URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",gp.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",gp.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",gp.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",gp.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE",(Ep=bp||(bp={})).BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",Ep.SAFETY="SAFETY",Ep.OTHER="OTHER",Ep.BLOCKLIST="BLOCKLIST",Ep.PROHIBITED_CONTENT="PROHIBITED_CONTENT",Ep.IMAGE_SAFETY="IMAGE_SAFETY",Ep.MODEL_ARMOR="MODEL_ARMOR",Ep.JAILBREAK="JAILBREAK",(Tp=Sp||(Sp={})).TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",Tp.ON_DEMAND="ON_DEMAND",Tp.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT",(Ip=kp||(kp={})).MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",Ip.TEXT="TEXT",Ip.IMAGE="IMAGE",Ip.AUDIO="AUDIO",(Cp=_p||(_p={})).MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",Cp.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",Cp.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",Cp.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",(Op=Ap||(Ap={})).TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",Op.TUNING_MODE_FULL="TUNING_MODE_FULL",Op.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER",(Rp=Np||(Np={})).ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",Rp.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",Rp.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",Rp.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",Rp.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",Rp.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",Rp.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO",(xp=Pp||(Pp={})).JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",xp.JOB_STATE_QUEUED="JOB_STATE_QUEUED",xp.JOB_STATE_PENDING="JOB_STATE_PENDING",xp.JOB_STATE_RUNNING="JOB_STATE_RUNNING",xp.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",xp.JOB_STATE_FAILED="JOB_STATE_FAILED",xp.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",xp.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",xp.JOB_STATE_PAUSED="JOB_STATE_PAUSED",xp.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",xp.JOB_STATE_UPDATING="JOB_STATE_UPDATING",xp.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED",(Dp=Mp||(Mp={})).TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",Dp.TUNING_TASK_I2V="TUNING_TASK_I2V",Dp.TUNING_TASK_T2V="TUNING_TASK_T2V",Dp.TUNING_TASK_R2V="TUNING_TASK_R2V",(Up=Lp||(Lp={})).MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",Up.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",Up.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",Up.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",($p=Fp||(Fp={})).FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",$p.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",$p.BALANCED="BALANCED",$p.PRIORITIZE_COST="PRIORITIZE_COST",(Gp=jp||(jp={})).UNSPECIFIED="UNSPECIFIED",Gp.BLOCKING="BLOCKING",Gp.NON_BLOCKING="NON_BLOCKING",(qp=Vp||(Vp={})).MODE_UNSPECIFIED="MODE_UNSPECIFIED",qp.MODE_DYNAMIC="MODE_DYNAMIC",(Bp=Hp||(Hp={})).ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",Bp.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER",(zp=Jp||(Jp={})).MODE_UNSPECIFIED="MODE_UNSPECIFIED",zp.AUTO="AUTO",zp.ANY="ANY",zp.NONE="NONE",zp.VALIDATED="VALIDATED",(Wp=Kp||(Kp={})).BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",Wp.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",Wp.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",Wp.BLOCK_NONE="BLOCK_NONE",(Xp=Yp||(Yp={})).DONT_ALLOW="DONT_ALLOW",Xp.ALLOW_ADULT="ALLOW_ADULT",Xp.ALLOW_ALL="ALLOW_ALL",(Zp=Qp||(Qp={})).auto="auto",Zp.en="en",Zp.ja="ja",Zp.ko="ko",Zp.hi="hi",Zp.zh="zh",Zp.pt="pt",Zp.es="es",(em=tm||(tm={})).MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",em.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",em.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",em.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",em.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC",(im=nm||(nm={})).CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",im.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",im.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",im.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH",(om=rm||(rm={})).SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",om.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",om.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",om.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT",(lm=sm||(sm={})).EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",lm.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",lm.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",lm.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",lm.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",lm.EDIT_MODE_STYLE="EDIT_MODE_STYLE",lm.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",lm.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE",(am=um||(um={})).FOREGROUND="FOREGROUND",am.BACKGROUND="BACKGROUND",am.PROMPT="PROMPT",am.SEMANTIC="SEMANTIC",am.INTERACTIVE="INTERACTIVE",(hm=cm||(cm={})).ASSET="ASSET",hm.STYLE="STYLE",(dm=fm||(fm={})).INSERT="INSERT",dm.REMOVE="REMOVE",dm.REMOVE_STATIC="REMOVE_STATIC",dm.OUTPAINT="OUTPAINT",(mm=pm||(pm={})).OPTIMIZED="OPTIMIZED",mm.LOSSLESS="LOSSLESS",(wm=vm||(vm={})).SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",wm.PREFERENCE_TUNING="PREFERENCE_TUNING",(gm=ym||(ym={})).STATE_UNSPECIFIED="STATE_UNSPECIFIED",gm.STATE_PENDING="STATE_PENDING",gm.STATE_ACTIVE="STATE_ACTIVE",gm.STATE_FAILED="STATE_FAILED",(Em=bm||(bm={})).STATE_UNSPECIFIED="STATE_UNSPECIFIED",Em.PROCESSING="PROCESSING",Em.ACTIVE="ACTIVE",Em.FAILED="FAILED",(Tm=Sm||(Sm={})).SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",Tm.UPLOADED="UPLOADED",Tm.GENERATED="GENERATED",(Im=km||(km={})).TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",Im.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",Im.RESPONSE_REJECTED="RESPONSE_REJECTED",Im.NEED_MORE_INPUT="NEED_MORE_INPUT",(Cm=_m||(_m={})).MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",Cm.TEXT="TEXT",Cm.IMAGE="IMAGE",Cm.VIDEO="VIDEO",Cm.AUDIO="AUDIO",Cm.DOCUMENT="DOCUMENT",(Om=Am||(Am={})).START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",Om.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",Om.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW",(Rm=Nm||(Nm={})).END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",Rm.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",Rm.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW",(xm=Pm||(Pm={})).ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",xm.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",xm.NO_INTERRUPTION="NO_INTERRUPTION",(Dm=Mm||(Mm={})).TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",Dm.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",Dm.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT",(Um=Lm||(Lm={})).SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",Um.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",Um.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",Um.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",Um.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",Um.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",Um.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",Um.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",Um.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",Um.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",Um.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",Um.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",Um.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR",($m=Fm||(Fm={})).MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",$m.QUALITY="QUALITY",$m.DIVERSITY="DIVERSITY",$m.VOCALIZATION="VOCALIZATION",(Gm=jm||(jm={})).PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",Gm.PLAY="PLAY",Gm.PAUSE="PAUSE",Gm.STOP="STOP",Gm.RESET_CONTEXT="RESET_CONTEXT";class Hm{constructor(t){const e={};for(const n of t.headers.entries())e[n[0]]=n[1];this.headers=e,this.responseInternal=t}json(){return this.responseInternal.json()}}class Bm{get text(){var t,e,n,i,r,o,s,l;if(0===(null===(i=null===(n=null===(e=null===(t=this.candidates)||void 0===t?void 0:t[0])||void 0===e?void 0:e.content)||void 0===n?void 0:n.parts)||void 0===i?void 0:i.length))return;this.candidates&&this.candidates.length;let u="",a=!1;const c=[];for(const h of null!==(l=null===(s=null===(o=null===(r=this.candidates)||void 0===r?void 0:r[0])||void 0===o?void 0:o.content)||void 0===s?void 0:s.parts)&&void 0!==l?l:[]){for(const[t,e]of Object.entries(h))"text"===t||"thought"===t||"thoughtSignature"===t||null===e&&void 0===e||c.push(t);if("string"==typeof h.text){if("boolean"==typeof h.thought&&h.thought)continue;a=!0,u+=h.text}}return c.length,a?u:void 0}get data(){var t,e,n,i,r,o,s,l;if(0===(null===(i=null===(n=null===(e=null===(t=this.candidates)||void 0===t?void 0:t[0])||void 0===e?void 0:e.content)||void 0===n?void 0:n.parts)||void 0===i?void 0:i.length))return;this.candidates&&this.candidates.length;let u="";const a=[];for(const c of null!==(l=null===(s=null===(o=null===(r=this.candidates)||void 0===r?void 0:r[0])||void 0===o?void 0:o.content)||void 0===s?void 0:s.parts)&&void 0!==l?l:[]){for(const[t,e]of Object.entries(c))"inlineData"===t||null===e&&void 0===e||a.push(t);c.inlineData&&"string"==typeof c.inlineData.data&&(u+=atob(c.inlineData.data))}return a.length,u.length>0?btoa(u):void 0}get functionCalls(){var t,e,n,i,r,o,s,l;if(0===(null===(i=null===(n=null===(e=null===(t=this.candidates)||void 0===t?void 0:t[0])||void 0===e?void 0:e.content)||void 0===n?void 0:n.parts)||void 0===i?void 0:i.length))return;this.candidates&&this.candidates.length;const u=null===(l=null===(s=null===(o=null===(r=this.candidates)||void 0===r?void 0:r[0])||void 0===o?void 0:o.content)||void 0===s?void 0:s.parts)||void 0===l?void 0:l.filter(t=>t.functionCall).map(t=>t.functionCall).filter(t=>void 0!==t);return 0!==(null==u?void 0:u.length)?u:void 0}get executableCode(){var t,e,n,i,r,o,s,l,u;if(0===(null===(i=null===(n=null===(e=null===(t=this.candidates)||void 0===t?void 0:t[0])||void 0===e?void 0:e.content)||void 0===n?void 0:n.parts)||void 0===i?void 0:i.length))return;this.candidates&&this.candidates.length;const a=null===(l=null===(s=null===(o=null===(r=this.candidates)||void 0===r?void 0:r[0])||void 0===o?void 0:o.content)||void 0===s?void 0:s.parts)||void 0===l?void 0:l.filter(t=>t.executableCode).map(t=>t.executableCode).filter(t=>void 0!==t);return 0!==(null==a?void 0:a.length)?null===(u=null==a?void 0:a[0])||void 0===u?void 0:u.code:void 0}get codeExecutionResult(){var t,e,n,i,r,o,s,l,u;if(0===(null===(i=null===(n=null===(e=null===(t=this.candidates)||void 0===t?void 0:t[0])||void 0===e?void 0:e.content)||void 0===n?void 0:n.parts)||void 0===i?void 0:i.length))return;this.candidates&&this.candidates.length;const a=null===(l=null===(s=null===(o=null===(r=this.candidates)||void 0===r?void 0:r[0])||void 0===o?void 0:o.content)||void 0===s?void 0:s.parts)||void 0===l?void 0:l.filter(t=>t.codeExecutionResult).map(t=>t.codeExecutionResult).filter(t=>void 0!==t);return 0!==(null==a?void 0:a.length)?null===(u=null==a?void 0:a[0])||void 0===u?void 0:u.output:void 0}}class Jm{}class zm{}class Km{}class Wm{}class Ym{}class Xm{}class Qm{}class Zm{}class tv{}class ev{}class nv{_fromAPIResponse({apiResponse:t,_isVertexAI:e}){const n=new nv;let i;const r=t;return i=e?Ud(r):Ld(r),Object.assign(n,i),n}}class iv{}class rv{}class ov{}class sv{}class lv{}class uv{}class av{}class cv{_fromAPIResponse({apiResponse:t,_isVertexAI:e}){const n=new cv,i=Fd(t);return Object.assign(n,i),n}}class hv{}class fv{}class dv{}class pv{}class mv{get text(){var t,e,n;let i="",r=!1;const o=[];for(const s of null!==(n=null===(e=null===(t=this.serverContent)||void 0===t?void 0:t.modelTurn)||void 0===e?void 0:e.parts)&&void 0!==n?n:[]){for(const[t,e]of Object.entries(s))"text"!==t&&"thought"!==t&&null!==e&&o.push(t);if("string"==typeof s.text){if("boolean"==typeof s.thought&&s.thought)continue;r=!0,i+=s.text}}return o.length,r?i:void 0}get data(){var t,e,n;let i="";const r=[];for(const o of null!==(n=null===(e=null===(t=this.serverContent)||void 0===t?void 0:t.modelTurn)||void 0===e?void 0:e.parts)&&void 0!==n?n:[]){for(const[t,e]of Object.entries(o))"inlineData"!==t&&null!==e&&r.push(t);o.inlineData&&"string"==typeof o.inlineData.data&&(i+=atob(o.inlineData.data))}return r.length,i.length>0?btoa(i):void 0}}class vv{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class wv{_fromAPIResponse({apiResponse:t,_isVertexAI:e}){const n=new wv,i=$d(t);return Object.assign(n,i),n}}function yv(t,e){if(!e||"string"!=typeof e)throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}return`publishers/google/models/${e}`}return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function gv(t,e){const n=yv(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function bv(t){return Array.isArray(t)?t.map(t=>Ev(t)):[Ev(t)]}function Ev(t){if("object"==typeof t&&null!==t)return t;throw new Error("Could not parse input as Blob. Unsupported blob type: "+typeof t)}function Sv(t){const e=Ev(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Tv(t){const e=Ev(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function kv(t){if(null==t)throw new Error("PartUnion is required");if("object"==typeof t)return t;if("string"==typeof t)return{text:t};throw new Error("Unsupported part type: "+typeof t)}function Iv(t){if(null==t||Array.isArray(t)&&0===t.length)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(t=>kv(t)):[kv(t)]}function _v(t){return null!=t&&"object"==typeof t&&"parts"in t&&Array.isArray(t.parts)}function Cv(t){return null!=t&&"object"==typeof t&&"functionCall"in t}function Av(t){return null!=t&&"object"==typeof t&&"functionResponse"in t}function Ov(t){if(null==t)throw new Error("ContentUnion is required");return _v(t)?t:{role:"user",parts:Iv(t)}}function Nv(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const e=Ov(t);return e.parts&&e.parts.length>0&&void 0!==e.parts[0].text?[e.parts[0].text]:[]});if(t.isVertexAI()){const t=Ov(e);return t.parts&&t.parts.length>0&&void 0!==t.parts[0].text?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>Ov(t)):[Ov(e)]}function Rv(t){if(null==t||Array.isArray(t)&&0===t.length)throw new Error("contents are required");if(!Array.isArray(t)){if(Cv(t)||Av(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Ov(t)]}const e=[],n=[],i=_v(t[0]);for(const r of t){const t=_v(r);if(t!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(t)e.push(r);else{if(Cv(r)||Av(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(r)}}return i||e.push({role:"user",parts:Iv(n)}),e}function Pv(t){const e={},n=["items"],i=["anyOf"],r=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const o=t.anyOf;null!=o&&2==o.length&&("null"===o[0].type?(e.nullable=!0,t=o[1]):"null"===o[1].type&&(e.nullable=!0,t=o[0])),t.type instanceof Array&&function(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(t=>"null"!==t);if(1===n.length)e.type=Object.values(Jd).includes(n[0].toUpperCase())?n[0].toUpperCase():Jd.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const t of n)e.anyOf.push({type:Object.values(Jd).includes(t.toUpperCase())?t.toUpperCase():Jd.TYPE_UNSPECIFIED})}}(t.type,e);for(const[s,l]of Object.entries(t))if(null!=l)if("type"==s){if("null"===l)throw new Error("type: null can not be the only possible type for the field.");if(l instanceof Array)continue;e.type=Object.values(Jd).includes(l.toUpperCase())?l.toUpperCase():Jd.TYPE_UNSPECIFIED}else if(n.includes(s))e[s]=Pv(l);else if(i.includes(s)){const t=[];for(const n of l)"null"!=n.type?t.push(Pv(n)):e.nullable=!0;e[s]=t}else if(r.includes(s)){const t={};for(const[e,n]of Object.entries(l))t[e]=Pv(n);e[s]=t}else{if("additionalProperties"===s)continue;e[s]=l}return e}function xv(t){return Pv(t)}function Mv(t){if("object"==typeof t)return t;if("string"==typeof t)return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error("Unsupported speechConfig type: "+typeof t)}function Dv(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Lv(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Pv(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Pv(e.response));return t}function Uv(t){if(null==t)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function Fv(t,e){if("string"!=typeof e)throw new Error("name must be a string");return function(t,e,n,i=1){const r=!e.startsWith(`${n}/`)&&e.split("/").length===i;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:r?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:r?`${n}/${e}`:e}(t,e,"cachedContents")}function $v(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function jv(t){return Dd(t)}function Gv(t){var e;let n;var i;if(null!=(i=t)&&"object"==typeof i&&"name"in i&&(n=t.name),!(function(t){return null!=t&&"object"==typeof t&&"uri"in t}(t)&&(n=t.uri,void 0===n)||function(t){return null!=t&&"object"==typeof t&&"video"in t}(t)&&(n=null===(e=t.video)||void 0===e?void 0:e.uri,void 0===n))){if("string"==typeof t&&(n=t),void 0===n)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const t=n.split("files/")[1].match(/[a-z0-9]+/);if(null===t)throw new Error(`Could not extract file name from URI ${n}`);n=t[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function Vv(t,e){let n;return n=t.isVertexAI()?e?"publishers/google/models":"models":e?"models":"tunedModels",n}function qv(t){for(const e of["models","tunedModels","publisherModels"])if(Hv(t,e))return t[e];return[]}function Hv(t,e){return null!==t&&"object"==typeof t&&e in t}function Bv(t,e={}){const n=t,i={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};n.outputSchema&&(i.responseJsonSchema=n.outputSchema),e.behavior&&(i.behavior=e.behavior);return{functionDeclarations:[i]}}function Jv(t,e){let n;if("string"==typeof e)if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else{if(!e.startsWith("bq://"))throw new Error(`Unsupported string source for Vertex AI: ${e}`);n={format:"bigquery",bigqueryUri:e}}else{if(!e.startsWith("files/"))throw new Error(`Unsupported string source for Gemini API: ${e}`);n={fileName:e}}else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const i=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,r=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(r>0||1!==i)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||1!==r)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function zv(t){if("object"!=typeof t||null===t)return{};const e=t,n=e.inlinedResponses;if("object"!=typeof n||null===n)return t;const i=n.inlinedResponses;if(!Array.isArray(i)||0===i.length)return t;let r=!1;for(const o of i){if("object"!=typeof o||null===o)continue;const t=o.response;if("object"!=typeof t||null===t)continue;if(void 0!==t.embedding){r=!0;break}}return r&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Kv(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function Wv(t){return"BATCH_STATE_UNSPECIFIED"===t?"JOB_STATE_UNSPECIFIED":"BATCH_STATE_PENDING"===t?"JOB_STATE_PENDING":"BATCH_STATE_RUNNING"===t?"JOB_STATE_RUNNING":"BATCH_STATE_SUCCEEDED"===t?"JOB_STATE_SUCCEEDED":"BATCH_STATE_FAILED"===t?"JOB_STATE_FAILED":"BATCH_STATE_CANCELLED"===t?"JOB_STATE_CANCELLED":"BATCH_STATE_EXPIRED"===t?"JOB_STATE_EXPIRED":t}function Yv(t){const e={},n=xd(t,["responsesFile"]);null!=n&&Pd(e,["fileName"],n);const i=xd(t,["inlinedResponses","inlinedResponses"]);if(null!=i){let t=i;Array.isArray(t)&&(t=t.map(t=>function(t){const e={},n=xd(t,["response"]);null!=n&&Pd(e,["response"],function(t){const e={},n=xd(t,["sdkHttpResponse"]);null!=n&&Pd(e,["sdkHttpResponse"],n);const i=xd(t,["candidates"]);if(null!=i){let t=i;Array.isArray(t)&&(t=t.map(t=>function(t){const e={},n=xd(t,["content"]);null!=n&&Pd(e,["content"],n);const i=xd(t,["citationMetadata"]);null!=i&&Pd(e,["citationMetadata"],function(t){const e={},n=xd(t,["citationSources"]);if(null!=n){let t=n;Array.isArray(t)&&(t=t.map(t=>t)),Pd(e,["citations"],t)}return e}(i));const r=xd(t,["tokenCount"]);null!=r&&Pd(e,["tokenCount"],r);const o=xd(t,["finishReason"]);null!=o&&Pd(e,["finishReason"],o);const s=xd(t,["avgLogprobs"]);null!=s&&Pd(e,["avgLogprobs"],s);const l=xd(t,["groundingMetadata"]);null!=l&&Pd(e,["groundingMetadata"],l);const u=xd(t,["index"]);null!=u&&Pd(e,["index"],u);const a=xd(t,["logprobsResult"]);null!=a&&Pd(e,["logprobsResult"],a);const c=xd(t,["safetyRatings"]);if(null!=c){let t=c;Array.isArray(t)&&(t=t.map(t=>t)),Pd(e,["safetyRatings"],t)}const h=xd(t,["urlContextMetadata"]);null!=h&&Pd(e,["urlContextMetadata"],h);return e}(t))),Pd(e,["candidates"],t)}const r=xd(t,["modelVersion"]);null!=r&&Pd(e,["modelVersion"],r);const o=xd(t,["promptFeedback"]);null!=o&&Pd(e,["promptFeedback"],o);const s=xd(t,["responseId"]);null!=s&&Pd(e,["responseId"],s);const l=xd(t,["usageMetadata"]);null!=l&&Pd(e,["usageMetadata"],l);return e}(n));const i=xd(t,["error"]);null!=i&&Pd(e,["error"],i);return e}(t))),Pd(e,["inlinedResponses"],t)}const r=xd(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(null!=r){let t=r;Array.isArray(t)&&(t=t.map(t=>t)),Pd(e,["inlinedEmbedContentResponses"],t)}return e}function Xv(t){const e={},n=xd(t,["name"]);null!=n&&Pd(e,["name"],n);const i=xd(t,["metadata","displayName"]);null!=i&&Pd(e,["displayName"],i);const r=xd(t,["metadata","state"]);null!=r&&Pd(e,["state"],Wv(r));const o=xd(t,["metadata","createTime"]);null!=o&&Pd(e,["createTime"],o);const s=xd(t,["metadata","endTime"]);null!=s&&Pd(e,["endTime"],s);const l=xd(t,["metadata","updateTime"]);null!=l&&Pd(e,["updateTime"],l);const u=xd(t,["metadata","model"]);null!=u&&Pd(e,["model"],u);const a=xd(t,["metadata","output"]);return null!=a&&Pd(e,["dest"],Yv(zv(a))),e}function Qv(t){const e={},n=xd(t,["name"]);null!=n&&Pd(e,["name"],n);const i=xd(t,["displayName"]);null!=i&&Pd(e,["displayName"],i);const r=xd(t,["state"]);null!=r&&Pd(e,["state"],Wv(r));const o=xd(t,["error"]);null!=o&&Pd(e,["error"],o);const s=xd(t,["createTime"]);null!=s&&Pd(e,["createTime"],s);const l=xd(t,["startTime"]);null!=l&&Pd(e,["startTime"],l);const u=xd(t,["endTime"]);null!=u&&Pd(e,["endTime"],u);const a=xd(t,["updateTime"]);null!=a&&Pd(e,["updateTime"],a);const c=xd(t,["model"]);null!=c&&Pd(e,["model"],c);const h=xd(t,["inputConfig"]);null!=h&&Pd(e,["src"],function(t){const e={},n=xd(t,["instancesFormat"]);null!=n&&Pd(e,["format"],n);const i=xd(t,["gcsSource","uris"]);null!=i&&Pd(e,["gcsUri"],i);const r=xd(t,["bigquerySource","inputUri"]);null!=r&&Pd(e,["bigqueryUri"],r);return e}(h));const f=xd(t,["outputConfig"]);null!=f&&Pd(e,["dest"],function(t){const e={},n=xd(t,["predictionsFormat"]);null!=n&&Pd(e,["format"],n);const i=xd(t,["gcsDestination","outputUriPrefix"]);null!=i&&Pd(e,["gcsUri"],i);const r=xd(t,["bigqueryDestination","outputUri"]);return null!=r&&Pd(e,["bigqueryUri"],r),e}(zv(f)));const d=xd(t,["completionStats"]);return null!=d&&Pd(e,["completionStats"],d),e}function Zv(t,e){const n={};if(void 0!==xd(e,["format"]))throw new Error("format parameter is not supported in Gemini API.");if(void 0!==xd(e,["gcsUri"]))throw new Error("gcsUri parameter is not supported in Gemini API.");if(void 0!==xd(e,["bigqueryUri"]))throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=xd(e,["fileName"]);null!=i&&Pd(n,["fileName"],i);const r=xd(e,["inlinedRequests"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>function(t,e){const n={},i=xd(e,["model"]);null!=i&&Pd(n,["request","model"],yv(t,i));const r=xd(e,["contents"]);if(null!=r){let t=Rv(r);Array.isArray(t)&&(t=t.map(t=>tw(t))),Pd(n,["request","contents"],t)}const o=xd(e,["metadata"]);null!=o&&Pd(n,["metadata"],o);const s=xd(e,["config"]);null!=s&&Pd(n,["request","generationConfig"],function(t,e,n){const i={},r=xd(e,["systemInstruction"]);void 0!==n&&null!=r&&Pd(n,["systemInstruction"],tw(Ov(r)));const o=xd(e,["temperature"]);null!=o&&Pd(i,["temperature"],o);const s=xd(e,["topP"]);null!=s&&Pd(i,["topP"],s);const l=xd(e,["topK"]);null!=l&&Pd(i,["topK"],l);const u=xd(e,["candidateCount"]);null!=u&&Pd(i,["candidateCount"],u);const a=xd(e,["maxOutputTokens"]);null!=a&&Pd(i,["maxOutputTokens"],a);const c=xd(e,["stopSequences"]);null!=c&&Pd(i,["stopSequences"],c);const h=xd(e,["responseLogprobs"]);null!=h&&Pd(i,["responseLogprobs"],h);const f=xd(e,["logprobs"]);null!=f&&Pd(i,["logprobs"],f);const d=xd(e,["presencePenalty"]);null!=d&&Pd(i,["presencePenalty"],d);const p=xd(e,["frequencyPenalty"]);null!=p&&Pd(i,["frequencyPenalty"],p);const m=xd(e,["seed"]);null!=m&&Pd(i,["seed"],m);const v=xd(e,["responseMimeType"]);null!=v&&Pd(i,["responseMimeType"],v);const w=xd(e,["responseSchema"]);null!=w&&Pd(i,["responseSchema"],xv(w));const y=xd(e,["responseJsonSchema"]);null!=y&&Pd(i,["responseJsonSchema"],y);if(void 0!==xd(e,["routingConfig"]))throw new Error("routingConfig parameter is not supported in Gemini API.");if(void 0!==xd(e,["modelSelectionConfig"]))throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const g=xd(e,["safetySettings"]);if(void 0!==n&&null!=g){let t=g;Array.isArray(t)&&(t=t.map(t=>function(t){const e={},n=xd(t,["category"]);null!=n&&Pd(e,["category"],n);if(void 0!==xd(t,["method"]))throw new Error("method parameter is not supported in Gemini API.");const i=xd(t,["threshold"]);null!=i&&Pd(e,["threshold"],i);return e}(t))),Pd(n,["safetySettings"],t)}const b=xd(e,["tools"]);if(void 0!==n&&null!=b){let t=Uv(b);Array.isArray(t)&&(t=t.map(t=>function(t){const e={},n=xd(t,["functionDeclarations"]);if(null!=n){let t=n;Array.isArray(t)&&(t=t.map(t=>t)),Pd(e,["functionDeclarations"],t)}if(void 0!==xd(t,["retrieval"]))throw new Error("retrieval parameter is not supported in Gemini API.");const i=xd(t,["googleSearchRetrieval"]);null!=i&&Pd(e,["googleSearchRetrieval"],i);const r=xd(t,["computerUse"]);null!=r&&Pd(e,["computerUse"],r);const o=xd(t,["fileSearch"]);null!=o&&Pd(e,["fileSearch"],o);const s=xd(t,["codeExecution"]);null!=s&&Pd(e,["codeExecution"],s);if(void 0!==xd(t,["enterpriseWebSearch"]))throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=xd(t,["googleMaps"]);null!=l&&Pd(e,["googleMaps"],function(t){const e={};if(void 0!==xd(t,["authConfig"]))throw new Error("authConfig parameter is not supported in Gemini API.");const n=xd(t,["enableWidget"]);null!=n&&Pd(e,["enableWidget"],n);return e}(l));const u=xd(t,["googleSearch"]);null!=u&&Pd(e,["googleSearch"],function(t){const e={};if(void 0!==xd(t,["excludeDomains"]))throw new Error("excludeDomains parameter is not supported in Gemini API.");if(void 0!==xd(t,["blockingConfidence"]))throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=xd(t,["timeRangeFilter"]);null!=n&&Pd(e,["timeRangeFilter"],n);return e}(u));const a=xd(t,["urlContext"]);null!=a&&Pd(e,["urlContext"],a);return e}(Lv(t)))),Pd(n,["tools"],t)}const E=xd(e,["toolConfig"]);void 0!==n&&null!=E&&Pd(n,["toolConfig"],function(t){const e={},n=xd(t,["functionCallingConfig"]);null!=n&&Pd(e,["functionCallingConfig"],function(t){const e={},n=xd(t,["mode"]);null!=n&&Pd(e,["mode"],n);const i=xd(t,["allowedFunctionNames"]);null!=i&&Pd(e,["allowedFunctionNames"],i);if(void 0!==xd(t,["streamFunctionCallArguments"]))throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}(n));const i=xd(t,["retrievalConfig"]);null!=i&&Pd(e,["retrievalConfig"],i);return e}(E));if(void 0!==xd(e,["labels"]))throw new Error("labels parameter is not supported in Gemini API.");const S=xd(e,["cachedContent"]);void 0!==n&&null!=S&&Pd(n,["cachedContent"],Fv(t,S));const T=xd(e,["responseModalities"]);null!=T&&Pd(i,["responseModalities"],T);const k=xd(e,["mediaResolution"]);null!=k&&Pd(i,["mediaResolution"],k);const I=xd(e,["speechConfig"]);null!=I&&Pd(i,["speechConfig"],Mv(I));if(void 0!==xd(e,["audioTimestamp"]))throw new Error("audioTimestamp parameter is not supported in Gemini API.");const _=xd(e,["thinkingConfig"]);null!=_&&Pd(i,["thinkingConfig"],_);const C=xd(e,["imageConfig"]);null!=C&&Pd(i,["imageConfig"],function(t){const e={},n=xd(t,["aspectRatio"]);null!=n&&Pd(e,["aspectRatio"],n);const i=xd(t,["imageSize"]);null!=i&&Pd(e,["imageSize"],i);if(void 0!==xd(t,["outputMimeType"]))throw new Error("outputMimeType parameter is not supported in Gemini API.");if(void 0!==xd(t,["outputCompressionQuality"]))throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}(C));const A=xd(e,["enableEnhancedCivicAnswers"]);null!=A&&Pd(i,["enableEnhancedCivicAnswers"],A);return i}(t,s,xd(n,["request"],{})));return n}(t,e))),Pd(n,["requests","requests"],e)}return n}function tw(t){const e={},n=xd(t,["parts"]);if(null!=n){let t=n;Array.isArray(t)&&(t=t.map(t=>function(t){const e={},n=xd(t,["mediaResolution"]);null!=n&&Pd(e,["mediaResolution"],n);const i=xd(t,["codeExecutionResult"]);null!=i&&Pd(e,["codeExecutionResult"],i);const r=xd(t,["executableCode"]);null!=r&&Pd(e,["executableCode"],r);const o=xd(t,["fileData"]);null!=o&&Pd(e,["fileData"],function(t){const e={};if(void 0!==xd(t,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const n=xd(t,["fileUri"]);null!=n&&Pd(e,["fileUri"],n);const i=xd(t,["mimeType"]);null!=i&&Pd(e,["mimeType"],i);return e}(o));const s=xd(t,["functionCall"]);null!=s&&Pd(e,["functionCall"],function(t){const e={},n=xd(t,["id"]);null!=n&&Pd(e,["id"],n);const i=xd(t,["args"]);null!=i&&Pd(e,["args"],i);const r=xd(t,["name"]);null!=r&&Pd(e,["name"],r);if(void 0!==xd(t,["partialArgs"]))throw new Error("partialArgs parameter is not supported in Gemini API.");if(void 0!==xd(t,["willContinue"]))throw new Error("willContinue parameter is not supported in Gemini API.");return e}(s));const l=xd(t,["functionResponse"]);null!=l&&Pd(e,["functionResponse"],l);const u=xd(t,["inlineData"]);null!=u&&Pd(e,["inlineData"],function(t){const e={},n=xd(t,["data"]);if(null!=n&&Pd(e,["data"],n),void 0!==xd(t,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const i=xd(t,["mimeType"]);return null!=i&&Pd(e,["mimeType"],i),e}(u));const a=xd(t,["text"]);null!=a&&Pd(e,["text"],a);const c=xd(t,["thought"]);null!=c&&Pd(e,["thought"],c);const h=xd(t,["thoughtSignature"]);null!=h&&Pd(e,["thoughtSignature"],h);const f=xd(t,["videoMetadata"]);null!=f&&Pd(e,["videoMetadata"],f);return e}(t))),Pd(e,["parts"],t)}const i=xd(t,["role"]);return null!=i&&Pd(e,["role"],i),e}function ew(t,e){const n=xd(t,["displayName"]);void 0!==e&&null!=n&&Pd(e,["displayName"],n);const i=xd(t,["dest"]);return void 0!==e&&null!=i&&Pd(e,["outputConfig"],function(t){const e={},n=xd(t,["format"]);null!=n&&Pd(e,["predictionsFormat"],n);const i=xd(t,["gcsUri"]);null!=i&&Pd(e,["gcsDestination","outputUriPrefix"],i);const r=xd(t,["bigqueryUri"]);if(null!=r&&Pd(e,["bigqueryDestination","outputUri"],r),void 0!==xd(t,["fileName"]))throw new Error("fileName parameter is not supported in Vertex AI.");if(void 0!==xd(t,["inlinedResponses"]))throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(void 0!==xd(t,["inlinedEmbedContentResponses"]))throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}(function(t){if("string"!=typeof t)return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}(i))),{}}function nw(t,e){const n={},i=xd(e,["model"]);null!=i&&Pd(n,["_url","model"],yv(t,i));const r=xd(e,["src"]);null!=r&&Pd(n,["batch","inputConfig"],Zv(t,Jv(t,r)));const o=xd(e,["config"]);return null!=o&&function(t,e){const n=xd(t,["displayName"]);if(void 0!==e&&null!=n&&Pd(e,["batch","displayName"],n),void 0!==xd(t,["dest"]))throw new Error("dest parameter is not supported in Gemini API.")}(o,n),n}function iw(t,e){const n={},i=xd(e,["model"]);null!=i&&Pd(n,["model"],yv(t,i));const r=xd(e,["src"]);null!=r&&Pd(n,["inputConfig"],function(t){const e={},n=xd(t,["format"]);null!=n&&Pd(e,["instancesFormat"],n);const i=xd(t,["gcsUri"]);null!=i&&Pd(e,["gcsSource","uris"],i);const r=xd(t,["bigqueryUri"]);if(null!=r&&Pd(e,["bigquerySource","inputUri"],r),void 0!==xd(t,["fileName"]))throw new Error("fileName parameter is not supported in Vertex AI.");if(void 0!==xd(t,["inlinedRequests"]))throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}(Jv(t,r)));const o=xd(e,["config"]);return null!=o&&ew(o,n),n}function rw(t,e){const n={},i=xd(e,["model"]);null!=i&&Pd(n,["_url","model"],yv(t,i));const r=xd(e,["src"]);null!=r&&Pd(n,["batch","inputConfig"],function(t,e){const n={},i=xd(e,["fileName"]);null!=i&&Pd(n,["file_name"],i);const r=xd(e,["inlinedRequests"]);null!=r&&Pd(n,["requests"],function(t,e){const n={},i=xd(e,["contents"]);if(null!=i){let e=Nv(t,i);Array.isArray(e)&&(e=e.map(t=>t)),Pd(n,["requests[]","request","content"],e)}const r=xd(e,["config"]);null!=r&&(Pd(n,["_self"],function(t,e){const n={},i=xd(t,["taskType"]);void 0!==e&&null!=i&&Pd(e,["requests[]","taskType"],i);const r=xd(t,["title"]);void 0!==e&&null!=r&&Pd(e,["requests[]","title"],r);const o=xd(t,["outputDimensionality"]);void 0!==e&&null!=o&&Pd(e,["requests[]","outputDimensionality"],o);if(void 0!==xd(t,["mimeType"]))throw new Error("mimeType parameter is not supported in Gemini API.");if(void 0!==xd(t,["autoTruncate"]))throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}(r,n)),function(t,e){for(const[n,i]of Object.entries(e)){const e=n.split("."),r=i.split("."),o=new Set;let s=-1;for(let t=0;t<e.length;t++)if("*"===e[t]){s=t;break}if(-1!==s&&r.length>s)for(let t=s;t<r.length;t++){const e=r[t];"*"===e||e.endsWith("[]")||e.endsWith("[0]")||o.add(e)}Md(t,e,r,0,o)}}(n,{"requests[].*":"requests[].request.*"}));return n}(t,r));return n}(t,r));const o=xd(e,["config"]);return null!=o&&function(t,e){const n=xd(t,["displayName"]);void 0!==e&&null!=n&&Pd(e,["batch","displayName"],n)}(o,n),n}function ow(t){const e={},n=xd(t,["config"]);return null!=n&&function(t,e){const n=xd(t,["pageSize"]);void 0!==e&&null!=n&&Pd(e,["_query","pageSize"],n);const i=xd(t,["pageToken"]);if(void 0!==e&&null!=i&&Pd(e,["_query","pageToken"],i),void 0!==xd(t,["filter"]))throw new Error("filter parameter is not supported in Gemini API.")}(n,e),e}function sw(t){const e={},n=xd(t,["config"]);return null!=n&&function(t,e){const n=xd(t,["pageSize"]);void 0!==e&&null!=n&&Pd(e,["_query","pageSize"],n);const i=xd(t,["pageToken"]);void 0!==e&&null!=i&&Pd(e,["_query","pageToken"],i);const r=xd(t,["filter"]);void 0!==e&&null!=r&&Pd(e,["_query","filter"],r)}(n,e),e}(qm=Vm||(Vm={})).PAGED_ITEM_BATCH_JOBS="batchJobs",qm.PAGED_ITEM_MODELS="models",qm.PAGED_ITEM_TUNING_JOBS="tuningJobs",qm.PAGED_ITEM_FILES="files",qm.PAGED_ITEM_CACHED_CONTENTS="cachedContents",qm.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",qm.PAGED_ITEM_DOCUMENTS="documents";class lw{constructor(t,e,n,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=e,this.init(t,n,i)}init(t,e,n){var i,r;this.nameInternal=t,this.pageInternal=e[this.nameInternal]||[],this.sdkHttpResponseInternal=null==e?void 0:e.sdkHttpResponse,this.idxInternal=0;let o={config:{}};o=n&&0!==Object.keys(n).length?"object"==typeof n?Object.assign({},n):n:{config:{}},o.config&&(o.config.pageToken=e.nextPageToken),this.paramsInternal=o,this.pageInternalSize=null!==(r=null===(i=o.config)||void 0===i?void 0:i.pageSize)&&void 0!==r?r:this.pageInternal.length}initNextPage(t){this.init(this.nameInternal,t,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(t){return this.pageInternal[t]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength){if(!this.hasNextPage())return{value:void 0,done:!0};await this.nextPage()}const t=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:t,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const t=await this.requestInternal(this.params);return this.initNextPage(t),this.page}hasNextPage(){var t;return void 0!==(null===(t=this.params.config)||void 0===t?void 0:t.pageToken)}}class uw extends Nd{constructor(t){super(),this.apiClient=t,this.list=async(t={})=>new lw(Vm.PAGED_ITEM_BATCH_JOBS,t=>this.listInternal(t),await this.listInternal(t),t),this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)}}createInlinedGenerateContentRequest(t){const e=nw(this.apiClient,t),n=Rd("{model}:batchGenerateContent",e._url),i=e.batch.inputConfig.requests,r=i.requests,o=[];for(const s of r){const t=Object.assign({},s);if(t.systemInstruction){const e=t.systemInstruction;delete t.systemInstruction;const n=t.request;n.systemInstruction=e,t.request=n}o.push(t)}return i.requests=o,delete e.config,delete e._url,delete e._query,{path:n,body:e}}getGcsUri(t){return"string"==typeof t?t.startsWith("gs://")?t:void 0:!Array.isArray(t)&&t.gcsUri&&t.gcsUri.length>0?t.gcsUri[0]:void 0}getBigqueryUri(t){return"string"==typeof t?t.startsWith("bq://")?t:void 0:Array.isArray(t)?void 0:t.bigqueryUri}formatDestination(t,e){const n=e?Object.assign({},e):{},i=Date.now().toString();if(n.displayName||(n.displayName=`genaiBatchJob_${i}`),void 0===n.dest){const e=this.getGcsUri(t),r=this.getBigqueryUri(t);if(e)e.endsWith(".jsonl")?n.dest=`${e.slice(0,-6)}/dest`:n.dest=`${e}_dest_${i}`;else{if(!r)throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.");n.dest=`${r}_dest_${i}`}}return n}async createInternal(t){var e,n,i,r;let o,s="",l={};if(this.apiClient.isVertexAI()){const i=iw(this.apiClient,t);return s=Rd("batchPredictionJobs",i._url),l=i._query,delete i._url,delete i._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(i),httpMethod:"POST",httpOptions:null===(e=t.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(n=t.config)||void 0===n?void 0:n.abortSignal}).then(t=>t.json()),o.then(t=>Qv(t))}{const e=nw(this.apiClient,t);return s=Rd("{model}:batchGenerateContent",e._url),l=e._query,delete e._url,delete e._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(e),httpMethod:"POST",httpOptions:null===(i=t.config)||void 0===i?void 0:i.httpOptions,abortSignal:null===(r=t.config)||void 0===r?void 0:r.abortSignal}).then(t=>t.json()),o.then(t=>Xv(t))}}async createEmbeddingsInternal(t){var e,n;let i,r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=rw(this.apiClient,t);return r=Rd("{model}:asyncBatchEmbedContent",s._url),o=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(e=t.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(n=t.config)||void 0===n?void 0:n.abortSignal}).then(t=>t.json()),i.then(t=>Xv(t))}}async get(t){var e,n,i,r;let o,s="",l={};if(this.apiClient.isVertexAI()){const i=function(t,e){const n={},i=xd(e,["name"]);return null!=i&&Pd(n,["_url","name"],Kv(t,i)),n}(this.apiClient,t);return s=Rd("batchPredictionJobs/{name}",i._url),l=i._query,delete i._url,delete i._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(i),httpMethod:"GET",httpOptions:null===(e=t.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(n=t.config)||void 0===n?void 0:n.abortSignal}).then(t=>t.json()),o.then(t=>Qv(t))}{const e=function(t,e){const n={},i=xd(e,["name"]);return null!=i&&Pd(n,["_url","name"],Kv(t,i)),n}(this.apiClient,t);return s=Rd("batches/{name}",e._url),l=e._query,delete e._url,delete e._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(e),httpMethod:"GET",httpOptions:null===(i=t.config)||void 0===i?void 0:i.httpOptions,abortSignal:null===(r=t.config)||void 0===r?void 0:r.abortSignal}).then(t=>t.json()),o.then(t=>Xv(t))}}async cancel(t){var e,n,i,r;let o="",s={};if(this.apiClient.isVertexAI()){const i=function(t,e){const n={},i=xd(e,["name"]);return null!=i&&Pd(n,["_url","name"],Kv(t,i)),n}(this.apiClient,t);o=Rd("batchPredictionJobs/{name}:cancel",i._url),s=i._query,delete i._url,delete i._query,await this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(i),httpMethod:"POST",httpOptions:null===(e=t.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(n=t.config)||void 0===n?void 0:n.abortSignal})}else{const e=function(t,e){const n={},i=xd(e,["name"]);return null!=i&&Pd(n,["_url","name"],Kv(t,i)),n}(this.apiClient,t);o=Rd("batches/{name}:cancel",e._url),s=e._query,delete e._url,delete e._query,await this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(e),httpMethod:"POST",httpOptions:null===(i=t.config)||void 0===i?void 0:i.httpOptions,abortSignal:null===(r=t.config)||void 0===r?void 0:r.abortSignal})}}async listInternal(t){var e,n,i,r;let o,s="",l={};if(this.apiClient.isVertexAI()){const i=sw(t);return s=Rd("batchPredictionJobs",i._url),l=i._query,delete i._url,delete i._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(i),httpMethod:"GET",httpOptions:null===(e=t.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(n=t.config)||void 0===n?void 0:n.abortSignal}).then(t=>t.json().then(e=>{const n=e;return n.sdkHttpResponse={headers:t.headers},n})),o.then(t=>{const e=function(t){const e={},n=xd(t,["sdkHttpResponse"]);null!=n&&Pd(e,["sdkHttpResponse"],n);const i=xd(t,["nextPageToken"]);null!=i&&Pd(e,["nextPageToken"],i);const r=xd(t,["batchPredictionJobs"]);if(null!=r){let t=r;Array.isArray(t)&&(t=t.map(t=>Qv(t))),Pd(e,["batchJobs"],t)}return e}(t),n=new pv;return Object.assign(n,e),n})}{const e=ow(t);return s=Rd("batches",e._url),l=e._query,delete e._url,delete e._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(e),httpMethod:"GET",httpOptions:null===(i=t.config)||void 0===i?void 0:i.httpOptions,abortSignal:null===(r=t.config)||void 0===r?void 0:r.abortSignal}).then(t=>t.json().then(e=>{const n=e;return n.sdkHttpResponse={headers:t.headers},n})),o.then(t=>{const e=function(t){const e={},n=xd(t,["sdkHttpResponse"]);null!=n&&Pd(e,["sdkHttpResponse"],n);const i=xd(t,["nextPageToken"]);null!=i&&Pd(e,["nextPageToken"],i);const r=xd(t,["operations"]);if(null!=r){let t=r;Array.isArray(t)&&(t=t.map(t=>Xv(t))),Pd(e,["batchJobs"],t)}return e}(t),n=new pv;return Object.assign(n,e),n})}}async delete(t){var e,n,i,r;let o,s="",l={};if(this.apiClient.isVertexAI()){const i=function(t,e){const n={},i=xd(e,["name"]);return null!=i&&Pd(n,["_url","name"],Kv(t,i)),n}(this.apiClient,t);return s=Rd("batchPredictionJobs/{name}",i._url),l=i._query,delete i._url,delete i._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(i),httpMethod:"DELETE",httpOptions:null===(e=t.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(n=t.config)||void 0===n?void 0:n.abortSignal}).then(t=>t.json().then(e=>{const n=e;return n.sdkHttpResponse={headers:t.headers},n})),o.then(t=>function(t){const e={},n=xd(t,["sdkHttpResponse"]);null!=n&&Pd(e,["sdkHttpResponse"],n);const i=xd(t,["name"]);null!=i&&Pd(e,["name"],i);const r=xd(t,["done"]);null!=r&&Pd(e,["done"],r);const o=xd(t,["error"]);return null!=o&&Pd(e,["error"],o),e}(t))}{const e=function(t,e){const n={},i=xd(e,["name"]);return null!=i&&Pd(n,["_url","name"],Kv(t,i)),n}(this.apiClient,t);return s=Rd("batches/{name}",e._url),l=e._query,delete e._url,delete e._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(e),httpMethod:"DELETE",httpOptions:null===(i=t.config)||void 0===i?void 0:i.httpOptions,abortSignal:null===(r=t.config)||void 0===r?void 0:r.abortSignal}).then(t=>t.json().then(e=>{const n=e;return n.sdkHttpResponse={headers:t.headers},n})),o.then(t=>function(t){const e={},n=xd(t,["sdkHttpResponse"]);null!=n&&Pd(e,["sdkHttpResponse"],n);const i=xd(t,["name"]);null!=i&&Pd(e,["name"],i);const r=xd(t,["done"]);null!=r&&Pd(e,["done"],r);const o=xd(t,["error"]);return null!=o&&Pd(e,["error"],o),e}(t))}}}function aw(t){const e={},n=xd(t,["parts"]);if(null!=n){let t=n;Array.isArray(t)&&(t=t.map(t=>function(t){const e={},n=xd(t,["mediaResolution"]);null!=n&&Pd(e,["mediaResolution"],n);const i=xd(t,["codeExecutionResult"]);null!=i&&Pd(e,["codeExecutionResult"],i);const r=xd(t,["executableCode"]);null!=r&&Pd(e,["executableCode"],r);const o=xd(t,["fileData"]);null!=o&&Pd(e,["fileData"],function(t){const e={};if(void 0!==xd(t,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const n=xd(t,["fileUri"]);null!=n&&Pd(e,["fileUri"],n);const i=xd(t,["mimeType"]);null!=i&&Pd(e,["mimeType"],i);return e}(o));const s=xd(t,["functionCall"]);null!=s&&Pd(e,["functionCall"],function(t){const e={},n=xd(t,["id"]);null!=n&&Pd(e,["id"],n);const i=xd(t,["args"]);null!=i&&Pd(e,["args"],i);const r=xd(t,["name"]);null!=r&&Pd(e,["name"],r);if(void 0!==xd(t,["partialArgs"]))throw new Error("partialArgs parameter is not supported in Gemini API.");if(void 0!==xd(t,["willContinue"]))throw new Error("willContinue parameter is not supported in Gemini API.");return e}(s));const l=xd(t,["functionResponse"]);null!=l&&Pd(e,["functionResponse"],l);const u=xd(t,["inlineData"]);null!=u&&Pd(e,["inlineData"],function(t){const e={},n=xd(t,["data"]);if(null!=n&&Pd(e,["data"],n),void 0!==xd(t,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const i=xd(t,["mimeType"]);return null!=i&&Pd(e,["mimeType"],i),e}(u));const a=xd(t,["text"]);null!=a&&Pd(e,["text"],a);const c=xd(t,["thought"]);null!=c&&Pd(e,["thought"],c);const h=xd(t,["thoughtSignature"]);null!=h&&Pd(e,["thoughtSignature"],h);const f=xd(t,["videoMetadata"]);null!=f&&Pd(e,["videoMetadata"],f);return e}(t))),Pd(e,["parts"],t)}const i=xd(t,["role"]);return null!=i&&Pd(e,["role"],i),e}function cw(t,e){const n=xd(t,["ttl"]);void 0!==e&&null!=n&&Pd(e,["ttl"],n);const i=xd(t,["expireTime"]);void 0!==e&&null!=i&&Pd(e,["expireTime"],i);const r=xd(t,["displayName"]);void 0!==e&&null!=r&&Pd(e,["displayName"],r);const o=xd(t,["contents"]);if(void 0!==e&&null!=o){let t=Rv(o);Array.isArray(t)&&(t=t.map(t=>aw(t))),Pd(e,["contents"],t)}const s=xd(t,["systemInstruction"]);void 0!==e&&null!=s&&Pd(e,["systemInstruction"],aw(Ov(s)));const l=xd(t,["tools"]);if(void 0!==e&&null!=l){let t=l;Array.isArray(t)&&(t=t.map(t=>function(t){const e={},n=xd(t,["functionDeclarations"]);if(null!=n){let t=n;Array.isArray(t)&&(t=t.map(t=>t)),Pd(e,["functionDeclarations"],t)}if(void 0!==xd(t,["retrieval"]))throw new Error("retrieval parameter is not supported in Gemini API.");const i=xd(t,["googleSearchRetrieval"]);null!=i&&Pd(e,["googleSearchRetrieval"],i);const r=xd(t,["computerUse"]);null!=r&&Pd(e,["computerUse"],r);const o=xd(t,["fileSearch"]);null!=o&&Pd(e,["fileSearch"],o);const s=xd(t,["codeExecution"]);null!=s&&Pd(e,["codeExecution"],s);if(void 0!==xd(t,["enterpriseWebSearch"]))throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=xd(t,["googleMaps"]);null!=l&&Pd(e,["googleMaps"],function(t){const e={};if(void 0!==xd(t,["authConfig"]))throw new Error("authConfig parameter is not supported in Gemini API.");const n=xd(t,["enableWidget"]);null!=n&&Pd(e,["enableWidget"],n);return e}(l));const u=xd(t,["googleSearch"]);null!=u&&Pd(e,["googleSearch"],function(t){const e={};if(void 0!==xd(t,["excludeDomains"]))throw new Error("excludeDomains parameter is not supported in Gemini API.");if(void 0!==xd(t,["blockingConfidence"]))throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=xd(t,["timeRangeFilter"]);null!=n&&Pd(e,["timeRangeFilter"],n);return e}(u));const a=xd(t,["urlContext"]);null!=a&&Pd(e,["urlContext"],a);return e}(t))),Pd(e,["tools"],t)}const u=xd(t,["toolConfig"]);if(void 0!==e&&null!=u&&Pd(e,["toolConfig"],function(t){const e={},n=xd(t,["functionCallingConfig"]);null!=n&&Pd(e,["functionCallingConfig"],function(t){const e={},n=xd(t,["mode"]);null!=n&&Pd(e,["mode"],n);const i=xd(t,["allowedFunctionNames"]);null!=i&&Pd(e,["allowedFunctionNames"],i);if(void 0!==xd(t,["streamFunctionCallArguments"]))throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}(n));const i=xd(t,["retrievalConfig"]);null!=i&&Pd(e,["retrievalConfig"],i);return e}(u)),void 0!==xd(t,["kmsKeyName"]))throw new Error("kmsKeyName parameter is not supported in Gemini API.");return{}}function hw(t,e){const n=xd(t,["ttl"]);void 0!==e&&null!=n&&Pd(e,["ttl"],n);const i=xd(t,["expireTime"]);void 0!==e&&null!=i&&Pd(e,["expireTime"],i);const r=xd(t,["displayName"]);void 0!==e&&null!=r&&Pd(e,["displayName"],r);const o=xd(t,["contents"]);if(void 0!==e&&null!=o){let t=Rv(o);Array.isArray(t)&&(t=t.map(t=>t)),Pd(e,["contents"],t)}const s=xd(t,["systemInstruction"]);void 0!==e&&null!=s&&Pd(e,["systemInstruction"],Ov(s));const l=xd(t,["tools"]);if(void 0!==e&&null!=l){let t=l;Array.isArray(t)&&(t=t.map(t=>function(t){const e={},n=xd(t,["functionDeclarations"]);if(null!=n){let t=n;Array.isArray(t)&&(t=t.map(t=>function(t){const e={};if(void 0!==xd(t,["behavior"]))throw new Error("behavior parameter is not supported in Vertex AI.");const n=xd(t,["description"]);null!=n&&Pd(e,["description"],n);const i=xd(t,["name"]);null!=i&&Pd(e,["name"],i);const r=xd(t,["parameters"]);null!=r&&Pd(e,["parameters"],r);const o=xd(t,["parametersJsonSchema"]);null!=o&&Pd(e,["parametersJsonSchema"],o);const s=xd(t,["response"]);null!=s&&Pd(e,["response"],s);const l=xd(t,["responseJsonSchema"]);null!=l&&Pd(e,["responseJsonSchema"],l);return e}(t))),Pd(e,["functionDeclarations"],t)}const i=xd(t,["retrieval"]);null!=i&&Pd(e,["retrieval"],i);const r=xd(t,["googleSearchRetrieval"]);null!=r&&Pd(e,["googleSearchRetrieval"],r);const o=xd(t,["computerUse"]);null!=o&&Pd(e,["computerUse"],o);if(void 0!==xd(t,["fileSearch"]))throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=xd(t,["codeExecution"]);null!=s&&Pd(e,["codeExecution"],s);const l=xd(t,["enterpriseWebSearch"]);null!=l&&Pd(e,["enterpriseWebSearch"],l);const u=xd(t,["googleMaps"]);null!=u&&Pd(e,["googleMaps"],u);const a=xd(t,["googleSearch"]);null!=a&&Pd(e,["googleSearch"],a);const c=xd(t,["urlContext"]);null!=c&&Pd(e,["urlContext"],c);return e}(t))),Pd(e,["tools"],t)}const u=xd(t,["toolConfig"]);void 0!==e&&null!=u&&Pd(e,["toolConfig"],u);const a=xd(t,["kmsKeyName"]);return void 0!==e&&null!=a&&Pd(e,["encryption_spec","kmsKeyName"],a),{}}function fw(t){const e={},n=xd(t,["config"]);return null!=n&&function(t,e){const n=xd(t,["pageSize"]);void 0!==e&&null!=n&&Pd(e,["_query","pageSize"],n);const i=xd(t,["pageToken"]);void 0!==e&&null!=i&&Pd(e,["_query","pageToken"],i)}(n,e),e}function dw(t){const e={},n=xd(t,["config"]);return null!=n&&function(t,e){const n=xd(t,["pageSize"]);void 0!==e&&null!=n&&Pd(e,["_query","pageSize"],n);const i=xd(t,["pageToken"]);void 0!==e&&null!=i&&Pd(e,["_query","pageToken"],i)}(n,e),e}function pw(t,e){const n={},i=xd(e,["name"]);null!=i&&Pd(n,["_url","name"],Fv(t,i));const r=xd(e,["config"]);return null!=r&&function(t,e){const n=xd(t,["ttl"]);void 0!==e&&null!=n&&Pd(e,["ttl"],n);const i=xd(t,["expireTime"]);void 0!==e&&null!=i&&Pd(e,["expireTime"],i)}(r,n),n}function mw(t,e){const n={},i=xd(e,["name"]);null!=i&&Pd(n,["_url","name"],Fv(t,i));const r=xd(e,["config"]);return null!=r&&function(t,e){const n=xd(t,["ttl"]);void 0!==e&&null!=n&&Pd(e,["ttl"],n);const i=xd(t,["expireTime"]);void 0!==e&&null!=i&&Pd(e,["expireTime"],i)}(r,n),n}class vw extends Nd{constructor(t){super(),this.apiClient=t,this.list=async(t={})=>new lw(Vm.PAGED_ITEM_CACHED_CONTENTS,t=>this.listInternal(t),await this.listInternal(t),t)}async create(t){var e,n,i,r;let o,s="",l={};if(this.apiClient.isVertexAI()){const i=function(t,e){const n={},i=xd(e,["model"]);null!=i&&Pd(n,["model"],gv(t,i));const r=xd(e,["config"]);return null!=r&&hw(r,n),n}(this.apiClient,t);return s=Rd("cachedContents",i._url),l=i._query,delete i._url,delete i._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(i),httpMethod:"POST",httpOptions:null===(e=t.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(n=t.config)||void 0===n?void 0:n.abortSignal}).then(t=>t.json()),o.then(t=>t)}{const e=function(t,e){const n={},i=xd(e,["model"]);null!=i&&Pd(n,["model"],gv(t,i));const r=xd(e,["config"]);return null!=r&&cw(r,n),n}(this.apiClient,t);return s=Rd("cachedContents",e._url),l=e._query,delete e._url,delete e._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(e),httpMethod:"POST",httpOptions:null===(i=t.config)||void 0===i?void 0:i.httpOptions,abortSignal:null===(r=t.config)||void 0===r?void 0:r.abortSignal}).then(t=>t.json()),o.then(t=>t)}}async get(t){var e,n,i,r;let o,s="",l={};if(this.apiClient.isVertexAI()){const i=function(t,e){const n={},i=xd(e,["name"]);return null!=i&&Pd(n,["_url","name"],Fv(t,i)),n}(this.apiClient,t);return s=Rd("{name}",i._url),l=i._query,delete i._url,delete i._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(i),httpMethod:"GET",httpOptions:null===(e=t.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(n=t.config)||void 0===n?void 0:n.abortSignal}).then(t=>t.json()),o.then(t=>t)}{const e=function(t,e){const n={},i=xd(e,["name"]);return null!=i&&Pd(n,["_url","name"],Fv(t,i)),n}(this.apiClient,t);return s=Rd("{name}",e._url),l=e._query,delete e._url,delete e._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(e),httpMethod:"GET",httpOptions:null===(i=t.config)||void 0===i?void 0:i.httpOptions,abortSignal:null===(r=t.config)||void 0===r?void 0:r.abortSignal}).then(t=>t.json()),o.then(t=>t)}}async delete(t){var e,n,i,r;let o,s="",l={};if(this.apiClient.isVertexAI()){const i=function(t,e){const n={},i=xd(e,["name"]);return null!=i&&Pd(n,["_url","name"],Fv(t,i)),n}(this.apiClient,t);return s=Rd("{name}",i._url),l=i._query,delete i._url,delete i._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(i),httpMethod:"DELETE",httpOptions:null===(e=t.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(n=t.config)||void 0===n?void 0:n.abortSignal}).then(t=>t.json().then(e=>{const n=e;return n.sdkHttpResponse={headers:t.headers},n})),o.then(t=>{const e=function(t){const e={},n=xd(t,["sdkHttpResponse"]);return null!=n&&Pd(e,["sdkHttpResponse"],n),e}(t),n=new ov;return Object.assign(n,e),n})}{const e=function(t,e){const n={},i=xd(e,["name"]);return null!=i&&Pd(n,["_url","name"],Fv(t,i)),n}(this.apiClient,t);return s=Rd("{name}",e._url),l=e._query,delete e._url,delete e._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(e),httpMethod:"DELETE",httpOptions:null===(i=t.config)||void 0===i?void 0:i.httpOptions,abortSignal:null===(r=t.config)||void 0===r?void 0:r.abortSignal}).then(t=>t.json().then(e=>{const n=e;return n.sdkHttpResponse={headers:t.headers},n})),o.then(t=>{const e=function(t){const e={},n=xd(t,["sdkHttpResponse"]);return null!=n&&Pd(e,["sdkHttpResponse"],n),e}(t),n=new ov;return Object.assign(n,e),n})}}async update(t){var e,n,i,r;let o,s="",l={};if(this.apiClient.isVertexAI()){const i=mw(this.apiClient,t);return s=Rd("{name}",i._url),l=i._query,delete i._url,delete i._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(i),httpMethod:"PATCH",httpOptions:null===(e=t.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(n=t.config)||void 0===n?void 0:n.abortSignal}).then(t=>t.json()),o.then(t=>t)}{const e=pw(this.apiClient,t);return s=Rd("{name}",e._url),l=e._query,delete e._url,delete e._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(e),httpMethod:"PATCH",httpOptions:null===(i=t.config)||void 0===i?void 0:i.httpOptions,abortSignal:null===(r=t.config)||void 0===r?void 0:r.abortSignal}).then(t=>t.json()),o.then(t=>t)}}async listInternal(t){var e,n,i,r;let o,s="",l={};if(this.apiClient.isVertexAI()){const i=dw(t);return s=Rd("cachedContents",i._url),l=i._query,delete i._url,delete i._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(i),httpMethod:"GET",httpOptions:null===(e=t.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(n=t.config)||void 0===n?void 0:n.abortSignal}).then(t=>t.json().then(e=>{const n=e;return n.sdkHttpResponse={headers:t.headers},n})),o.then(t=>{const e=function(t){const e={},n=xd(t,["sdkHttpResponse"]);null!=n&&Pd(e,["sdkHttpResponse"],n);const i=xd(t,["nextPageToken"]);null!=i&&Pd(e,["nextPageToken"],i);const r=xd(t,["cachedContents"]);if(null!=r){let t=r;Array.isArray(t)&&(t=t.map(t=>t)),Pd(e,["cachedContents"],t)}return e}(t),n=new sv;return Object.assign(n,e),n})}{const e=fw(t);return s=Rd("cachedContents",e._url),l=e._query,delete e._url,delete e._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(e),httpMethod:"GET",httpOptions:null===(i=t.config)||void 0===i?void 0:i.httpOptions,abortSignal:null===(r=t.config)||void 0===r?void 0:r.abortSignal}).then(t=>t.json().then(e=>{const n=e;return n.sdkHttpResponse={headers:t.headers},n})),o.then(t=>{const e=function(t){const e={},n=xd(t,["sdkHttpResponse"]);null!=n&&Pd(e,["sdkHttpResponse"],n);const i=xd(t,["nextPageToken"]);null!=i&&Pd(e,["nextPageToken"],i);const r=xd(t,["cachedContents"]);if(null!=r){let t=r;Array.isArray(t)&&(t=t.map(t=>t)),Pd(e,["cachedContents"],t)}return e}(t),n=new sv;return Object.assign(n,e),n})}}}function ww(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function yw(t){return this instanceof yw?(this.v=t,this):new yw(t)}function gw(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(t,e||[]),o=[];return i=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),s("next"),s("throw"),s("return",function(t){return function(e){return Promise.resolve(e).then(t,a)}}),i[Symbol.asyncIterator]=function(){return this},i;function s(t,e){r[t]&&(i[t]=function(e){return new Promise(function(n,i){o.push([t,e,n,i])>1||l(t,e)})},e&&(i[t]=e(i[t])))}function l(t,e){try{(n=r[t](e)).value instanceof yw?Promise.resolve(n.value.v).then(u,a):c(o[0][2],n)}catch(Fg){c(o[0][3],Fg)}var n}function u(t){l("next",t)}function a(t){l("throw",t)}function c(t,e){t(e),o.shift(),o.length&&l(o[0][0],o[0][1])}}function bw(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=ww(t),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(n){e[n]=t[n]&&function(e){return new Promise(function(i,r){(function(t,e,n,i){Promise.resolve(i).then(function(e){t({value:e,done:n})},e)})(i,r,(e=t[n](e)).done,e.value)})}}}function Ew(t){var e;if(null==t.candidates||0===t.candidates.length)return!1;const n=null===(e=t.candidates[0])||void 0===e?void 0:e.content;return void 0!==n&&Sw(n)}function Sw(t){if(void 0===t.parts||0===t.parts.length)return!1;for(const e of t.parts)if(void 0===e||0===Object.keys(e).length)return!1;return!0}function Tw(t){if(void 0===t||0===t.length)return[];const e=[],n=t.length;let i=0;for(;i<n;)if("user"===t[i].role)e.push(t[i]),i++;else{const r=[];let o=!0;for(;i<n&&"model"===t[i].role;)r.push(t[i]),o&&!Sw(t[i])&&(o=!1),i++;o?e.push(...r):e.pop()}return e}"function"==typeof SuppressedError&&SuppressedError;class kw{constructor(t,e){this.modelsModule=t,this.apiClient=e}create(t){return new Iw(this.apiClient,this.modelsModule,t.model,t.config,structuredClone(t.history))}}class Iw{constructor(t,e,n,i={},r=[]){this.apiClient=t,this.modelsModule=e,this.model=n,this.config=i,this.history=r,this.sendPromise=Promise.resolve(),function(t){if(0!==t.length)for(const e of t)if("user"!==e.role&&"model"!==e.role)throw new Error(`Role must be user or model, but got ${e.role}.`)}(r)}async sendMessage(t){var e;await this.sendPromise;const n=Ov(t.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(n),config:null!==(e=t.config)&&void 0!==e?e:this.config});return this.sendPromise=(async()=>{var t,e,r;const o=await i,s=null===(e=null===(t=o.candidates)||void 0===t?void 0:t[0])||void 0===e?void 0:e.content,l=o.automaticFunctionCallingHistory,u=this.getHistory(!0).length;let a=[];null!=l&&(a=null!==(r=l.slice(u))&&void 0!==r?r:[]);const c=s?[s]:[];this.recordHistory(n,c,a)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(t){var e;await this.sendPromise;const n=Ov(t.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(n),config:null!==(e=t.config)&&void 0!==e?e:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const r=await i;return this.processStreamResponse(r,n)}getHistory(t=!1){const e=t?Tw(this.history):this.history;return structuredClone(e)}processStreamResponse(t,e){return gw(this,arguments,function*(){var n,i,r,o,s,l;const u=[];try{for(var a,c=!0,h=bw(t);!(n=(a=yield yw(h.next())).done);c=!0){o=a.value,c=!1;const t=o;if(Ew(t)){const e=null===(l=null===(s=t.candidates)||void 0===s?void 0:s[0])||void 0===l?void 0:l.content;void 0!==e&&u.push(e)}yield yield yw(t)}}catch(f){i={error:f}}finally{try{c||n||!(r=h.return)||(yield yw(r.call(h)))}finally{if(i)throw i.error}}this.recordHistory(e,u)})}recordHistory(t,e,n){let i=[];e.length>0&&e.every(t=>void 0!==t.role)?i=e:i.push({role:"model",parts:[]}),n&&n.length>0?this.history.push(...Tw(n)):this.history.push(t),this.history.push(...i)}}class _w extends Error{constructor(t){super(t.message),this.name="ApiError",this.status=t.status,Object.setPrototypeOf(this,_w.prototype)}}function Cw(t){const e={},n=xd(t,["config"]);return null!=n&&function(t,e){const n=xd(t,["pageSize"]);void 0!==e&&null!=n&&Pd(e,["_query","pageSize"],n);const i=xd(t,["pageToken"]);void 0!==e&&null!=i&&Pd(e,["_query","pageToken"],i)}(n,e),e}class Aw extends Nd{constructor(t){super(),this.apiClient=t,this.list=async(t={})=>new lw(Vm.PAGED_ITEM_FILES,t=>this.listInternal(t),await this.listInternal(t),t)}async upload(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(t.file,t.config).then(t=>t)}async download(t){await this.apiClient.downloadFile(t)}async listInternal(t){var e,n;let i,r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=Cw(t);return r=Rd("files",s._url),o=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(s),httpMethod:"GET",httpOptions:null===(e=t.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(n=t.config)||void 0===n?void 0:n.abortSignal}).then(t=>t.json().then(e=>{const n=e;return n.sdkHttpResponse={headers:t.headers},n})),i.then(t=>{const e=function(t){const e={},n=xd(t,["sdkHttpResponse"]);null!=n&&Pd(e,["sdkHttpResponse"],n);const i=xd(t,["nextPageToken"]);null!=i&&Pd(e,["nextPageToken"],i);const r=xd(t,["files"]);if(null!=r){let t=r;Array.isArray(t)&&(t=t.map(t=>t)),Pd(e,["files"],t)}return e}(t),n=new hv;return Object.assign(n,e),n})}}async createInternal(t){var e,n;let i,r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=function(t){const e={},n=xd(t,["file"]);return null!=n&&Pd(e,["file"],n),e}(t);return r=Rd("upload/v1beta/files",s._url),o=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(e=t.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(n=t.config)||void 0===n?void 0:n.abortSignal}).then(t=>t.json()),i.then(t=>{const e=function(t){const e={},n=xd(t,["sdkHttpResponse"]);return null!=n&&Pd(e,["sdkHttpResponse"],n),e}(t),n=new fv;return Object.assign(n,e),n})}}async get(t){var e,n;let i,r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=function(t){const e={},n=xd(t,["name"]);return null!=n&&Pd(e,["_url","file"],Gv(n)),e}(t);return r=Rd("files/{file}",s._url),o=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(s),httpMethod:"GET",httpOptions:null===(e=t.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(n=t.config)||void 0===n?void 0:n.abortSignal}).then(t=>t.json()),i.then(t=>t)}}async delete(t){var e,n;let i,r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=function(t){const e={},n=xd(t,["name"]);return null!=n&&Pd(e,["_url","file"],Gv(n)),e}(t);return r=Rd("files/{file}",s._url),o=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:null===(e=t.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(n=t.config)||void 0===n?void 0:n.abortSignal}).then(t=>t.json().then(e=>{const n=e;return n.sdkHttpResponse={headers:t.headers},n})),i.then(t=>{const e=function(t){const e={},n=xd(t,["sdkHttpResponse"]);return null!=n&&Pd(e,["sdkHttpResponse"],n),e}(t),n=new dv;return Object.assign(n,e),n})}}}function Ow(t){const e={},n=xd(t,["data"]);if(null!=n&&Pd(e,["data"],n),void 0!==xd(t,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const i=xd(t,["mimeType"]);return null!=i&&Pd(e,["mimeType"],i),e}function Nw(t){const e={},n=xd(t,["parts"]);if(null!=n){let t=n;Array.isArray(t)&&(t=t.map(t=>function(t){const e={},n=xd(t,["mediaResolution"]);null!=n&&Pd(e,["mediaResolution"],n);const i=xd(t,["codeExecutionResult"]);null!=i&&Pd(e,["codeExecutionResult"],i);const r=xd(t,["executableCode"]);null!=r&&Pd(e,["executableCode"],r);const o=xd(t,["fileData"]);null!=o&&Pd(e,["fileData"],function(t){const e={};if(void 0!==xd(t,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const n=xd(t,["fileUri"]);null!=n&&Pd(e,["fileUri"],n);const i=xd(t,["mimeType"]);null!=i&&Pd(e,["mimeType"],i);return e}(o));const s=xd(t,["functionCall"]);null!=s&&Pd(e,["functionCall"],function(t){const e={},n=xd(t,["id"]);null!=n&&Pd(e,["id"],n);const i=xd(t,["args"]);null!=i&&Pd(e,["args"],i);const r=xd(t,["name"]);null!=r&&Pd(e,["name"],r);if(void 0!==xd(t,["partialArgs"]))throw new Error("partialArgs parameter is not supported in Gemini API.");if(void 0!==xd(t,["willContinue"]))throw new Error("willContinue parameter is not supported in Gemini API.");return e}(s));const l=xd(t,["functionResponse"]);null!=l&&Pd(e,["functionResponse"],l);const u=xd(t,["inlineData"]);null!=u&&Pd(e,["inlineData"],Ow(u));const a=xd(t,["text"]);null!=a&&Pd(e,["text"],a);const c=xd(t,["thought"]);null!=c&&Pd(e,["thought"],c);const h=xd(t,["thoughtSignature"]);null!=h&&Pd(e,["thoughtSignature"],h);const f=xd(t,["videoMetadata"]);null!=f&&Pd(e,["videoMetadata"],f);return e}(t))),Pd(e,["parts"],t)}const i=xd(t,["role"]);return null!=i&&Pd(e,["role"],i),e}function Rw(t,e){const n=xd(t,["generationConfig"]);void 0!==e&&null!=n&&Pd(e,["setup","generationConfig"],n);const i=xd(t,["responseModalities"]);void 0!==e&&null!=i&&Pd(e,["setup","generationConfig","responseModalities"],i);const r=xd(t,["temperature"]);void 0!==e&&null!=r&&Pd(e,["setup","generationConfig","temperature"],r);const o=xd(t,["topP"]);void 0!==e&&null!=o&&Pd(e,["setup","generationConfig","topP"],o);const s=xd(t,["topK"]);void 0!==e&&null!=s&&Pd(e,["setup","generationConfig","topK"],s);const l=xd(t,["maxOutputTokens"]);void 0!==e&&null!=l&&Pd(e,["setup","generationConfig","maxOutputTokens"],l);const u=xd(t,["mediaResolution"]);void 0!==e&&null!=u&&Pd(e,["setup","generationConfig","mediaResolution"],u);const a=xd(t,["seed"]);void 0!==e&&null!=a&&Pd(e,["setup","generationConfig","seed"],a);const c=xd(t,["speechConfig"]);void 0!==e&&null!=c&&Pd(e,["setup","generationConfig","speechConfig"],Dv(c));const h=xd(t,["thinkingConfig"]);void 0!==e&&null!=h&&Pd(e,["setup","generationConfig","thinkingConfig"],h);const f=xd(t,["enableAffectiveDialog"]);void 0!==e&&null!=f&&Pd(e,["setup","generationConfig","enableAffectiveDialog"],f);const d=xd(t,["systemInstruction"]);void 0!==e&&null!=d&&Pd(e,["setup","systemInstruction"],Nw(Ov(d)));const p=xd(t,["tools"]);if(void 0!==e&&null!=p){let t=Uv(p);Array.isArray(t)&&(t=t.map(t=>function(t){const e={},n=xd(t,["functionDeclarations"]);if(null!=n){let t=n;Array.isArray(t)&&(t=t.map(t=>t)),Pd(e,["functionDeclarations"],t)}if(void 0!==xd(t,["retrieval"]))throw new Error("retrieval parameter is not supported in Gemini API.");const i=xd(t,["googleSearchRetrieval"]);null!=i&&Pd(e,["googleSearchRetrieval"],i);const r=xd(t,["computerUse"]);null!=r&&Pd(e,["computerUse"],r);const o=xd(t,["fileSearch"]);null!=o&&Pd(e,["fileSearch"],o);const s=xd(t,["codeExecution"]);null!=s&&Pd(e,["codeExecution"],s);if(void 0!==xd(t,["enterpriseWebSearch"]))throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=xd(t,["googleMaps"]);null!=l&&Pd(e,["googleMaps"],function(t){const e={};if(void 0!==xd(t,["authConfig"]))throw new Error("authConfig parameter is not supported in Gemini API.");const n=xd(t,["enableWidget"]);return null!=n&&Pd(e,["enableWidget"],n),e}(l));const u=xd(t,["googleSearch"]);null!=u&&Pd(e,["googleSearch"],function(t){const e={};if(void 0!==xd(t,["excludeDomains"]))throw new Error("excludeDomains parameter is not supported in Gemini API.");if(void 0!==xd(t,["blockingConfidence"]))throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=xd(t,["timeRangeFilter"]);return null!=n&&Pd(e,["timeRangeFilter"],n),e}(u));const a=xd(t,["urlContext"]);null!=a&&Pd(e,["urlContext"],a);return e}(Lv(t)))),Pd(e,["setup","tools"],t)}const m=xd(t,["sessionResumption"]);void 0!==e&&null!=m&&Pd(e,["setup","sessionResumption"],function(t){const e={},n=xd(t,["handle"]);null!=n&&Pd(e,["handle"],n);if(void 0!==xd(t,["transparent"]))throw new Error("transparent parameter is not supported in Gemini API.");return e}(m));const v=xd(t,["inputAudioTranscription"]);void 0!==e&&null!=v&&Pd(e,["setup","inputAudioTranscription"],v);const w=xd(t,["outputAudioTranscription"]);void 0!==e&&null!=w&&Pd(e,["setup","outputAudioTranscription"],w);const y=xd(t,["realtimeInputConfig"]);void 0!==e&&null!=y&&Pd(e,["setup","realtimeInputConfig"],y);const g=xd(t,["contextWindowCompression"]);void 0!==e&&null!=g&&Pd(e,["setup","contextWindowCompression"],g);const b=xd(t,["proactivity"]);return void 0!==e&&null!=b&&Pd(e,["setup","proactivity"],b),{}}function Pw(t,e){const n=xd(t,["generationConfig"]);void 0!==e&&null!=n&&Pd(e,["setup","generationConfig"],function(t){const e={},n=xd(t,["modelSelectionConfig"]);null!=n&&Pd(e,["modelConfig"],n);const i=xd(t,["responseJsonSchema"]);null!=i&&Pd(e,["responseJsonSchema"],i);const r=xd(t,["audioTimestamp"]);null!=r&&Pd(e,["audioTimestamp"],r);const o=xd(t,["candidateCount"]);null!=o&&Pd(e,["candidateCount"],o);const s=xd(t,["enableAffectiveDialog"]);null!=s&&Pd(e,["enableAffectiveDialog"],s);const l=xd(t,["frequencyPenalty"]);null!=l&&Pd(e,["frequencyPenalty"],l);const u=xd(t,["logprobs"]);null!=u&&Pd(e,["logprobs"],u);const a=xd(t,["maxOutputTokens"]);null!=a&&Pd(e,["maxOutputTokens"],a);const c=xd(t,["mediaResolution"]);null!=c&&Pd(e,["mediaResolution"],c);const h=xd(t,["presencePenalty"]);null!=h&&Pd(e,["presencePenalty"],h);const f=xd(t,["responseLogprobs"]);null!=f&&Pd(e,["responseLogprobs"],f);const d=xd(t,["responseMimeType"]);null!=d&&Pd(e,["responseMimeType"],d);const p=xd(t,["responseModalities"]);null!=p&&Pd(e,["responseModalities"],p);const m=xd(t,["responseSchema"]);null!=m&&Pd(e,["responseSchema"],m);const v=xd(t,["routingConfig"]);null!=v&&Pd(e,["routingConfig"],v);const w=xd(t,["seed"]);null!=w&&Pd(e,["seed"],w);const y=xd(t,["speechConfig"]);null!=y&&Pd(e,["speechConfig"],Lw(y));const g=xd(t,["stopSequences"]);null!=g&&Pd(e,["stopSequences"],g);const b=xd(t,["temperature"]);null!=b&&Pd(e,["temperature"],b);const E=xd(t,["thinkingConfig"]);null!=E&&Pd(e,["thinkingConfig"],E);const S=xd(t,["topK"]);null!=S&&Pd(e,["topK"],S);const T=xd(t,["topP"]);if(null!=T&&Pd(e,["topP"],T),void 0!==xd(t,["enableEnhancedCivicAnswers"]))throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}(n));const i=xd(t,["responseModalities"]);void 0!==e&&null!=i&&Pd(e,["setup","generationConfig","responseModalities"],i);const r=xd(t,["temperature"]);void 0!==e&&null!=r&&Pd(e,["setup","generationConfig","temperature"],r);const o=xd(t,["topP"]);void 0!==e&&null!=o&&Pd(e,["setup","generationConfig","topP"],o);const s=xd(t,["topK"]);void 0!==e&&null!=s&&Pd(e,["setup","generationConfig","topK"],s);const l=xd(t,["maxOutputTokens"]);void 0!==e&&null!=l&&Pd(e,["setup","generationConfig","maxOutputTokens"],l);const u=xd(t,["mediaResolution"]);void 0!==e&&null!=u&&Pd(e,["setup","generationConfig","mediaResolution"],u);const a=xd(t,["seed"]);void 0!==e&&null!=a&&Pd(e,["setup","generationConfig","seed"],a);const c=xd(t,["speechConfig"]);void 0!==e&&null!=c&&Pd(e,["setup","generationConfig","speechConfig"],Lw(Dv(c)));const h=xd(t,["thinkingConfig"]);void 0!==e&&null!=h&&Pd(e,["setup","generationConfig","thinkingConfig"],h);const f=xd(t,["enableAffectiveDialog"]);void 0!==e&&null!=f&&Pd(e,["setup","generationConfig","enableAffectiveDialog"],f);const d=xd(t,["systemInstruction"]);void 0!==e&&null!=d&&Pd(e,["setup","systemInstruction"],Ov(d));const p=xd(t,["tools"]);if(void 0!==e&&null!=p){let t=Uv(p);Array.isArray(t)&&(t=t.map(t=>function(t){const e={},n=xd(t,["functionDeclarations"]);if(null!=n){let t=n;Array.isArray(t)&&(t=t.map(t=>function(t){const e={};if(void 0!==xd(t,["behavior"]))throw new Error("behavior parameter is not supported in Vertex AI.");const n=xd(t,["description"]);null!=n&&Pd(e,["description"],n);const i=xd(t,["name"]);null!=i&&Pd(e,["name"],i);const r=xd(t,["parameters"]);null!=r&&Pd(e,["parameters"],r);const o=xd(t,["parametersJsonSchema"]);null!=o&&Pd(e,["parametersJsonSchema"],o);const s=xd(t,["response"]);null!=s&&Pd(e,["response"],s);const l=xd(t,["responseJsonSchema"]);return null!=l&&Pd(e,["responseJsonSchema"],l),e}(t))),Pd(e,["functionDeclarations"],t)}const i=xd(t,["retrieval"]);null!=i&&Pd(e,["retrieval"],i);const r=xd(t,["googleSearchRetrieval"]);null!=r&&Pd(e,["googleSearchRetrieval"],r);const o=xd(t,["computerUse"]);null!=o&&Pd(e,["computerUse"],o);if(void 0!==xd(t,["fileSearch"]))throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=xd(t,["codeExecution"]);null!=s&&Pd(e,["codeExecution"],s);const l=xd(t,["enterpriseWebSearch"]);null!=l&&Pd(e,["enterpriseWebSearch"],l);const u=xd(t,["googleMaps"]);null!=u&&Pd(e,["googleMaps"],u);const a=xd(t,["googleSearch"]);null!=a&&Pd(e,["googleSearch"],a);const c=xd(t,["urlContext"]);null!=c&&Pd(e,["urlContext"],c);return e}(Lv(t)))),Pd(e,["setup","tools"],t)}const m=xd(t,["sessionResumption"]);void 0!==e&&null!=m&&Pd(e,["setup","sessionResumption"],m);const v=xd(t,["inputAudioTranscription"]);void 0!==e&&null!=v&&Pd(e,["setup","inputAudioTranscription"],v);const w=xd(t,["outputAudioTranscription"]);void 0!==e&&null!=w&&Pd(e,["setup","outputAudioTranscription"],w);const y=xd(t,["realtimeInputConfig"]);void 0!==e&&null!=y&&Pd(e,["setup","realtimeInputConfig"],y);const g=xd(t,["contextWindowCompression"]);void 0!==e&&null!=g&&Pd(e,["setup","contextWindowCompression"],g);const b=xd(t,["proactivity"]);return void 0!==e&&null!=b&&Pd(e,["setup","proactivity"],b),{}}function xw(t){const e={},n=xd(t,["media"]);if(null!=n){let t=bv(n);Array.isArray(t)&&(t=t.map(t=>Ow(t))),Pd(e,["mediaChunks"],t)}const i=xd(t,["audio"]);null!=i&&Pd(e,["audio"],Ow(Tv(i)));const r=xd(t,["audioStreamEnd"]);null!=r&&Pd(e,["audioStreamEnd"],r);const o=xd(t,["video"]);null!=o&&Pd(e,["video"],Ow(Sv(o)));const s=xd(t,["text"]);null!=s&&Pd(e,["text"],s);const l=xd(t,["activityStart"]);null!=l&&Pd(e,["activityStart"],l);const u=xd(t,["activityEnd"]);return null!=u&&Pd(e,["activityEnd"],u),e}function Mw(t){const e={},n=xd(t,["media"]);if(null!=n){let t=bv(n);Array.isArray(t)&&(t=t.map(t=>t)),Pd(e,["mediaChunks"],t)}const i=xd(t,["audio"]);null!=i&&Pd(e,["audio"],Tv(i));const r=xd(t,["audioStreamEnd"]);null!=r&&Pd(e,["audioStreamEnd"],r);const o=xd(t,["video"]);null!=o&&Pd(e,["video"],Sv(o));const s=xd(t,["text"]);null!=s&&Pd(e,["text"],s);const l=xd(t,["activityStart"]);null!=l&&Pd(e,["activityStart"],l);const u=xd(t,["activityEnd"]);return null!=u&&Pd(e,["activityEnd"],u),e}function Dw(t){const e={},n=xd(t,["setupComplete"]);null!=n&&Pd(e,["setupComplete"],n);const i=xd(t,["serverContent"]);null!=i&&Pd(e,["serverContent"],i);const r=xd(t,["toolCall"]);null!=r&&Pd(e,["toolCall"],r);const o=xd(t,["toolCallCancellation"]);null!=o&&Pd(e,["toolCallCancellation"],o);const s=xd(t,["usageMetadata"]);null!=s&&Pd(e,["usageMetadata"],function(t){const e={},n=xd(t,["promptTokenCount"]);null!=n&&Pd(e,["promptTokenCount"],n);const i=xd(t,["cachedContentTokenCount"]);null!=i&&Pd(e,["cachedContentTokenCount"],i);const r=xd(t,["candidatesTokenCount"]);null!=r&&Pd(e,["responseTokenCount"],r);const o=xd(t,["toolUsePromptTokenCount"]);null!=o&&Pd(e,["toolUsePromptTokenCount"],o);const s=xd(t,["thoughtsTokenCount"]);null!=s&&Pd(e,["thoughtsTokenCount"],s);const l=xd(t,["totalTokenCount"]);null!=l&&Pd(e,["totalTokenCount"],l);const u=xd(t,["promptTokensDetails"]);if(null!=u){let t=u;Array.isArray(t)&&(t=t.map(t=>t)),Pd(e,["promptTokensDetails"],t)}const a=xd(t,["cacheTokensDetails"]);if(null!=a){let t=a;Array.isArray(t)&&(t=t.map(t=>t)),Pd(e,["cacheTokensDetails"],t)}const c=xd(t,["candidatesTokensDetails"]);if(null!=c){let t=c;Array.isArray(t)&&(t=t.map(t=>t)),Pd(e,["responseTokensDetails"],t)}const h=xd(t,["toolUsePromptTokensDetails"]);if(null!=h){let t=h;Array.isArray(t)&&(t=t.map(t=>t)),Pd(e,["toolUsePromptTokensDetails"],t)}const f=xd(t,["trafficType"]);null!=f&&Pd(e,["trafficType"],f);return e}(s));const l=xd(t,["goAway"]);null!=l&&Pd(e,["goAway"],l);const u=xd(t,["sessionResumptionUpdate"]);return null!=u&&Pd(e,["sessionResumptionUpdate"],u),e}function Lw(t){const e={},n=xd(t,["voiceConfig"]);null!=n&&Pd(e,["voiceConfig"],n);const i=xd(t,["languageCode"]);if(null!=i&&Pd(e,["languageCode"],i),void 0!==xd(t,["multiSpeakerVoiceConfig"]))throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function Uw(t){const e={},n=xd(t,["content"]);null!=n&&Pd(e,["content"],n);const i=xd(t,["citationMetadata"]);null!=i&&Pd(e,["citationMetadata"],function(t){const e={},n=xd(t,["citationSources"]);if(null!=n){let t=n;Array.isArray(t)&&(t=t.map(t=>t)),Pd(e,["citations"],t)}return e}(i));const r=xd(t,["tokenCount"]);null!=r&&Pd(e,["tokenCount"],r);const o=xd(t,["finishReason"]);null!=o&&Pd(e,["finishReason"],o);const s=xd(t,["avgLogprobs"]);null!=s&&Pd(e,["avgLogprobs"],s);const l=xd(t,["groundingMetadata"]);null!=l&&Pd(e,["groundingMetadata"],l);const u=xd(t,["index"]);null!=u&&Pd(e,["index"],u);const a=xd(t,["logprobsResult"]);null!=a&&Pd(e,["logprobsResult"],a);const c=xd(t,["safetyRatings"]);if(null!=c){let t=c;Array.isArray(t)&&(t=t.map(t=>t)),Pd(e,["safetyRatings"],t)}const h=xd(t,["urlContextMetadata"]);return null!=h&&Pd(e,["urlContextMetadata"],h),e}function Fw(t){const e={},n=xd(t,["values"]);null!=n&&Pd(e,["values"],n);const i=xd(t,["statistics"]);return null!=i&&Pd(e,["statistics"],function(t){const e={},n=xd(t,["truncated"]);null!=n&&Pd(e,["truncated"],n);const i=xd(t,["token_count"]);null!=i&&Pd(e,["tokenCount"],i);return e}(i)),e}function $w(t){const e={},n=xd(t,["parts"]);if(null!=n){let t=n;Array.isArray(t)&&(t=t.map(t=>function(t){const e={},n=xd(t,["mediaResolution"]);null!=n&&Pd(e,["mediaResolution"],n);const i=xd(t,["codeExecutionResult"]);null!=i&&Pd(e,["codeExecutionResult"],i);const r=xd(t,["executableCode"]);null!=r&&Pd(e,["executableCode"],r);const o=xd(t,["fileData"]);null!=o&&Pd(e,["fileData"],function(t){const e={};if(void 0!==xd(t,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const n=xd(t,["fileUri"]);null!=n&&Pd(e,["fileUri"],n);const i=xd(t,["mimeType"]);null!=i&&Pd(e,["mimeType"],i);return e}(o));const s=xd(t,["functionCall"]);null!=s&&Pd(e,["functionCall"],function(t){const e={},n=xd(t,["id"]);null!=n&&Pd(e,["id"],n);const i=xd(t,["args"]);null!=i&&Pd(e,["args"],i);const r=xd(t,["name"]);null!=r&&Pd(e,["name"],r);if(void 0!==xd(t,["partialArgs"]))throw new Error("partialArgs parameter is not supported in Gemini API.");if(void 0!==xd(t,["willContinue"]))throw new Error("willContinue parameter is not supported in Gemini API.");return e}(s));const l=xd(t,["functionResponse"]);null!=l&&Pd(e,["functionResponse"],l);const u=xd(t,["inlineData"]);null!=u&&Pd(e,["inlineData"],function(t){const e={},n=xd(t,["data"]);if(null!=n&&Pd(e,["data"],n),void 0!==xd(t,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const i=xd(t,["mimeType"]);return null!=i&&Pd(e,["mimeType"],i),e}(u));const a=xd(t,["text"]);null!=a&&Pd(e,["text"],a);const c=xd(t,["thought"]);null!=c&&Pd(e,["thought"],c);const h=xd(t,["thoughtSignature"]);null!=h&&Pd(e,["thoughtSignature"],h);const f=xd(t,["videoMetadata"]);null!=f&&Pd(e,["videoMetadata"],f);return e}(t))),Pd(e,["parts"],t)}const i=xd(t,["role"]);return null!=i&&Pd(e,["role"],i),e}function jw(t,e){const n=xd(t,["systemInstruction"]);void 0!==e&&null!=n&&Pd(e,["systemInstruction"],Ov(n));const i=xd(t,["tools"]);if(void 0!==e&&null!=i){let t=i;Array.isArray(t)&&(t=t.map(t=>by(t))),Pd(e,["tools"],t)}const r=xd(t,["generationConfig"]);return void 0!==e&&null!=r&&Pd(e,["generationConfig"],function(t){const e={},n=xd(t,["modelSelectionConfig"]);null!=n&&Pd(e,["modelConfig"],n);const i=xd(t,["responseJsonSchema"]);null!=i&&Pd(e,["responseJsonSchema"],i);const r=xd(t,["audioTimestamp"]);null!=r&&Pd(e,["audioTimestamp"],r);const o=xd(t,["candidateCount"]);null!=o&&Pd(e,["candidateCount"],o);const s=xd(t,["enableAffectiveDialog"]);null!=s&&Pd(e,["enableAffectiveDialog"],s);const l=xd(t,["frequencyPenalty"]);null!=l&&Pd(e,["frequencyPenalty"],l);const u=xd(t,["logprobs"]);null!=u&&Pd(e,["logprobs"],u);const a=xd(t,["maxOutputTokens"]);null!=a&&Pd(e,["maxOutputTokens"],a);const c=xd(t,["mediaResolution"]);null!=c&&Pd(e,["mediaResolution"],c);const h=xd(t,["presencePenalty"]);null!=h&&Pd(e,["presencePenalty"],h);const f=xd(t,["responseLogprobs"]);null!=f&&Pd(e,["responseLogprobs"],f);const d=xd(t,["responseMimeType"]);null!=d&&Pd(e,["responseMimeType"],d);const p=xd(t,["responseModalities"]);null!=p&&Pd(e,["responseModalities"],p);const m=xd(t,["responseSchema"]);null!=m&&Pd(e,["responseSchema"],m);const v=xd(t,["routingConfig"]);null!=v&&Pd(e,["routingConfig"],v);const w=xd(t,["seed"]);null!=w&&Pd(e,["seed"],w);const y=xd(t,["speechConfig"]);null!=y&&Pd(e,["speechConfig"],gy(y));const g=xd(t,["stopSequences"]);null!=g&&Pd(e,["stopSequences"],g);const b=xd(t,["temperature"]);null!=b&&Pd(e,["temperature"],b);const E=xd(t,["thinkingConfig"]);null!=E&&Pd(e,["thinkingConfig"],E);const S=xd(t,["topK"]);null!=S&&Pd(e,["topK"],S);const T=xd(t,["topP"]);null!=T&&Pd(e,["topP"],T);if(void 0!==xd(t,["enableEnhancedCivicAnswers"]))throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}(r)),{}}function Gw(t,e){const n={},i=xd(e,["model"]);null!=i&&Pd(n,["_url","model"],yv(t,i));const r=xd(e,["contents"]);if(null!=r){let t=Rv(r);Array.isArray(t)&&(t=t.map(t=>$w(t))),Pd(n,["contents"],t)}const o=xd(e,["config"]);return null!=o&&function(t){if(void 0!==xd(t,["systemInstruction"]))throw new Error("systemInstruction parameter is not supported in Gemini API.");if(void 0!==xd(t,["tools"]))throw new Error("tools parameter is not supported in Gemini API.");if(void 0!==xd(t,["generationConfig"]))throw new Error("generationConfig parameter is not supported in Gemini API.")}(o),n}function Vw(t,e){const n={},i=xd(e,["model"]);null!=i&&Pd(n,["_url","model"],yv(t,i));const r=xd(e,["prompt"]);null!=r&&Pd(n,["instances[0]","prompt"],r);const o=xd(e,["referenceImages"]);if(null!=o){let t=o;Array.isArray(t)&&(t=t.map(t=>function(t){const e={},n=xd(t,["referenceImage"]);null!=n&&Pd(e,["referenceImage"],ay(n));const i=xd(t,["referenceId"]);null!=i&&Pd(e,["referenceId"],i);const r=xd(t,["referenceType"]);null!=r&&Pd(e,["referenceType"],r);const o=xd(t,["maskImageConfig"]);null!=o&&Pd(e,["maskImageConfig"],function(t){const e={},n=xd(t,["maskMode"]);null!=n&&Pd(e,["maskMode"],n);const i=xd(t,["segmentationClasses"]);null!=i&&Pd(e,["maskClasses"],i);const r=xd(t,["maskDilation"]);null!=r&&Pd(e,["dilation"],r);return e}(o));const s=xd(t,["controlImageConfig"]);null!=s&&Pd(e,["controlImageConfig"],function(t){const e={},n=xd(t,["controlType"]);null!=n&&Pd(e,["controlType"],n);const i=xd(t,["enableControlImageComputation"]);return null!=i&&Pd(e,["computeControl"],i),e}(s));const l=xd(t,["styleImageConfig"]);null!=l&&Pd(e,["styleImageConfig"],l);const u=xd(t,["subjectImageConfig"]);null!=u&&Pd(e,["subjectImageConfig"],u);return e}(t))),Pd(n,["instances[0]","referenceImages"],t)}const s=xd(e,["config"]);return null!=s&&function(t,e){const n=xd(t,["outputGcsUri"]);void 0!==e&&null!=n&&Pd(e,["parameters","storageUri"],n);const i=xd(t,["negativePrompt"]);void 0!==e&&null!=i&&Pd(e,["parameters","negativePrompt"],i);const r=xd(t,["numberOfImages"]);void 0!==e&&null!=r&&Pd(e,["parameters","sampleCount"],r);const o=xd(t,["aspectRatio"]);void 0!==e&&null!=o&&Pd(e,["parameters","aspectRatio"],o);const s=xd(t,["guidanceScale"]);void 0!==e&&null!=s&&Pd(e,["parameters","guidanceScale"],s);const l=xd(t,["seed"]);void 0!==e&&null!=l&&Pd(e,["parameters","seed"],l);const u=xd(t,["safetyFilterLevel"]);void 0!==e&&null!=u&&Pd(e,["parameters","safetySetting"],u);const a=xd(t,["personGeneration"]);void 0!==e&&null!=a&&Pd(e,["parameters","personGeneration"],a);const c=xd(t,["includeSafetyAttributes"]);void 0!==e&&null!=c&&Pd(e,["parameters","includeSafetyAttributes"],c);const h=xd(t,["includeRaiReason"]);void 0!==e&&null!=h&&Pd(e,["parameters","includeRaiReason"],h);const f=xd(t,["language"]);void 0!==e&&null!=f&&Pd(e,["parameters","language"],f);const d=xd(t,["outputMimeType"]);void 0!==e&&null!=d&&Pd(e,["parameters","outputOptions","mimeType"],d);const p=xd(t,["outputCompressionQuality"]);void 0!==e&&null!=p&&Pd(e,["parameters","outputOptions","compressionQuality"],p);const m=xd(t,["addWatermark"]);void 0!==e&&null!=m&&Pd(e,["parameters","addWatermark"],m);const v=xd(t,["labels"]);void 0!==e&&null!=v&&Pd(e,["labels"],v);const w=xd(t,["editMode"]);void 0!==e&&null!=w&&Pd(e,["parameters","editMode"],w);const y=xd(t,["baseSteps"]);void 0!==e&&null!=y&&Pd(e,["parameters","editConfig","baseSteps"],y)}(s,n),n}function qw(t,e){const n={},i=xd(e,["model"]);null!=i&&Pd(n,["_url","model"],yv(t,i));const r=xd(e,["contents"]);if(null!=r){let e=Nv(t,r);Array.isArray(e)&&(e=e.map(t=>t)),Pd(n,["requests[]","content"],e)}const o=xd(e,["config"]);null!=o&&function(t,e){const n=xd(t,["taskType"]);void 0!==e&&null!=n&&Pd(e,["requests[]","taskType"],n);const i=xd(t,["title"]);void 0!==e&&null!=i&&Pd(e,["requests[]","title"],i);const r=xd(t,["outputDimensionality"]);if(void 0!==e&&null!=r&&Pd(e,["requests[]","outputDimensionality"],r),void 0!==xd(t,["mimeType"]))throw new Error("mimeType parameter is not supported in Gemini API.");if(void 0!==xd(t,["autoTruncate"]))throw new Error("autoTruncate parameter is not supported in Gemini API.")}(o,n);const s=xd(e,["model"]);return void 0!==s&&Pd(n,["requests[]","model"],yv(t,s)),n}function Hw(t,e){const n={},i=xd(e,["model"]);null!=i&&Pd(n,["_url","model"],yv(t,i));const r=xd(e,["contents"]);if(null!=r){let e=Nv(t,r);Array.isArray(e)&&(e=e.map(t=>t)),Pd(n,["instances[]","content"],e)}const o=xd(e,["config"]);return null!=o&&function(t,e){const n=xd(t,["taskType"]);void 0!==e&&null!=n&&Pd(e,["instances[]","task_type"],n);const i=xd(t,["title"]);void 0!==e&&null!=i&&Pd(e,["instances[]","title"],i);const r=xd(t,["outputDimensionality"]);void 0!==e&&null!=r&&Pd(e,["parameters","outputDimensionality"],r);const o=xd(t,["mimeType"]);void 0!==e&&null!=o&&Pd(e,["instances[]","mimeType"],o);const s=xd(t,["autoTruncate"]);void 0!==e&&null!=s&&Pd(e,["parameters","autoTruncate"],s)}(o,n),n}function Bw(t,e,n){const i={},r=xd(e,["systemInstruction"]);void 0!==n&&null!=r&&Pd(n,["systemInstruction"],$w(Ov(r)));const o=xd(e,["temperature"]);null!=o&&Pd(i,["temperature"],o);const s=xd(e,["topP"]);null!=s&&Pd(i,["topP"],s);const l=xd(e,["topK"]);null!=l&&Pd(i,["topK"],l);const u=xd(e,["candidateCount"]);null!=u&&Pd(i,["candidateCount"],u);const a=xd(e,["maxOutputTokens"]);null!=a&&Pd(i,["maxOutputTokens"],a);const c=xd(e,["stopSequences"]);null!=c&&Pd(i,["stopSequences"],c);const h=xd(e,["responseLogprobs"]);null!=h&&Pd(i,["responseLogprobs"],h);const f=xd(e,["logprobs"]);null!=f&&Pd(i,["logprobs"],f);const d=xd(e,["presencePenalty"]);null!=d&&Pd(i,["presencePenalty"],d);const p=xd(e,["frequencyPenalty"]);null!=p&&Pd(i,["frequencyPenalty"],p);const m=xd(e,["seed"]);null!=m&&Pd(i,["seed"],m);const v=xd(e,["responseMimeType"]);null!=v&&Pd(i,["responseMimeType"],v);const w=xd(e,["responseSchema"]);null!=w&&Pd(i,["responseSchema"],xv(w));const y=xd(e,["responseJsonSchema"]);if(null!=y&&Pd(i,["responseJsonSchema"],y),void 0!==xd(e,["routingConfig"]))throw new Error("routingConfig parameter is not supported in Gemini API.");if(void 0!==xd(e,["modelSelectionConfig"]))throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const g=xd(e,["safetySettings"]);if(void 0!==n&&null!=g){let t=g;Array.isArray(t)&&(t=t.map(t=>function(t){const e={},n=xd(t,["category"]);null!=n&&Pd(e,["category"],n);if(void 0!==xd(t,["method"]))throw new Error("method parameter is not supported in Gemini API.");const i=xd(t,["threshold"]);null!=i&&Pd(e,["threshold"],i);return e}(t))),Pd(n,["safetySettings"],t)}const b=xd(e,["tools"]);if(void 0!==n&&null!=b){let t=Uv(b);Array.isArray(t)&&(t=t.map(t=>function(t){const e={},n=xd(t,["functionDeclarations"]);if(null!=n){let t=n;Array.isArray(t)&&(t=t.map(t=>t)),Pd(e,["functionDeclarations"],t)}if(void 0!==xd(t,["retrieval"]))throw new Error("retrieval parameter is not supported in Gemini API.");const i=xd(t,["googleSearchRetrieval"]);null!=i&&Pd(e,["googleSearchRetrieval"],i);const r=xd(t,["computerUse"]);null!=r&&Pd(e,["computerUse"],r);const o=xd(t,["fileSearch"]);null!=o&&Pd(e,["fileSearch"],o);const s=xd(t,["codeExecution"]);null!=s&&Pd(e,["codeExecution"],s);if(void 0!==xd(t,["enterpriseWebSearch"]))throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=xd(t,["googleMaps"]);null!=l&&Pd(e,["googleMaps"],function(t){const e={};if(void 0!==xd(t,["authConfig"]))throw new Error("authConfig parameter is not supported in Gemini API.");const n=xd(t,["enableWidget"]);null!=n&&Pd(e,["enableWidget"],n);return e}(l));const u=xd(t,["googleSearch"]);null!=u&&Pd(e,["googleSearch"],function(t){const e={};if(void 0!==xd(t,["excludeDomains"]))throw new Error("excludeDomains parameter is not supported in Gemini API.");if(void 0!==xd(t,["blockingConfidence"]))throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=xd(t,["timeRangeFilter"]);null!=n&&Pd(e,["timeRangeFilter"],n);return e}(u));const a=xd(t,["urlContext"]);null!=a&&Pd(e,["urlContext"],a);return e}(Lv(t)))),Pd(n,["tools"],t)}const E=xd(e,["toolConfig"]);if(void 0!==n&&null!=E&&Pd(n,["toolConfig"],function(t){const e={},n=xd(t,["functionCallingConfig"]);null!=n&&Pd(e,["functionCallingConfig"],function(t){const e={},n=xd(t,["mode"]);null!=n&&Pd(e,["mode"],n);const i=xd(t,["allowedFunctionNames"]);if(null!=i&&Pd(e,["allowedFunctionNames"],i),void 0!==xd(t,["streamFunctionCallArguments"]))throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}(n));const i=xd(t,["retrievalConfig"]);null!=i&&Pd(e,["retrievalConfig"],i);return e}(E)),void 0!==xd(e,["labels"]))throw new Error("labels parameter is not supported in Gemini API.");const S=xd(e,["cachedContent"]);void 0!==n&&null!=S&&Pd(n,["cachedContent"],Fv(t,S));const T=xd(e,["responseModalities"]);null!=T&&Pd(i,["responseModalities"],T);const k=xd(e,["mediaResolution"]);null!=k&&Pd(i,["mediaResolution"],k);const I=xd(e,["speechConfig"]);if(null!=I&&Pd(i,["speechConfig"],Mv(I)),void 0!==xd(e,["audioTimestamp"]))throw new Error("audioTimestamp parameter is not supported in Gemini API.");const _=xd(e,["thinkingConfig"]);null!=_&&Pd(i,["thinkingConfig"],_);const C=xd(e,["imageConfig"]);null!=C&&Pd(i,["imageConfig"],function(t){const e={},n=xd(t,["aspectRatio"]);null!=n&&Pd(e,["aspectRatio"],n);const i=xd(t,["imageSize"]);null!=i&&Pd(e,["imageSize"],i);if(void 0!==xd(t,["outputMimeType"]))throw new Error("outputMimeType parameter is not supported in Gemini API.");if(void 0!==xd(t,["outputCompressionQuality"]))throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}(C));const A=xd(e,["enableEnhancedCivicAnswers"]);return null!=A&&Pd(i,["enableEnhancedCivicAnswers"],A),i}function Jw(t,e,n){const i={},r=xd(e,["systemInstruction"]);void 0!==n&&null!=r&&Pd(n,["systemInstruction"],Ov(r));const o=xd(e,["temperature"]);null!=o&&Pd(i,["temperature"],o);const s=xd(e,["topP"]);null!=s&&Pd(i,["topP"],s);const l=xd(e,["topK"]);null!=l&&Pd(i,["topK"],l);const u=xd(e,["candidateCount"]);null!=u&&Pd(i,["candidateCount"],u);const a=xd(e,["maxOutputTokens"]);null!=a&&Pd(i,["maxOutputTokens"],a);const c=xd(e,["stopSequences"]);null!=c&&Pd(i,["stopSequences"],c);const h=xd(e,["responseLogprobs"]);null!=h&&Pd(i,["responseLogprobs"],h);const f=xd(e,["logprobs"]);null!=f&&Pd(i,["logprobs"],f);const d=xd(e,["presencePenalty"]);null!=d&&Pd(i,["presencePenalty"],d);const p=xd(e,["frequencyPenalty"]);null!=p&&Pd(i,["frequencyPenalty"],p);const m=xd(e,["seed"]);null!=m&&Pd(i,["seed"],m);const v=xd(e,["responseMimeType"]);null!=v&&Pd(i,["responseMimeType"],v);const w=xd(e,["responseSchema"]);null!=w&&Pd(i,["responseSchema"],xv(w));const y=xd(e,["responseJsonSchema"]);null!=y&&Pd(i,["responseJsonSchema"],y);const g=xd(e,["routingConfig"]);null!=g&&Pd(i,["routingConfig"],g);const b=xd(e,["modelSelectionConfig"]);null!=b&&Pd(i,["modelConfig"],b);const E=xd(e,["safetySettings"]);if(void 0!==n&&null!=E){let t=E;Array.isArray(t)&&(t=t.map(t=>t)),Pd(n,["safetySettings"],t)}const S=xd(e,["tools"]);if(void 0!==n&&null!=S){let t=Uv(S);Array.isArray(t)&&(t=t.map(t=>by(Lv(t)))),Pd(n,["tools"],t)}const T=xd(e,["toolConfig"]);void 0!==n&&null!=T&&Pd(n,["toolConfig"],T);const k=xd(e,["labels"]);void 0!==n&&null!=k&&Pd(n,["labels"],k);const I=xd(e,["cachedContent"]);void 0!==n&&null!=I&&Pd(n,["cachedContent"],Fv(t,I));const _=xd(e,["responseModalities"]);null!=_&&Pd(i,["responseModalities"],_);const C=xd(e,["mediaResolution"]);null!=C&&Pd(i,["mediaResolution"],C);const A=xd(e,["speechConfig"]);null!=A&&Pd(i,["speechConfig"],gy(Mv(A)));const O=xd(e,["audioTimestamp"]);null!=O&&Pd(i,["audioTimestamp"],O);const N=xd(e,["thinkingConfig"]);null!=N&&Pd(i,["thinkingConfig"],N);const R=xd(e,["imageConfig"]);if(null!=R&&Pd(i,["imageConfig"],function(t){const e={},n=xd(t,["aspectRatio"]);null!=n&&Pd(e,["aspectRatio"],n);const i=xd(t,["imageSize"]);null!=i&&Pd(e,["imageSize"],i);const r=xd(t,["outputMimeType"]);null!=r&&Pd(e,["imageOutputOptions","mimeType"],r);const o=xd(t,["outputCompressionQuality"]);null!=o&&Pd(e,["imageOutputOptions","compressionQuality"],o);return e}(R)),void 0!==xd(e,["enableEnhancedCivicAnswers"]))throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return i}function zw(t,e){const n={},i=xd(e,["model"]);null!=i&&Pd(n,["_url","model"],yv(t,i));const r=xd(e,["contents"]);if(null!=r){let t=Rv(r);Array.isArray(t)&&(t=t.map(t=>$w(t))),Pd(n,["contents"],t)}const o=xd(e,["config"]);return null!=o&&Pd(n,["generationConfig"],Bw(t,o,n)),n}function Kw(t,e){const n={},i=xd(e,["model"]);null!=i&&Pd(n,["_url","model"],yv(t,i));const r=xd(e,["contents"]);if(null!=r){let t=Rv(r);Array.isArray(t)&&(t=t.map(t=>t)),Pd(n,["contents"],t)}const o=xd(e,["config"]);return null!=o&&Pd(n,["generationConfig"],Jw(t,o,n)),n}function Ww(t){const e={},n=xd(t,["sdkHttpResponse"]);null!=n&&Pd(e,["sdkHttpResponse"],n);const i=xd(t,["candidates"]);if(null!=i){let t=i;Array.isArray(t)&&(t=t.map(t=>Uw(t))),Pd(e,["candidates"],t)}const r=xd(t,["modelVersion"]);null!=r&&Pd(e,["modelVersion"],r);const o=xd(t,["promptFeedback"]);null!=o&&Pd(e,["promptFeedback"],o);const s=xd(t,["responseId"]);null!=s&&Pd(e,["responseId"],s);const l=xd(t,["usageMetadata"]);return null!=l&&Pd(e,["usageMetadata"],l),e}function Yw(t){const e={},n=xd(t,["sdkHttpResponse"]);null!=n&&Pd(e,["sdkHttpResponse"],n);const i=xd(t,["candidates"]);if(null!=i){let t=i;Array.isArray(t)&&(t=t.map(t=>t)),Pd(e,["candidates"],t)}const r=xd(t,["createTime"]);null!=r&&Pd(e,["createTime"],r);const o=xd(t,["modelVersion"]);null!=o&&Pd(e,["modelVersion"],o);const s=xd(t,["promptFeedback"]);null!=s&&Pd(e,["promptFeedback"],s);const l=xd(t,["responseId"]);null!=l&&Pd(e,["responseId"],l);const u=xd(t,["usageMetadata"]);return null!=u&&Pd(e,["usageMetadata"],u),e}function Xw(t,e){const n={},i=xd(e,["model"]);null!=i&&Pd(n,["_url","model"],yv(t,i));const r=xd(e,["prompt"]);null!=r&&Pd(n,["instances[0]","prompt"],r);const o=xd(e,["config"]);return null!=o&&function(t,e){if(void 0!==xd(t,["outputGcsUri"]))throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(void 0!==xd(t,["negativePrompt"]))throw new Error("negativePrompt parameter is not supported in Gemini API.");const n=xd(t,["numberOfImages"]);void 0!==e&&null!=n&&Pd(e,["parameters","sampleCount"],n);const i=xd(t,["aspectRatio"]);void 0!==e&&null!=i&&Pd(e,["parameters","aspectRatio"],i);const r=xd(t,["guidanceScale"]);if(void 0!==e&&null!=r&&Pd(e,["parameters","guidanceScale"],r),void 0!==xd(t,["seed"]))throw new Error("seed parameter is not supported in Gemini API.");const o=xd(t,["safetyFilterLevel"]);void 0!==e&&null!=o&&Pd(e,["parameters","safetySetting"],o);const s=xd(t,["personGeneration"]);void 0!==e&&null!=s&&Pd(e,["parameters","personGeneration"],s);const l=xd(t,["includeSafetyAttributes"]);void 0!==e&&null!=l&&Pd(e,["parameters","includeSafetyAttributes"],l);const u=xd(t,["includeRaiReason"]);void 0!==e&&null!=u&&Pd(e,["parameters","includeRaiReason"],u);const a=xd(t,["language"]);void 0!==e&&null!=a&&Pd(e,["parameters","language"],a);const c=xd(t,["outputMimeType"]);void 0!==e&&null!=c&&Pd(e,["parameters","outputOptions","mimeType"],c);const h=xd(t,["outputCompressionQuality"]);if(void 0!==e&&null!=h&&Pd(e,["parameters","outputOptions","compressionQuality"],h),void 0!==xd(t,["addWatermark"]))throw new Error("addWatermark parameter is not supported in Gemini API.");if(void 0!==xd(t,["labels"]))throw new Error("labels parameter is not supported in Gemini API.");const f=xd(t,["imageSize"]);if(void 0!==e&&null!=f&&Pd(e,["parameters","sampleImageSize"],f),void 0!==xd(t,["enhancePrompt"]))throw new Error("enhancePrompt parameter is not supported in Gemini API.")}(o,n),n}function Qw(t,e){const n={},i=xd(e,["model"]);null!=i&&Pd(n,["_url","model"],yv(t,i));const r=xd(e,["prompt"]);null!=r&&Pd(n,["instances[0]","prompt"],r);const o=xd(e,["config"]);return null!=o&&function(t,e){const n=xd(t,["outputGcsUri"]);void 0!==e&&null!=n&&Pd(e,["parameters","storageUri"],n);const i=xd(t,["negativePrompt"]);void 0!==e&&null!=i&&Pd(e,["parameters","negativePrompt"],i);const r=xd(t,["numberOfImages"]);void 0!==e&&null!=r&&Pd(e,["parameters","sampleCount"],r);const o=xd(t,["aspectRatio"]);void 0!==e&&null!=o&&Pd(e,["parameters","aspectRatio"],o);const s=xd(t,["guidanceScale"]);void 0!==e&&null!=s&&Pd(e,["parameters","guidanceScale"],s);const l=xd(t,["seed"]);void 0!==e&&null!=l&&Pd(e,["parameters","seed"],l);const u=xd(t,["safetyFilterLevel"]);void 0!==e&&null!=u&&Pd(e,["parameters","safetySetting"],u);const a=xd(t,["personGeneration"]);void 0!==e&&null!=a&&Pd(e,["parameters","personGeneration"],a);const c=xd(t,["includeSafetyAttributes"]);void 0!==e&&null!=c&&Pd(e,["parameters","includeSafetyAttributes"],c);const h=xd(t,["includeRaiReason"]);void 0!==e&&null!=h&&Pd(e,["parameters","includeRaiReason"],h);const f=xd(t,["language"]);void 0!==e&&null!=f&&Pd(e,["parameters","language"],f);const d=xd(t,["outputMimeType"]);void 0!==e&&null!=d&&Pd(e,["parameters","outputOptions","mimeType"],d);const p=xd(t,["outputCompressionQuality"]);void 0!==e&&null!=p&&Pd(e,["parameters","outputOptions","compressionQuality"],p);const m=xd(t,["addWatermark"]);void 0!==e&&null!=m&&Pd(e,["parameters","addWatermark"],m);const v=xd(t,["labels"]);void 0!==e&&null!=v&&Pd(e,["labels"],v);const w=xd(t,["imageSize"]);void 0!==e&&null!=w&&Pd(e,["parameters","sampleImageSize"],w);const y=xd(t,["enhancePrompt"]);void 0!==e&&null!=y&&Pd(e,["parameters","enhancePrompt"],y)}(o,n),n}function Zw(t){const e={},n=xd(t,["sdkHttpResponse"]);null!=n&&Pd(e,["sdkHttpResponse"],n);const i=xd(t,["predictions"]);if(null!=i){let t=i;Array.isArray(t)&&(t=t.map(t=>function(t){const e={},n=xd(t,["_self"]);null!=n&&Pd(e,["image"],function(t){const e={},n=xd(t,["bytesBase64Encoded"]);null!=n&&Pd(e,["imageBytes"],jv(n));const i=xd(t,["mimeType"]);null!=i&&Pd(e,["mimeType"],i);return e}(n));const i=xd(t,["raiFilteredReason"]);null!=i&&Pd(e,["raiFilteredReason"],i);const r=xd(t,["_self"]);null!=r&&Pd(e,["safetyAttributes"],my(r));return e}(t))),Pd(e,["generatedImages"],t)}const r=xd(t,["positivePromptSafetyAttributes"]);return null!=r&&Pd(e,["positivePromptSafetyAttributes"],my(r)),e}function ty(t,e){const n=xd(t,["numberOfVideos"]);if(void 0!==e&&null!=n&&Pd(e,["parameters","sampleCount"],n),void 0!==xd(t,["outputGcsUri"]))throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(void 0!==xd(t,["fps"]))throw new Error("fps parameter is not supported in Gemini API.");const i=xd(t,["durationSeconds"]);if(void 0!==e&&null!=i&&Pd(e,["parameters","durationSeconds"],i),void 0!==xd(t,["seed"]))throw new Error("seed parameter is not supported in Gemini API.");const r=xd(t,["aspectRatio"]);void 0!==e&&null!=r&&Pd(e,["parameters","aspectRatio"],r);const o=xd(t,["resolution"]);void 0!==e&&null!=o&&Pd(e,["parameters","resolution"],o);const s=xd(t,["personGeneration"]);if(void 0!==e&&null!=s&&Pd(e,["parameters","personGeneration"],s),void 0!==xd(t,["pubsubTopic"]))throw new Error("pubsubTopic parameter is not supported in Gemini API.");const l=xd(t,["negativePrompt"]);void 0!==e&&null!=l&&Pd(e,["parameters","negativePrompt"],l);const u=xd(t,["enhancePrompt"]);if(void 0!==e&&null!=u&&Pd(e,["parameters","enhancePrompt"],u),void 0!==xd(t,["generateAudio"]))throw new Error("generateAudio parameter is not supported in Gemini API.");const a=xd(t,["lastFrame"]);void 0!==e&&null!=a&&Pd(e,["instances[0]","lastFrame"],uy(a));const c=xd(t,["referenceImages"]);if(void 0!==e&&null!=c){let t=c;Array.isArray(t)&&(t=t.map(t=>function(t){const e={},n=xd(t,["image"]);null!=n&&Pd(e,["image"],uy(n));const i=xd(t,["referenceType"]);null!=i&&Pd(e,["referenceType"],i);return e}(t))),Pd(e,["instances[0]","referenceImages"],t)}if(void 0!==xd(t,["mask"]))throw new Error("mask parameter is not supported in Gemini API.");if(void 0!==xd(t,["compressionQuality"]))throw new Error("compressionQuality parameter is not supported in Gemini API.");return{}}function ey(t,e){const n=xd(t,["numberOfVideos"]);void 0!==e&&null!=n&&Pd(e,["parameters","sampleCount"],n);const i=xd(t,["outputGcsUri"]);void 0!==e&&null!=i&&Pd(e,["parameters","storageUri"],i);const r=xd(t,["fps"]);void 0!==e&&null!=r&&Pd(e,["parameters","fps"],r);const o=xd(t,["durationSeconds"]);void 0!==e&&null!=o&&Pd(e,["parameters","durationSeconds"],o);const s=xd(t,["seed"]);void 0!==e&&null!=s&&Pd(e,["parameters","seed"],s);const l=xd(t,["aspectRatio"]);void 0!==e&&null!=l&&Pd(e,["parameters","aspectRatio"],l);const u=xd(t,["resolution"]);void 0!==e&&null!=u&&Pd(e,["parameters","resolution"],u);const a=xd(t,["personGeneration"]);void 0!==e&&null!=a&&Pd(e,["parameters","personGeneration"],a);const c=xd(t,["pubsubTopic"]);void 0!==e&&null!=c&&Pd(e,["parameters","pubsubTopic"],c);const h=xd(t,["negativePrompt"]);void 0!==e&&null!=h&&Pd(e,["parameters","negativePrompt"],h);const f=xd(t,["enhancePrompt"]);void 0!==e&&null!=f&&Pd(e,["parameters","enhancePrompt"],f);const d=xd(t,["generateAudio"]);void 0!==e&&null!=d&&Pd(e,["parameters","generateAudio"],d);const p=xd(t,["lastFrame"]);void 0!==e&&null!=p&&Pd(e,["instances[0]","lastFrame"],ay(p));const m=xd(t,["referenceImages"]);if(void 0!==e&&null!=m){let t=m;Array.isArray(t)&&(t=t.map(t=>function(t){const e={},n=xd(t,["image"]);null!=n&&Pd(e,["image"],ay(n));const i=xd(t,["referenceType"]);null!=i&&Pd(e,["referenceType"],i);return e}(t))),Pd(e,["instances[0]","referenceImages"],t)}const v=xd(t,["mask"]);void 0!==e&&null!=v&&Pd(e,["instances[0]","mask"],function(t){const e={},n=xd(t,["image"]);null!=n&&Pd(e,["_self"],ay(n));const i=xd(t,["maskMode"]);null!=i&&Pd(e,["maskMode"],i);return e}(v));const w=xd(t,["compressionQuality"]);return void 0!==e&&null!=w&&Pd(e,["parameters","compressionQuality"],w),{}}function ny(t){const e={},n=xd(t,["name"]);null!=n&&Pd(e,["name"],n);const i=xd(t,["metadata"]);null!=i&&Pd(e,["metadata"],i);const r=xd(t,["done"]);null!=r&&Pd(e,["done"],r);const o=xd(t,["error"]);null!=o&&Pd(e,["error"],o);const s=xd(t,["response","generateVideoResponse"]);return null!=s&&Pd(e,["response"],function(t){const e={},n=xd(t,["generatedSamples"]);if(null!=n){let t=n;Array.isArray(t)&&(t=t.map(t=>function(t){const e={},n=xd(t,["video"]);null!=n&&Pd(e,["video"],function(t){const e={},n=xd(t,["uri"]);null!=n&&Pd(e,["uri"],n);const i=xd(t,["encodedVideo"]);null!=i&&Pd(e,["videoBytes"],jv(i));const r=xd(t,["encoding"]);null!=r&&Pd(e,["mimeType"],r);return e}(n));return e}(t))),Pd(e,["generatedVideos"],t)}const i=xd(t,["raiMediaFilteredCount"]);null!=i&&Pd(e,["raiMediaFilteredCount"],i);const r=xd(t,["raiMediaFilteredReasons"]);null!=r&&Pd(e,["raiMediaFilteredReasons"],r);return e}(s)),e}function iy(t){const e={},n=xd(t,["name"]);null!=n&&Pd(e,["name"],n);const i=xd(t,["metadata"]);null!=i&&Pd(e,["metadata"],i);const r=xd(t,["done"]);null!=r&&Pd(e,["done"],r);const o=xd(t,["error"]);null!=o&&Pd(e,["error"],o);const s=xd(t,["response"]);return null!=s&&Pd(e,["response"],function(t){const e={},n=xd(t,["videos"]);if(null!=n){let t=n;Array.isArray(t)&&(t=t.map(t=>function(t){const e={},n=xd(t,["_self"]);null!=n&&Pd(e,["video"],function(t){const e={},n=xd(t,["gcsUri"]);null!=n&&Pd(e,["uri"],n);const i=xd(t,["bytesBase64Encoded"]);null!=i&&Pd(e,["videoBytes"],jv(i));const r=xd(t,["mimeType"]);null!=r&&Pd(e,["mimeType"],r);return e}(n));return e}(t))),Pd(e,["generatedVideos"],t)}const i=xd(t,["raiMediaFilteredCount"]);null!=i&&Pd(e,["raiMediaFilteredCount"],i);const r=xd(t,["raiMediaFilteredReasons"]);null!=r&&Pd(e,["raiMediaFilteredReasons"],r);return e}(s)),e}function ry(t,e){const n={},i=xd(e,["model"]);null!=i&&Pd(n,["_url","model"],yv(t,i));const r=xd(e,["prompt"]);null!=r&&Pd(n,["instances[0]","prompt"],r);const o=xd(e,["image"]);null!=o&&Pd(n,["instances[0]","image"],uy(o));const s=xd(e,["video"]);null!=s&&Pd(n,["instances[0]","video"],ky(s));const l=xd(e,["source"]);null!=l&&function(t,e){const n={},i=xd(t,["prompt"]);void 0!==e&&null!=i&&Pd(e,["instances[0]","prompt"],i);const r=xd(t,["image"]);void 0!==e&&null!=r&&Pd(e,["instances[0]","image"],uy(r));const o=xd(t,["video"]);void 0!==e&&null!=o&&Pd(e,["instances[0]","video"],ky(o))}(l,n);const u=xd(e,["config"]);return null!=u&&ty(u,n),n}function oy(t,e){const n={},i=xd(e,["model"]);null!=i&&Pd(n,["_url","model"],yv(t,i));const r=xd(e,["prompt"]);null!=r&&Pd(n,["instances[0]","prompt"],r);const o=xd(e,["image"]);null!=o&&Pd(n,["instances[0]","image"],ay(o));const s=xd(e,["video"]);null!=s&&Pd(n,["instances[0]","video"],Iy(s));const l=xd(e,["source"]);null!=l&&function(t,e){const n={},i=xd(t,["prompt"]);void 0!==e&&null!=i&&Pd(e,["instances[0]","prompt"],i);const r=xd(t,["image"]);void 0!==e&&null!=r&&Pd(e,["instances[0]","image"],ay(r));const o=xd(t,["video"]);void 0!==e&&null!=o&&Pd(e,["instances[0]","video"],Iy(o))}(l,n);const u=xd(e,["config"]);return null!=u&&ey(u,n),n}function sy(t){const e={},n=xd(t,["_self"]);null!=n&&Pd(e,["image"],ly(n));const i=xd(t,["raiFilteredReason"]);null!=i&&Pd(e,["raiFilteredReason"],i);const r=xd(t,["_self"]);null!=r&&Pd(e,["safetyAttributes"],vy(r));const o=xd(t,["prompt"]);return null!=o&&Pd(e,["enhancedPrompt"],o),e}function ly(t){const e={},n=xd(t,["gcsUri"]);null!=n&&Pd(e,["gcsUri"],n);const i=xd(t,["bytesBase64Encoded"]);null!=i&&Pd(e,["imageBytes"],jv(i));const r=xd(t,["mimeType"]);return null!=r&&Pd(e,["mimeType"],r),e}function uy(t){const e={};if(void 0!==xd(t,["gcsUri"]))throw new Error("gcsUri parameter is not supported in Gemini API.");const n=xd(t,["imageBytes"]);null!=n&&Pd(e,["bytesBase64Encoded"],jv(n));const i=xd(t,["mimeType"]);return null!=i&&Pd(e,["mimeType"],i),e}function ay(t){const e={},n=xd(t,["gcsUri"]);null!=n&&Pd(e,["gcsUri"],n);const i=xd(t,["imageBytes"]);null!=i&&Pd(e,["bytesBase64Encoded"],jv(i));const r=xd(t,["mimeType"]);return null!=r&&Pd(e,["mimeType"],r),e}function cy(t,e){const n={},i=xd(e,["config"]);return null!=i&&function(t,e,n){const i=xd(e,["pageSize"]);void 0!==n&&null!=i&&Pd(n,["_query","pageSize"],i);const r=xd(e,["pageToken"]);void 0!==n&&null!=r&&Pd(n,["_query","pageToken"],r);const o=xd(e,["filter"]);void 0!==n&&null!=o&&Pd(n,["_query","filter"],o);const s=xd(e,["queryBase"]);void 0!==n&&null!=s&&Pd(n,["_url","models_url"],Vv(t,s))}(t,i,n),n}function hy(t,e){const n={},i=xd(e,["config"]);return null!=i&&function(t,e,n){const i=xd(e,["pageSize"]);void 0!==n&&null!=i&&Pd(n,["_query","pageSize"],i);const r=xd(e,["pageToken"]);void 0!==n&&null!=r&&Pd(n,["_query","pageToken"],r);const o=xd(e,["filter"]);void 0!==n&&null!=o&&Pd(n,["_query","filter"],o);const s=xd(e,["queryBase"]);void 0!==n&&null!=s&&Pd(n,["_url","models_url"],Vv(t,s))}(t,i,n),n}function fy(t){const e={},n=xd(t,["name"]);null!=n&&Pd(e,["name"],n);const i=xd(t,["displayName"]);null!=i&&Pd(e,["displayName"],i);const r=xd(t,["description"]);null!=r&&Pd(e,["description"],r);const o=xd(t,["version"]);null!=o&&Pd(e,["version"],o);const s=xd(t,["_self"]);null!=s&&Pd(e,["tunedModelInfo"],function(t){const e={},n=xd(t,["baseModel"]);null!=n&&Pd(e,["baseModel"],n);const i=xd(t,["createTime"]);null!=i&&Pd(e,["createTime"],i);const r=xd(t,["updateTime"]);null!=r&&Pd(e,["updateTime"],r);return e}(s));const l=xd(t,["inputTokenLimit"]);null!=l&&Pd(e,["inputTokenLimit"],l);const u=xd(t,["outputTokenLimit"]);null!=u&&Pd(e,["outputTokenLimit"],u);const a=xd(t,["supportedGenerationMethods"]);null!=a&&Pd(e,["supportedActions"],a);const c=xd(t,["temperature"]);null!=c&&Pd(e,["temperature"],c);const h=xd(t,["maxTemperature"]);null!=h&&Pd(e,["maxTemperature"],h);const f=xd(t,["topP"]);null!=f&&Pd(e,["topP"],f);const d=xd(t,["topK"]);null!=d&&Pd(e,["topK"],d);const p=xd(t,["thinking"]);return null!=p&&Pd(e,["thinking"],p),e}function dy(t){const e={},n=xd(t,["name"]);null!=n&&Pd(e,["name"],n);const i=xd(t,["displayName"]);null!=i&&Pd(e,["displayName"],i);const r=xd(t,["description"]);null!=r&&Pd(e,["description"],r);const o=xd(t,["versionId"]);null!=o&&Pd(e,["version"],o);const s=xd(t,["deployedModels"]);if(null!=s){let t=s;Array.isArray(t)&&(t=t.map(t=>function(t){const e={},n=xd(t,["endpoint"]);null!=n&&Pd(e,["name"],n);const i=xd(t,["deployedModelId"]);return null!=i&&Pd(e,["deployedModelId"],i),e}(t))),Pd(e,["endpoints"],t)}const l=xd(t,["labels"]);null!=l&&Pd(e,["labels"],l);const u=xd(t,["_self"]);null!=u&&Pd(e,["tunedModelInfo"],function(t){const e={},n=xd(t,["labels","google-vertex-llm-tuning-base-model-id"]);null!=n&&Pd(e,["baseModel"],n);const i=xd(t,["createTime"]);null!=i&&Pd(e,["createTime"],i);const r=xd(t,["updateTime"]);null!=r&&Pd(e,["updateTime"],r);return e}(u));const a=xd(t,["defaultCheckpointId"]);null!=a&&Pd(e,["defaultCheckpointId"],a);const c=xd(t,["checkpoints"]);if(null!=c){let t=c;Array.isArray(t)&&(t=t.map(t=>t)),Pd(e,["checkpoints"],t)}return e}function py(t,e){const n={},i=xd(e,["model"]);null!=i&&Pd(n,["_url","model"],yv(t,i));const r=xd(e,["source"]);null!=r&&function(t,e){const n={},i=xd(t,["prompt"]);void 0!==e&&null!=i&&Pd(e,["instances[0]","prompt"],i);const r=xd(t,["personImage"]);void 0!==e&&null!=r&&Pd(e,["instances[0]","personImage","image"],ay(r));const o=xd(t,["productImages"]);if(void 0!==e&&null!=o){let t=o;Array.isArray(t)&&(t=t.map(t=>function(t){const e={},n=xd(t,["productImage"]);return null!=n&&Pd(e,["image"],ay(n)),e}(t))),Pd(e,["instances[0]","productImages"],t)}}(r,n);const o=xd(e,["config"]);return null!=o&&function(t,e){const n=xd(t,["numberOfImages"]);void 0!==e&&null!=n&&Pd(e,["parameters","sampleCount"],n);const i=xd(t,["baseSteps"]);void 0!==e&&null!=i&&Pd(e,["parameters","baseSteps"],i);const r=xd(t,["outputGcsUri"]);void 0!==e&&null!=r&&Pd(e,["parameters","storageUri"],r);const o=xd(t,["seed"]);void 0!==e&&null!=o&&Pd(e,["parameters","seed"],o);const s=xd(t,["safetyFilterLevel"]);void 0!==e&&null!=s&&Pd(e,["parameters","safetySetting"],s);const l=xd(t,["personGeneration"]);void 0!==e&&null!=l&&Pd(e,["parameters","personGeneration"],l);const u=xd(t,["addWatermark"]);void 0!==e&&null!=u&&Pd(e,["parameters","addWatermark"],u);const a=xd(t,["outputMimeType"]);void 0!==e&&null!=a&&Pd(e,["parameters","outputOptions","mimeType"],a);const c=xd(t,["outputCompressionQuality"]);void 0!==e&&null!=c&&Pd(e,["parameters","outputOptions","compressionQuality"],c);const h=xd(t,["enhancePrompt"]);void 0!==e&&null!=h&&Pd(e,["parameters","enhancePrompt"],h);const f=xd(t,["labels"]);void 0!==e&&null!=f&&Pd(e,["labels"],f)}(o,n),n}function my(t){const e={},n=xd(t,["safetyAttributes","categories"]);null!=n&&Pd(e,["categories"],n);const i=xd(t,["safetyAttributes","scores"]);null!=i&&Pd(e,["scores"],i);const r=xd(t,["contentType"]);return null!=r&&Pd(e,["contentType"],r),e}function vy(t){const e={},n=xd(t,["safetyAttributes","categories"]);null!=n&&Pd(e,["categories"],n);const i=xd(t,["safetyAttributes","scores"]);null!=i&&Pd(e,["scores"],i);const r=xd(t,["contentType"]);return null!=r&&Pd(e,["contentType"],r),e}function wy(t,e){const n={},i=xd(e,["model"]);null!=i&&Pd(n,["_url","model"],yv(t,i));const r=xd(e,["source"]);null!=r&&function(t,e){const n={},i=xd(t,["prompt"]);void 0!==e&&null!=i&&Pd(e,["instances[0]","prompt"],i);const r=xd(t,["image"]);void 0!==e&&null!=r&&Pd(e,["instances[0]","image"],ay(r));const o=xd(t,["scribbleImage"]);void 0!==e&&null!=o&&Pd(e,["instances[0]","scribble"],function(t){const e={},n=xd(t,["image"]);return null!=n&&Pd(e,["image"],ay(n)),e}(o))}(r,n);const o=xd(e,["config"]);return null!=o&&function(t,e){const n=xd(t,["mode"]);void 0!==e&&null!=n&&Pd(e,["parameters","mode"],n);const i=xd(t,["maxPredictions"]);void 0!==e&&null!=i&&Pd(e,["parameters","maxPredictions"],i);const r=xd(t,["confidenceThreshold"]);void 0!==e&&null!=r&&Pd(e,["parameters","confidenceThreshold"],r);const o=xd(t,["maskDilation"]);void 0!==e&&null!=o&&Pd(e,["parameters","maskDilation"],o);const s=xd(t,["binaryColorThreshold"]);void 0!==e&&null!=s&&Pd(e,["parameters","binaryColorThreshold"],s);const l=xd(t,["labels"]);void 0!==e&&null!=l&&Pd(e,["labels"],l)}(o,n),n}function yy(t){const e={},n=xd(t,["predictions"]);if(null!=n){let t=n;Array.isArray(t)&&(t=t.map(t=>function(t){const e={},n=xd(t,["_self"]);null!=n&&Pd(e,["mask"],ly(n));const i=xd(t,["labels"]);if(null!=i){let t=i;Array.isArray(t)&&(t=t.map(t=>t)),Pd(e,["labels"],t)}return e}(t))),Pd(e,["generatedMasks"],t)}return e}function gy(t){const e={},n=xd(t,["voiceConfig"]);null!=n&&Pd(e,["voiceConfig"],n);const i=xd(t,["languageCode"]);if(null!=i&&Pd(e,["languageCode"],i),void 0!==xd(t,["multiSpeakerVoiceConfig"]))throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function by(t){const e={},n=xd(t,["functionDeclarations"]);if(null!=n){let t=n;Array.isArray(t)&&(t=t.map(t=>function(t){const e={};if(void 0!==xd(t,["behavior"]))throw new Error("behavior parameter is not supported in Vertex AI.");const n=xd(t,["description"]);null!=n&&Pd(e,["description"],n);const i=xd(t,["name"]);null!=i&&Pd(e,["name"],i);const r=xd(t,["parameters"]);null!=r&&Pd(e,["parameters"],r);const o=xd(t,["parametersJsonSchema"]);null!=o&&Pd(e,["parametersJsonSchema"],o);const s=xd(t,["response"]);null!=s&&Pd(e,["response"],s);const l=xd(t,["responseJsonSchema"]);return null!=l&&Pd(e,["responseJsonSchema"],l),e}(t))),Pd(e,["functionDeclarations"],t)}const i=xd(t,["retrieval"]);null!=i&&Pd(e,["retrieval"],i);const r=xd(t,["googleSearchRetrieval"]);null!=r&&Pd(e,["googleSearchRetrieval"],r);const o=xd(t,["computerUse"]);if(null!=o&&Pd(e,["computerUse"],o),void 0!==xd(t,["fileSearch"]))throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=xd(t,["codeExecution"]);null!=s&&Pd(e,["codeExecution"],s);const l=xd(t,["enterpriseWebSearch"]);null!=l&&Pd(e,["enterpriseWebSearch"],l);const u=xd(t,["googleMaps"]);null!=u&&Pd(e,["googleMaps"],u);const a=xd(t,["googleSearch"]);null!=a&&Pd(e,["googleSearch"],a);const c=xd(t,["urlContext"]);return null!=c&&Pd(e,["urlContext"],c),e}function Ey(t,e){const n={},i=xd(e,["model"]);null!=i&&Pd(n,["_url","name"],yv(t,i));const r=xd(e,["config"]);return null!=r&&function(t,e){const n=xd(t,["displayName"]);void 0!==e&&null!=n&&Pd(e,["displayName"],n);const i=xd(t,["description"]);void 0!==e&&null!=i&&Pd(e,["description"],i);const r=xd(t,["defaultCheckpointId"]);void 0!==e&&null!=r&&Pd(e,["defaultCheckpointId"],r)}(r,n),n}function Sy(t,e){const n={},i=xd(e,["model"]);null!=i&&Pd(n,["_url","model"],yv(t,i));const r=xd(e,["config"]);return null!=r&&function(t,e){const n=xd(t,["displayName"]);void 0!==e&&null!=n&&Pd(e,["displayName"],n);const i=xd(t,["description"]);void 0!==e&&null!=i&&Pd(e,["description"],i);const r=xd(t,["defaultCheckpointId"]);void 0!==e&&null!=r&&Pd(e,["defaultCheckpointId"],r)}(r,n),n}function Ty(t,e){const n={},i=xd(e,["model"]);null!=i&&Pd(n,["_url","model"],yv(t,i));const r=xd(e,["image"]);null!=r&&Pd(n,["instances[0]","image"],ay(r));const o=xd(e,["upscaleFactor"]);null!=o&&Pd(n,["parameters","upscaleConfig","upscaleFactor"],o);const s=xd(e,["config"]);return null!=s&&function(t,e){const n=xd(t,["outputGcsUri"]);void 0!==e&&null!=n&&Pd(e,["parameters","storageUri"],n);const i=xd(t,["safetyFilterLevel"]);void 0!==e&&null!=i&&Pd(e,["parameters","safetySetting"],i);const r=xd(t,["personGeneration"]);void 0!==e&&null!=r&&Pd(e,["parameters","personGeneration"],r);const o=xd(t,["includeRaiReason"]);void 0!==e&&null!=o&&Pd(e,["parameters","includeRaiReason"],o);const s=xd(t,["outputMimeType"]);void 0!==e&&null!=s&&Pd(e,["parameters","outputOptions","mimeType"],s);const l=xd(t,["outputCompressionQuality"]);void 0!==e&&null!=l&&Pd(e,["parameters","outputOptions","compressionQuality"],l);const u=xd(t,["enhanceInputImage"]);void 0!==e&&null!=u&&Pd(e,["parameters","upscaleConfig","enhanceInputImage"],u);const a=xd(t,["imagePreservationFactor"]);void 0!==e&&null!=a&&Pd(e,["parameters","upscaleConfig","imagePreservationFactor"],a);const c=xd(t,["labels"]);void 0!==e&&null!=c&&Pd(e,["labels"],c);const h=xd(t,["numberOfImages"]);void 0!==e&&null!=h&&Pd(e,["parameters","sampleCount"],h);const f=xd(t,["mode"]);void 0!==e&&null!=f&&Pd(e,["parameters","mode"],f)}(s,n),n}function ky(t){const e={},n=xd(t,["uri"]);null!=n&&Pd(e,["uri"],n);const i=xd(t,["videoBytes"]);null!=i&&Pd(e,["encodedVideo"],jv(i));const r=xd(t,["mimeType"]);return null!=r&&Pd(e,["encoding"],r),e}function Iy(t){const e={},n=xd(t,["uri"]);null!=n&&Pd(e,["gcsUri"],n);const i=xd(t,["videoBytes"]);null!=i&&Pd(e,["bytesBase64Encoded"],jv(i));const r=xd(t,["mimeType"]);return null!=r&&Pd(e,["mimeType"],r),e}function _y(t){const e={},n=xd(t,["config"]);return null!=n&&function(t,e){const n=xd(t,["displayName"]);void 0!==e&&null!=n&&Pd(e,["displayName"],n)}(n,e),e}function Cy(t){const e={},n=xd(t,["name"]);null!=n&&Pd(e,["_url","name"],n);const i=xd(t,["config"]);return null!=i&&function(t,e){const n=xd(t,["force"]);void 0!==e&&null!=n&&Pd(e,["_query","force"],n)}(i,e),e}function Ay(t){const e={},n=xd(t,["name"]);null!=n&&Pd(e,["name"],n);const i=xd(t,["metadata"]);null!=i&&Pd(e,["metadata"],i);const r=xd(t,["done"]);null!=r&&Pd(e,["done"],r);const o=xd(t,["error"]);null!=o&&Pd(e,["error"],o);const s=xd(t,["response"]);return null!=s&&Pd(e,["response"],function(t){const e={},n=xd(t,["sdkHttpResponse"]);null!=n&&Pd(e,["sdkHttpResponse"],n);const i=xd(t,["parent"]);null!=i&&Pd(e,["parent"],i);const r=xd(t,["documentName"]);null!=r&&Pd(e,["documentName"],r);return e}(s)),e}function Oy(t){const e={},n=xd(t,["fileSearchStoreName"]);null!=n&&Pd(e,["_url","file_search_store_name"],n);const i=xd(t,["fileName"]);null!=i&&Pd(e,["fileName"],i);const r=xd(t,["config"]);return null!=r&&function(t,e){const n=xd(t,["customMetadata"]);if(void 0!==e&&null!=n){let t=n;Array.isArray(t)&&(t=t.map(t=>t)),Pd(e,["customMetadata"],t)}const i=xd(t,["chunkingConfig"]);void 0!==e&&null!=i&&Pd(e,["chunkingConfig"],i)}(r,e),e}function Ny(t){const e={},n=xd(t,["config"]);return null!=n&&function(t,e){const n=xd(t,["pageSize"]);void 0!==e&&null!=n&&Pd(e,["_query","pageSize"],n);const i=xd(t,["pageToken"]);void 0!==e&&null!=i&&Pd(e,["_query","pageToken"],i)}(n,e),e}function Ry(t,e){const n=xd(t,["mimeType"]);void 0!==e&&null!=n&&Pd(e,["mimeType"],n);const i=xd(t,["displayName"]);void 0!==e&&null!=i&&Pd(e,["displayName"],i);const r=xd(t,["customMetadata"]);if(void 0!==e&&null!=r){let t=r;Array.isArray(t)&&(t=t.map(t=>t)),Pd(e,["customMetadata"],t)}const o=xd(t,["chunkingConfig"]);return void 0!==e&&null!=o&&Pd(e,["chunkingConfig"],o),{}}const Py="x-goog-api-client";class xy{constructor(t){var e,n;this.clientOptions=Object.assign(Object.assign({},t),{project:t.project,location:t.location,apiKey:t.apiKey,vertexai:t.vertexai});const i={};this.clientOptions.vertexai?(i.apiVersion=null!==(e=this.clientOptions.apiVersion)&&void 0!==e?e:"v1beta1",i.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(i.apiVersion=null!==(n=this.clientOptions.apiVersion)&&void 0!==n?n:"v1beta",i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,t.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,t.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&"global"!==this.clientOptions.location?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:(this.clientOptions.project=void 0,this.clientOptions.location=void 0)}isVertexAI(){var t;return null!==(t=this.clientOptions.vertexai)&&void 0!==t&&t}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&void 0!==this.clientOptions.httpOptions.apiVersion)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&void 0!==this.clientOptions.httpOptions.baseUrl)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&void 0!==this.clientOptions.httpOptions.headers)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(t){if(!t||void 0===t.baseUrl||void 0===t.apiVersion)throw new Error("HTTP options are not correctly set.");const e=[t.baseUrl.endsWith("/")?t.baseUrl.slice(0,-1):t.baseUrl];return t.apiVersion&&""!==t.apiVersion&&e.push(t.apiVersion),e.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const t=this.getBaseUrl(),e=new URL(t);return e.protocol="http:"==e.protocol?"ws":"wss",e.toString()}setBaseUrl(t){if(!this.clientOptions.httpOptions)throw new Error("HTTP options are not correctly set.");this.clientOptions.httpOptions.baseUrl=t}constructUrl(t,e,n){const i=[this.getRequestUrlInternal(e)];n&&i.push(this.getBaseResourcePath()),""!==t&&i.push(t);return new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(t){return!this.clientOptions.apiKey&&(!!this.clientOptions.vertexai&&(!t.path.startsWith("projects/")&&("GET"!==t.httpMethod||!t.path.startsWith("publishers/google/models"))))}async request(t){let e=this.clientOptions.httpOptions;t.httpOptions&&(e=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const n=this.shouldPrependVertexProjectPath(t),i=this.constructUrl(t.path,e,n);if(t.queryParams)for(const[o,s]of Object.entries(t.queryParams))i.searchParams.append(o,String(s));let r={};if("GET"===t.httpMethod){if(t.body&&"{}"!==t.body)throw new Error("Request body should be empty for GET request, but got non empty request body")}else r.body=t.body;return r=await this.includeExtraHttpOptionsToRequestInit(r,e,i.toString(),t.abortSignal),this.unaryApiCall(i,r,t.httpMethod)}patchHttpOptions(t,e){const n=JSON.parse(JSON.stringify(t));for(const[i,r]of Object.entries(e))"object"==typeof r?n[i]=Object.assign(Object.assign({},n[i]),r):void 0!==r&&(n[i]=r);return n}async requestStream(t){let e=this.clientOptions.httpOptions;t.httpOptions&&(e=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const n=this.shouldPrependVertexProjectPath(t),i=this.constructUrl(t.path,e,n);i.searchParams.has("alt")&&"sse"===i.searchParams.get("alt")||i.searchParams.set("alt","sse");let r={};return r.body=t.body,r=await this.includeExtraHttpOptionsToRequestInit(r,e,i.toString(),t.abortSignal),this.streamApiCall(i,r,t.httpMethod)}async includeExtraHttpOptionsToRequestInit(t,e,n,i){if(e&&e.timeout||i){const n=new AbortController,r=n.signal;if(e.timeout&&(null==e?void 0:e.timeout)>0){const t=setTimeout(()=>n.abort(),e.timeout);t&&"function"==typeof t.unref&&t.unref()}i&&i.addEventListener("abort",()=>{n.abort()}),t.signal=r}return e&&null!==e.extraBody&&function(t,e){if(!e||0===Object.keys(e).length)return;if(t.body instanceof Blob)return;let n={};if("string"==typeof t.body&&t.body.length>0)try{const e=JSON.parse(t.body);if("object"!=typeof e||null===e||Array.isArray(e))return;n=e}catch(Fg){return}function i(t,e){const n=Object.assign({},t);for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)){const t=e[r],o=n[r];t&&"object"==typeof t&&!Array.isArray(t)&&o&&"object"==typeof o&&!Array.isArray(o)?n[r]=i(o,t):n[r]=t}return n}const r=i(n,e);t.body=JSON.stringify(r)}(t,e.extraBody),t.headers=await this.getHeadersInternal(e,n),t}async unaryApiCall(t,e,n){return this.apiCall(t.toString(),Object.assign(Object.assign({},e),{method:n})).then(async t=>(await My(t),new Hm(t))).catch(t=>{throw t instanceof Error?t:new Error(JSON.stringify(t))})}async streamApiCall(t,e,n){return this.apiCall(t.toString(),Object.assign(Object.assign({},e),{method:n})).then(async t=>(await My(t),this.processStreamResponse(t))).catch(t=>{throw t instanceof Error?t:new Error(JSON.stringify(t))})}processStreamResponse(t){return gw(this,arguments,function*(){var e;const n=null===(e=null==t?void 0:t.body)||void 0===e?void 0:e.getReader(),i=new TextDecoder("utf-8");if(!n)throw new Error("Response body is empty");try{let e="";const r="data:",o=["\n\n","\r\r","\r\n\r\n"];for(;;){const{done:s,value:l}=yield yw(n.read());if(s){if(e.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const u=i.decode(l,{stream:!0});try{const t=JSON.parse(u);if("error"in t){const e=JSON.parse(JSON.stringify(t.error)),n=e.status,i=e.code,r=`got status: ${n}. ${JSON.stringify(t)}`;if(i>=400&&i<600){throw new _w({message:r,status:i})}}}catch(Fg){if("ApiError"===Fg.name)throw Fg}e+=u;let a=-1,c=0;for(;;){a=-1,c=0;for(const t of o){const n=e.indexOf(t);-1!==n&&(-1===a||n<a)&&(a=n,c=t.length)}if(-1===a)break;const n=e.substring(0,a);e=e.substring(a+c);const i=n.trim();if(i.startsWith(r)){const e=i.substring(r.length).trim();try{const n=new Response(e,{headers:null==t?void 0:t.headers,status:null==t?void 0:t.status,statusText:null==t?void 0:t.statusText});yield yield yw(new Hm(n))}catch(Fg){throw new Error(`exception parsing stream chunk ${e}. ${Fg}`)}}}}}finally{n.releaseLock()}})}async apiCall(t,e){return fetch(t,e).catch(t=>{throw new Error(`exception ${t} sending request`)})}getDefaultHeaders(){const t={},e="google-genai-sdk/1.32.0 "+this.clientOptions.userAgentExtra;return t["User-Agent"]=e,t[Py]=e,t["Content-Type"]="application/json",t}async getHeadersInternal(t,e){const n=new Headers;if(t&&t.headers){for(const[e,i]of Object.entries(t.headers))n.append(e,i);t.timeout&&t.timeout>0&&n.append("X-Server-Timeout",String(Math.ceil(t.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n,e),n}getFileName(t){var e;let n="";return"string"==typeof t&&(n=t.replace(/[/\\]+$/,""),n=null!==(e=n.split(/[/\\]/).pop())&&void 0!==e?e:""),n}async uploadFile(t,e){var n;const i={};null!=e&&(i.mimeType=e.mimeType,i.name=e.name,i.displayName=e.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const r=this.clientOptions.uploader,o=await r.stat(t);i.sizeBytes=String(o.size);const s=null!==(n=null==e?void 0:e.mimeType)&&void 0!==n?n:o.type;if(void 0===s||""===s)throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=s;const l={file:i},u=this.getFileName(t),a=Rd("upload/v1beta/files",l._url),c=await this.fetchUploadUrl(a,i.sizeBytes,i.mimeType,u,l,null==e?void 0:e.httpOptions);return r.upload(t,c,this)}async uploadFileToFileSearchStore(t,e,n){var i;const r=this.clientOptions.uploader,o=await r.stat(e),s=String(o.size),l=null!==(i=null==n?void 0:n.mimeType)&&void 0!==i?i:o.type;if(void 0===l||""===l)throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const u=`upload/v1beta/${t}:uploadToFileSearchStore`,a=this.getFileName(e),c={};null!=n&&Ry(n,c);const h=await this.fetchUploadUrl(u,s,l,a,c,null==n?void 0:n.httpOptions);return r.uploadToFileSearchStore(e,h,this)}async downloadFile(t){const e=this.clientOptions.downloader;await e.download(t,this)}async fetchUploadUrl(t,e,n,i,r,o){var s;let l={};l=o||{apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e}`,"X-Goog-Upload-Header-Content-Type":`${n}`},i?{"X-Goog-Upload-File-Name":i}:{})};const u=await this.request({path:t,body:JSON.stringify(r),httpMethod:"POST",httpOptions:l});if(!u||!(null==u?void 0:u.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const a=null===(s=null==u?void 0:u.headers)||void 0===s?void 0:s["x-goog-upload-url"];if(void 0===a)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return a}}async function My(t){var e;if(void 0===t)throw new Error("response is undefined");if(!t.ok){const n=t.status;let i;i=(null===(e=t.headers.get("content-type"))||void 0===e?void 0:e.includes("application/json"))?await t.json():{error:{message:await t.text(),code:t.status,status:t.statusText}};const r=JSON.stringify(i);if(n>=400&&n<600){throw new _w({message:r,status:n})}throw new Error(r)}}function Dy(t){for(const e of t){if(Uy(e))return!0;if("object"==typeof e&&"inputSchema"in e)return!0}return false}function Ly(t){var e;const n=null!==(e=t[Py])&&void 0!==e?e:"";t[Py]=(n+" mcp_used/unknown").trimStart()}function Uy(t){return null!==t&&"object"==typeof t&&t instanceof $y}function Fy(t){return gw(this,arguments,function*(t,e=100){let n,i=0;for(;i<e;){const e=yield yw(t.listTools({cursor:n}));for(const t of e.tools)yield yield yw(t),i++;if(!e.nextCursor)break;n=e.nextCursor}})}class $y{constructor(t=[],e){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=t,this.config=e}static create(t,e){return new $y(t,e)}async initialize(){var t,e,n,i;if(this.mcpTools.length>0)return;const r={},o=[];for(const c of this.mcpClients)try{for(var s,l=!0,u=(e=void 0,bw(Fy(c)));!(t=(s=await u.next()).done);l=!0){i=s.value,l=!1;const t=i;o.push(t);const e=t.name;if(r[e])throw new Error(`Duplicate function name ${e} found in MCP tools. Please ensure function names are unique.`);r[e]=c}}catch(a){e={error:a}}finally{try{l||t||!(n=u.return)||await n.call(u)}finally{if(e)throw e.error}}this.mcpTools=o,this.functionNameToMcpClient=r}async tool(){return await this.initialize(),function(t,e={}){const n=[],i=new Set;for(const r of t){const t=r.name;if(i.has(t))throw new Error(`Duplicate function name ${t} found in MCP tools. Please ensure function names are unique.`);i.add(t);const o=Bv(r,e);o.functionDeclarations&&n.push(...o.functionDeclarations)}return{functionDeclarations:n}}(this.mcpTools,this.config)}async callTool(t){await this.initialize();const e=[];for(const n of t)if(n.name in this.functionNameToMcpClient){const t=this.functionNameToMcpClient[n.name];let i;this.config.timeout&&(i={timeout:this.config.timeout});const r=await t.callTool({name:n.name,arguments:n.args},void 0,i);e.push({functionResponse:{name:n.name,response:r.isError?{error:r}:r}})}return e}}class jy{constructor(t,e,n){this.apiClient=t,this.auth=e,this.webSocketFactory=n}async connect(t){var e,n;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");const i=this.apiClient.getWebsocketBaseUrl(),r=this.apiClient.getApiVersion(),o=function(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}(this.apiClient.getDefaultHeaders()),s=`${i}/ws/google.ai.generativelanguage.${r}.GenerativeService.BidiGenerateMusic?key=${this.apiClient.getApiKey()}`;let l=()=>{};const u=new Promise(t=>{l=t}),a=t.callbacks,c=(this.apiClient,{onopen:function(){l({})},onmessage:t=>{!async function(t,e,n){const i=new vv;let r;r=n.data instanceof Blob?JSON.parse(await n.data.text()):JSON.parse(n.data),Object.assign(i,r),e(i)}(0,a.onmessage,t)},onerror:null!==(e=null==a?void 0:a.onerror)&&void 0!==e?e:function(t){},onclose:null!==(n=null==a?void 0:a.onclose)&&void 0!==n?n:function(t){}}),h=this.webSocketFactory.create(s,function(t){const e={};return t.forEach((t,n)=>{e[n]=t}),e}(o),c);h.connect(),await u;const f={setup:{model:yv(this.apiClient,t.model)}};return h.send(JSON.stringify(f)),new Gy(h,this.apiClient)}}class Gy{constructor(t,e){this.conn=t,this.apiClient=e}async setWeightedPrompts(t){if(!t.weightedPrompts||0===Object.keys(t.weightedPrompts).length)throw new Error("Weighted prompts must be set and contain at least one entry.");const e=function(t){const e={},n=xd(t,["weightedPrompts"]);if(null!=n){let t=n;Array.isArray(t)&&(t=t.map(t=>t)),Pd(e,["weightedPrompts"],t)}return e}(t);this.conn.send(JSON.stringify({clientContent:e}))}async setMusicGenerationConfig(t){t.musicGenerationConfig||(t.musicGenerationConfig={});const e=function(t){const e={},n=xd(t,["musicGenerationConfig"]);return null!=n&&Pd(e,["musicGenerationConfig"],n),e}(t);this.conn.send(JSON.stringify(e))}sendPlaybackControl(t){const e={playbackControl:t};this.conn.send(JSON.stringify(e))}play(){this.sendPlaybackControl(jm.PLAY)}pause(){this.sendPlaybackControl(jm.PAUSE)}stop(){this.sendPlaybackControl(jm.STOP)}resetContext(){this.sendPlaybackControl(jm.RESET_CONTEXT)}close(){this.conn.close()}}class Vy{constructor(t,e,n){this.apiClient=t,this.auth=e,this.webSocketFactory=n,this.music=new jy(this.apiClient,this.auth,this.webSocketFactory)}async connect(t){var e,n,i,r,o,s;if(t.config&&t.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const l=this.apiClient.getWebsocketBaseUrl(),u=this.apiClient.getApiVersion();let a;const c=this.apiClient.getHeaders();t.config&&t.config.tools&&Dy(t.config.tools)&&Ly(c);const h=function(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}(c);if(this.apiClient.isVertexAI())a=`${l}/ws/google.cloud.aiplatform.${u}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(h,a);else{const t=this.apiClient.getApiKey();let e="BidiGenerateContent",n="key";(null==t?void 0:t.startsWith("auth_tokens/"))&&(e="BidiGenerateContentConstrained",n="access_token"),a=`${l}/ws/google.ai.generativelanguage.${u}.GenerativeService.${e}?${n}=${t}`}let f=()=>{};const d=new Promise(t=>{f=t}),p=t.callbacks,m=this.apiClient,v={onopen:function(){var t;null===(t=null==p?void 0:p.onopen)||void 0===t||t.call(p),f({})},onmessage:t=>{!async function(t,e,n){const i=new mv;let r;r=n.data instanceof Blob?await n.data.text():n.data instanceof ArrayBuffer?(new TextDecoder).decode(n.data):n.data;const o=JSON.parse(r);if(t.isVertexAI()){const t=Dw(o);Object.assign(i,t)}else{const t=o;Object.assign(i,t)}e(i)}(m,p.onmessage,t)},onerror:null!==(e=null==p?void 0:p.onerror)&&void 0!==e?e:function(t){},onclose:null!==(n=null==p?void 0:p.onclose)&&void 0!==n?n:function(t){}},w=this.webSocketFactory.create(a,function(t){const e={};return t.forEach((t,n)=>{e[n]=t}),e}(h),v);w.connect(),await d;let y=yv(this.apiClient,t.model);if(this.apiClient.isVertexAI()&&y.startsWith("publishers/")){y=`projects/${this.apiClient.getProject()}/locations/${this.apiClient.getLocation()}/`+y}let g={};this.apiClient.isVertexAI()&&void 0===(null===(i=t.config)||void 0===i?void 0:i.responseModalities)&&(void 0===t.config?t.config={responseModalities:[kp.AUDIO]}:t.config.responseModalities=[kp.AUDIO]),null===(r=t.config)||void 0===r||r.generationConfig;const b=null!==(s=null===(o=t.config)||void 0===o?void 0:o.tools)&&void 0!==s?s:[],E=[];for(const T of b)if(this.isCallableTool(T)){const t=T;E.push(await t.tool())}else E.push(T);E.length>0&&(t.config.tools=E);const S={model:y,config:t.config,callbacks:t.callbacks};return g=this.apiClient.isVertexAI()?function(t,e){const n={},i=xd(e,["model"]);null!=i&&Pd(n,["setup","model"],yv(t,i));const r=xd(e,["config"]);return null!=r&&Pd(n,["config"],Pw(r,n)),n}(this.apiClient,S):function(t,e){const n={},i=xd(e,["model"]);null!=i&&Pd(n,["setup","model"],yv(t,i));const r=xd(e,["config"]);return null!=r&&Pd(n,["config"],Rw(r,n)),n}(this.apiClient,S),delete g.config,w.send(JSON.stringify(g)),new Hy(w,this.apiClient)}isCallableTool(t){return"callTool"in t&&"function"==typeof t.callTool}}const qy={turnComplete:!0};class Hy{constructor(t,e){this.conn=t,this.apiClient=e}tLiveClientContent(t,e){if(null!==e.turns&&void 0!==e.turns){let i=[];try{i=Rv(e.turns),t.isVertexAI()||(i=i.map(t=>$w(t)))}catch(n){throw new Error(`Failed to parse client content "turns", type: '${typeof e.turns}'`)}return{clientContent:{turns:i,turnComplete:e.turnComplete}}}return{clientContent:{turnComplete:e.turnComplete}}}tLiveClienttToolResponse(t,e){let n=[];if(null==e.functionResponses)throw new Error("functionResponses is required.");if(n=Array.isArray(e.functionResponses)?e.functionResponses:[e.functionResponses],0===n.length)throw new Error("functionResponses is required.");for(const i of n){if("object"!=typeof i||null===i||!("name"in i)||!("response"in i))throw new Error(`Could not parse function response, type '${typeof i}'.`);if(!t.isVertexAI()&&!("id"in i))throw new Error("FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.")}return{toolResponse:{functionResponses:n}}}sendClientContent(t){t=Object.assign(Object.assign({},qy),t);const e=this.tLiveClientContent(this.apiClient,t);this.conn.send(JSON.stringify(e))}sendRealtimeInput(t){let e={};e=this.apiClient.isVertexAI()?{realtimeInput:Mw(t)}:{realtimeInput:xw(t)},this.conn.send(JSON.stringify(e))}sendToolResponse(t){if(null==t.functionResponses)throw new Error("Tool response parameters are required.");const e=this.tLiveClienttToolResponse(this.apiClient,t);this.conn.send(JSON.stringify(e))}close(){this.conn.close()}}function By(t){var e,n,i;if(null===(e=null==t?void 0:t.automaticFunctionCalling)||void 0===e?void 0:e.disable)return!0;let r=!1;for(const s of null!==(n=null==t?void 0:t.tools)&&void 0!==n?n:[])if(Jy(s)){r=!0;break}if(!r)return!0;const o=null===(i=null==t?void 0:t.automaticFunctionCalling)||void 0===i?void 0:i.maximumRemoteCalls;return!!(o&&(o<0||!Number.isInteger(o))||0==o)}function Jy(t){return"callTool"in t&&"function"==typeof t.callTool}function zy(t){var e;const n=[];return(null===(e=null==t?void 0:t.config)||void 0===e?void 0:e.tools)?(t.config.tools.forEach((t,e)=>{if(Jy(t))return;const i=t;i.functionDeclarations&&i.functionDeclarations.length>0&&n.push(e)}),n):n}function Ky(t){var e;return!(null===(e=null==t?void 0:t.automaticFunctionCalling)||void 0===e?void 0:e.ignoreCallHistory)}class Wy extends Nd{constructor(t){super(),this.apiClient=t,this.generateContent=async t=>{var e,n,i,r,o;const s=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!function(t){var e,n,i;return null!==(i=null===(n=null===(e=t.config)||void 0===e?void 0:e.tools)||void 0===n?void 0:n.some(t=>Jy(t)))&&void 0!==i&&i}(t)||By(t.config))return await this.generateContentInternal(s);const l=zy(t);if(l.length>0){const t=l.map(t=>`tools[${t}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${t}.`)}let u,a;const c=Rv(s.contents),h=null!==(i=null===(n=null===(e=s.config)||void 0===e?void 0:e.automaticFunctionCalling)||void 0===n?void 0:n.maximumRemoteCalls)&&void 0!==i?i:10;let f=0;for(;f<h&&(u=await this.generateContentInternal(s),u.functionCalls&&0!==u.functionCalls.length);){const e=u.candidates[0].content,n=[];for(const i of null!==(o=null===(r=t.config)||void 0===r?void 0:r.tools)&&void 0!==o?o:[])if(Jy(i)){const t=i,e=await t.callTool(u.functionCalls);n.push(...e)}f++,a={role:"user",parts:n},s.contents=Rv(s.contents),s.contents.push(e),s.contents.push(a),Ky(s.config)&&(c.push(e),c.push(a))}return Ky(s.config)&&(u.automaticFunctionCallingHistory=c),u},this.generateContentStream=async t=>{var e,n,i,r,o;if(this.maybeMoveToResponseJsonSchem(t),By(t.config)){const e=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(e)}const s=zy(t);if(s.length>0){const t=s.map(t=>`tools[${t}]`).join(", ");throw new Error(`Incompatible tools found at ${t}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const l=null===(i=null===(n=null===(e=null==t?void 0:t.config)||void 0===e?void 0:e.toolConfig)||void 0===n?void 0:n.functionCallingConfig)||void 0===i?void 0:i.streamFunctionCallArguments,u=null===(o=null===(r=null==t?void 0:t.config)||void 0===r?void 0:r.automaticFunctionCalling)||void 0===o?void 0:o.disable;if(l&&!u)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(t=>{var e;let n;const i=[];if(null==t?void 0:t.generatedImages)for(const o of t.generatedImages)o&&(null==o?void 0:o.safetyAttributes)&&"Positive Prompt"===(null===(e=null==o?void 0:o.safetyAttributes)||void 0===e?void 0:e.contentType)?n=null==o?void 0:o.safetyAttributes:i.push(o);let r;return r=n?{generatedImages:i,positivePromptSafetyAttributes:n,sdkHttpResponse:t.sdkHttpResponse}:{generatedImages:i,sdkHttpResponse:t.sdkHttpResponse},r}),this.list=async t=>{var e;const n={config:Object.assign(Object.assign({},{queryBase:!0}),null==t?void 0:t.config)};if(this.apiClient.isVertexAI()&&!n.config.queryBase){if(null===(e=n.config)||void 0===e?void 0:e.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");n.config.filter="labels.tune-type:*"}return new lw(Vm.PAGED_ITEM_MODELS,t=>this.listInternal(t),await this.listInternal(n),n)},this.editImage=async t=>{const e={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(e.referenceImages=t.referenceImages.map(t=>t.toReferenceImageAPI())),await this.editImageInternal(e)},this.upscaleImage=async t=>{let e={numberOfImages:1,mode:"upscale"};t.config&&(e=Object.assign(Object.assign({},e),t.config));const n={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:e};return await this.upscaleImageInternal(n)},this.generateVideos=async t=>{var e,n,i,r,o,s;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||((null===(e=t.video)||void 0===e?void 0:e.uri)&&(null===(n=t.video)||void 0===n?void 0:n.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:(null===(r=null===(i=t.source)||void 0===i?void 0:i.video)||void 0===r?void 0:r.uri)&&(null===(s=null===(o=t.source)||void 0===o?void 0:o.video)||void 0===s?void 0:s.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(t){t.config&&t.config.responseSchema&&(t.config.responseJsonSchema||Object.keys(t.config.responseSchema).includes("$schema")&&(t.config.responseJsonSchema=t.config.responseSchema,delete t.config.responseSchema))}async processParamsMaybeAddMcpUsage(t){var e,n,i;const r=null===(e=t.config)||void 0===e?void 0:e.tools;if(!r)return t;const o=await Promise.all(r.map(async t=>{if(Jy(t)){const e=t;return await e.tool()}return t})),s={model:t.model,contents:t.contents,config:Object.assign(Object.assign({},t.config),{tools:o})};if(s.config.tools=o,t.config&&t.config.tools&&Dy(t.config.tools)){const e=null!==(i=null===(n=t.config.httpOptions)||void 0===n?void 0:n.headers)&&void 0!==i?i:{};let r=Object.assign({},e);0===Object.keys(r).length&&(r=this.apiClient.getDefaultHeaders()),Ly(r),s.config.httpOptions=Object.assign(Object.assign({},t.config.httpOptions),{headers:r})}return s}async initAfcToolsMap(t){var e,n,i;const r=new Map;for(const o of null!==(n=null===(e=t.config)||void 0===e?void 0:e.tools)&&void 0!==n?n:[])if(Jy(o)){const t=o,e=await t.tool();for(const n of null!==(i=e.functionDeclarations)&&void 0!==i?i:[]){if(!n.name)throw new Error("Function declaration name is required.");if(r.has(n.name))throw new Error(`Duplicate tool declaration name: ${n.name}`);r.set(n.name,t)}}return r}async processAfcStream(t){var e,n,i;const r=null!==(i=null===(n=null===(e=t.config)||void 0===e?void 0:e.automaticFunctionCalling)||void 0===n?void 0:n.maximumRemoteCalls)&&void 0!==i?i:10;let o=!1,s=0;return function(t,e,n){return gw(this,arguments,function*(){for(var i,l,u,a,c,h;s<r;){o&&(s++,o=!1);const v=yield yw(t.processParamsMaybeAddMcpUsage(n)),w=yield yw(t.generateContentStreamInternal(v)),y=[],g=[];try{for(var f,d=!0,p=(l=void 0,bw(w));!(i=(f=yield yw(p.next())).done);d=!0){a=f.value,d=!1;const t=a;if(yield yield yw(t),t.candidates&&(null===(c=t.candidates[0])||void 0===c?void 0:c.content)){g.push(t.candidates[0].content);for(const n of null!==(h=t.candidates[0].content.parts)&&void 0!==h?h:[])if(s<r&&n.functionCall){if(!n.functionCall.name)throw new Error("Function call name was not returned by the model.");if(!e.has(n.functionCall.name))throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${e.keys()}, mising tool: ${n.functionCall.name}`);{const t=yield yw(e.get(n.functionCall.name).callTool([n.functionCall]));y.push(...t)}}}}}catch(m){l={error:m}}finally{try{d||i||!(u=p.return)||(yield yw(u.call(p)))}finally{if(l)throw l.error}}if(!(y.length>0))break;{o=!0;const t=new Bm;t.candidates=[{content:{role:"user",parts:y}}],yield yield yw(t);const e=[];e.push(...g),e.push({role:"user",parts:y});const i=Rv(n.contents).concat(e);n.contents=i}}})}(this,await this.initAfcToolsMap(t),t)}async generateContentInternal(t){var e,n,i,r;let o,s="",l={};if(this.apiClient.isVertexAI()){const i=Kw(this.apiClient,t);return s=Rd("{model}:generateContent",i._url),l=i._query,delete i._url,delete i._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(i),httpMethod:"POST",httpOptions:null===(e=t.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(n=t.config)||void 0===n?void 0:n.abortSignal}).then(t=>t.json().then(e=>{const n=e;return n.sdkHttpResponse={headers:t.headers},n})),o.then(t=>{const e=Yw(t),n=new Bm;return Object.assign(n,e),n})}{const e=zw(this.apiClient,t);return s=Rd("{model}:generateContent",e._url),l=e._query,delete e._url,delete e._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(e),httpMethod:"POST",httpOptions:null===(i=t.config)||void 0===i?void 0:i.httpOptions,abortSignal:null===(r=t.config)||void 0===r?void 0:r.abortSignal}).then(t=>t.json().then(e=>{const n=e;return n.sdkHttpResponse={headers:t.headers},n})),o.then(t=>{const e=Ww(t),n=new Bm;return Object.assign(n,e),n})}}async generateContentStreamInternal(t){var e,n,i,r;let o,s="",l={};if(this.apiClient.isVertexAI()){const i=Kw(this.apiClient,t);s=Rd("{model}:streamGenerateContent?alt=sse",i._url),l=i._query,delete i._url,delete i._query;return o=this.apiClient.requestStream({path:s,queryParams:l,body:JSON.stringify(i),httpMethod:"POST",httpOptions:null===(e=t.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(n=t.config)||void 0===n?void 0:n.abortSignal}),o.then(function(t){return gw(this,arguments,function*(){var e,n,i,r;try{for(var o,s=!0,l=bw(t);!(e=(o=yield yw(l.next())).done);s=!0){r=o.value,s=!1;const t=r,e=Yw(yield yw(t.json()));e.sdkHttpResponse={headers:t.headers};const n=new Bm;Object.assign(n,e),yield yield yw(n)}}catch(u){n={error:u}}finally{try{s||e||!(i=l.return)||(yield yw(i.call(l)))}finally{if(n)throw n.error}}})})}{const e=zw(this.apiClient,t);s=Rd("{model}:streamGenerateContent?alt=sse",e._url),l=e._query,delete e._url,delete e._query;return o=this.apiClient.requestStream({path:s,queryParams:l,body:JSON.stringify(e),httpMethod:"POST",httpOptions:null===(i=t.config)||void 0===i?void 0:i.httpOptions,abortSignal:null===(r=t.config)||void 0===r?void 0:r.abortSignal}),o.then(function(t){return gw(this,arguments,function*(){var e,n,i,r;try{for(var o,s=!0,l=bw(t);!(e=(o=yield yw(l.next())).done);s=!0){r=o.value,s=!1;const t=r,e=Ww(yield yw(t.json()));e.sdkHttpResponse={headers:t.headers};const n=new Bm;Object.assign(n,e),yield yield yw(n)}}catch(u){n={error:u}}finally{try{s||e||!(i=l.return)||(yield yw(i.call(l)))}finally{if(n)throw n.error}}})})}}async embedContent(t){var e,n,i,r;let o,s="",l={};if(this.apiClient.isVertexAI()){const i=Hw(this.apiClient,t);return s=Rd("{model}:predict",i._url),l=i._query,delete i._url,delete i._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(i),httpMethod:"POST",httpOptions:null===(e=t.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(n=t.config)||void 0===n?void 0:n.abortSignal}).then(t=>t.json().then(e=>{const n=e;return n.sdkHttpResponse={headers:t.headers},n})),o.then(t=>{const e=function(t){const e={},n=xd(t,["sdkHttpResponse"]);null!=n&&Pd(e,["sdkHttpResponse"],n);const i=xd(t,["predictions[]","embeddings"]);if(null!=i){let t=i;Array.isArray(t)&&(t=t.map(t=>Fw(t))),Pd(e,["embeddings"],t)}const r=xd(t,["metadata"]);return null!=r&&Pd(e,["metadata"],r),e}(t),n=new Jm;return Object.assign(n,e),n})}{const e=qw(this.apiClient,t);return s=Rd("{model}:batchEmbedContents",e._url),l=e._query,delete e._url,delete e._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(e),httpMethod:"POST",httpOptions:null===(i=t.config)||void 0===i?void 0:i.httpOptions,abortSignal:null===(r=t.config)||void 0===r?void 0:r.abortSignal}).then(t=>t.json().then(e=>{const n=e;return n.sdkHttpResponse={headers:t.headers},n})),o.then(t=>{const e=function(t){const e={},n=xd(t,["sdkHttpResponse"]);null!=n&&Pd(e,["sdkHttpResponse"],n);const i=xd(t,["embeddings"]);if(null!=i){let t=i;Array.isArray(t)&&(t=t.map(t=>t)),Pd(e,["embeddings"],t)}const r=xd(t,["metadata"]);return null!=r&&Pd(e,["metadata"],r),e}(t),n=new Jm;return Object.assign(n,e),n})}}async generateImagesInternal(t){var e,n,i,r;let o,s="",l={};if(this.apiClient.isVertexAI()){const i=Qw(this.apiClient,t);return s=Rd("{model}:predict",i._url),l=i._query,delete i._url,delete i._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(i),httpMethod:"POST",httpOptions:null===(e=t.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(n=t.config)||void 0===n?void 0:n.abortSignal}).then(t=>t.json().then(e=>{const n=e;return n.sdkHttpResponse={headers:t.headers},n})),o.then(t=>{const e=function(t){const e={},n=xd(t,["sdkHttpResponse"]);null!=n&&Pd(e,["sdkHttpResponse"],n);const i=xd(t,["predictions"]);if(null!=i){let t=i;Array.isArray(t)&&(t=t.map(t=>sy(t))),Pd(e,["generatedImages"],t)}const r=xd(t,["positivePromptSafetyAttributes"]);return null!=r&&Pd(e,["positivePromptSafetyAttributes"],vy(r)),e}(t),n=new zm;return Object.assign(n,e),n})}{const e=Xw(this.apiClient,t);return s=Rd("{model}:predict",e._url),l=e._query,delete e._url,delete e._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(e),httpMethod:"POST",httpOptions:null===(i=t.config)||void 0===i?void 0:i.httpOptions,abortSignal:null===(r=t.config)||void 0===r?void 0:r.abortSignal}).then(t=>t.json().then(e=>{const n=e;return n.sdkHttpResponse={headers:t.headers},n})),o.then(t=>{const e=Zw(t),n=new zm;return Object.assign(n,e),n})}}async editImageInternal(t){var e,n;let i,r="",o={};if(this.apiClient.isVertexAI()){const s=Vw(this.apiClient,t);return r=Rd("{model}:predict",s._url),o=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(e=t.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(n=t.config)||void 0===n?void 0:n.abortSignal}).then(t=>t.json().then(e=>{const n=e;return n.sdkHttpResponse={headers:t.headers},n})),i.then(t=>{const e=function(t){const e={},n=xd(t,["sdkHttpResponse"]);null!=n&&Pd(e,["sdkHttpResponse"],n);const i=xd(t,["predictions"]);if(null!=i){let t=i;Array.isArray(t)&&(t=t.map(t=>sy(t))),Pd(e,["generatedImages"],t)}return e}(t),n=new Km;return Object.assign(n,e),n})}throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(t){var e,n;let i,r="",o={};if(this.apiClient.isVertexAI()){const s=Ty(this.apiClient,t);return r=Rd("{model}:predict",s._url),o=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(e=t.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(n=t.config)||void 0===n?void 0:n.abortSignal}).then(t=>t.json().then(e=>{const n=e;return n.sdkHttpResponse={headers:t.headers},n})),i.then(t=>{const e=function(t){const e={},n=xd(t,["sdkHttpResponse"]);null!=n&&Pd(e,["sdkHttpResponse"],n);const i=xd(t,["predictions"]);if(null!=i){let t=i;Array.isArray(t)&&(t=t.map(t=>sy(t))),Pd(e,["generatedImages"],t)}return e}(t),n=new Wm;return Object.assign(n,e),n})}throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(t){var e,n;let i,r="",o={};if(this.apiClient.isVertexAI()){const s=py(this.apiClient,t);return r=Rd("{model}:predict",s._url),o=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(e=t.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(n=t.config)||void 0===n?void 0:n.abortSignal}).then(t=>t.json()),i.then(t=>{const e=function(t){const e={},n=xd(t,["predictions"]);if(null!=n){let t=n;Array.isArray(t)&&(t=t.map(t=>sy(t))),Pd(e,["generatedImages"],t)}return e}(t),n=new Ym;return Object.assign(n,e),n})}throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(t){var e,n;let i,r="",o={};if(this.apiClient.isVertexAI()){const s=wy(this.apiClient,t);return r=Rd("{model}:predict",s._url),o=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(e=t.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(n=t.config)||void 0===n?void 0:n.abortSignal}).then(t=>t.json()),i.then(t=>{const e=yy(t),n=new Xm;return Object.assign(n,e),n})}throw new Error("This method is only supported by the Vertex AI.")}async get(t){var e,n,i,r;let o,s="",l={};if(this.apiClient.isVertexAI()){const i=function(t,e){const n={},i=xd(e,["model"]);return null!=i&&Pd(n,["_url","name"],yv(t,i)),n}(this.apiClient,t);return s=Rd("{name}",i._url),l=i._query,delete i._url,delete i._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(i),httpMethod:"GET",httpOptions:null===(e=t.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(n=t.config)||void 0===n?void 0:n.abortSignal}).then(t=>t.json()),o.then(t=>dy(t))}{const e=function(t,e){const n={},i=xd(e,["model"]);return null!=i&&Pd(n,["_url","name"],yv(t,i)),n}(this.apiClient,t);return s=Rd("{name}",e._url),l=e._query,delete e._url,delete e._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(e),httpMethod:"GET",httpOptions:null===(i=t.config)||void 0===i?void 0:i.httpOptions,abortSignal:null===(r=t.config)||void 0===r?void 0:r.abortSignal}).then(t=>t.json()),o.then(t=>fy(t))}}async listInternal(t){var e,n,i,r;let o,s="",l={};if(this.apiClient.isVertexAI()){const i=hy(this.apiClient,t);return s=Rd("{models_url}",i._url),l=i._query,delete i._url,delete i._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(i),httpMethod:"GET",httpOptions:null===(e=t.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(n=t.config)||void 0===n?void 0:n.abortSignal}).then(t=>t.json().then(e=>{const n=e;return n.sdkHttpResponse={headers:t.headers},n})),o.then(t=>{const e=function(t){const e={},n=xd(t,["sdkHttpResponse"]);null!=n&&Pd(e,["sdkHttpResponse"],n);const i=xd(t,["nextPageToken"]);null!=i&&Pd(e,["nextPageToken"],i);const r=xd(t,["_self"]);if(null!=r){let t=qv(r);Array.isArray(t)&&(t=t.map(t=>dy(t))),Pd(e,["models"],t)}return e}(t),n=new Qm;return Object.assign(n,e),n})}{const e=cy(this.apiClient,t);return s=Rd("{models_url}",e._url),l=e._query,delete e._url,delete e._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(e),httpMethod:"GET",httpOptions:null===(i=t.config)||void 0===i?void 0:i.httpOptions,abortSignal:null===(r=t.config)||void 0===r?void 0:r.abortSignal}).then(t=>t.json().then(e=>{const n=e;return n.sdkHttpResponse={headers:t.headers},n})),o.then(t=>{const e=function(t){const e={},n=xd(t,["sdkHttpResponse"]);null!=n&&Pd(e,["sdkHttpResponse"],n);const i=xd(t,["nextPageToken"]);null!=i&&Pd(e,["nextPageToken"],i);const r=xd(t,["_self"]);if(null!=r){let t=qv(r);Array.isArray(t)&&(t=t.map(t=>fy(t))),Pd(e,["models"],t)}return e}(t),n=new Qm;return Object.assign(n,e),n})}}async update(t){var e,n,i,r;let o,s="",l={};if(this.apiClient.isVertexAI()){const i=Sy(this.apiClient,t);return s=Rd("{model}",i._url),l=i._query,delete i._url,delete i._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(i),httpMethod:"PATCH",httpOptions:null===(e=t.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(n=t.config)||void 0===n?void 0:n.abortSignal}).then(t=>t.json()),o.then(t=>dy(t))}{const e=Ey(this.apiClient,t);return s=Rd("{name}",e._url),l=e._query,delete e._url,delete e._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(e),httpMethod:"PATCH",httpOptions:null===(i=t.config)||void 0===i?void 0:i.httpOptions,abortSignal:null===(r=t.config)||void 0===r?void 0:r.abortSignal}).then(t=>t.json()),o.then(t=>fy(t))}}async delete(t){var e,n,i,r;let o,s="",l={};if(this.apiClient.isVertexAI()){const i=function(t,e){const n={},i=xd(e,["model"]);return null!=i&&Pd(n,["_url","name"],yv(t,i)),n}(this.apiClient,t);return s=Rd("{name}",i._url),l=i._query,delete i._url,delete i._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(i),httpMethod:"DELETE",httpOptions:null===(e=t.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(n=t.config)||void 0===n?void 0:n.abortSignal}).then(t=>t.json().then(e=>{const n=e;return n.sdkHttpResponse={headers:t.headers},n})),o.then(t=>{const e=function(t){const e={},n=xd(t,["sdkHttpResponse"]);return null!=n&&Pd(e,["sdkHttpResponse"],n),e}(t),n=new Zm;return Object.assign(n,e),n})}{const e=function(t,e){const n={},i=xd(e,["model"]);return null!=i&&Pd(n,["_url","name"],yv(t,i)),n}(this.apiClient,t);return s=Rd("{name}",e._url),l=e._query,delete e._url,delete e._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(e),httpMethod:"DELETE",httpOptions:null===(i=t.config)||void 0===i?void 0:i.httpOptions,abortSignal:null===(r=t.config)||void 0===r?void 0:r.abortSignal}).then(t=>t.json().then(e=>{const n=e;return n.sdkHttpResponse={headers:t.headers},n})),o.then(t=>{const e=function(t){const e={},n=xd(t,["sdkHttpResponse"]);return null!=n&&Pd(e,["sdkHttpResponse"],n),e}(t),n=new Zm;return Object.assign(n,e),n})}}async countTokens(t){var e,n,i,r;let o,s="",l={};if(this.apiClient.isVertexAI()){const i=function(t,e){const n={},i=xd(e,["model"]);null!=i&&Pd(n,["_url","model"],yv(t,i));const r=xd(e,["contents"]);if(null!=r){let t=Rv(r);Array.isArray(t)&&(t=t.map(t=>t)),Pd(n,["contents"],t)}const o=xd(e,["config"]);return null!=o&&jw(o,n),n}(this.apiClient,t);return s=Rd("{model}:countTokens",i._url),l=i._query,delete i._url,delete i._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(i),httpMethod:"POST",httpOptions:null===(e=t.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(n=t.config)||void 0===n?void 0:n.abortSignal}).then(t=>t.json().then(e=>{const n=e;return n.sdkHttpResponse={headers:t.headers},n})),o.then(t=>{const e=function(t){const e={},n=xd(t,["sdkHttpResponse"]);null!=n&&Pd(e,["sdkHttpResponse"],n);const i=xd(t,["totalTokens"]);return null!=i&&Pd(e,["totalTokens"],i),e}(t),n=new tv;return Object.assign(n,e),n})}{const e=Gw(this.apiClient,t);return s=Rd("{model}:countTokens",e._url),l=e._query,delete e._url,delete e._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(e),httpMethod:"POST",httpOptions:null===(i=t.config)||void 0===i?void 0:i.httpOptions,abortSignal:null===(r=t.config)||void 0===r?void 0:r.abortSignal}).then(t=>t.json().then(e=>{const n=e;return n.sdkHttpResponse={headers:t.headers},n})),o.then(t=>{const e=function(t){const e={},n=xd(t,["sdkHttpResponse"]);null!=n&&Pd(e,["sdkHttpResponse"],n);const i=xd(t,["totalTokens"]);null!=i&&Pd(e,["totalTokens"],i);const r=xd(t,["cachedContentTokenCount"]);return null!=r&&Pd(e,["cachedContentTokenCount"],r),e}(t),n=new tv;return Object.assign(n,e),n})}}async computeTokens(t){var e,n;let i,r="",o={};if(this.apiClient.isVertexAI()){const s=function(t,e){const n={},i=xd(e,["model"]);null!=i&&Pd(n,["_url","model"],yv(t,i));const r=xd(e,["contents"]);if(null!=r){let t=Rv(r);Array.isArray(t)&&(t=t.map(t=>t)),Pd(n,["contents"],t)}return n}(this.apiClient,t);return r=Rd("{model}:computeTokens",s._url),o=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(e=t.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(n=t.config)||void 0===n?void 0:n.abortSignal}).then(t=>t.json().then(e=>{const n=e;return n.sdkHttpResponse={headers:t.headers},n})),i.then(t=>{const e=function(t){const e={},n=xd(t,["sdkHttpResponse"]);null!=n&&Pd(e,["sdkHttpResponse"],n);const i=xd(t,["tokensInfo"]);if(null!=i){let t=i;Array.isArray(t)&&(t=t.map(t=>t)),Pd(e,["tokensInfo"],t)}return e}(t),n=new ev;return Object.assign(n,e),n})}throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(t){var e,n,i,r;let o,s="",l={};if(this.apiClient.isVertexAI()){const i=oy(this.apiClient,t);return s=Rd("{model}:predictLongRunning",i._url),l=i._query,delete i._url,delete i._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(i),httpMethod:"POST",httpOptions:null===(e=t.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(n=t.config)||void 0===n?void 0:n.abortSignal}).then(t=>t.json()),o.then(t=>{const e=iy(t),n=new nv;return Object.assign(n,e),n})}{const e=ry(this.apiClient,t);return s=Rd("{model}:predictLongRunning",e._url),l=e._query,delete e._url,delete e._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(e),httpMethod:"POST",httpOptions:null===(i=t.config)||void 0===i?void 0:i.httpOptions,abortSignal:null===(r=t.config)||void 0===r?void 0:r.abortSignal}).then(t=>t.json()),o.then(t=>{const e=ny(t),n=new nv;return Object.assign(n,e),n})}}}class Yy extends Nd{constructor(t){super(),this.apiClient=t}async getVideosOperation(t){const e=t.operation,n=t.config;if(void 0===e.name||""===e.name)throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const t=e.name.split("/operations/")[0];let i;n&&"httpOptions"in n&&(i=n.httpOptions);const r=await this.fetchPredictVideosOperationInternal({operationName:e.name,resourceName:t,config:{httpOptions:i}});return e._fromAPIResponse({apiResponse:r,_isVertexAI:!0})}{const t=await this.getVideosOperationInternal({operationName:e.name,config:n});return e._fromAPIResponse({apiResponse:t,_isVertexAI:!1})}}async get(t){const e=t.operation,n=t.config;if(void 0===e.name||""===e.name)throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const t=e.name.split("/operations/")[0];let i;n&&"httpOptions"in n&&(i=n.httpOptions);const r=await this.fetchPredictVideosOperationInternal({operationName:e.name,resourceName:t,config:{httpOptions:i}});return e._fromAPIResponse({apiResponse:r,_isVertexAI:!0})}{const t=await this.getVideosOperationInternal({operationName:e.name,config:n});return e._fromAPIResponse({apiResponse:t,_isVertexAI:!1})}}async getVideosOperationInternal(t){var e,n,i,r;let o,s="",l={};if(this.apiClient.isVertexAI()){const i=function(t){const e={},n=xd(t,["operationName"]);return null!=n&&Pd(e,["_url","operationName"],n),e}(t);return s=Rd("{operationName}",i._url),l=i._query,delete i._url,delete i._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(i),httpMethod:"GET",httpOptions:null===(e=t.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(n=t.config)||void 0===n?void 0:n.abortSignal}).then(t=>t.json()),o}{const e=function(t){const e={},n=xd(t,["operationName"]);return null!=n&&Pd(e,["_url","operationName"],n),e}(t);return s=Rd("{operationName}",e._url),l=e._query,delete e._url,delete e._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(e),httpMethod:"GET",httpOptions:null===(i=t.config)||void 0===i?void 0:i.httpOptions,abortSignal:null===(r=t.config)||void 0===r?void 0:r.abortSignal}).then(t=>t.json()),o}}async fetchPredictVideosOperationInternal(t){var e,n;let i,r="",o={};if(this.apiClient.isVertexAI()){const s=function(t){const e={},n=xd(t,["operationName"]);null!=n&&Pd(e,["operationName"],n);const i=xd(t,["resourceName"]);return null!=i&&Pd(e,["_url","resourceName"],i),e}(t);return r=Rd("{resourceName}:fetchPredictOperation",s._url),o=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(e=t.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(n=t.config)||void 0===n?void 0:n.abortSignal}).then(t=>t.json()),i}throw new Error("This method is only supported by the Vertex AI.")}}function Xy(t){const e={},n=xd(t,["parts"]);if(null!=n){let t=n;Array.isArray(t)&&(t=t.map(t=>function(t){const e={},n=xd(t,["mediaResolution"]);null!=n&&Pd(e,["mediaResolution"],n);const i=xd(t,["codeExecutionResult"]);null!=i&&Pd(e,["codeExecutionResult"],i);const r=xd(t,["executableCode"]);null!=r&&Pd(e,["executableCode"],r);const o=xd(t,["fileData"]);null!=o&&Pd(e,["fileData"],function(t){const e={};if(void 0!==xd(t,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const n=xd(t,["fileUri"]);null!=n&&Pd(e,["fileUri"],n);const i=xd(t,["mimeType"]);null!=i&&Pd(e,["mimeType"],i);return e}(o));const s=xd(t,["functionCall"]);null!=s&&Pd(e,["functionCall"],function(t){const e={},n=xd(t,["id"]);null!=n&&Pd(e,["id"],n);const i=xd(t,["args"]);null!=i&&Pd(e,["args"],i);const r=xd(t,["name"]);null!=r&&Pd(e,["name"],r);if(void 0!==xd(t,["partialArgs"]))throw new Error("partialArgs parameter is not supported in Gemini API.");if(void 0!==xd(t,["willContinue"]))throw new Error("willContinue parameter is not supported in Gemini API.");return e}(s));const l=xd(t,["functionResponse"]);null!=l&&Pd(e,["functionResponse"],l);const u=xd(t,["inlineData"]);null!=u&&Pd(e,["inlineData"],function(t){const e={},n=xd(t,["data"]);if(null!=n&&Pd(e,["data"],n),void 0!==xd(t,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const i=xd(t,["mimeType"]);return null!=i&&Pd(e,["mimeType"],i),e}(u));const a=xd(t,["text"]);null!=a&&Pd(e,["text"],a);const c=xd(t,["thought"]);null!=c&&Pd(e,["thought"],c);const h=xd(t,["thoughtSignature"]);null!=h&&Pd(e,["thoughtSignature"],h);const f=xd(t,["videoMetadata"]);null!=f&&Pd(e,["videoMetadata"],f);return e}(t))),Pd(e,["parts"],t)}const i=xd(t,["role"]);return null!=i&&Pd(e,["role"],i),e}function Qy(t,e,n){const i=xd(e,["expireTime"]);void 0!==n&&null!=i&&Pd(n,["expireTime"],i);const r=xd(e,["newSessionExpireTime"]);void 0!==n&&null!=r&&Pd(n,["newSessionExpireTime"],r);const o=xd(e,["uses"]);void 0!==n&&null!=o&&Pd(n,["uses"],o);const s=xd(e,["liveConnectConstraints"]);void 0!==n&&null!=s&&Pd(n,["bidiGenerateContentSetup"],function(t,e){const n={},i=xd(e,["model"]);null!=i&&Pd(n,["setup","model"],yv(t,i));const r=xd(e,["config"]);null!=r&&Pd(n,["config"],function(t,e){const n={},i=xd(t,["generationConfig"]);void 0!==e&&null!=i&&Pd(e,["setup","generationConfig"],i);const r=xd(t,["responseModalities"]);void 0!==e&&null!=r&&Pd(e,["setup","generationConfig","responseModalities"],r);const o=xd(t,["temperature"]);void 0!==e&&null!=o&&Pd(e,["setup","generationConfig","temperature"],o);const s=xd(t,["topP"]);void 0!==e&&null!=s&&Pd(e,["setup","generationConfig","topP"],s);const l=xd(t,["topK"]);void 0!==e&&null!=l&&Pd(e,["setup","generationConfig","topK"],l);const u=xd(t,["maxOutputTokens"]);void 0!==e&&null!=u&&Pd(e,["setup","generationConfig","maxOutputTokens"],u);const a=xd(t,["mediaResolution"]);void 0!==e&&null!=a&&Pd(e,["setup","generationConfig","mediaResolution"],a);const c=xd(t,["seed"]);void 0!==e&&null!=c&&Pd(e,["setup","generationConfig","seed"],c);const h=xd(t,["speechConfig"]);void 0!==e&&null!=h&&Pd(e,["setup","generationConfig","speechConfig"],Dv(h));const f=xd(t,["thinkingConfig"]);void 0!==e&&null!=f&&Pd(e,["setup","generationConfig","thinkingConfig"],f);const d=xd(t,["enableAffectiveDialog"]);void 0!==e&&null!=d&&Pd(e,["setup","generationConfig","enableAffectiveDialog"],d);const p=xd(t,["systemInstruction"]);void 0!==e&&null!=p&&Pd(e,["setup","systemInstruction"],Xy(Ov(p)));const m=xd(t,["tools"]);if(void 0!==e&&null!=m){let t=Uv(m);Array.isArray(t)&&(t=t.map(t=>function(t){const e={},n=xd(t,["functionDeclarations"]);if(null!=n){let t=n;Array.isArray(t)&&(t=t.map(t=>t)),Pd(e,["functionDeclarations"],t)}if(void 0!==xd(t,["retrieval"]))throw new Error("retrieval parameter is not supported in Gemini API.");const i=xd(t,["googleSearchRetrieval"]);null!=i&&Pd(e,["googleSearchRetrieval"],i);const r=xd(t,["computerUse"]);null!=r&&Pd(e,["computerUse"],r);const o=xd(t,["fileSearch"]);null!=o&&Pd(e,["fileSearch"],o);const s=xd(t,["codeExecution"]);null!=s&&Pd(e,["codeExecution"],s);if(void 0!==xd(t,["enterpriseWebSearch"]))throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=xd(t,["googleMaps"]);null!=l&&Pd(e,["googleMaps"],function(t){const e={};if(void 0!==xd(t,["authConfig"]))throw new Error("authConfig parameter is not supported in Gemini API.");const n=xd(t,["enableWidget"]);null!=n&&Pd(e,["enableWidget"],n);return e}(l));const u=xd(t,["googleSearch"]);null!=u&&Pd(e,["googleSearch"],function(t){const e={};if(void 0!==xd(t,["excludeDomains"]))throw new Error("excludeDomains parameter is not supported in Gemini API.");if(void 0!==xd(t,["blockingConfidence"]))throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=xd(t,["timeRangeFilter"]);null!=n&&Pd(e,["timeRangeFilter"],n);return e}(u));const a=xd(t,["urlContext"]);null!=a&&Pd(e,["urlContext"],a);return e}(Lv(t)))),Pd(e,["setup","tools"],t)}const v=xd(t,["sessionResumption"]);void 0!==e&&null!=v&&Pd(e,["setup","sessionResumption"],function(t){const e={},n=xd(t,["handle"]);null!=n&&Pd(e,["handle"],n);if(void 0!==xd(t,["transparent"]))throw new Error("transparent parameter is not supported in Gemini API.");return e}(v));const w=xd(t,["inputAudioTranscription"]);void 0!==e&&null!=w&&Pd(e,["setup","inputAudioTranscription"],w);const y=xd(t,["outputAudioTranscription"]);void 0!==e&&null!=y&&Pd(e,["setup","outputAudioTranscription"],y);const g=xd(t,["realtimeInputConfig"]);void 0!==e&&null!=g&&Pd(e,["setup","realtimeInputConfig"],g);const b=xd(t,["contextWindowCompression"]);void 0!==e&&null!=b&&Pd(e,["setup","contextWindowCompression"],b);const E=xd(t,["proactivity"]);void 0!==e&&null!=E&&Pd(e,["setup","proactivity"],E);return n}(r,n));return n}(t,s));const l=xd(e,["lockAdditionalFields"]);return void 0!==n&&null!=l&&Pd(n,["fieldMask"],l),{}}function Zy(t,e){let n=null;const i=t.bidiGenerateContentSetup;if("object"==typeof i&&null!==i&&"setup"in i){const e=i.setup;"object"==typeof e&&null!==e?(t.bidiGenerateContentSetup=e,n=e):delete t.bidiGenerateContentSetup}else void 0!==i&&delete t.bidiGenerateContentSetup;const r=t.fieldMask;if(n){const i=function(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];if("object"==typeof i&&null!=i&&Object.keys(i).length>0){const t=Object.keys(i).map(t=>`${n}.${t}`);e.push(...t)}else e.push(n)}return e.join(",")}(n);if(Array.isArray(null==e?void 0:e.lockAdditionalFields)&&0===(null==e?void 0:e.lockAdditionalFields.length))i?t.fieldMask=i:delete t.fieldMask;else if((null==e?void 0:e.lockAdditionalFields)&&e.lockAdditionalFields.length>0&&null!==r&&Array.isArray(r)&&r.length>0){const e=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let n=[];r.length>0&&(n=r.map(t=>e.includes(t)?`generationConfig.${t}`:t));const o=[];i&&o.push(i),n.length>0&&o.push(...n),o.length>0?t.fieldMask=o.join(","):delete t.fieldMask}else delete t.fieldMask}else null!==r&&Array.isArray(r)&&r.length>0?t.fieldMask=r.join(","):delete t.fieldMask;return t}class tg extends Nd{constructor(t){super(),this.apiClient=t}async create(t){var e,n;let i,r="",o={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const s=function(t,e){const n={},i=xd(e,["config"]);return null!=i&&Pd(n,["config"],Qy(t,i,n)),n}(this.apiClient,t);r=Rd("auth_tokens",s._url),o=s._query,delete s.config,delete s._url,delete s._query;const l=Zy(s,t.config);return i=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:null===(e=t.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(n=t.config)||void 0===n?void 0:n.abortSignal}).then(t=>t.json()),i.then(t=>t)}}}function eg(t){const e={},n=xd(t,["name"]);null!=n&&Pd(e,["_url","name"],n);const i=xd(t,["config"]);return null!=i&&function(t,e){const n=xd(t,["force"]);void 0!==e&&null!=n&&Pd(e,["_query","force"],n)}(i,e),e}function ng(t){const e={},n=xd(t,["parent"]);null!=n&&Pd(e,["_url","parent"],n);const i=xd(t,["config"]);return null!=i&&function(t,e){const n=xd(t,["pageSize"]);void 0!==e&&null!=n&&Pd(e,["_query","pageSize"],n);const i=xd(t,["pageToken"]);void 0!==e&&null!=i&&Pd(e,["_query","pageToken"],i)}(i,e),e}class ig extends Nd{constructor(t){super(),this.apiClient=t,this.list=async t=>new lw(Vm.PAGED_ITEM_DOCUMENTS,e=>this.listInternal({parent:t.parent,config:e.config}),await this.listInternal(t),t)}async get(t){var e,n;let i,r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=function(t){const e={},n=xd(t,["name"]);return null!=n&&Pd(e,["_url","name"],n),e}(t);return r=Rd("{name}",s._url),o=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(s),httpMethod:"GET",httpOptions:null===(e=t.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(n=t.config)||void 0===n?void 0:n.abortSignal}).then(t=>t.json()),i.then(t=>t)}}async delete(t){var e,n;let i="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=eg(t);i=Rd("{name}",o._url),r=o._query,delete o._url,delete o._query,await this.apiClient.request({path:i,queryParams:r,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:null===(e=t.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(n=t.config)||void 0===n?void 0:n.abortSignal})}}async listInternal(t){var e,n;let i,r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=ng(t);return r=Rd("{parent}/documents",s._url),o=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(s),httpMethod:"GET",httpOptions:null===(e=t.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(n=t.config)||void 0===n?void 0:n.abortSignal}).then(t=>t.json()),i.then(t=>{const e=function(t){const e={},n=xd(t,["sdkHttpResponse"]);null!=n&&Pd(e,["sdkHttpResponse"],n);const i=xd(t,["nextPageToken"]);null!=i&&Pd(e,["nextPageToken"],i);const r=xd(t,["documents"]);if(null!=r){let t=r;Array.isArray(t)&&(t=t.map(t=>t)),Pd(e,["documents"],t)}return e}(t),n=new lv;return Object.assign(n,e),n})}}}class rg extends Nd{constructor(t,e=new ig(t)){super(),this.apiClient=t,this.documents=e,this.list=async(t={})=>new lw(Vm.PAGED_ITEM_FILE_SEARCH_STORES,t=>this.listInternal(t),await this.listInternal(t),t)}async uploadToFileSearchStore(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(t.fileSearchStoreName,t.file,t.config)}async create(t){var e,n;let i,r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=_y(t);return r=Rd("fileSearchStores",s._url),o=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(e=t.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(n=t.config)||void 0===n?void 0:n.abortSignal}).then(t=>t.json()),i.then(t=>t)}}async get(t){var e,n;let i,r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=function(t){const e={},n=xd(t,["name"]);return null!=n&&Pd(e,["_url","name"],n),e}(t);return r=Rd("{name}",s._url),o=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(s),httpMethod:"GET",httpOptions:null===(e=t.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(n=t.config)||void 0===n?void 0:n.abortSignal}).then(t=>t.json()),i.then(t=>t)}}async delete(t){var e,n;let i="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=Cy(t);i=Rd("{name}",o._url),r=o._query,delete o._url,delete o._query,await this.apiClient.request({path:i,queryParams:r,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:null===(e=t.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(n=t.config)||void 0===n?void 0:n.abortSignal})}}async listInternal(t){var e,n;let i,r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=Ny(t);return r=Rd("fileSearchStores",s._url),o=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(s),httpMethod:"GET",httpOptions:null===(e=t.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(n=t.config)||void 0===n?void 0:n.abortSignal}).then(t=>t.json()),i.then(t=>{const e=function(t){const e={},n=xd(t,["sdkHttpResponse"]);null!=n&&Pd(e,["sdkHttpResponse"],n);const i=xd(t,["nextPageToken"]);null!=i&&Pd(e,["nextPageToken"],i);const r=xd(t,["fileSearchStores"]);if(null!=r){let t=r;Array.isArray(t)&&(t=t.map(t=>t)),Pd(e,["fileSearchStores"],t)}return e}(t),n=new uv;return Object.assign(n,e),n})}}async uploadToFileSearchStoreInternal(t){var e,n;let i,r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=function(t){const e={},n=xd(t,["fileSearchStoreName"]);null!=n&&Pd(e,["_url","file_search_store_name"],n);const i=xd(t,["config"]);return null!=i&&Ry(i,e),e}(t);return r=Rd("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",s._url),o=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(e=t.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(n=t.config)||void 0===n?void 0:n.abortSignal}).then(t=>t.json()),i.then(t=>{const e=function(t){const e={},n=xd(t,["sdkHttpResponse"]);return null!=n&&Pd(e,["sdkHttpResponse"],n),e}(t),n=new av;return Object.assign(n,e),n})}}async importFile(t){var e,n;let i,r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=Oy(t);return r=Rd("{file_search_store_name}:importFile",s._url),o=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(e=t.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(n=t.config)||void 0===n?void 0:n.abortSignal}).then(t=>t.json()),i.then(t=>{const e=Ay(t),n=new cv;return Object.assign(n,e),n})}}}function og(t,e){const n={},i=xd(t,["baseModel"]);null!=i&&Pd(n,["baseModel"],i);const r=xd(t,["preTunedModel"]);null!=r&&Pd(n,["preTunedModel"],r);const o=xd(t,["trainingDataset"]);null!=o&&function(t){const e={};if(void 0!==xd(t,["gcsUri"]))throw new Error("gcsUri parameter is not supported in Gemini API.");if(void 0!==xd(t,["vertexDatasetResource"]))throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const n=xd(t,["examples"]);if(null!=n){let t=n;Array.isArray(t)&&(t=t.map(t=>t)),Pd(e,["examples","examples"],t)}}(o);const s=xd(t,["config"]);return null!=s&&function(t,e){const n={};if(void 0!==xd(t,["validationDataset"]))throw new Error("validationDataset parameter is not supported in Gemini API.");const i=xd(t,["tunedModelDisplayName"]);if(void 0!==e&&null!=i&&Pd(e,["displayName"],i),void 0!==xd(t,["description"]))throw new Error("description parameter is not supported in Gemini API.");const r=xd(t,["epochCount"]);void 0!==e&&null!=r&&Pd(e,["tuningTask","hyperparameters","epochCount"],r);const o=xd(t,["learningRateMultiplier"]);if(null!=o&&Pd(n,["tuningTask","hyperparameters","learningRateMultiplier"],o),void 0!==xd(t,["exportLastCheckpointOnly"]))throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(void 0!==xd(t,["preTunedModelCheckpointId"]))throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(void 0!==xd(t,["adapterSize"]))throw new Error("adapterSize parameter is not supported in Gemini API.");const s=xd(t,["batchSize"]);void 0!==e&&null!=s&&Pd(e,["tuningTask","hyperparameters","batchSize"],s);const l=xd(t,["learningRate"]);if(void 0!==e&&null!=l&&Pd(e,["tuningTask","hyperparameters","learningRate"],l),void 0!==xd(t,["labels"]))throw new Error("labels parameter is not supported in Gemini API.");if(void 0!==xd(t,["beta"]))throw new Error("beta parameter is not supported in Gemini API.")}(s,n),n}function sg(t,e){const n={},i=xd(t,["baseModel"]);null!=i&&Pd(n,["baseModel"],i);const r=xd(t,["preTunedModel"]);null!=r&&Pd(n,["preTunedModel"],r);const o=xd(t,["trainingDataset"]);null!=o&&function(t,e,n){const i={};let r=xd(n,["config","method"]);void 0===r&&(r="SUPERVISED_FINE_TUNING");if("SUPERVISED_FINE_TUNING"===r){const n=xd(t,["gcsUri"]);void 0!==e&&null!=n&&Pd(e,["supervisedTuningSpec","trainingDatasetUri"],n)}else if("PREFERENCE_TUNING"===r){const n=xd(t,["gcsUri"]);void 0!==e&&null!=n&&Pd(e,["preferenceOptimizationSpec","trainingDatasetUri"],n)}let o=xd(n,["config","method"]);void 0===o&&(o="SUPERVISED_FINE_TUNING");if("SUPERVISED_FINE_TUNING"===o){const n=xd(t,["vertexDatasetResource"]);void 0!==e&&null!=n&&Pd(e,["supervisedTuningSpec","trainingDatasetUri"],n)}else if("PREFERENCE_TUNING"===o){const n=xd(t,["vertexDatasetResource"]);void 0!==e&&null!=n&&Pd(e,["preferenceOptimizationSpec","trainingDatasetUri"],n)}if(void 0!==xd(t,["examples"]))throw new Error("examples parameter is not supported in Vertex AI.")}(o,n,e);const s=xd(t,["config"]);return null!=s&&function(t,e,n){let i=xd(n,["config","method"]);if(void 0===i&&(i="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===i){const n=xd(t,["validationDataset"]);void 0!==e&&null!=n&&Pd(e,["supervisedTuningSpec"],hg(n))}else if("PREFERENCE_TUNING"===i){const n=xd(t,["validationDataset"]);void 0!==e&&null!=n&&Pd(e,["preferenceOptimizationSpec"],hg(n))}const r=xd(t,["tunedModelDisplayName"]);void 0!==e&&null!=r&&Pd(e,["tunedModelDisplayName"],r);const o=xd(t,["description"]);void 0!==e&&null!=o&&Pd(e,["description"],o);let s=xd(n,["config","method"]);if(void 0===s&&(s="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===s){const n=xd(t,["epochCount"]);void 0!==e&&null!=n&&Pd(e,["supervisedTuningSpec","hyperParameters","epochCount"],n)}else if("PREFERENCE_TUNING"===s){const n=xd(t,["epochCount"]);void 0!==e&&null!=n&&Pd(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],n)}let l=xd(n,["config","method"]);if(void 0===l&&(l="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===l){const n=xd(t,["learningRateMultiplier"]);void 0!==e&&null!=n&&Pd(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],n)}else if("PREFERENCE_TUNING"===l){const n=xd(t,["learningRateMultiplier"]);void 0!==e&&null!=n&&Pd(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],n)}let u=xd(n,["config","method"]);if(void 0===u&&(u="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===u){const n=xd(t,["exportLastCheckpointOnly"]);void 0!==e&&null!=n&&Pd(e,["supervisedTuningSpec","exportLastCheckpointOnly"],n)}else if("PREFERENCE_TUNING"===u){const n=xd(t,["exportLastCheckpointOnly"]);void 0!==e&&null!=n&&Pd(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],n)}let a=xd(n,["config","method"]);if(void 0===a&&(a="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===a){const n=xd(t,["adapterSize"]);void 0!==e&&null!=n&&Pd(e,["supervisedTuningSpec","hyperParameters","adapterSize"],n)}else if("PREFERENCE_TUNING"===a){const n=xd(t,["adapterSize"]);void 0!==e&&null!=n&&Pd(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],n)}if(void 0!==xd(t,["batchSize"]))throw new Error("batchSize parameter is not supported in Vertex AI.");if(void 0!==xd(t,["learningRate"]))throw new Error("learningRate parameter is not supported in Vertex AI.");const c=xd(t,["labels"]);void 0!==e&&null!=c&&Pd(e,["labels"],c);const h=xd(t,["beta"]);void 0!==e&&null!=h&&Pd(e,["preferenceOptimizationSpec","hyperParameters","beta"],h)}(s,n,e),n}function lg(t,e){const n={},i=xd(t,["config"]);return null!=i&&function(t,e){const n=xd(t,["pageSize"]);void 0!==e&&null!=n&&Pd(e,["_query","pageSize"],n);const i=xd(t,["pageToken"]);void 0!==e&&null!=i&&Pd(e,["_query","pageToken"],i);const r=xd(t,["filter"]);void 0!==e&&null!=r&&Pd(e,["_query","filter"],r)}(i,n),n}function ug(t,e){const n={},i=xd(t,["config"]);return null!=i&&function(t,e){const n=xd(t,["pageSize"]);void 0!==e&&null!=n&&Pd(e,["_query","pageSize"],n);const i=xd(t,["pageToken"]);void 0!==e&&null!=i&&Pd(e,["_query","pageToken"],i);const r=xd(t,["filter"]);void 0!==e&&null!=r&&Pd(e,["_query","filter"],r)}(i,n),n}function ag(t,e){const n={},i=xd(t,["sdkHttpResponse"]);null!=i&&Pd(n,["sdkHttpResponse"],i);const r=xd(t,["name"]);null!=r&&Pd(n,["name"],r);const o=xd(t,["state"]);null!=o&&Pd(n,["state"],$v(o));const s=xd(t,["createTime"]);null!=s&&Pd(n,["createTime"],s);const l=xd(t,["tuningTask","startTime"]);null!=l&&Pd(n,["startTime"],l);const u=xd(t,["tuningTask","completeTime"]);null!=u&&Pd(n,["endTime"],u);const a=xd(t,["updateTime"]);null!=a&&Pd(n,["updateTime"],a);const c=xd(t,["description"]);null!=c&&Pd(n,["description"],c);const h=xd(t,["baseModel"]);null!=h&&Pd(n,["baseModel"],h);const f=xd(t,["_self"]);return null!=f&&Pd(n,["tunedModel"],function(t){const e={},n=xd(t,["name"]);null!=n&&Pd(e,["model"],n);const i=xd(t,["name"]);return null!=i&&Pd(e,["endpoint"],i),e}(f)),n}function cg(t,e){const n={},i=xd(t,["sdkHttpResponse"]);null!=i&&Pd(n,["sdkHttpResponse"],i);const r=xd(t,["name"]);null!=r&&Pd(n,["name"],r);const o=xd(t,["state"]);null!=o&&Pd(n,["state"],$v(o));const s=xd(t,["createTime"]);null!=s&&Pd(n,["createTime"],s);const l=xd(t,["startTime"]);null!=l&&Pd(n,["startTime"],l);const u=xd(t,["endTime"]);null!=u&&Pd(n,["endTime"],u);const a=xd(t,["updateTime"]);null!=a&&Pd(n,["updateTime"],a);const c=xd(t,["error"]);null!=c&&Pd(n,["error"],c);const h=xd(t,["description"]);null!=h&&Pd(n,["description"],h);const f=xd(t,["baseModel"]);null!=f&&Pd(n,["baseModel"],f);const d=xd(t,["tunedModel"]);null!=d&&Pd(n,["tunedModel"],d);const p=xd(t,["preTunedModel"]);null!=p&&Pd(n,["preTunedModel"],p);const m=xd(t,["supervisedTuningSpec"]);null!=m&&Pd(n,["supervisedTuningSpec"],m);const v=xd(t,["preferenceOptimizationSpec"]);null!=v&&Pd(n,["preferenceOptimizationSpec"],v);const w=xd(t,["tuningDataStats"]);null!=w&&Pd(n,["tuningDataStats"],w);const y=xd(t,["encryptionSpec"]);null!=y&&Pd(n,["encryptionSpec"],y);const g=xd(t,["partnerModelTuningSpec"]);null!=g&&Pd(n,["partnerModelTuningSpec"],g);const b=xd(t,["customBaseModel"]);null!=b&&Pd(n,["customBaseModel"],b);const E=xd(t,["experiment"]);null!=E&&Pd(n,["experiment"],E);const S=xd(t,["labels"]);null!=S&&Pd(n,["labels"],S);const T=xd(t,["outputUri"]);null!=T&&Pd(n,["outputUri"],T);const k=xd(t,["pipelineJob"]);null!=k&&Pd(n,["pipelineJob"],k);const I=xd(t,["serviceAccount"]);null!=I&&Pd(n,["serviceAccount"],I);const _=xd(t,["tunedModelDisplayName"]);null!=_&&Pd(n,["tunedModelDisplayName"],_);const C=xd(t,["veoTuningSpec"]);return null!=C&&Pd(n,["veoTuningSpec"],C),n}function hg(t,e){const n={},i=xd(t,["gcsUri"]);null!=i&&Pd(n,["validationDatasetUri"],i);const r=xd(t,["vertexDatasetResource"]);return null!=r&&Pd(n,["validationDatasetUri"],r),n}class fg extends Nd{constructor(t){super(),this.apiClient=t,this.list=async(t={})=>new lw(Vm.PAGED_ITEM_TUNING_JOBS,t=>this.listInternal(t),await this.listInternal(t),t),this.get=async t=>await this.getInternal(t),this.tune=async t=>{var e;if(this.apiClient.isVertexAI()){if(t.baseModel.startsWith("projects/")){const n={tunedModelName:t.baseModel};(null===(e=t.config)||void 0===e?void 0:e.preTunedModelCheckpointId)&&(n.checkpointId=t.config.preTunedModelCheckpointId);const i=Object.assign(Object.assign({},t),{preTunedModel:n});return i.baseModel=void 0,await this.tuneInternal(i)}{const e=Object.assign({},t);return await this.tuneInternal(e)}}{const e=Object.assign({},t),n=await this.tuneMldevInternal(e);let i="";void 0!==n.metadata&&void 0!==n.metadata.tunedModel?i=n.metadata.tunedModel:void 0!==n.name&&n.name.includes("/operations/")&&(i=n.name.split("/operations/")[0]);return{name:i,state:Pp.JOB_STATE_QUEUED}}}}async getInternal(t){var e,n,i,r;let o,s="",l={};if(this.apiClient.isVertexAI()){const i=function(t){const e={},n=xd(t,["name"]);return null!=n&&Pd(e,["_url","name"],n),e}(t);return s=Rd("{name}",i._url),l=i._query,delete i._url,delete i._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(i),httpMethod:"GET",httpOptions:null===(e=t.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(n=t.config)||void 0===n?void 0:n.abortSignal}).then(t=>t.json().then(e=>{const n=e;return n.sdkHttpResponse={headers:t.headers},n})),o.then(t=>cg(t))}{const e=function(t){const e={},n=xd(t,["name"]);return null!=n&&Pd(e,["_url","name"],n),e}(t);return s=Rd("{name}",e._url),l=e._query,delete e._url,delete e._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(e),httpMethod:"GET",httpOptions:null===(i=t.config)||void 0===i?void 0:i.httpOptions,abortSignal:null===(r=t.config)||void 0===r?void 0:r.abortSignal}).then(t=>t.json().then(e=>{const n=e;return n.sdkHttpResponse={headers:t.headers},n})),o.then(t=>ag(t))}}async listInternal(t){var e,n,i,r;let o,s="",l={};if(this.apiClient.isVertexAI()){const i=ug(t);return s=Rd("tuningJobs",i._url),l=i._query,delete i._url,delete i._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(i),httpMethod:"GET",httpOptions:null===(e=t.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(n=t.config)||void 0===n?void 0:n.abortSignal}).then(t=>t.json().then(e=>{const n=e;return n.sdkHttpResponse={headers:t.headers},n})),o.then(t=>{const e=function(t){const e={},n=xd(t,["sdkHttpResponse"]);null!=n&&Pd(e,["sdkHttpResponse"],n);const i=xd(t,["nextPageToken"]);null!=i&&Pd(e,["nextPageToken"],i);const r=xd(t,["tuningJobs"]);if(null!=r){let t=r;Array.isArray(t)&&(t=t.map(t=>cg(t))),Pd(e,["tuningJobs"],t)}return e}(t),n=new iv;return Object.assign(n,e),n})}{const e=lg(t);return s=Rd("tunedModels",e._url),l=e._query,delete e._url,delete e._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(e),httpMethod:"GET",httpOptions:null===(i=t.config)||void 0===i?void 0:i.httpOptions,abortSignal:null===(r=t.config)||void 0===r?void 0:r.abortSignal}).then(t=>t.json().then(e=>{const n=e;return n.sdkHttpResponse={headers:t.headers},n})),o.then(t=>{const e=function(t){const e={},n=xd(t,["sdkHttpResponse"]);null!=n&&Pd(e,["sdkHttpResponse"],n);const i=xd(t,["nextPageToken"]);null!=i&&Pd(e,["nextPageToken"],i);const r=xd(t,["tunedModels"]);if(null!=r){let t=r;Array.isArray(t)&&(t=t.map(t=>ag(t))),Pd(e,["tuningJobs"],t)}return e}(t),n=new iv;return Object.assign(n,e),n})}}async cancel(t){var e,n,i,r;let o,s="",l={};if(this.apiClient.isVertexAI()){const i=function(t){const e={},n=xd(t,["name"]);return null!=n&&Pd(e,["_url","name"],n),e}(t);return s=Rd("{name}:cancel",i._url),l=i._query,delete i._url,delete i._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(i),httpMethod:"POST",httpOptions:null===(e=t.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(n=t.config)||void 0===n?void 0:n.abortSignal}).then(t=>t.json().then(e=>{const n=e;return n.sdkHttpResponse={headers:t.headers},n})),o.then(t=>{const e=function(t){const e={},n=xd(t,["sdkHttpResponse"]);return null!=n&&Pd(e,["sdkHttpResponse"],n),e}(t),n=new rv;return Object.assign(n,e),n})}{const e=function(t){const e={},n=xd(t,["name"]);return null!=n&&Pd(e,["_url","name"],n),e}(t);return s=Rd("{name}:cancel",e._url),l=e._query,delete e._url,delete e._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(e),httpMethod:"POST",httpOptions:null===(i=t.config)||void 0===i?void 0:i.httpOptions,abortSignal:null===(r=t.config)||void 0===r?void 0:r.abortSignal}).then(t=>t.json().then(e=>{const n=e;return n.sdkHttpResponse={headers:t.headers},n})),o.then(t=>{const e=function(t){const e={},n=xd(t,["sdkHttpResponse"]);return null!=n&&Pd(e,["sdkHttpResponse"],n),e}(t),n=new rv;return Object.assign(n,e),n})}}async tuneInternal(t){var e,n;let i,r="",o={};if(this.apiClient.isVertexAI()){const s=sg(t,t);return r=Rd("tuningJobs",s._url),o=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(e=t.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(n=t.config)||void 0===n?void 0:n.abortSignal}).then(t=>t.json().then(e=>{const n=e;return n.sdkHttpResponse={headers:t.headers},n})),i.then(t=>cg(t))}throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(t){var e,n;let i,r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=og(t);return r=Rd("tunedModels",s._url),o=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(e=t.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(n=t.config)||void 0===n?void 0:n.abortSignal}).then(t=>t.json().then(e=>{const n=e;return n.sdkHttpResponse={headers:t.headers},n})),i.then(t=>function(t){const e={},n=xd(t,["sdkHttpResponse"]);null!=n&&Pd(e,["sdkHttpResponse"],n);const i=xd(t,["name"]);null!=i&&Pd(e,["name"],i);const r=xd(t,["metadata"]);null!=r&&Pd(e,["metadata"],r);const o=xd(t,["done"]);null!=o&&Pd(e,["done"],o);const s=xd(t,["error"]);return null!=s&&Pd(e,["error"],s),e}(t))}}}class dg{async download(t,e){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const pg="x-goog-upload-status";async function mg(t,e,n){var i,r;let o=0,s=0,l=new Hm(new Response),u="upload";for(o=t.size;s<o;){const a=Math.min(8388608,o-s),c=t.slice(s,s+a);s+a>=o&&(u+=", finalize");let h=0,f=1e3;for(;h<3&&(l=await n.request({path:"",body:c,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":u,"X-Goog-Upload-Offset":String(s),"Content-Length":String(a)}}}),!(null===(i=null==l?void 0:l.headers)||void 0===i?void 0:i[pg]));)h++,await vg(f),f*=2;if(s+=a,"active"!==(null===(r=null==l?void 0:l.headers)||void 0===r?void 0:r[pg]))break;if(o<=s)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return l}function vg(t){return new Promise(e=>setTimeout(e,t))}class wg{async upload(t,e,n){if("string"==typeof t)throw new Error("File path is not supported in browser uploader.");return await async function(t,e,n){var i;const r=await mg(t,e,n),o=await(null==r?void 0:r.json());if("final"!==(null===(i=null==r?void 0:r.headers)||void 0===i?void 0:i[pg]))throw new Error("Failed to upload file: Upload status is not finalized.");return o.file}(t,e,n)}async uploadToFileSearchStore(t,e,n){if("string"==typeof t)throw new Error("File path is not supported in browser uploader.");return await async function(t,e,n){var i;const r=await mg(t,e,n),o=await(null==r?void 0:r.json());if("final"!==(null===(i=null==r?void 0:r.headers)||void 0===i?void 0:i[pg]))throw new Error("Failed to upload file: Upload status is not finalized.");const s=$d(o),l=new wv;return Object.assign(l,s),l}(t,e,n)}async stat(t){if("string"==typeof t)throw new Error("File path is not supported in browser uploader.");return await async function(t){return{size:t.size,type:t.type}}(t)}}class yg{create(t,e,n){return new gg(t,e,n)}}class gg{constructor(t,e,n){this.url=t,this.headers=e,this.callbacks=n}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(t){if(void 0===this.ws)throw new Error("WebSocket is not connected");this.ws.send(t)}close(){if(void 0===this.ws)throw new Error("WebSocket is not connected");this.ws.close()}}const bg="x-goog-api-key";class Eg{constructor(t){this.apiKey=t}async addAuthHeaders(t,e){if(null===t.get(bg)){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");t.append(bg,this.apiKey)}}}class Sg{constructor(t){var e;if(null==t.apiKey)throw new Error("An API Key must be set when running in a browser");if(t.project||t.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=null!==(e=t.vertexai)&&void 0!==e&&e,this.apiKey=t.apiKey;const n=Od(t.httpOptions,t.vertexai,void 0,void 0);n&&(t.httpOptions?t.httpOptions.baseUrl=n:t.httpOptions={baseUrl:n}),this.apiVersion=t.apiVersion,this.httpOptions=t.httpOptions;const i=new Eg(this.apiKey);this.apiClient=new xy({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:"gl-node/web",uploader:new wg,downloader:new dg}),this.models=new Wy(this.apiClient),this.live=new Vy(this.apiClient,i,new yg),this.batches=new uw(this.apiClient),this.chats=new kw(this.models,this.apiClient),this.caches=new vw(this.apiClient),this.files=new Aw(this.apiClient),this.operations=new Yy(this.apiClient),this.authTokens=new tg(this.apiClient),this.tunings=new fg(this.apiClient),this.fileSearchStores=new rg(this.apiClient)}}const Tg=[{id:"f1",description:" ",difficulty:"easy",points:10},{id:"f2",description:"",difficulty:"easy",points:10},{id:"f3",description:" ",difficulty:"easy",points:10},{id:"f4",description:"",difficulty:"easy",points:10},{id:"f5",description:"",difficulty:"easy",points:5}],kg=()=>({...Tg[Math.floor(Math.random()*Tg.length)],id:Math.random().toString(36).substr(2,9)});let Ig=null;async function _g(){if(!Ig){const t=await async function(t){return{geminiApiKey:"PLACEHOLDER_API_KEY"}[t]||null}("geminiApiKey");if(!t)throw new Error("Gemini API key not available");Ig=new Sg({apiKey:t})}return Ig}const Cg="pq_task_history",Ag=["  (, , , )","  (, , , )","  (, , , )"," (  , ,  , )","  ( ,  , )","   (,  , , )","  (, ,  , )","  (,  ,  , )","  ( , , , )","   (, , ,  )","  (, , ,  )","   ( , ,  )"],Og=["   ","   "," /  / "," / ",""," / ","   ","  "," "," ()"],Ng=()=>{try{const t=secureGetItem(Cg);return Array.isArray(t)?t:[]}catch(Fg){return[]}},Rg=async()=>{try{const t=await _g(),e=Ag[Math.floor(Math.random()*Ag.length)],n=Og[Math.floor(Math.random()*Og.length)],i=Math.random().toString(36).substring(7),r=Ng(),o=`     "-"   .\n\n     :\n    1.  : "${e}"\n    2. /: "${n}"\n    3.  ( ): [ ${r.length>0?r.join(", "):""} ]\n    4. Seed: ${i}\n\n    :\n     3      .\n\n     :\n    1.  .   "  "  " ".\n       : " ", "  ", " ".\n    2.    ,   .\n       : " ", "", "".\n       : " ", " ", " ".\n    3.   "" -   ,    (  /).\n    4.   (2-5 ).\n\n     JSON:   { description, difficulty (easy/medium/hard), points (10-100) }.`,s=await t.models.generateContent({model:"gemini-2.5-flash",contents:{text:o},config:{temperature:1.5,responseMimeType:"application/json",responseSchema:{type:Jd.OBJECT,properties:{tasks:{type:Jd.ARRAY,items:{type:Jd.OBJECT,properties:{description:{type:Jd.STRING},difficulty:{type:Jd.STRING,enum:["easy","medium","hard"]},points:{type:Jd.INTEGER}},required:["description","difficulty","points"]}}},required:["tasks"]}}});if(s.text){const t=JSON.parse(s.text);if(t.tasks&&Array.isArray(t.tasks)&&t.tasks.length>0){const e=t.tasks[Math.floor(Math.random()*t.tasks.length)];return(t=>{const e=[...Ng(),t].slice(-15);secureSetItem(Cg,e)})(e.description),{id:Math.random().toString(36).substr(2,9),description:e.description,difficulty:e.difficulty,points:e.points}}}return kg()}catch(t){return kg()}},Pg=({user:t,refreshUser:e})=>{const[n,i]=f.useState(t.currentTask||null),[r,o]=f.useState(!1),[s,u]=f.useState(!1),[a,c]=f.useState(null),[h,d]=f.useState(!1),p=f.useCallback(async()=>{t.currentTask?i(t.currentTask):await m(!0)},[t.currentTask]);f.useEffect(()=>{p()},[]);const m=async(t=!1)=>{if(!s){u(!0),c(null),d(!1);try{const t=await Rg();await(async t=>{const e=await Ed();if(e)return e.currentTask=t,yd(e),cd()&&!vd&&await dd(e),e})(t),i(t),e()}catch(Fg){c({type:"error",message:"   "})}finally{u(!1)}}},v=3-(t.skipsUsedToday||0);return l.jsxs("div",{className:"relative h-full flex flex-col",children:[l.jsxs("div",{className:"absolute top-0 left-0 right-0 z-10 p-4 flex justify-between items-start bg-gradient-to-b from-black/80 to-transparent",children:[l.jsxs("div",{className:"bg-black/40 backdrop-blur-md px-3 py-1 rounded-full border border-white/10",children:[l.jsx("span",{className:"text-xs text-slate-300 uppercase",children:""}),l.jsx("div",{className:"text-xl font-bold text-indigo-400",children:t.score})]}),l.jsxs("div",{className:"flex-1 mx-4 bg-slate-900/90 backdrop-blur-md p-3 rounded-xl border border-indigo-500/30 shadow-lg animate-fade-in min-h-[80px] flex flex-col justify-center",children:[l.jsx("div",{className:"text-xs text-indigo-300 uppercase font-bold tracking-wider mb-1",children:" "}),s?l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:"w-4 h-4 border-2 border-indigo-500 border-t-transparent rounded-full animate-spin"}),l.jsx("span",{className:"text-slate-400 text-sm animate-pulse",children:" ..."})]}):n?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"text-lg font-bold text-white leading-tight",children:[": ",l.jsx("span",{className:"text-indigo-400",children:n.description})]}),l.jsxs("div",{className:"text-xs text-slate-400 mt-1 flex justify-between",children:[l.jsxs("span",{children:[": ","easy"===n.difficulty?"":"medium"===n.difficulty?"":""]}),l.jsxs("span",{className:"text-yellow-400 font-bold",children:[n.points," XP"]})]})]}):l.jsx("span",{className:"text-red-400 text-sm",children:" "})]})]}),l.jsxs("div",{className:"flex-1 relative bg-black",children:[l.jsx(_d,{onCapture:async t=>{if(n&&!r&&!s){o(!0),c({type:"info",message:" ..."});try{const r=await(async(t,e)=>{try{const n=await _g(),i=t.split(",")[1]||t,r=`:   .\n     :    "${e}".\n\n    :\n    1.   .     ?\n    2.    (/),   ,  ,  .\n    3.   ,    (     ) -> .\n    4.    ,     -> .\n\n     JSON: { "verified": boolean, "reason": string (   ) }`,o=await n.models.generateContent({model:"gemini-2.5-flash",contents:{parts:[{inlineData:{mimeType:"image/jpeg",data:i}},{text:r}]},config:{responseMimeType:"application/json",responseSchema:{type:Jd.OBJECT,properties:{verified:{type:Jd.BOOLEAN},reason:{type:Jd.STRING}},required:["verified","reason"]}}});return o.text?JSON.parse(o.text):{verified:!1,reason:"   ."}}catch(n){return{verified:!1,reason:" ."}}})(t,n.description);r.verified?(await Sd(n.points),i(null),e(),c({type:"success",message:`! +${n.points} .`}),d(!0)):(c({type:"error",message:r.reason||"  .   ."}),setTimeout(()=>c(null),4e3))}catch(Fg){c({type:"error",message:" ."})}finally{o(!1)}}},isProcessing:r||s}),a&&!h&&l.jsxs("div",{className:`\n            absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2\n            px-6 py-4 rounded-xl shadow-2xl backdrop-blur-md text-center max-w-[80%]\n            animate-bounce-in z-30\n            ${"error"===a.type?"bg-red-500/90 text-white":""}\n            ${"info"===a.type?"bg-blue-500/90 text-white":""}\n            ${"success"===a.type?"hidden":""}\n          `,children:["info"===a.type&&l.jsx("div",{className:"animate-pulse mb-2 text-2xl",children:""}),l.jsx("div",{className:"font-bold",children:a.message})]})]}),l.jsxs("div",{className:"absolute bottom-6 right-6 z-20 mb-20 md:mb-8 flex flex-col items-end",children:[l.jsxs("span",{className:"text-[10px] text-white/50 mb-1 mr-1",children:[": ",v]}),l.jsx("button",{onClick:async()=>{if(s||r)return;const t=await(async()=>{const t=await Ed();if(!t)return{success:!1,message:"  "};const e=(new Date).toDateString();return t.lastSkipDate!==e&&(t.skipsUsedToday=0,t.lastSkipDate=e),(t.skipsUsedToday||0)>=3?{success:!1,message:"   (3/3).   ."}:(t.skipsUsedToday=(t.skipsUsedToday||0)+1,t.currentTask=null,yd(t),cd()&&!vd&&await dd(t),{success:!0,user:t})})();t.success?(e(),await m()):(c({type:"error",message:t.message||" "}),setTimeout(()=>c(null),3e3))},disabled:s||r||v<=0,className:`\n            p-3 rounded-full backdrop-blur-sm border border-white/10 text-xs transition-all active:scale-95\n            ${v>0?"bg-black/40 text-white/70 hover:text-white":"bg-red-900/40 text-red-300 opacity-50 cursor-not-allowed"}\n          `,children:s?"...":""})]}),h&&l.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-6",children:l.jsxs("div",{className:"bg-slate-800 rounded-2xl p-6 w-full max-w-sm text-center border border-indigo-500/50 shadow-2xl transform scale-100 animate-pop-in",children:[l.jsx("div",{className:"text-6xl mb-4",children:""}),l.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:" !"}),l.jsxs("p",{className:"text-slate-300 mb-6",children:["  ",l.jsx("span",{className:"text-indigo-400 font-bold",children:null==n?void 0:n.description}),"   ",null==n?void 0:n.points," ."]}),l.jsx(Id,{onClick:()=>m(!0),className:"w-full",children:s?" ...":" "})]})})]})},xg=()=>{const[t,e]=f.useState("day"),[n,i]=f.useState([]),[r,o]=f.useState(!1);return f.useEffect(()=>{(async()=>{o(!0);try{const e=await Td(t);i(e)}catch(Fg){}finally{o(!1)}})()},[t]),l.jsxs("div",{className:"flex flex-col h-full bg-slate-900 p-4",children:[l.jsx("h2",{className:"text-2xl font-bold text-center mb-6 text-transparent bg-clip-text bg-gradient-to-r from-indigo-400 to-purple-400",children:" "}),l.jsx("div",{className:"flex bg-slate-800 p-1 rounded-xl mb-6",children:["day","week","all"].map(n=>l.jsx("button",{onClick:()=>e(n),className:"flex-1 py-2 text-sm font-medium rounded-lg transition-colors "+(t===n?"bg-indigo-600 text-white shadow-lg":"text-slate-400 hover:text-white"),children:"day"===n?"":"week"===n?"":" "},n))}),l.jsx("div",{className:"flex-1 overflow-y-auto space-y-3 pb-20 relative",children:r?l.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:l.jsx("span",{className:"w-8 h-8 border-2 border-indigo-500 border-t-transparent rounded-full animate-spin"})}):0===n.length?l.jsx("div",{className:"text-center text-slate-500 mt-10",children:" "}):n.map(t=>l.jsxs("div",{className:`\n                flex items-center p-4 rounded-xl border animate-fade-in\n                ${t.isCurrentUser?"bg-indigo-900/30 border-indigo-500/50":"bg-slate-800 border-slate-700"}\n              `,children:[l.jsx("div",{className:`\n                w-8 h-8 flex items-center justify-center rounded-full font-bold mr-4\n                ${t.rank<=3?"bg-yellow-500 text-black":"bg-slate-700 text-slate-300"}\n              `,children:t.rank}),l.jsx("div",{className:"flex-1",children:l.jsxs("div",{className:"font-bold text-white",children:[t.username,t.isCurrentUser&&l.jsx("span",{className:"text-xs text-indigo-400 ml-2",children:"()"})]})}),l.jsx("div",{className:"text-indigo-300 font-mono font-bold",children:t.score})]},`${t.username}-${t.rank}`))})]})};const Mg=()=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]}),Dg=()=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})]}),Lg=()=>{const[t,e]=f.useState(null),[n,i]=f.useState(kd.REGISTER),[r,o]=f.useState(""),[s,u]=f.useState(""),[a,c]=f.useState(!0),[h,d]=f.useState("register"),[p,m]=f.useState(null);f.useEffect(()=>{!function(){{console.log=()=>{},console.debug=()=>{},console.info=()=>{};const t=console.error,e=console.warn;console.error=(...e)=>{e.some(t=>"string"==typeof t&&(t.includes("Secure storage")||t.includes("security check")))||t(...e)},console.warn=(...t)=>{t.some(t=>"string"==typeof t&&(t.includes("Secure storage")||t.includes("security check")))||e(...t)}}}();(async()=>{try{const t=await Ed();t&&(e(t),i(kd.GAME))}catch(Fg){}finally{c(!1)}})()},[]);const v=async t=>{if(t.preventDefault(),m(null),r.trim().length<3)m("    3 ");else if(s.length<3)m("  ");else{c(!0);try{let n=null;if("register"===h)n=await(async(e,n)=>{const i={username:e,score:0,tasksCompleted:0,joinedAt:(new Date).toISOString(),currentTask:null,skipsUsedToday:0,lastSkipDate:(new Date).toDateString()};if(cd()&&!vd)try{const t=await fd(e,n);return yd(t),t}catch(t){if(t.message.includes(""))throw t;return vd=!0,yd(i),i}return yd(i),i})(r.trim(),s);else if(n=await bd(r.trim(),s),!n)throw new Error("  .");e(n),i(kd.GAME)}catch(n){m(n.message||" ")}finally{c(!1)}}};return a?l.jsx("div",{className:"min-h-screen bg-slate-900 flex items-center justify-center",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-500"})}):t&&n!==kd.REGISTER?l.jsxs("div",{className:"fixed inset-0 bg-slate-900 overflow-hidden flex flex-col",children:[l.jsxs("div",{className:"flex-1 overflow-hidden relative",children:[n===kd.GAME&&l.jsx(Pg,{user:t,refreshUser:async()=>{const t=await Ed();t&&e(t)}}),n===kd.LEADERBOARD&&l.jsx(xg,{}),(vd||!cd())&&l.jsx("div",{className:"absolute top-20 right-4 z-40",children:l.jsxs("div",{className:"bg-yellow-500/10 backdrop-blur-md border border-yellow-500/20 text-yellow-500 text-[10px] px-2 py-1 rounded-full flex items-center gap-1",children:[l.jsx("div",{className:"w-2 h-2 rounded-full bg-yellow-500 animate-pulse"}),"Offline Mode"]})})]}),l.jsxs("nav",{className:"h-16 bg-slate-800 border-t border-slate-700 flex items-center justify-around z-20 shrink-0",children:[l.jsxs("button",{onClick:()=>i(kd.GAME),className:"flex flex-col items-center justify-center w-full h-full transition-colors "+(n===kd.GAME?"text-indigo-400":"text-slate-500 hover:text-slate-300"),children:[l.jsx(Mg,{}),l.jsx("span",{className:"text-xs mt-1 font-medium",children:""})]}),l.jsxs("button",{onClick:()=>i(kd.LEADERBOARD),className:"flex flex-col items-center justify-center w-full h-full transition-colors "+(n===kd.LEADERBOARD?"text-indigo-400":"text-slate-500 hover:text-slate-300"),children:[l.jsx(Dg,{}),l.jsx("span",{className:"text-xs mt-1 font-medium",children:""})]})]})]}):l.jsxs("div",{className:"min-h-screen bg-slate-900 flex flex-col items-center justify-center p-6 text-white relative overflow-hidden",children:[l.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-64 h-64 bg-indigo-600 rounded-full blur-[100px] opacity-20"}),l.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-80 h-80 bg-purple-600 rounded-full blur-[100px] opacity-20"}),l.jsxs("div",{className:"relative z-10 w-full max-w-md bg-slate-800/50 p-8 rounded-3xl border border-slate-700 backdrop-blur-xl shadow-2xl",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("h1",{className:"text-4xl font-black bg-gradient-to-r from-indigo-400 to-purple-400 bg-clip-text text-transparent mb-2",children:"PhotoQuest"}),l.jsx("p",{className:"text-slate-400",children:"  "}),!cd()&&l.jsx("span",{className:"text-[10px] text-yellow-500/50 bg-yellow-900/20 px-2 py-1 rounded mt-2 inline-block",children:" "})]}),l.jsxs("div",{className:"flex bg-slate-900/50 rounded-lg p-1 mb-6",children:[l.jsx("button",{onClick:()=>{d("register"),m(null),u("")},className:"flex-1 py-2 text-sm font-medium rounded-md transition-all "+("register"===h?"bg-indigo-600 text-white shadow":"text-slate-400 hover:text-white"),children:" "}),l.jsx("button",{onClick:()=>{d("login"),m(null),u("")},className:"flex-1 py-2 text-sm font-medium rounded-md transition-all "+("login"===h?"bg-indigo-600 text-white shadow":"text-slate-400 hover:text-white"),children:""})]}),l.jsxs("form",{onSubmit:v,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:""}),l.jsx("input",{type:"text",value:r,onChange:t=>o(t.target.value),className:"w-full bg-slate-900 border border-slate-700 rounded-xl px-4 py-3 text-white focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all placeholder-slate-600",placeholder:"  ",maxLength:20})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:""}),l.jsx("input",{type:"password",value:s,onChange:t=>u(t.target.value),className:"w-full bg-slate-900 border border-slate-700 rounded-xl px-4 py-3 text-white focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all placeholder-slate-600",placeholder:"register"===h?"  ":" "}),"register"===h&&l.jsx("p",{className:"text-[10px] text-yellow-500/70 mt-2 bg-yellow-900/20 p-2 rounded",children:" :         .  -  (: 12345)."})]}),p&&l.jsx("p",{className:"text-red-400 text-xs mt-2 text-center bg-red-900/20 p-2 rounded",children:p}),l.jsx(Id,{type:"submit",className:"w-full mt-4",disabled:r.trim().length<3||s.length<3||a,children:a?"...":"register"===h?" ":""})]})]})]})},Ug=document.getElementById("root");if(!Ug)throw new Error("Could not find root element to mount to");O.createRoot(Ug).render(l.jsx(d.StrictMode,{children:l.jsx(Lg,{})}));
