(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function KS(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var lp={exports:{}},Ol={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xT;function bR(){if(xT)return Ol;xT=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,o,l){var u=null;if(l!==void 0&&(u=""+l),o.key!==void 0&&(u=""+o.key),"key"in o){l={};for(var d in o)d!=="key"&&(l[d]=o[d])}else l=o;return o=l.ref,{$$typeof:n,type:s,key:u,ref:o!==void 0?o:null,props:l}}return Ol.Fragment=e,Ol.jsx=t,Ol.jsxs=t,Ol}var VT;function PR(){return VT||(VT=1,lp.exports=bR()),lp.exports}var se=PR(),up={exports:{}},Ie={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UT;function xR(){if(UT)return Ie;UT=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),S=Symbol.iterator;function w(k){return k===null||typeof k!="object"?null:(k=S&&k[S]||k["@@iterator"],typeof k=="function"?k:null)}var O={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},G=Object.assign,F={};function $(k,ee,ae){this.props=k,this.context=ee,this.refs=F,this.updater=ae||O}$.prototype.isReactComponent={},$.prototype.setState=function(k,ee){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,ee,"setState")},$.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function te(){}te.prototype=$.prototype;function ne(k,ee,ae){this.props=k,this.context=ee,this.refs=F,this.updater=ae||O}var le=ne.prototype=new te;le.constructor=ne,G(le,$.prototype),le.isPureReactComponent=!0;var me=Array.isArray;function fe(){}var D={H:null,A:null,T:null,S:null},M=Object.prototype.hasOwnProperty;function N(k,ee,ae){var he=ae.ref;return{$$typeof:n,type:k,key:ee,ref:he!==void 0?he:null,props:ae}}function V(k,ee){return N(k.type,ee,k.props)}function x(k){return typeof k=="object"&&k!==null&&k.$$typeof===n}function L(k){var ee={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(ae){return ee[ae]})}var b=/\/+/g;function Oe(k,ee){return typeof k=="object"&&k!==null&&k.key!=null?L(""+k.key):ee.toString(36)}function pt(k){switch(k.status){case"fulfilled":return k.value;case"rejected":throw k.reason;default:switch(typeof k.status=="string"?k.then(fe,fe):(k.status="pending",k.then(function(ee){k.status==="pending"&&(k.status="fulfilled",k.value=ee)},function(ee){k.status==="pending"&&(k.status="rejected",k.reason=ee)})),k.status){case"fulfilled":return k.value;case"rejected":throw k.reason}}throw k}function Q(k,ee,ae,he,Ae){var Me=typeof k;(Me==="undefined"||Me==="boolean")&&(k=null);var Fe=!1;if(k===null)Fe=!0;else switch(Me){case"bigint":case"string":case"number":Fe=!0;break;case"object":switch(k.$$typeof){case n:case e:Fe=!0;break;case T:return Fe=k._init,Q(Fe(k._payload),ee,ae,he,Ae)}}if(Fe)return Ae=Ae(k),Fe=he===""?"."+Oe(k,0):he,me(Ae)?(ae="",Fe!=null&&(ae=Fe.replace(b,"$&/")+"/"),Q(Ae,ee,ae,"",function(Sr){return Sr})):Ae!=null&&(x(Ae)&&(Ae=V(Ae,ae+(Ae.key==null||k&&k.key===Ae.key?"":(""+Ae.key).replace(b,"$&/")+"/")+Fe)),ee.push(Ae)),1;Fe=0;var Ut=he===""?".":he+":";if(me(k))for(var ct=0;ct<k.length;ct++)he=k[ct],Me=Ut+Oe(he,ct),Fe+=Q(he,ee,ae,Me,Ae);else if(ct=w(k),typeof ct=="function")for(k=ct.call(k),ct=0;!(he=k.next()).done;)he=he.value,Me=Ut+Oe(he,ct++),Fe+=Q(he,ee,ae,Me,Ae);else if(Me==="object"){if(typeof k.then=="function")return Q(pt(k),ee,ae,he,Ae);throw ee=String(k),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.")}return Fe}function oe(k,ee,ae){if(k==null)return k;var he=[],Ae=0;return Q(k,he,"","",function(Me){return ee.call(ae,Me,Ae++)}),he}function Te(k){if(k._status===-1){var ee=k._result;ee=ee(),ee.then(function(ae){(k._status===0||k._status===-1)&&(k._status=1,k._result=ae)},function(ae){(k._status===0||k._status===-1)&&(k._status=2,k._result=ae)}),k._status===-1&&(k._status=0,k._result=ee)}if(k._status===1)return k._result.default;throw k._result}var Ge=typeof reportError=="function"?reportError:function(k){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ee=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof k=="object"&&k!==null&&typeof k.message=="string"?String(k.message):String(k),error:k});if(!window.dispatchEvent(ee))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",k);return}console.error(k)},$e={map:oe,forEach:function(k,ee,ae){oe(k,function(){ee.apply(this,arguments)},ae)},count:function(k){var ee=0;return oe(k,function(){ee++}),ee},toArray:function(k){return oe(k,function(ee){return ee})||[]},only:function(k){if(!x(k))throw Error("React.Children.only expected to receive a single React element child.");return k}};return Ie.Activity=v,Ie.Children=$e,Ie.Component=$,Ie.Fragment=t,Ie.Profiler=o,Ie.PureComponent=ne,Ie.StrictMode=s,Ie.Suspense=g,Ie.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,Ie.__COMPILER_RUNTIME={__proto__:null,c:function(k){return D.H.useMemoCache(k)}},Ie.cache=function(k){return function(){return k.apply(null,arguments)}},Ie.cacheSignal=function(){return null},Ie.cloneElement=function(k,ee,ae){if(k==null)throw Error("The argument must be a React element, but you passed "+k+".");var he=G({},k.props),Ae=k.key;if(ee!=null)for(Me in ee.key!==void 0&&(Ae=""+ee.key),ee)!M.call(ee,Me)||Me==="key"||Me==="__self"||Me==="__source"||Me==="ref"&&ee.ref===void 0||(he[Me]=ee[Me]);var Me=arguments.length-2;if(Me===1)he.children=ae;else if(1<Me){for(var Fe=Array(Me),Ut=0;Ut<Me;Ut++)Fe[Ut]=arguments[Ut+2];he.children=Fe}return N(k.type,Ae,he)},Ie.createContext=function(k){return k={$$typeof:u,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null},k.Provider=k,k.Consumer={$$typeof:l,_context:k},k},Ie.createElement=function(k,ee,ae){var he,Ae={},Me=null;if(ee!=null)for(he in ee.key!==void 0&&(Me=""+ee.key),ee)M.call(ee,he)&&he!=="key"&&he!=="__self"&&he!=="__source"&&(Ae[he]=ee[he]);var Fe=arguments.length-2;if(Fe===1)Ae.children=ae;else if(1<Fe){for(var Ut=Array(Fe),ct=0;ct<Fe;ct++)Ut[ct]=arguments[ct+2];Ae.children=Ut}if(k&&k.defaultProps)for(he in Fe=k.defaultProps,Fe)Ae[he]===void 0&&(Ae[he]=Fe[he]);return N(k,Me,Ae)},Ie.createRef=function(){return{current:null}},Ie.forwardRef=function(k){return{$$typeof:d,render:k}},Ie.isValidElement=x,Ie.lazy=function(k){return{$$typeof:T,_payload:{_status:-1,_result:k},_init:Te}},Ie.memo=function(k,ee){return{$$typeof:m,type:k,compare:ee===void 0?null:ee}},Ie.startTransition=function(k){var ee=D.T,ae={};D.T=ae;try{var he=k(),Ae=D.S;Ae!==null&&Ae(ae,he),typeof he=="object"&&he!==null&&typeof he.then=="function"&&he.then(fe,Ge)}catch(Me){Ge(Me)}finally{ee!==null&&ae.types!==null&&(ee.types=ae.types),D.T=ee}},Ie.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},Ie.use=function(k){return D.H.use(k)},Ie.useActionState=function(k,ee,ae){return D.H.useActionState(k,ee,ae)},Ie.useCallback=function(k,ee){return D.H.useCallback(k,ee)},Ie.useContext=function(k){return D.H.useContext(k)},Ie.useDebugValue=function(){},Ie.useDeferredValue=function(k,ee){return D.H.useDeferredValue(k,ee)},Ie.useEffect=function(k,ee){return D.H.useEffect(k,ee)},Ie.useEffectEvent=function(k){return D.H.useEffectEvent(k)},Ie.useId=function(){return D.H.useId()},Ie.useImperativeHandle=function(k,ee,ae){return D.H.useImperativeHandle(k,ee,ae)},Ie.useInsertionEffect=function(k,ee){return D.H.useInsertionEffect(k,ee)},Ie.useLayoutEffect=function(k,ee){return D.H.useLayoutEffect(k,ee)},Ie.useMemo=function(k,ee){return D.H.useMemo(k,ee)},Ie.useOptimistic=function(k,ee){return D.H.useOptimistic(k,ee)},Ie.useReducer=function(k,ee,ae){return D.H.useReducer(k,ee,ae)},Ie.useRef=function(k){return D.H.useRef(k)},Ie.useState=function(k){return D.H.useState(k)},Ie.useSyncExternalStore=function(k,ee,ae){return D.H.useSyncExternalStore(k,ee,ae)},Ie.useTransition=function(){return D.H.useTransition()},Ie.version="19.2.1",Ie}var kT;function am(){return kT||(kT=1,up.exports=xR()),up.exports}var lt=am();const VR=KS(lt);var cp={exports:{}},ql={},fp={exports:{}},dp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LT;function UR(){return LT||(LT=1,(function(n){function e(Q,oe){var Te=Q.length;Q.push(oe);e:for(;0<Te;){var Ge=Te-1>>>1,$e=Q[Ge];if(0<o($e,oe))Q[Ge]=oe,Q[Te]=$e,Te=Ge;else break e}}function t(Q){return Q.length===0?null:Q[0]}function s(Q){if(Q.length===0)return null;var oe=Q[0],Te=Q.pop();if(Te!==oe){Q[0]=Te;e:for(var Ge=0,$e=Q.length,k=$e>>>1;Ge<k;){var ee=2*(Ge+1)-1,ae=Q[ee],he=ee+1,Ae=Q[he];if(0>o(ae,Te))he<$e&&0>o(Ae,ae)?(Q[Ge]=Ae,Q[he]=Te,Ge=he):(Q[Ge]=ae,Q[ee]=Te,Ge=ee);else if(he<$e&&0>o(Ae,Te))Q[Ge]=Ae,Q[he]=Te,Ge=he;else break e}}return oe}function o(Q,oe){var Te=Q.sortIndex-oe.sortIndex;return Te!==0?Te:Q.id-oe.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var u=Date,d=u.now();n.unstable_now=function(){return u.now()-d}}var g=[],m=[],T=1,v=null,S=3,w=!1,O=!1,G=!1,F=!1,$=typeof setTimeout=="function"?setTimeout:null,te=typeof clearTimeout=="function"?clearTimeout:null,ne=typeof setImmediate<"u"?setImmediate:null;function le(Q){for(var oe=t(m);oe!==null;){if(oe.callback===null)s(m);else if(oe.startTime<=Q)s(m),oe.sortIndex=oe.expirationTime,e(g,oe);else break;oe=t(m)}}function me(Q){if(G=!1,le(Q),!O)if(t(g)!==null)O=!0,fe||(fe=!0,L());else{var oe=t(m);oe!==null&&pt(me,oe.startTime-Q)}}var fe=!1,D=-1,M=5,N=-1;function V(){return F?!0:!(n.unstable_now()-N<M)}function x(){if(F=!1,fe){var Q=n.unstable_now();N=Q;var oe=!0;try{e:{O=!1,G&&(G=!1,te(D),D=-1),w=!0;var Te=S;try{t:{for(le(Q),v=t(g);v!==null&&!(v.expirationTime>Q&&V());){var Ge=v.callback;if(typeof Ge=="function"){v.callback=null,S=v.priorityLevel;var $e=Ge(v.expirationTime<=Q);if(Q=n.unstable_now(),typeof $e=="function"){v.callback=$e,le(Q),oe=!0;break t}v===t(g)&&s(g),le(Q)}else s(g);v=t(g)}if(v!==null)oe=!0;else{var k=t(m);k!==null&&pt(me,k.startTime-Q),oe=!1}}break e}finally{v=null,S=Te,w=!1}oe=void 0}}finally{oe?L():fe=!1}}}var L;if(typeof ne=="function")L=function(){ne(x)};else if(typeof MessageChannel<"u"){var b=new MessageChannel,Oe=b.port2;b.port1.onmessage=x,L=function(){Oe.postMessage(null)}}else L=function(){$(x,0)};function pt(Q,oe){D=$(function(){Q(n.unstable_now())},oe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Q){Q.callback=null},n.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<Q?Math.floor(1e3/Q):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_next=function(Q){switch(S){case 1:case 2:case 3:var oe=3;break;default:oe=S}var Te=S;S=oe;try{return Q()}finally{S=Te}},n.unstable_requestPaint=function(){F=!0},n.unstable_runWithPriority=function(Q,oe){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var Te=S;S=Q;try{return oe()}finally{S=Te}},n.unstable_scheduleCallback=function(Q,oe,Te){var Ge=n.unstable_now();switch(typeof Te=="object"&&Te!==null?(Te=Te.delay,Te=typeof Te=="number"&&0<Te?Ge+Te:Ge):Te=Ge,Q){case 1:var $e=-1;break;case 2:$e=250;break;case 5:$e=1073741823;break;case 4:$e=1e4;break;default:$e=5e3}return $e=Te+$e,Q={id:T++,callback:oe,priorityLevel:Q,startTime:Te,expirationTime:$e,sortIndex:-1},Te>Ge?(Q.sortIndex=Te,e(m,Q),t(g)===null&&Q===t(m)&&(G?(te(D),D=-1):G=!0,pt(me,Te-Ge))):(Q.sortIndex=$e,e(g,Q),O||w||(O=!0,fe||(fe=!0,L()))),Q},n.unstable_shouldYield=V,n.unstable_wrapCallback=function(Q){var oe=S;return function(){var Te=S;S=oe;try{return Q.apply(this,arguments)}finally{S=Te}}}})(dp)),dp}var OT;function kR(){return OT||(OT=1,fp.exports=UR()),fp.exports}var hp={exports:{}},jt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qT;function LR(){if(qT)return jt;qT=1;var n=am();function e(g){var m="https://react.dev/errors/"+g;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)m+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+g+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function l(g,m,T){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:v==null?null:""+v,children:g,containerInfo:m,implementation:T}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(g,m){if(g==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return jt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,jt.createPortal=function(g,m){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return l(g,m,null,T)},jt.flushSync=function(g){var m=u.T,T=s.p;try{if(u.T=null,s.p=2,g)return g()}finally{u.T=m,s.p=T,s.d.f()}},jt.preconnect=function(g,m){typeof g=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,s.d.C(g,m))},jt.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},jt.preinit=function(g,m){if(typeof g=="string"&&m&&typeof m.as=="string"){var T=m.as,v=d(T,m.crossOrigin),S=typeof m.integrity=="string"?m.integrity:void 0,w=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;T==="style"?s.d.S(g,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:v,integrity:S,fetchPriority:w}):T==="script"&&s.d.X(g,{crossOrigin:v,integrity:S,fetchPriority:w,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},jt.preinitModule=function(g,m){if(typeof g=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var T=d(m.as,m.crossOrigin);s.d.M(g,{crossOrigin:T,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&s.d.M(g)},jt.preload=function(g,m){if(typeof g=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var T=m.as,v=d(T,m.crossOrigin);s.d.L(g,T,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},jt.preloadModule=function(g,m){if(typeof g=="string")if(m){var T=d(m.as,m.crossOrigin);s.d.m(g,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:T,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else s.d.m(g)},jt.requestFormReset=function(g){s.d.r(g)},jt.unstable_batchedUpdates=function(g,m){return g(m)},jt.useFormState=function(g,m,T){return u.H.useFormState(g,m,T)},jt.useFormStatus=function(){return u.H.useHostTransitionStatus()},jt.version="19.2.1",jt}var FT;function OR(){if(FT)return hp.exports;FT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),hp.exports=LR(),hp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BT;function qR(){if(BT)return ql;BT=1;var n=kR(),e=am(),t=OR();function s(i){var r="https://react.dev/errors/"+i;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+i+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var r=i,a=i;if(i.alternate)for(;r.return;)r=r.return;else{i=r;do r=i,(r.flags&4098)!==0&&(a=r.return),i=r.return;while(i)}return r.tag===3?a:null}function u(i){if(i.tag===13){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function d(i){if(i.tag===31){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function g(i){if(l(i)!==i)throw Error(s(188))}function m(i){var r=i.alternate;if(!r){if(r=l(i),r===null)throw Error(s(188));return r!==i?null:i}for(var a=i,c=r;;){var y=a.return;if(y===null)break;var _=y.alternate;if(_===null){if(c=y.return,c!==null){a=c;continue}break}if(y.child===_.child){for(_=y.child;_;){if(_===a)return g(y),i;if(_===c)return g(y),r;_=_.sibling}throw Error(s(188))}if(a.return!==c.return)a=y,c=_;else{for(var A=!1,I=y.child;I;){if(I===a){A=!0,a=y,c=_;break}if(I===c){A=!0,c=y,a=_;break}I=I.sibling}if(!A){for(I=_.child;I;){if(I===a){A=!0,a=_,c=y;break}if(I===c){A=!0,c=_,a=y;break}I=I.sibling}if(!A)throw Error(s(189))}}if(a.alternate!==c)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?i:r}function T(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i;for(i=i.child;i!==null;){if(r=T(i),r!==null)return r;i=i.sibling}return null}var v=Object.assign,S=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),O=Symbol.for("react.portal"),G=Symbol.for("react.fragment"),F=Symbol.for("react.strict_mode"),$=Symbol.for("react.profiler"),te=Symbol.for("react.consumer"),ne=Symbol.for("react.context"),le=Symbol.for("react.forward_ref"),me=Symbol.for("react.suspense"),fe=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),x=Symbol.iterator;function L(i){return i===null||typeof i!="object"?null:(i=x&&i[x]||i["@@iterator"],typeof i=="function"?i:null)}var b=Symbol.for("react.client.reference");function Oe(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===b?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case G:return"Fragment";case $:return"Profiler";case F:return"StrictMode";case me:return"Suspense";case fe:return"SuspenseList";case N:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case O:return"Portal";case ne:return i.displayName||"Context";case te:return(i._context.displayName||"Context")+".Consumer";case le:var r=i.render;return i=i.displayName,i||(i=r.displayName||r.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case D:return r=i.displayName||null,r!==null?r:Oe(i.type)||"Memo";case M:r=i._payload,i=i._init;try{return Oe(i(r))}catch{}}return null}var pt=Array.isArray,Q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Te={pending:!1,data:null,method:null,action:null},Ge=[],$e=-1;function k(i){return{current:i}}function ee(i){0>$e||(i.current=Ge[$e],Ge[$e]=null,$e--)}function ae(i,r){$e++,Ge[$e]=i.current,i.current=r}var he=k(null),Ae=k(null),Me=k(null),Fe=k(null);function Ut(i,r){switch(ae(Me,r),ae(Ae,i),ae(he,null),r.nodeType){case 9:case 11:i=(i=r.documentElement)&&(i=i.namespaceURI)?nT(i):0;break;default:if(i=r.tagName,r=r.namespaceURI)r=nT(r),i=iT(r,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}ee(he),ae(he,i)}function ct(){ee(he),ee(Ae),ee(Me)}function Sr(i){i.memoizedState!==null&&ae(Fe,i);var r=he.current,a=iT(r,i.type);r!==a&&(ae(Ae,i),ae(he,a))}function co(i){Ae.current===i&&(ee(he),ee(Ae)),Fe.current===i&&(ee(Fe),Vl._currentValue=Te)}var fo,ho;function ui(i){if(fo===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);fo=r&&r[1]||"",ho=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+fo+i+ho}var Va=!1;function Ar(i,r){if(!i||Va)return"";Va=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(r){var j=function(){throw Error()};if(Object.defineProperty(j.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(j,[])}catch(K){var J=K}Reflect.construct(i,[],j)}else{try{j.call()}catch(K){J=K}i.call(j.prototype)}}else{try{throw Error()}catch(K){J=K}(j=i())&&typeof j.catch=="function"&&j.catch(function(){})}}catch(K){if(K&&J&&typeof K.stack=="string")return[K.stack,J.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=c.DetermineComponentFrameRoot(),A=_[0],I=_[1];if(A&&I){var P=A.split(`
`),z=I.split(`
`);for(y=c=0;c<P.length&&!P[c].includes("DetermineComponentFrameRoot");)c++;for(;y<z.length&&!z[y].includes("DetermineComponentFrameRoot");)y++;if(c===P.length||y===z.length)for(c=P.length-1,y=z.length-1;1<=c&&0<=y&&P[c]!==z[y];)y--;for(;1<=c&&0<=y;c--,y--)if(P[c]!==z[y]){if(c!==1||y!==1)do if(c--,y--,0>y||P[c]!==z[y]){var X=`
`+P[c].replace(" at new "," at ");return i.displayName&&X.includes("<anonymous>")&&(X=X.replace("<anonymous>",i.displayName)),X}while(1<=c&&0<=y);break}}}finally{Va=!1,Error.prepareStackTrace=a}return(a=i?i.displayName||i.name:"")?ui(a):""}function Ua(i,r){switch(i.tag){case 26:case 27:case 5:return ui(i.type);case 16:return ui("Lazy");case 13:return i.child!==r&&r!==null?ui("Suspense Fallback"):ui("Suspense");case 19:return ui("SuspenseList");case 0:case 15:return Ar(i.type,!1);case 11:return Ar(i.type.render,!1);case 1:return Ar(i.type,!0);case 31:return ui("Activity");default:return""}}function ka(i){try{var r="",a=null;do r+=Ua(i,a),a=i,i=i.return;while(i);return r}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var At=Object.prototype.hasOwnProperty,kt=n.unstable_scheduleCallback,Ts=n.unstable_cancelCallback,cd=n.unstable_shouldYield,vu=n.unstable_requestPaint,on=n.unstable_now,Cr=n.unstable_getCurrentPriorityLevel,La=n.unstable_ImmediatePriority,Oa=n.unstable_UserBlockingPriority,vs=n.unstable_NormalPriority,fd=n.unstable_LowPriority,Eu=n.unstable_IdlePriority,Su=n.log,Au=n.unstable_setDisableYieldValue,Yn=null,Ht=null;function Dn(i){if(typeof Su=="function"&&Au(i),Ht&&typeof Ht.setStrictMode=="function")try{Ht.setStrictMode(Yn,i)}catch{}}var yt=Math.clz32?Math.clz32:Iu,Cu=Math.log,po=Math.LN2;function Iu(i){return i>>>=0,i===0?32:31-(Cu(i)/po|0)|0}var ci=256,Ir=262144,Ct=4194304;function fi(i){var r=i&42;if(r!==0)return r;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function di(i,r,a){var c=i.pendingLanes;if(c===0)return 0;var y=0,_=i.suspendedLanes,A=i.pingedLanes;i=i.warmLanes;var I=c&134217727;return I!==0?(c=I&~_,c!==0?y=fi(c):(A&=I,A!==0?y=fi(A):a||(a=I&~i,a!==0&&(y=fi(a))))):(I=c&~_,I!==0?y=fi(I):A!==0?y=fi(A):a||(a=c&~i,a!==0&&(y=fi(a)))),y===0?0:r!==0&&r!==y&&(r&_)===0&&(_=y&-y,a=r&-r,_>=a||_===32&&(a&4194048)!==0)?r:y}function Kn(i,r){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&r)===0}function dd(i,r){switch(i){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ru(){var i=Ct;return Ct<<=1,(Ct&62914560)===0&&(Ct=4194304),i}function hi(i){for(var r=[],a=0;31>a;a++)r.push(i);return r}function Rr(i,r){i.pendingLanes|=r,r!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function hd(i,r,a,c,y,_){var A=i.pendingLanes;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=a,i.entangledLanes&=a,i.errorRecoveryDisabledLanes&=a,i.shellSuspendCounter=0;var I=i.entanglements,P=i.expirationTimes,z=i.hiddenUpdates;for(a=A&~a;0<a;){var X=31-yt(a),j=1<<X;I[X]=0,P[X]=-1;var J=z[X];if(J!==null)for(z[X]=null,X=0;X<J.length;X++){var K=J[X];K!==null&&(K.lane&=-536870913)}a&=~j}c!==0&&wr(i,c,0),_!==0&&y===0&&i.tag!==0&&(i.suspendedLanes|=_&~(A&~r))}function wr(i,r,a){i.pendingLanes|=r,i.suspendedLanes&=~r;var c=31-yt(r);i.entangledLanes|=r,i.entanglements[c]=i.entanglements[c]|1073741824|a&261930}function qa(i,r){var a=i.entangledLanes|=r;for(i=i.entanglements;a;){var c=31-yt(a),y=1<<c;y&r|i[c]&r&&(i[c]|=r),a&=~y}}function Fa(i,r){var a=r&-r;return a=(a&42)!==0?1:Nr(a),(a&(i.suspendedLanes|r))!==0?0:a}function Nr(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Fi(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function wu(){var i=oe.p;return i!==0?i:(i=window.event,i===void 0?32:RT(i.type))}function Qn(i,r){var a=oe.p;try{return oe.p=i,r()}finally{oe.p=a}}var $n=Math.random().toString(36).slice(2),It="__reactFiber$"+$n,qt="__reactProps$"+$n,pi="__reactContainer$"+$n,mo="__reactEvents$"+$n,pd="__reactListeners$"+$n,Nu="__reactHandles$"+$n,Mu="__reactResources$"+$n,mi="__reactMarker$"+$n;function go(i){delete i[It],delete i[qt],delete i[mo],delete i[pd],delete i[Nu]}function gi(i){var r=i[It];if(r)return r;for(var a=i.parentNode;a;){if(r=a[pi]||a[It]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(i=cT(i);i!==null;){if(a=i[It])return a;i=cT(i)}return r}i=a,a=i.parentNode}return null}function bn(i){if(i=i[It]||i[pi]){var r=i.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return i}return null}function vn(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i.stateNode;throw Error(s(33))}function yi(i){var r=i[Mu];return r||(r=i[Mu]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Rt(i){i[mi]=!0}var Ba=new Set,Ga={};function _i(i,r){Ti(i,r),Ti(i+"Capture",r)}function Ti(i,r){for(Ga[i]=r,i=0;i<r.length;i++)Ba.add(r[i])}var Ha=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),za={},Ja={};function Du(i){return At.call(Ja,i)?!0:At.call(za,i)?!1:Ha.test(i)?Ja[i]=!0:(za[i]=!0,!1)}function yo(i,r,a){if(Du(r))if(a===null)i.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":i.removeAttribute(r);return;case"boolean":var c=r.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){i.removeAttribute(r);return}}i.setAttribute(r,""+a)}}function En(i,r,a){if(a===null)i.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(r);return}i.setAttribute(r,""+a)}}function wt(i,r,a,c){if(c===null)i.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttributeNS(r,a,""+c)}}function Ft(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Es(i){var r=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Ya(i,r,a){var c=Object.getOwnPropertyDescriptor(i.constructor.prototype,r);if(!i.hasOwnProperty(r)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var y=c.get,_=c.set;return Object.defineProperty(i,r,{configurable:!0,get:function(){return y.call(this)},set:function(A){a=""+A,_.call(this,A)}}),Object.defineProperty(i,r,{enumerable:c.enumerable}),{getValue:function(){return a},setValue:function(A){a=""+A},stopTracking:function(){i._valueTracker=null,delete i[r]}}}}function Xe(i){if(!i._valueTracker){var r=Es(i)?"checked":"value";i._valueTracker=Ya(i,r,""+i[r])}}function Mr(i){if(!i)return!1;var r=i._valueTracker;if(!r)return!0;var a=r.getValue(),c="";return i&&(c=Es(i)?i.checked?"true":"false":i.value),i=c,i!==a?(r.setValue(i),!0):!1}function vi(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Dr=/[\n"\\]/g;function fn(i){return i.replace(Dr,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function _o(i,r,a,c,y,_,A,I){i.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?i.type=A:i.removeAttribute("type"),r!=null?A==="number"?(r===0&&i.value===""||i.value!=r)&&(i.value=""+Ft(r)):i.value!==""+Ft(r)&&(i.value=""+Ft(r)):A!=="submit"&&A!=="reset"||i.removeAttribute("value"),r!=null?Ka(i,A,Ft(r)):a!=null?Ka(i,A,Ft(a)):c!=null&&i.removeAttribute("value"),y==null&&_!=null&&(i.defaultChecked=!!_),y!=null&&(i.checked=y&&typeof y!="function"&&typeof y!="symbol"),I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?i.name=""+Ft(I):i.removeAttribute("name")}function bu(i,r,a,c,y,_,A,I){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(i.type=_),r!=null||a!=null){if(!(_!=="submit"&&_!=="reset"||r!=null)){Xe(i);return}a=a!=null?""+Ft(a):"",r=r!=null?""+Ft(r):a,I||r===i.value||(i.value=r),i.defaultValue=r}c=c??y,c=typeof c!="function"&&typeof c!="symbol"&&!!c,i.checked=I?i.checked:!!c,i.defaultChecked=!!c,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(i.name=A),Xe(i)}function Ka(i,r,a){r==="number"&&vi(i.ownerDocument)===i||i.defaultValue===""+a||(i.defaultValue=""+a)}function Ss(i,r,a,c){if(i=i.options,r){r={};for(var y=0;y<a.length;y++)r["$"+a[y]]=!0;for(a=0;a<i.length;a++)y=r.hasOwnProperty("$"+i[a].value),i[a].selected!==y&&(i[a].selected=y),y&&c&&(i[a].defaultSelected=!0)}else{for(a=""+Ft(a),r=null,y=0;y<i.length;y++){if(i[y].value===a){i[y].selected=!0,c&&(i[y].defaultSelected=!0);return}r!==null||i[y].disabled||(r=i[y])}r!==null&&(r.selected=!0)}}function Pu(i,r,a){if(r!=null&&(r=""+Ft(r),r!==i.value&&(i.value=r),a==null)){i.defaultValue!==r&&(i.defaultValue=r);return}i.defaultValue=a!=null?""+Ft(a):""}function As(i,r,a,c){if(r==null){if(c!=null){if(a!=null)throw Error(s(92));if(pt(c)){if(1<c.length)throw Error(s(93));c=c[0]}a=c}a==null&&(a=""),r=a}a=Ft(r),i.defaultValue=a,c=i.textContent,c===a&&c!==""&&c!==null&&(i.value=c),Xe(i)}function dn(i,r){if(r){var a=i.firstChild;if(a&&a===i.lastChild&&a.nodeType===3){a.nodeValue=r;return}}i.textContent=r}var xu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Qa(i,r,a){var c=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?c?i.setProperty(r,""):r==="float"?i.cssFloat="":i[r]="":c?i.setProperty(r,a):typeof a!="number"||a===0||xu.has(r)?r==="float"?i.cssFloat=a:i[r]=(""+a).trim():i[r]=a+"px"}function $a(i,r,a){if(r!=null&&typeof r!="object")throw Error(s(62));if(i=i.style,a!=null){for(var c in a)!a.hasOwnProperty(c)||r!=null&&r.hasOwnProperty(c)||(c.indexOf("--")===0?i.setProperty(c,""):c==="float"?i.cssFloat="":i[c]="");for(var y in r)c=r[y],r.hasOwnProperty(y)&&a[y]!==c&&Qa(i,y,c)}else for(var _ in r)r.hasOwnProperty(_)&&Qa(i,_,r[_])}function To(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Cs=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function vo(i){return Cs.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Xn(){}var Xa=null;function Pn(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Is=null,Ei=null;function br(i){var r=bn(i);if(r&&(i=r.stateNode)){var a=i[qt]||null;e:switch(i=r.stateNode,r.type){case"input":if(_o(i,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=i;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+fn(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var c=a[r];if(c!==i&&c.form===i.form){var y=c[qt]||null;if(!y)throw Error(s(90));_o(c,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(r=0;r<a.length;r++)c=a[r],c.form===i.form&&Mr(c)}break e;case"textarea":Pu(i,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&Ss(i,!!a.multiple,r,!1)}}}var Eo=!1;function Rs(i,r,a){if(Eo)return i(r,a);Eo=!0;try{var c=i(r);return c}finally{if(Eo=!1,(Is!==null||Ei!==null)&&(wc(),Is&&(r=Is,i=Ei,Ei=Is=null,br(r),i)))for(r=0;r<i.length;r++)br(i[r])}}function Wn(i,r){var a=i.stateNode;if(a===null)return null;var c=a[qt]||null;if(c===null)return null;a=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(i=i.type,c=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!c;break e;default:i=!1}if(i)return null;if(a&&typeof a!="function")throw Error(s(231,r,typeof a));return a}var xn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pr=!1;if(xn)try{var je={};Object.defineProperty(je,"passive",{get:function(){Pr=!0}}),window.addEventListener("test",je,je),window.removeEventListener("test",je,je)}catch{Pr=!1}var Si=null,Wa=null,xr=null;function Za(){if(xr)return xr;var i,r=Wa,a=r.length,c,y="value"in Si?Si.value:Si.textContent,_=y.length;for(i=0;i<a&&r[i]===y[i];i++);var A=a-i;for(c=1;c<=A&&r[a-c]===y[_-c];c++);return xr=y.slice(i,1<c?1-c:void 0)}function Vr(i){var r=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&r===13&&(i=13)):i=r,i===10&&(i=13),32<=i||i===13?i:0}function Bi(){return!0}function Zn(){return!1}function zt(i){function r(a,c,y,_,A){this._reactName=a,this._targetInst=y,this.type=c,this.nativeEvent=_,this.target=A,this.currentTarget=null;for(var I in i)i.hasOwnProperty(I)&&(a=i[I],this[I]=a?a(_):_[I]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Bi:Zn,this.isPropagationStopped=Zn,this}return v(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Bi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Bi)},persist:function(){},isPersistent:Bi}),r}var Gi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ai=zt(Gi),ws=v({},Gi,{view:0,detail:0}),ja=zt(ws),Ns,So,Ci,Ao=v({},ws,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ms,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Ci&&(Ci&&i.type==="mousemove"?(Ns=i.screenX-Ci.screenX,So=i.screenY-Ci.screenY):So=Ns=0,Ci=i),Ns)},movementY:function(i){return"movementY"in i?i.movementY:So}}),el=zt(Ao),Ur=v({},Ao,{dataTransfer:0}),Uu=zt(Ur),ku=v({},ws,{relatedTarget:0}),kr=zt(ku),tl=v({},Gi,{animationName:0,elapsedTime:0,pseudoElement:0}),Lu=zt(tl),Co=v({},Gi,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Ou=zt(Co),qu=v({},Gi,{data:0}),Ii=zt(qu),Fu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Bu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Gu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Hu(i){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(i):(i=Gu[i])?!!r[i]:!1}function Ms(){return Hu}var an=v({},ws,{key:function(i){if(i.key){var r=Fu[i.key]||i.key;if(r!=="Unidentified")return r}return i.type==="keypress"?(i=Vr(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Bu[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ms,charCode:function(i){return i.type==="keypress"?Vr(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Vr(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),zu=zt(an),Ju=v({},Ao,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Hi=zt(Ju),p=v({},ws,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ms}),E=zt(p),C=v({},Gi,{propertyName:0,elapsedTime:0,pseudoElement:0}),R=zt(C),B=v({},Ao,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Y=zt(B),re=v({},Gi,{newState:0,oldState:0}),we=zt(re),_t=[9,13,27,32],Ye=xn&&"CompositionEvent"in window,ft=null;xn&&"documentMode"in document&&(ft=document.documentMode);var Vn=xn&&"TextEvent"in window&&!ft,Ri=xn&&(!Ye||ft&&8<ft&&11>=ft),jn=" ",ei=!1;function Lr(i,r){switch(i){case"keyup":return _t.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Io(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Ro=!1;function tI(i,r){switch(i){case"compositionend":return Io(r);case"keypress":return r.which!==32?null:(ei=!0,jn);case"textInput":return i=r.data,i===jn&&ei?null:i;default:return null}}function nI(i,r){if(Ro)return i==="compositionend"||!Ye&&Lr(i,r)?(i=Za(),xr=Wa=Si=null,Ro=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Ri&&r.locale!=="ko"?null:r.data;default:return null}}var iI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hg(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r==="input"?!!iI[i.type]:r==="textarea"}function pg(i,r,a,c){Is?Ei?Ei.push(c):Ei=[c]:Is=c,r=Vc(r,"onChange"),0<r.length&&(a=new Ai("onChange","change",null,a,c),i.push({event:a,listeners:r}))}var nl=null,il=null;function sI(i){X_(i,0)}function Yu(i){var r=vn(i);if(Mr(r))return i}function mg(i,r){if(i==="change")return r}var gg=!1;if(xn){var md;if(xn){var gd="oninput"in document;if(!gd){var yg=document.createElement("div");yg.setAttribute("oninput","return;"),gd=typeof yg.oninput=="function"}md=gd}else md=!1;gg=md&&(!document.documentMode||9<document.documentMode)}function _g(){nl&&(nl.detachEvent("onpropertychange",Tg),il=nl=null)}function Tg(i){if(i.propertyName==="value"&&Yu(il)){var r=[];pg(r,il,i,Pn(i)),Rs(sI,r)}}function rI(i,r,a){i==="focusin"?(_g(),nl=r,il=a,nl.attachEvent("onpropertychange",Tg)):i==="focusout"&&_g()}function oI(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Yu(il)}function aI(i,r){if(i==="click")return Yu(r)}function lI(i,r){if(i==="input"||i==="change")return Yu(r)}function uI(i,r){return i===r&&(i!==0||1/i===1/r)||i!==i&&r!==r}var Sn=typeof Object.is=="function"?Object.is:uI;function sl(i,r){if(Sn(i,r))return!0;if(typeof i!="object"||i===null||typeof r!="object"||r===null)return!1;var a=Object.keys(i),c=Object.keys(r);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var y=a[c];if(!At.call(r,y)||!Sn(i[y],r[y]))return!1}return!0}function vg(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Eg(i,r){var a=vg(i);i=0;for(var c;a;){if(a.nodeType===3){if(c=i+a.textContent.length,i<=r&&c>=r)return{node:a,offset:r-i};i=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=vg(a)}}function Sg(i,r){return i&&r?i===r?!0:i&&i.nodeType===3?!1:r&&r.nodeType===3?Sg(i,r.parentNode):"contains"in i?i.contains(r):i.compareDocumentPosition?!!(i.compareDocumentPosition(r)&16):!1:!1}function Ag(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var r=vi(i.document);r instanceof i.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)i=r.contentWindow;else break;r=vi(i.document)}return r}function yd(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r&&(r==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||r==="textarea"||i.contentEditable==="true")}var cI=xn&&"documentMode"in document&&11>=document.documentMode,wo=null,_d=null,rl=null,Td=!1;function Cg(i,r,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Td||wo==null||wo!==vi(c)||(c=wo,"selectionStart"in c&&yd(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),rl&&sl(rl,c)||(rl=c,c=Vc(_d,"onSelect"),0<c.length&&(r=new Ai("onSelect","select",null,r,a),i.push({event:r,listeners:c}),r.target=wo)))}function Or(i,r){var a={};return a[i.toLowerCase()]=r.toLowerCase(),a["Webkit"+i]="webkit"+r,a["Moz"+i]="moz"+r,a}var No={animationend:Or("Animation","AnimationEnd"),animationiteration:Or("Animation","AnimationIteration"),animationstart:Or("Animation","AnimationStart"),transitionrun:Or("Transition","TransitionRun"),transitionstart:Or("Transition","TransitionStart"),transitioncancel:Or("Transition","TransitionCancel"),transitionend:Or("Transition","TransitionEnd")},vd={},Ig={};xn&&(Ig=document.createElement("div").style,"AnimationEvent"in window||(delete No.animationend.animation,delete No.animationiteration.animation,delete No.animationstart.animation),"TransitionEvent"in window||delete No.transitionend.transition);function qr(i){if(vd[i])return vd[i];if(!No[i])return i;var r=No[i],a;for(a in r)if(r.hasOwnProperty(a)&&a in Ig)return vd[i]=r[a];return i}var Rg=qr("animationend"),wg=qr("animationiteration"),Ng=qr("animationstart"),fI=qr("transitionrun"),dI=qr("transitionstart"),hI=qr("transitioncancel"),Mg=qr("transitionend"),Dg=new Map,Ed="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ed.push("scrollEnd");function ti(i,r){Dg.set(i,r),_i(r,[i])}var Ku=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},Un=[],Mo=0,Sd=0;function Qu(){for(var i=Mo,r=Sd=Mo=0;r<i;){var a=Un[r];Un[r++]=null;var c=Un[r];Un[r++]=null;var y=Un[r];Un[r++]=null;var _=Un[r];if(Un[r++]=null,c!==null&&y!==null){var A=c.pending;A===null?y.next=y:(y.next=A.next,A.next=y),c.pending=y}_!==0&&bg(a,y,_)}}function $u(i,r,a,c){Un[Mo++]=i,Un[Mo++]=r,Un[Mo++]=a,Un[Mo++]=c,Sd|=c,i.lanes|=c,i=i.alternate,i!==null&&(i.lanes|=c)}function Ad(i,r,a,c){return $u(i,r,a,c),Xu(i)}function Fr(i,r){return $u(i,null,null,r),Xu(i)}function bg(i,r,a){i.lanes|=a;var c=i.alternate;c!==null&&(c.lanes|=a);for(var y=!1,_=i.return;_!==null;)_.childLanes|=a,c=_.alternate,c!==null&&(c.childLanes|=a),_.tag===22&&(i=_.stateNode,i===null||i._visibility&1||(y=!0)),i=_,_=_.return;return i.tag===3?(_=i.stateNode,y&&r!==null&&(y=31-yt(a),i=_.hiddenUpdates,c=i[y],c===null?i[y]=[r]:c.push(r),r.lane=a|536870912),_):null}function Xu(i){if(50<wl)throw wl=0,Ph=null,Error(s(185));for(var r=i.return;r!==null;)i=r,r=i.return;return i.tag===3?i.stateNode:null}var Do={};function pI(i,r,a,c){this.tag=i,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function An(i,r,a,c){return new pI(i,r,a,c)}function Cd(i){return i=i.prototype,!(!i||!i.isReactComponent)}function zi(i,r){var a=i.alternate;return a===null?(a=An(i.tag,r,i.key,i.mode),a.elementType=i.elementType,a.type=i.type,a.stateNode=i.stateNode,a.alternate=i,i.alternate=a):(a.pendingProps=r,a.type=i.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=i.flags&65011712,a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,r=i.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=i.sibling,a.index=i.index,a.ref=i.ref,a.refCleanup=i.refCleanup,a}function Pg(i,r){i.flags&=65011714;var a=i.alternate;return a===null?(i.childLanes=0,i.lanes=r,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,r=a.dependencies,i.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),i}function Wu(i,r,a,c,y,_){var A=0;if(c=i,typeof i=="function")Cd(i)&&(A=1);else if(typeof i=="string")A=TR(i,a,he.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case N:return i=An(31,a,r,y),i.elementType=N,i.lanes=_,i;case G:return Br(a.children,y,_,r);case F:A=8,y|=24;break;case $:return i=An(12,a,r,y|2),i.elementType=$,i.lanes=_,i;case me:return i=An(13,a,r,y),i.elementType=me,i.lanes=_,i;case fe:return i=An(19,a,r,y),i.elementType=fe,i.lanes=_,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case ne:A=10;break e;case te:A=9;break e;case le:A=11;break e;case D:A=14;break e;case M:A=16,c=null;break e}A=29,a=Error(s(130,i===null?"null":typeof i,"")),c=null}return r=An(A,a,r,y),r.elementType=i,r.type=c,r.lanes=_,r}function Br(i,r,a,c){return i=An(7,i,c,r),i.lanes=a,i}function Id(i,r,a){return i=An(6,i,null,r),i.lanes=a,i}function xg(i){var r=An(18,null,null,0);return r.stateNode=i,r}function Rd(i,r,a){return r=An(4,i.children!==null?i.children:[],i.key,r),r.lanes=a,r.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},r}var Vg=new WeakMap;function kn(i,r){if(typeof i=="object"&&i!==null){var a=Vg.get(i);return a!==void 0?a:(r={value:i,source:r,stack:ka(r)},Vg.set(i,r),r)}return{value:i,source:r,stack:ka(r)}}var bo=[],Po=0,Zu=null,ol=0,Ln=[],On=0,Ds=null,wi=1,Ni="";function Ji(i,r){bo[Po++]=ol,bo[Po++]=Zu,Zu=i,ol=r}function Ug(i,r,a){Ln[On++]=wi,Ln[On++]=Ni,Ln[On++]=Ds,Ds=i;var c=wi;i=Ni;var y=32-yt(c)-1;c&=~(1<<y),a+=1;var _=32-yt(r)+y;if(30<_){var A=y-y%5;_=(c&(1<<A)-1).toString(32),c>>=A,y-=A,wi=1<<32-yt(r)+y|a<<y|c,Ni=_+i}else wi=1<<_|a<<y|c,Ni=i}function wd(i){i.return!==null&&(Ji(i,1),Ug(i,1,0))}function Nd(i){for(;i===Zu;)Zu=bo[--Po],bo[Po]=null,ol=bo[--Po],bo[Po]=null;for(;i===Ds;)Ds=Ln[--On],Ln[On]=null,Ni=Ln[--On],Ln[On]=null,wi=Ln[--On],Ln[On]=null}function kg(i,r){Ln[On++]=wi,Ln[On++]=Ni,Ln[On++]=Ds,wi=r.id,Ni=r.overflow,Ds=i}var Jt=null,rt=null,qe=!1,bs=null,qn=!1,Md=Error(s(519));function Ps(i){var r=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw al(kn(r,i)),Md}function Lg(i){var r=i.stateNode,a=i.type,c=i.memoizedProps;switch(r[It]=i,r[qt]=c,a){case"dialog":Pe("cancel",r),Pe("close",r);break;case"iframe":case"object":case"embed":Pe("load",r);break;case"video":case"audio":for(a=0;a<Ml.length;a++)Pe(Ml[a],r);break;case"source":Pe("error",r);break;case"img":case"image":case"link":Pe("error",r),Pe("load",r);break;case"details":Pe("toggle",r);break;case"input":Pe("invalid",r),bu(r,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Pe("invalid",r);break;case"textarea":Pe("invalid",r),As(r,c.value,c.defaultValue,c.children)}a=c.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||c.suppressHydrationWarning===!0||eT(r.textContent,a)?(c.popover!=null&&(Pe("beforetoggle",r),Pe("toggle",r)),c.onScroll!=null&&Pe("scroll",r),c.onScrollEnd!=null&&Pe("scrollend",r),c.onClick!=null&&(r.onclick=Xn),r=!0):r=!1,r||Ps(i,!0)}function Og(i){for(Jt=i.return;Jt;)switch(Jt.tag){case 5:case 31:case 13:qn=!1;return;case 27:case 3:qn=!0;return;default:Jt=Jt.return}}function xo(i){if(i!==Jt)return!1;if(!qe)return Og(i),qe=!0,!1;var r=i.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=i.type,a=!(a!=="form"&&a!=="button")||Kh(i.type,i.memoizedProps)),a=!a),a&&rt&&Ps(i),Og(i),r===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));rt=uT(i)}else if(r===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));rt=uT(i)}else r===27?(r=rt,Ys(i.type)?(i=Zh,Zh=null,rt=i):rt=r):rt=Jt?Bn(i.stateNode.nextSibling):null;return!0}function Gr(){rt=Jt=null,qe=!1}function Dd(){var i=bs;return i!==null&&(gn===null?gn=i:gn.push.apply(gn,i),bs=null),i}function al(i){bs===null?bs=[i]:bs.push(i)}var bd=k(null),Hr=null,Yi=null;function xs(i,r,a){ae(bd,r._currentValue),r._currentValue=a}function Ki(i){i._currentValue=bd.current,ee(bd)}function Pd(i,r,a){for(;i!==null;){var c=i.alternate;if((i.childLanes&r)!==r?(i.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),i===a)break;i=i.return}}function xd(i,r,a,c){var y=i.child;for(y!==null&&(y.return=i);y!==null;){var _=y.dependencies;if(_!==null){var A=y.child;_=_.firstContext;e:for(;_!==null;){var I=_;_=y;for(var P=0;P<r.length;P++)if(I.context===r[P]){_.lanes|=a,I=_.alternate,I!==null&&(I.lanes|=a),Pd(_.return,a,i),c||(A=null);break e}_=I.next}}else if(y.tag===18){if(A=y.return,A===null)throw Error(s(341));A.lanes|=a,_=A.alternate,_!==null&&(_.lanes|=a),Pd(A,a,i),A=null}else A=y.child;if(A!==null)A.return=y;else for(A=y;A!==null;){if(A===i){A=null;break}if(y=A.sibling,y!==null){y.return=A.return,A=y;break}A=A.return}y=A}}function Vo(i,r,a,c){i=null;for(var y=r,_=!1;y!==null;){if(!_){if((y.flags&524288)!==0)_=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var A=y.alternate;if(A===null)throw Error(s(387));if(A=A.memoizedProps,A!==null){var I=y.type;Sn(y.pendingProps.value,A.value)||(i!==null?i.push(I):i=[I])}}else if(y===Fe.current){if(A=y.alternate,A===null)throw Error(s(387));A.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(i!==null?i.push(Vl):i=[Vl])}y=y.return}i!==null&&xd(r,i,a,c),r.flags|=262144}function ju(i){for(i=i.firstContext;i!==null;){if(!Sn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function zr(i){Hr=i,Yi=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Yt(i){return qg(Hr,i)}function ec(i,r){return Hr===null&&zr(i),qg(i,r)}function qg(i,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},Yi===null){if(i===null)throw Error(s(308));Yi=r,i.dependencies={lanes:0,firstContext:r},i.flags|=524288}else Yi=Yi.next=r;return a}var mI=typeof AbortController<"u"?AbortController:function(){var i=[],r=this.signal={aborted:!1,addEventListener:function(a,c){i.push(c)}};this.abort=function(){r.aborted=!0,i.forEach(function(a){return a()})}},gI=n.unstable_scheduleCallback,yI=n.unstable_NormalPriority,Nt={$$typeof:ne,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Vd(){return{controller:new mI,data:new Map,refCount:0}}function ll(i){i.refCount--,i.refCount===0&&gI(yI,function(){i.controller.abort()})}var ul=null,Ud=0,Uo=0,ko=null;function _I(i,r){if(ul===null){var a=ul=[];Ud=0,Uo=Oh(),ko={status:"pending",value:void 0,then:function(c){a.push(c)}}}return Ud++,r.then(Fg,Fg),r}function Fg(){if(--Ud===0&&ul!==null){ko!==null&&(ko.status="fulfilled");var i=ul;ul=null,Uo=0,ko=null;for(var r=0;r<i.length;r++)(0,i[r])()}}function TI(i,r){var a=[],c={status:"pending",value:null,reason:null,then:function(y){a.push(y)}};return i.then(function(){c.status="fulfilled",c.value=r;for(var y=0;y<a.length;y++)(0,a[y])(r)},function(y){for(c.status="rejected",c.reason=y,y=0;y<a.length;y++)(0,a[y])(void 0)}),c}var Bg=Q.S;Q.S=function(i,r){C_=on(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&_I(i,r),Bg!==null&&Bg(i,r)};var Jr=k(null);function kd(){var i=Jr.current;return i!==null?i:it.pooledCache}function tc(i,r){r===null?ae(Jr,Jr.current):ae(Jr,r.pool)}function Gg(){var i=kd();return i===null?null:{parent:Nt._currentValue,pool:i}}var Lo=Error(s(460)),Ld=Error(s(474)),nc=Error(s(542)),ic={then:function(){}};function Hg(i){return i=i.status,i==="fulfilled"||i==="rejected"}function zg(i,r,a){switch(a=i[a],a===void 0?i.push(r):a!==r&&(r.then(Xn,Xn),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,Yg(i),i;default:if(typeof r.status=="string")r.then(Xn,Xn);else{if(i=it,i!==null&&100<i.shellSuspendCounter)throw Error(s(482));i=r,i.status="pending",i.then(function(c){if(r.status==="pending"){var y=r;y.status="fulfilled",y.value=c}},function(c){if(r.status==="pending"){var y=r;y.status="rejected",y.reason=c}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,Yg(i),i}throw Kr=r,Lo}}function Yr(i){try{var r=i._init;return r(i._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Kr=a,Lo):a}}var Kr=null;function Jg(){if(Kr===null)throw Error(s(459));var i=Kr;return Kr=null,i}function Yg(i){if(i===Lo||i===nc)throw Error(s(483))}var Oo=null,cl=0;function sc(i){var r=cl;return cl+=1,Oo===null&&(Oo=[]),zg(Oo,i,r)}function fl(i,r){r=r.props.ref,i.ref=r!==void 0?r:null}function rc(i,r){throw r.$$typeof===S?Error(s(525)):(i=Object.prototype.toString.call(r),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":i)))}function Kg(i){function r(q,U){if(i){var H=q.deletions;H===null?(q.deletions=[U],q.flags|=16):H.push(U)}}function a(q,U){if(!i)return null;for(;U!==null;)r(q,U),U=U.sibling;return null}function c(q){for(var U=new Map;q!==null;)q.key!==null?U.set(q.key,q):U.set(q.index,q),q=q.sibling;return U}function y(q,U){return q=zi(q,U),q.index=0,q.sibling=null,q}function _(q,U,H){return q.index=H,i?(H=q.alternate,H!==null?(H=H.index,H<U?(q.flags|=67108866,U):H):(q.flags|=67108866,U)):(q.flags|=1048576,U)}function A(q){return i&&q.alternate===null&&(q.flags|=67108866),q}function I(q,U,H,W){return U===null||U.tag!==6?(U=Id(H,q.mode,W),U.return=q,U):(U=y(U,H),U.return=q,U)}function P(q,U,H,W){var ye=H.type;return ye===G?X(q,U,H.props.children,W,H.key):U!==null&&(U.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===M&&Yr(ye)===U.type)?(U=y(U,H.props),fl(U,H),U.return=q,U):(U=Wu(H.type,H.key,H.props,null,q.mode,W),fl(U,H),U.return=q,U)}function z(q,U,H,W){return U===null||U.tag!==4||U.stateNode.containerInfo!==H.containerInfo||U.stateNode.implementation!==H.implementation?(U=Rd(H,q.mode,W),U.return=q,U):(U=y(U,H.children||[]),U.return=q,U)}function X(q,U,H,W,ye){return U===null||U.tag!==7?(U=Br(H,q.mode,W,ye),U.return=q,U):(U=y(U,H),U.return=q,U)}function j(q,U,H){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return U=Id(""+U,q.mode,H),U.return=q,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case w:return H=Wu(U.type,U.key,U.props,null,q.mode,H),fl(H,U),H.return=q,H;case O:return U=Rd(U,q.mode,H),U.return=q,U;case M:return U=Yr(U),j(q,U,H)}if(pt(U)||L(U))return U=Br(U,q.mode,H,null),U.return=q,U;if(typeof U.then=="function")return j(q,sc(U),H);if(U.$$typeof===ne)return j(q,ec(q,U),H);rc(q,U)}return null}function J(q,U,H,W){var ye=U!==null?U.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return ye!==null?null:I(q,U,""+H,W);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case w:return H.key===ye?P(q,U,H,W):null;case O:return H.key===ye?z(q,U,H,W):null;case M:return H=Yr(H),J(q,U,H,W)}if(pt(H)||L(H))return ye!==null?null:X(q,U,H,W,null);if(typeof H.then=="function")return J(q,U,sc(H),W);if(H.$$typeof===ne)return J(q,U,ec(q,H),W);rc(q,H)}return null}function K(q,U,H,W,ye){if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return q=q.get(H)||null,I(U,q,""+W,ye);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case w:return q=q.get(W.key===null?H:W.key)||null,P(U,q,W,ye);case O:return q=q.get(W.key===null?H:W.key)||null,z(U,q,W,ye);case M:return W=Yr(W),K(q,U,H,W,ye)}if(pt(W)||L(W))return q=q.get(H)||null,X(U,q,W,ye,null);if(typeof W.then=="function")return K(q,U,H,sc(W),ye);if(W.$$typeof===ne)return K(q,U,H,ec(U,W),ye);rc(U,W)}return null}function pe(q,U,H,W){for(var ye=null,He=null,ge=U,De=U=0,Ve=null;ge!==null&&De<H.length;De++){ge.index>De?(Ve=ge,ge=null):Ve=ge.sibling;var ze=J(q,ge,H[De],W);if(ze===null){ge===null&&(ge=Ve);break}i&&ge&&ze.alternate===null&&r(q,ge),U=_(ze,U,De),He===null?ye=ze:He.sibling=ze,He=ze,ge=Ve}if(De===H.length)return a(q,ge),qe&&Ji(q,De),ye;if(ge===null){for(;De<H.length;De++)ge=j(q,H[De],W),ge!==null&&(U=_(ge,U,De),He===null?ye=ge:He.sibling=ge,He=ge);return qe&&Ji(q,De),ye}for(ge=c(ge);De<H.length;De++)Ve=K(ge,q,De,H[De],W),Ve!==null&&(i&&Ve.alternate!==null&&ge.delete(Ve.key===null?De:Ve.key),U=_(Ve,U,De),He===null?ye=Ve:He.sibling=Ve,He=Ve);return i&&ge.forEach(function(Ws){return r(q,Ws)}),qe&&Ji(q,De),ye}function ve(q,U,H,W){if(H==null)throw Error(s(151));for(var ye=null,He=null,ge=U,De=U=0,Ve=null,ze=H.next();ge!==null&&!ze.done;De++,ze=H.next()){ge.index>De?(Ve=ge,ge=null):Ve=ge.sibling;var Ws=J(q,ge,ze.value,W);if(Ws===null){ge===null&&(ge=Ve);break}i&&ge&&Ws.alternate===null&&r(q,ge),U=_(Ws,U,De),He===null?ye=Ws:He.sibling=Ws,He=Ws,ge=Ve}if(ze.done)return a(q,ge),qe&&Ji(q,De),ye;if(ge===null){for(;!ze.done;De++,ze=H.next())ze=j(q,ze.value,W),ze!==null&&(U=_(ze,U,De),He===null?ye=ze:He.sibling=ze,He=ze);return qe&&Ji(q,De),ye}for(ge=c(ge);!ze.done;De++,ze=H.next())ze=K(ge,q,De,ze.value,W),ze!==null&&(i&&ze.alternate!==null&&ge.delete(ze.key===null?De:ze.key),U=_(ze,U,De),He===null?ye=ze:He.sibling=ze,He=ze);return i&&ge.forEach(function(DR){return r(q,DR)}),qe&&Ji(q,De),ye}function nt(q,U,H,W){if(typeof H=="object"&&H!==null&&H.type===G&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case w:e:{for(var ye=H.key;U!==null;){if(U.key===ye){if(ye=H.type,ye===G){if(U.tag===7){a(q,U.sibling),W=y(U,H.props.children),W.return=q,q=W;break e}}else if(U.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===M&&Yr(ye)===U.type){a(q,U.sibling),W=y(U,H.props),fl(W,H),W.return=q,q=W;break e}a(q,U);break}else r(q,U);U=U.sibling}H.type===G?(W=Br(H.props.children,q.mode,W,H.key),W.return=q,q=W):(W=Wu(H.type,H.key,H.props,null,q.mode,W),fl(W,H),W.return=q,q=W)}return A(q);case O:e:{for(ye=H.key;U!==null;){if(U.key===ye)if(U.tag===4&&U.stateNode.containerInfo===H.containerInfo&&U.stateNode.implementation===H.implementation){a(q,U.sibling),W=y(U,H.children||[]),W.return=q,q=W;break e}else{a(q,U);break}else r(q,U);U=U.sibling}W=Rd(H,q.mode,W),W.return=q,q=W}return A(q);case M:return H=Yr(H),nt(q,U,H,W)}if(pt(H))return pe(q,U,H,W);if(L(H)){if(ye=L(H),typeof ye!="function")throw Error(s(150));return H=ye.call(H),ve(q,U,H,W)}if(typeof H.then=="function")return nt(q,U,sc(H),W);if(H.$$typeof===ne)return nt(q,U,ec(q,H),W);rc(q,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,U!==null&&U.tag===6?(a(q,U.sibling),W=y(U,H),W.return=q,q=W):(a(q,U),W=Id(H,q.mode,W),W.return=q,q=W),A(q)):a(q,U)}return function(q,U,H,W){try{cl=0;var ye=nt(q,U,H,W);return Oo=null,ye}catch(ge){if(ge===Lo||ge===nc)throw ge;var He=An(29,ge,null,q.mode);return He.lanes=W,He.return=q,He}finally{}}}var Qr=Kg(!0),Qg=Kg(!1),Vs=!1;function Od(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function qd(i,r){i=i.updateQueue,r.updateQueue===i&&(r.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Us(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function ks(i,r,a){var c=i.updateQueue;if(c===null)return null;if(c=c.shared,(Ke&2)!==0){var y=c.pending;return y===null?r.next=r:(r.next=y.next,y.next=r),c.pending=r,r=Xu(i),bg(i,null,a),r}return $u(i,c,r,a),Xu(i)}function dl(i,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var c=r.lanes;c&=i.pendingLanes,a|=c,r.lanes=a,qa(i,a)}}function Fd(i,r){var a=i.updateQueue,c=i.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var y=null,_=null;if(a=a.firstBaseUpdate,a!==null){do{var A={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};_===null?y=_=A:_=_.next=A,a=a.next}while(a!==null);_===null?y=_=r:_=_.next=r}else y=_=r;a={baseState:c.baseState,firstBaseUpdate:y,lastBaseUpdate:_,shared:c.shared,callbacks:c.callbacks},i.updateQueue=a;return}i=a.lastBaseUpdate,i===null?a.firstBaseUpdate=r:i.next=r,a.lastBaseUpdate=r}var Bd=!1;function hl(){if(Bd){var i=ko;if(i!==null)throw i}}function pl(i,r,a,c){Bd=!1;var y=i.updateQueue;Vs=!1;var _=y.firstBaseUpdate,A=y.lastBaseUpdate,I=y.shared.pending;if(I!==null){y.shared.pending=null;var P=I,z=P.next;P.next=null,A===null?_=z:A.next=z,A=P;var X=i.alternate;X!==null&&(X=X.updateQueue,I=X.lastBaseUpdate,I!==A&&(I===null?X.firstBaseUpdate=z:I.next=z,X.lastBaseUpdate=P))}if(_!==null){var j=y.baseState;A=0,X=z=P=null,I=_;do{var J=I.lane&-536870913,K=J!==I.lane;if(K?(xe&J)===J:(c&J)===J){J!==0&&J===Uo&&(Bd=!0),X!==null&&(X=X.next={lane:0,tag:I.tag,payload:I.payload,callback:null,next:null});e:{var pe=i,ve=I;J=r;var nt=a;switch(ve.tag){case 1:if(pe=ve.payload,typeof pe=="function"){j=pe.call(nt,j,J);break e}j=pe;break e;case 3:pe.flags=pe.flags&-65537|128;case 0:if(pe=ve.payload,J=typeof pe=="function"?pe.call(nt,j,J):pe,J==null)break e;j=v({},j,J);break e;case 2:Vs=!0}}J=I.callback,J!==null&&(i.flags|=64,K&&(i.flags|=8192),K=y.callbacks,K===null?y.callbacks=[J]:K.push(J))}else K={lane:J,tag:I.tag,payload:I.payload,callback:I.callback,next:null},X===null?(z=X=K,P=j):X=X.next=K,A|=J;if(I=I.next,I===null){if(I=y.shared.pending,I===null)break;K=I,I=K.next,K.next=null,y.lastBaseUpdate=K,y.shared.pending=null}}while(!0);X===null&&(P=j),y.baseState=P,y.firstBaseUpdate=z,y.lastBaseUpdate=X,_===null&&(y.shared.lanes=0),Bs|=A,i.lanes=A,i.memoizedState=j}}function $g(i,r){if(typeof i!="function")throw Error(s(191,i));i.call(r)}function Xg(i,r){var a=i.callbacks;if(a!==null)for(i.callbacks=null,i=0;i<a.length;i++)$g(a[i],r)}var qo=k(null),oc=k(0);function Wg(i,r){i=ns,ae(oc,i),ae(qo,r),ns=i|r.baseLanes}function Gd(){ae(oc,ns),ae(qo,qo.current)}function Hd(){ns=oc.current,ee(qo),ee(oc)}var Cn=k(null),Fn=null;function Ls(i){var r=i.alternate;ae(Tt,Tt.current&1),ae(Cn,i),Fn===null&&(r===null||qo.current!==null||r.memoizedState!==null)&&(Fn=i)}function zd(i){ae(Tt,Tt.current),ae(Cn,i),Fn===null&&(Fn=i)}function Zg(i){i.tag===22?(ae(Tt,Tt.current),ae(Cn,i),Fn===null&&(Fn=i)):Os()}function Os(){ae(Tt,Tt.current),ae(Cn,Cn.current)}function In(i){ee(Cn),Fn===i&&(Fn=null),ee(Tt)}var Tt=k(0);function ac(i){for(var r=i;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Xh(a)||Wh(a)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Qi=0,Ne=null,et=null,Mt=null,lc=!1,Fo=!1,$r=!1,uc=0,ml=0,Bo=null,vI=0;function mt(){throw Error(s(321))}function Jd(i,r){if(r===null)return!1;for(var a=0;a<r.length&&a<i.length;a++)if(!Sn(i[a],r[a]))return!1;return!0}function Yd(i,r,a,c,y,_){return Qi=_,Ne=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Q.H=i===null||i.memoizedState===null?Uy:ah,$r=!1,_=a(c,y),$r=!1,Fo&&(_=ey(r,a,c,y)),jg(i),_}function jg(i){Q.H=_l;var r=et!==null&&et.next!==null;if(Qi=0,Mt=et=Ne=null,lc=!1,ml=0,Bo=null,r)throw Error(s(300));i===null||Dt||(i=i.dependencies,i!==null&&ju(i)&&(Dt=!0))}function ey(i,r,a,c){Ne=i;var y=0;do{if(Fo&&(Bo=null),ml=0,Fo=!1,25<=y)throw Error(s(301));if(y+=1,Mt=et=null,i.updateQueue!=null){var _=i.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}Q.H=ky,_=r(a,c)}while(Fo);return _}function EI(){var i=Q.H,r=i.useState()[0];return r=typeof r.then=="function"?gl(r):r,i=i.useState()[0],(et!==null?et.memoizedState:null)!==i&&(Ne.flags|=1024),r}function Kd(){var i=uc!==0;return uc=0,i}function Qd(i,r,a){r.updateQueue=i.updateQueue,r.flags&=-2053,i.lanes&=~a}function $d(i){if(lc){for(i=i.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}lc=!1}Qi=0,Mt=et=Ne=null,Fo=!1,ml=uc=0,Bo=null}function ln(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mt===null?Ne.memoizedState=Mt=i:Mt=Mt.next=i,Mt}function vt(){if(et===null){var i=Ne.alternate;i=i!==null?i.memoizedState:null}else i=et.next;var r=Mt===null?Ne.memoizedState:Mt.next;if(r!==null)Mt=r,et=i;else{if(i===null)throw Ne.alternate===null?Error(s(467)):Error(s(310));et=i,i={memoizedState:et.memoizedState,baseState:et.baseState,baseQueue:et.baseQueue,queue:et.queue,next:null},Mt===null?Ne.memoizedState=Mt=i:Mt=Mt.next=i}return Mt}function cc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function gl(i){var r=ml;return ml+=1,Bo===null&&(Bo=[]),i=zg(Bo,i,r),r=Ne,(Mt===null?r.memoizedState:Mt.next)===null&&(r=r.alternate,Q.H=r===null||r.memoizedState===null?Uy:ah),i}function fc(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return gl(i);if(i.$$typeof===ne)return Yt(i)}throw Error(s(438,String(i)))}function Xd(i){var r=null,a=Ne.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var c=Ne.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(r={data:c.data.map(function(y){return y.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=cc(),Ne.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(i),c=0;c<i;c++)a[c]=V;return r.index++,a}function $i(i,r){return typeof r=="function"?r(i):r}function dc(i){var r=vt();return Wd(r,et,i)}function Wd(i,r,a){var c=i.queue;if(c===null)throw Error(s(311));c.lastRenderedReducer=a;var y=i.baseQueue,_=c.pending;if(_!==null){if(y!==null){var A=y.next;y.next=_.next,_.next=A}r.baseQueue=y=_,c.pending=null}if(_=i.baseState,y===null)i.memoizedState=_;else{r=y.next;var I=A=null,P=null,z=r,X=!1;do{var j=z.lane&-536870913;if(j!==z.lane?(xe&j)===j:(Qi&j)===j){var J=z.revertLane;if(J===0)P!==null&&(P=P.next={lane:0,revertLane:0,gesture:null,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),j===Uo&&(X=!0);else if((Qi&J)===J){z=z.next,J===Uo&&(X=!0);continue}else j={lane:0,revertLane:z.revertLane,gesture:null,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},P===null?(I=P=j,A=_):P=P.next=j,Ne.lanes|=J,Bs|=J;j=z.action,$r&&a(_,j),_=z.hasEagerState?z.eagerState:a(_,j)}else J={lane:j,revertLane:z.revertLane,gesture:z.gesture,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},P===null?(I=P=J,A=_):P=P.next=J,Ne.lanes|=j,Bs|=j;z=z.next}while(z!==null&&z!==r);if(P===null?A=_:P.next=I,!Sn(_,i.memoizedState)&&(Dt=!0,X&&(a=ko,a!==null)))throw a;i.memoizedState=_,i.baseState=A,i.baseQueue=P,c.lastRenderedState=_}return y===null&&(c.lanes=0),[i.memoizedState,c.dispatch]}function Zd(i){var r=vt(),a=r.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=i;var c=a.dispatch,y=a.pending,_=r.memoizedState;if(y!==null){a.pending=null;var A=y=y.next;do _=i(_,A.action),A=A.next;while(A!==y);Sn(_,r.memoizedState)||(Dt=!0),r.memoizedState=_,r.baseQueue===null&&(r.baseState=_),a.lastRenderedState=_}return[_,c]}function ty(i,r,a){var c=Ne,y=vt(),_=qe;if(_){if(a===void 0)throw Error(s(407));a=a()}else a=r();var A=!Sn((et||y).memoizedState,a);if(A&&(y.memoizedState=a,Dt=!0),y=y.queue,th(sy.bind(null,c,y,i),[i]),y.getSnapshot!==r||A||Mt!==null&&Mt.memoizedState.tag&1){if(c.flags|=2048,Go(9,{destroy:void 0},iy.bind(null,c,y,a,r),null),it===null)throw Error(s(349));_||(Qi&127)!==0||ny(c,r,a)}return a}function ny(i,r,a){i.flags|=16384,i={getSnapshot:r,value:a},r=Ne.updateQueue,r===null?(r=cc(),Ne.updateQueue=r,r.stores=[i]):(a=r.stores,a===null?r.stores=[i]:a.push(i))}function iy(i,r,a,c){r.value=a,r.getSnapshot=c,ry(r)&&oy(i)}function sy(i,r,a){return a(function(){ry(r)&&oy(i)})}function ry(i){var r=i.getSnapshot;i=i.value;try{var a=r();return!Sn(i,a)}catch{return!0}}function oy(i){var r=Fr(i,2);r!==null&&yn(r,i,2)}function jd(i){var r=ln();if(typeof i=="function"){var a=i;if(i=a(),$r){Dn(!0);try{a()}finally{Dn(!1)}}}return r.memoizedState=r.baseState=i,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$i,lastRenderedState:i},r}function ay(i,r,a,c){return i.baseState=a,Wd(i,et,typeof c=="function"?c:$i)}function SI(i,r,a,c,y){if(mc(i))throw Error(s(485));if(i=r.action,i!==null){var _={payload:y,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){_.listeners.push(A)}};Q.T!==null?a(!0):_.isTransition=!1,c(_),a=r.pending,a===null?(_.next=r.pending=_,ly(r,_)):(_.next=a.next,r.pending=a.next=_)}}function ly(i,r){var a=r.action,c=r.payload,y=i.state;if(r.isTransition){var _=Q.T,A={};Q.T=A;try{var I=a(y,c),P=Q.S;P!==null&&P(A,I),uy(i,r,I)}catch(z){eh(i,r,z)}finally{_!==null&&A.types!==null&&(_.types=A.types),Q.T=_}}else try{_=a(y,c),uy(i,r,_)}catch(z){eh(i,r,z)}}function uy(i,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(c){cy(i,r,c)},function(c){return eh(i,r,c)}):cy(i,r,a)}function cy(i,r,a){r.status="fulfilled",r.value=a,fy(r),i.state=a,r=i.pending,r!==null&&(a=r.next,a===r?i.pending=null:(a=a.next,r.next=a,ly(i,a)))}function eh(i,r,a){var c=i.pending;if(i.pending=null,c!==null){c=c.next;do r.status="rejected",r.reason=a,fy(r),r=r.next;while(r!==c)}i.action=null}function fy(i){i=i.listeners;for(var r=0;r<i.length;r++)(0,i[r])()}function dy(i,r){return r}function hy(i,r){if(qe){var a=it.formState;if(a!==null){e:{var c=Ne;if(qe){if(rt){t:{for(var y=rt,_=qn;y.nodeType!==8;){if(!_){y=null;break t}if(y=Bn(y.nextSibling),y===null){y=null;break t}}_=y.data,y=_==="F!"||_==="F"?y:null}if(y){rt=Bn(y.nextSibling),c=y.data==="F!";break e}}Ps(c)}c=!1}c&&(r=a[0])}}return a=ln(),a.memoizedState=a.baseState=r,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:dy,lastRenderedState:r},a.queue=c,a=Py.bind(null,Ne,c),c.dispatch=a,c=jd(!1),_=oh.bind(null,Ne,!1,c.queue),c=ln(),y={state:r,dispatch:null,action:i,pending:null},c.queue=y,a=SI.bind(null,Ne,y,_,a),y.dispatch=a,c.memoizedState=i,[r,a,!1]}function py(i){var r=vt();return my(r,et,i)}function my(i,r,a){if(r=Wd(i,r,dy)[0],i=dc($i)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var c=gl(r)}catch(A){throw A===Lo?nc:A}else c=r;r=vt();var y=r.queue,_=y.dispatch;return a!==r.memoizedState&&(Ne.flags|=2048,Go(9,{destroy:void 0},AI.bind(null,y,a),null)),[c,_,i]}function AI(i,r){i.action=r}function gy(i){var r=vt(),a=et;if(a!==null)return my(r,a,i);vt(),r=r.memoizedState,a=vt();var c=a.queue.dispatch;return a.memoizedState=i,[r,c,!1]}function Go(i,r,a,c){return i={tag:i,create:a,deps:c,inst:r,next:null},r=Ne.updateQueue,r===null&&(r=cc(),Ne.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=i.next=i:(c=a.next,a.next=i,i.next=c,r.lastEffect=i),i}function yy(){return vt().memoizedState}function hc(i,r,a,c){var y=ln();Ne.flags|=i,y.memoizedState=Go(1|r,{destroy:void 0},a,c===void 0?null:c)}function pc(i,r,a,c){var y=vt();c=c===void 0?null:c;var _=y.memoizedState.inst;et!==null&&c!==null&&Jd(c,et.memoizedState.deps)?y.memoizedState=Go(r,_,a,c):(Ne.flags|=i,y.memoizedState=Go(1|r,_,a,c))}function _y(i,r){hc(8390656,8,i,r)}function th(i,r){pc(2048,8,i,r)}function CI(i){Ne.flags|=4;var r=Ne.updateQueue;if(r===null)r=cc(),Ne.updateQueue=r,r.events=[i];else{var a=r.events;a===null?r.events=[i]:a.push(i)}}function Ty(i){var r=vt().memoizedState;return CI({ref:r,nextImpl:i}),function(){if((Ke&2)!==0)throw Error(s(440));return r.impl.apply(void 0,arguments)}}function vy(i,r){return pc(4,2,i,r)}function Ey(i,r){return pc(4,4,i,r)}function Sy(i,r){if(typeof r=="function"){i=i();var a=r(i);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return i=i(),r.current=i,function(){r.current=null}}function Ay(i,r,a){a=a!=null?a.concat([i]):null,pc(4,4,Sy.bind(null,r,i),a)}function nh(){}function Cy(i,r){var a=vt();r=r===void 0?null:r;var c=a.memoizedState;return r!==null&&Jd(r,c[1])?c[0]:(a.memoizedState=[i,r],i)}function Iy(i,r){var a=vt();r=r===void 0?null:r;var c=a.memoizedState;if(r!==null&&Jd(r,c[1]))return c[0];if(c=i(),$r){Dn(!0);try{i()}finally{Dn(!1)}}return a.memoizedState=[c,r],c}function ih(i,r,a){return a===void 0||(Qi&1073741824)!==0&&(xe&261930)===0?i.memoizedState=r:(i.memoizedState=a,i=R_(),Ne.lanes|=i,Bs|=i,a)}function Ry(i,r,a,c){return Sn(a,r)?a:qo.current!==null?(i=ih(i,a,c),Sn(i,r)||(Dt=!0),i):(Qi&42)===0||(Qi&1073741824)!==0&&(xe&261930)===0?(Dt=!0,i.memoizedState=a):(i=R_(),Ne.lanes|=i,Bs|=i,r)}function wy(i,r,a,c,y){var _=oe.p;oe.p=_!==0&&8>_?_:8;var A=Q.T,I={};Q.T=I,oh(i,!1,r,a);try{var P=y(),z=Q.S;if(z!==null&&z(I,P),P!==null&&typeof P=="object"&&typeof P.then=="function"){var X=TI(P,c);yl(i,r,X,Nn(i))}else yl(i,r,c,Nn(i))}catch(j){yl(i,r,{then:function(){},status:"rejected",reason:j},Nn())}finally{oe.p=_,A!==null&&I.types!==null&&(A.types=I.types),Q.T=A}}function II(){}function sh(i,r,a,c){if(i.tag!==5)throw Error(s(476));var y=Ny(i).queue;wy(i,y,r,Te,a===null?II:function(){return My(i),a(c)})}function Ny(i){var r=i.memoizedState;if(r!==null)return r;r={memoizedState:Te,baseState:Te,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$i,lastRenderedState:Te},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$i,lastRenderedState:a},next:null},i.memoizedState=r,i=i.alternate,i!==null&&(i.memoizedState=r),r}function My(i){var r=Ny(i);r.next===null&&(r=i.alternate.memoizedState),yl(i,r.next.queue,{},Nn())}function rh(){return Yt(Vl)}function Dy(){return vt().memoizedState}function by(){return vt().memoizedState}function RI(i){for(var r=i.return;r!==null;){switch(r.tag){case 24:case 3:var a=Nn();i=Us(a);var c=ks(r,i,a);c!==null&&(yn(c,r,a),dl(c,r,a)),r={cache:Vd()},i.payload=r;return}r=r.return}}function wI(i,r,a){var c=Nn();a={lane:c,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},mc(i)?xy(r,a):(a=Ad(i,r,a,c),a!==null&&(yn(a,i,c),Vy(a,r,c)))}function Py(i,r,a){var c=Nn();yl(i,r,a,c)}function yl(i,r,a,c){var y={lane:c,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(mc(i))xy(r,y);else{var _=i.alternate;if(i.lanes===0&&(_===null||_.lanes===0)&&(_=r.lastRenderedReducer,_!==null))try{var A=r.lastRenderedState,I=_(A,a);if(y.hasEagerState=!0,y.eagerState=I,Sn(I,A))return $u(i,r,y,0),it===null&&Qu(),!1}catch{}finally{}if(a=Ad(i,r,y,c),a!==null)return yn(a,i,c),Vy(a,r,c),!0}return!1}function oh(i,r,a,c){if(c={lane:2,revertLane:Oh(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},mc(i)){if(r)throw Error(s(479))}else r=Ad(i,a,c,2),r!==null&&yn(r,i,2)}function mc(i){var r=i.alternate;return i===Ne||r!==null&&r===Ne}function xy(i,r){Fo=lc=!0;var a=i.pending;a===null?r.next=r:(r.next=a.next,a.next=r),i.pending=r}function Vy(i,r,a){if((a&4194048)!==0){var c=r.lanes;c&=i.pendingLanes,a|=c,r.lanes=a,qa(i,a)}}var _l={readContext:Yt,use:fc,useCallback:mt,useContext:mt,useEffect:mt,useImperativeHandle:mt,useLayoutEffect:mt,useInsertionEffect:mt,useMemo:mt,useReducer:mt,useRef:mt,useState:mt,useDebugValue:mt,useDeferredValue:mt,useTransition:mt,useSyncExternalStore:mt,useId:mt,useHostTransitionStatus:mt,useFormState:mt,useActionState:mt,useOptimistic:mt,useMemoCache:mt,useCacheRefresh:mt};_l.useEffectEvent=mt;var Uy={readContext:Yt,use:fc,useCallback:function(i,r){return ln().memoizedState=[i,r===void 0?null:r],i},useContext:Yt,useEffect:_y,useImperativeHandle:function(i,r,a){a=a!=null?a.concat([i]):null,hc(4194308,4,Sy.bind(null,r,i),a)},useLayoutEffect:function(i,r){return hc(4194308,4,i,r)},useInsertionEffect:function(i,r){hc(4,2,i,r)},useMemo:function(i,r){var a=ln();r=r===void 0?null:r;var c=i();if($r){Dn(!0);try{i()}finally{Dn(!1)}}return a.memoizedState=[c,r],c},useReducer:function(i,r,a){var c=ln();if(a!==void 0){var y=a(r);if($r){Dn(!0);try{a(r)}finally{Dn(!1)}}}else y=r;return c.memoizedState=c.baseState=y,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:y},c.queue=i,i=i.dispatch=wI.bind(null,Ne,i),[c.memoizedState,i]},useRef:function(i){var r=ln();return i={current:i},r.memoizedState=i},useState:function(i){i=jd(i);var r=i.queue,a=Py.bind(null,Ne,r);return r.dispatch=a,[i.memoizedState,a]},useDebugValue:nh,useDeferredValue:function(i,r){var a=ln();return ih(a,i,r)},useTransition:function(){var i=jd(!1);return i=wy.bind(null,Ne,i.queue,!0,!1),ln().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,r,a){var c=Ne,y=ln();if(qe){if(a===void 0)throw Error(s(407));a=a()}else{if(a=r(),it===null)throw Error(s(349));(xe&127)!==0||ny(c,r,a)}y.memoizedState=a;var _={value:a,getSnapshot:r};return y.queue=_,_y(sy.bind(null,c,_,i),[i]),c.flags|=2048,Go(9,{destroy:void 0},iy.bind(null,c,_,a,r),null),a},useId:function(){var i=ln(),r=it.identifierPrefix;if(qe){var a=Ni,c=wi;a=(c&~(1<<32-yt(c)-1)).toString(32)+a,r="_"+r+"R_"+a,a=uc++,0<a&&(r+="H"+a.toString(32)),r+="_"}else a=vI++,r="_"+r+"r_"+a.toString(32)+"_";return i.memoizedState=r},useHostTransitionStatus:rh,useFormState:hy,useActionState:hy,useOptimistic:function(i){var r=ln();r.memoizedState=r.baseState=i;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=oh.bind(null,Ne,!0,a),a.dispatch=r,[i,r]},useMemoCache:Xd,useCacheRefresh:function(){return ln().memoizedState=RI.bind(null,Ne)},useEffectEvent:function(i){var r=ln(),a={impl:i};return r.memoizedState=a,function(){if((Ke&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},ah={readContext:Yt,use:fc,useCallback:Cy,useContext:Yt,useEffect:th,useImperativeHandle:Ay,useInsertionEffect:vy,useLayoutEffect:Ey,useMemo:Iy,useReducer:dc,useRef:yy,useState:function(){return dc($i)},useDebugValue:nh,useDeferredValue:function(i,r){var a=vt();return Ry(a,et.memoizedState,i,r)},useTransition:function(){var i=dc($i)[0],r=vt().memoizedState;return[typeof i=="boolean"?i:gl(i),r]},useSyncExternalStore:ty,useId:Dy,useHostTransitionStatus:rh,useFormState:py,useActionState:py,useOptimistic:function(i,r){var a=vt();return ay(a,et,i,r)},useMemoCache:Xd,useCacheRefresh:by};ah.useEffectEvent=Ty;var ky={readContext:Yt,use:fc,useCallback:Cy,useContext:Yt,useEffect:th,useImperativeHandle:Ay,useInsertionEffect:vy,useLayoutEffect:Ey,useMemo:Iy,useReducer:Zd,useRef:yy,useState:function(){return Zd($i)},useDebugValue:nh,useDeferredValue:function(i,r){var a=vt();return et===null?ih(a,i,r):Ry(a,et.memoizedState,i,r)},useTransition:function(){var i=Zd($i)[0],r=vt().memoizedState;return[typeof i=="boolean"?i:gl(i),r]},useSyncExternalStore:ty,useId:Dy,useHostTransitionStatus:rh,useFormState:gy,useActionState:gy,useOptimistic:function(i,r){var a=vt();return et!==null?ay(a,et,i,r):(a.baseState=i,[i,a.queue.dispatch])},useMemoCache:Xd,useCacheRefresh:by};ky.useEffectEvent=Ty;function lh(i,r,a,c){r=i.memoizedState,a=a(c,r),a=a==null?r:v({},r,a),i.memoizedState=a,i.lanes===0&&(i.updateQueue.baseState=a)}var uh={enqueueSetState:function(i,r,a){i=i._reactInternals;var c=Nn(),y=Us(c);y.payload=r,a!=null&&(y.callback=a),r=ks(i,y,c),r!==null&&(yn(r,i,c),dl(r,i,c))},enqueueReplaceState:function(i,r,a){i=i._reactInternals;var c=Nn(),y=Us(c);y.tag=1,y.payload=r,a!=null&&(y.callback=a),r=ks(i,y,c),r!==null&&(yn(r,i,c),dl(r,i,c))},enqueueForceUpdate:function(i,r){i=i._reactInternals;var a=Nn(),c=Us(a);c.tag=2,r!=null&&(c.callback=r),r=ks(i,c,a),r!==null&&(yn(r,i,a),dl(r,i,a))}};function Ly(i,r,a,c,y,_,A){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(c,_,A):r.prototype&&r.prototype.isPureReactComponent?!sl(a,c)||!sl(y,_):!0}function Oy(i,r,a,c){i=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,c),r.state!==i&&uh.enqueueReplaceState(r,r.state,null)}function Xr(i,r){var a=r;if("ref"in r){a={};for(var c in r)c!=="ref"&&(a[c]=r[c])}if(i=i.defaultProps){a===r&&(a=v({},a));for(var y in i)a[y]===void 0&&(a[y]=i[y])}return a}function qy(i){Ku(i)}function Fy(i){console.error(i)}function By(i){Ku(i)}function gc(i,r){try{var a=i.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(c){setTimeout(function(){throw c})}}function Gy(i,r,a){try{var c=i.onCaughtError;c(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function ch(i,r,a){return a=Us(a),a.tag=3,a.payload={element:null},a.callback=function(){gc(i,r)},a}function Hy(i){return i=Us(i),i.tag=3,i}function zy(i,r,a,c){var y=a.type.getDerivedStateFromError;if(typeof y=="function"){var _=c.value;i.payload=function(){return y(_)},i.callback=function(){Gy(r,a,c)}}var A=a.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(i.callback=function(){Gy(r,a,c),typeof y!="function"&&(Gs===null?Gs=new Set([this]):Gs.add(this));var I=c.stack;this.componentDidCatch(c.value,{componentStack:I!==null?I:""})})}function NI(i,r,a,c,y){if(a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(r=a.alternate,r!==null&&Vo(r,a,y,!0),a=Cn.current,a!==null){switch(a.tag){case 31:case 13:return Fn===null?Nc():a.alternate===null&&gt===0&&(gt=3),a.flags&=-257,a.flags|=65536,a.lanes=y,c===ic?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([c]):r.add(c),Uh(i,c,y)),!1;case 22:return a.flags|=65536,c===ic?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([c])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([c]):a.add(c)),Uh(i,c,y)),!1}throw Error(s(435,a.tag))}return Uh(i,c,y),Nc(),!1}if(qe)return r=Cn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=y,c!==Md&&(i=Error(s(422),{cause:c}),al(kn(i,a)))):(c!==Md&&(r=Error(s(423),{cause:c}),al(kn(r,a))),i=i.current.alternate,i.flags|=65536,y&=-y,i.lanes|=y,c=kn(c,a),y=ch(i.stateNode,c,y),Fd(i,y),gt!==4&&(gt=2)),!1;var _=Error(s(520),{cause:c});if(_=kn(_,a),Rl===null?Rl=[_]:Rl.push(_),gt!==4&&(gt=2),r===null)return!0;c=kn(c,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,i=y&-y,a.lanes|=i,i=ch(a.stateNode,c,i),Fd(a,i),!1;case 1:if(r=a.type,_=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Gs===null||!Gs.has(_))))return a.flags|=65536,y&=-y,a.lanes|=y,y=Hy(y),zy(y,i,a,c),Fd(a,y),!1}a=a.return}while(a!==null);return!1}var fh=Error(s(461)),Dt=!1;function Kt(i,r,a,c){r.child=i===null?Qg(r,null,a,c):Qr(r,i.child,a,c)}function Jy(i,r,a,c,y){a=a.render;var _=r.ref;if("ref"in c){var A={};for(var I in c)I!=="ref"&&(A[I]=c[I])}else A=c;return zr(r),c=Yd(i,r,a,A,_,y),I=Kd(),i!==null&&!Dt?(Qd(i,r,y),Xi(i,r,y)):(qe&&I&&wd(r),r.flags|=1,Kt(i,r,c,y),r.child)}function Yy(i,r,a,c,y){if(i===null){var _=a.type;return typeof _=="function"&&!Cd(_)&&_.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=_,Ky(i,r,_,c,y)):(i=Wu(a.type,null,c,r,r.mode,y),i.ref=r.ref,i.return=r,r.child=i)}if(_=i.child,!Th(i,y)){var A=_.memoizedProps;if(a=a.compare,a=a!==null?a:sl,a(A,c)&&i.ref===r.ref)return Xi(i,r,y)}return r.flags|=1,i=zi(_,c),i.ref=r.ref,i.return=r,r.child=i}function Ky(i,r,a,c,y){if(i!==null){var _=i.memoizedProps;if(sl(_,c)&&i.ref===r.ref)if(Dt=!1,r.pendingProps=c=_,Th(i,y))(i.flags&131072)!==0&&(Dt=!0);else return r.lanes=i.lanes,Xi(i,r,y)}return dh(i,r,a,c,y)}function Qy(i,r,a,c){var y=c.children,_=i!==null?i.memoizedState:null;if(i===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((r.flags&128)!==0){if(_=_!==null?_.baseLanes|a:a,i!==null){for(c=r.child=i.child,y=0;c!==null;)y=y|c.lanes|c.childLanes,c=c.sibling;c=y&~_}else c=0,r.child=null;return $y(i,r,_,a,c)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},i!==null&&tc(r,_!==null?_.cachePool:null),_!==null?Wg(r,_):Gd(),Zg(r);else return c=r.lanes=536870912,$y(i,r,_!==null?_.baseLanes|a:a,a,c)}else _!==null?(tc(r,_.cachePool),Wg(r,_),Os(),r.memoizedState=null):(i!==null&&tc(r,null),Gd(),Os());return Kt(i,r,y,a),r.child}function Tl(i,r){return i!==null&&i.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function $y(i,r,a,c,y){var _=kd();return _=_===null?null:{parent:Nt._currentValue,pool:_},r.memoizedState={baseLanes:a,cachePool:_},i!==null&&tc(r,null),Gd(),Zg(r),i!==null&&Vo(i,r,c,!0),r.childLanes=y,null}function yc(i,r){return r=Tc({mode:r.mode,children:r.children},i.mode),r.ref=i.ref,i.child=r,r.return=i,r}function Xy(i,r,a){return Qr(r,i.child,null,a),i=yc(r,r.pendingProps),i.flags|=2,In(r),r.memoizedState=null,i}function MI(i,r,a){var c=r.pendingProps,y=(r.flags&128)!==0;if(r.flags&=-129,i===null){if(qe){if(c.mode==="hidden")return i=yc(r,c),r.lanes=536870912,Tl(null,i);if(zd(r),(i=rt)?(i=lT(i,qn),i=i!==null&&i.data==="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:Ds!==null?{id:wi,overflow:Ni}:null,retryLane:536870912,hydrationErrors:null},a=xg(i),a.return=r,r.child=a,Jt=r,rt=null)):i=null,i===null)throw Ps(r);return r.lanes=536870912,null}return yc(r,c)}var _=i.memoizedState;if(_!==null){var A=_.dehydrated;if(zd(r),y)if(r.flags&256)r.flags&=-257,r=Xy(i,r,a);else if(r.memoizedState!==null)r.child=i.child,r.flags|=128,r=null;else throw Error(s(558));else if(Dt||Vo(i,r,a,!1),y=(a&i.childLanes)!==0,Dt||y){if(c=it,c!==null&&(A=Fa(c,a),A!==0&&A!==_.retryLane))throw _.retryLane=A,Fr(i,A),yn(c,i,A),fh;Nc(),r=Xy(i,r,a)}else i=_.treeContext,rt=Bn(A.nextSibling),Jt=r,qe=!0,bs=null,qn=!1,i!==null&&kg(r,i),r=yc(r,c),r.flags|=4096;return r}return i=zi(i.child,{mode:c.mode,children:c.children}),i.ref=r.ref,r.child=i,i.return=r,i}function _c(i,r){var a=r.ref;if(a===null)i!==null&&i.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(i===null||i.ref!==a)&&(r.flags|=4194816)}}function dh(i,r,a,c,y){return zr(r),a=Yd(i,r,a,c,void 0,y),c=Kd(),i!==null&&!Dt?(Qd(i,r,y),Xi(i,r,y)):(qe&&c&&wd(r),r.flags|=1,Kt(i,r,a,y),r.child)}function Wy(i,r,a,c,y,_){return zr(r),r.updateQueue=null,a=ey(r,c,a,y),jg(i),c=Kd(),i!==null&&!Dt?(Qd(i,r,_),Xi(i,r,_)):(qe&&c&&wd(r),r.flags|=1,Kt(i,r,a,_),r.child)}function Zy(i,r,a,c,y){if(zr(r),r.stateNode===null){var _=Do,A=a.contextType;typeof A=="object"&&A!==null&&(_=Yt(A)),_=new a(c,_),r.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=uh,r.stateNode=_,_._reactInternals=r,_=r.stateNode,_.props=c,_.state=r.memoizedState,_.refs={},Od(r),A=a.contextType,_.context=typeof A=="object"&&A!==null?Yt(A):Do,_.state=r.memoizedState,A=a.getDerivedStateFromProps,typeof A=="function"&&(lh(r,a,A,c),_.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(A=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),A!==_.state&&uh.enqueueReplaceState(_,_.state,null),pl(r,c,_,y),hl(),_.state=r.memoizedState),typeof _.componentDidMount=="function"&&(r.flags|=4194308),c=!0}else if(i===null){_=r.stateNode;var I=r.memoizedProps,P=Xr(a,I);_.props=P;var z=_.context,X=a.contextType;A=Do,typeof X=="object"&&X!==null&&(A=Yt(X));var j=a.getDerivedStateFromProps;X=typeof j=="function"||typeof _.getSnapshotBeforeUpdate=="function",I=r.pendingProps!==I,X||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(I||z!==A)&&Oy(r,_,c,A),Vs=!1;var J=r.memoizedState;_.state=J,pl(r,c,_,y),hl(),z=r.memoizedState,I||J!==z||Vs?(typeof j=="function"&&(lh(r,a,j,c),z=r.memoizedState),(P=Vs||Ly(r,a,P,c,J,z,A))?(X||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(r.flags|=4194308)):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=z),_.props=c,_.state=z,_.context=A,c=P):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{_=r.stateNode,qd(i,r),A=r.memoizedProps,X=Xr(a,A),_.props=X,j=r.pendingProps,J=_.context,z=a.contextType,P=Do,typeof z=="object"&&z!==null&&(P=Yt(z)),I=a.getDerivedStateFromProps,(z=typeof I=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(A!==j||J!==P)&&Oy(r,_,c,P),Vs=!1,J=r.memoizedState,_.state=J,pl(r,c,_,y),hl();var K=r.memoizedState;A!==j||J!==K||Vs||i!==null&&i.dependencies!==null&&ju(i.dependencies)?(typeof I=="function"&&(lh(r,a,I,c),K=r.memoizedState),(X=Vs||Ly(r,a,X,c,J,K,P)||i!==null&&i.dependencies!==null&&ju(i.dependencies))?(z||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(c,K,P),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(c,K,P)),typeof _.componentDidUpdate=="function"&&(r.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof _.componentDidUpdate!="function"||A===i.memoizedProps&&J===i.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||A===i.memoizedProps&&J===i.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=K),_.props=c,_.state=K,_.context=P,c=X):(typeof _.componentDidUpdate!="function"||A===i.memoizedProps&&J===i.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||A===i.memoizedProps&&J===i.memoizedState||(r.flags|=1024),c=!1)}return _=c,_c(i,r),c=(r.flags&128)!==0,_||c?(_=r.stateNode,a=c&&typeof a.getDerivedStateFromError!="function"?null:_.render(),r.flags|=1,i!==null&&c?(r.child=Qr(r,i.child,null,y),r.child=Qr(r,null,a,y)):Kt(i,r,a,y),r.memoizedState=_.state,i=r.child):i=Xi(i,r,y),i}function jy(i,r,a,c){return Gr(),r.flags|=256,Kt(i,r,a,c),r.child}var hh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ph(i){return{baseLanes:i,cachePool:Gg()}}function mh(i,r,a){return i=i!==null?i.childLanes&~a:0,r&&(i|=wn),i}function e_(i,r,a){var c=r.pendingProps,y=!1,_=(r.flags&128)!==0,A;if((A=_)||(A=i!==null&&i.memoizedState===null?!1:(Tt.current&2)!==0),A&&(y=!0,r.flags&=-129),A=(r.flags&32)!==0,r.flags&=-33,i===null){if(qe){if(y?Ls(r):Os(),(i=rt)?(i=lT(i,qn),i=i!==null&&i.data!=="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:Ds!==null?{id:wi,overflow:Ni}:null,retryLane:536870912,hydrationErrors:null},a=xg(i),a.return=r,r.child=a,Jt=r,rt=null)):i=null,i===null)throw Ps(r);return Wh(i)?r.lanes=32:r.lanes=536870912,null}var I=c.children;return c=c.fallback,y?(Os(),y=r.mode,I=Tc({mode:"hidden",children:I},y),c=Br(c,y,a,null),I.return=r,c.return=r,I.sibling=c,r.child=I,c=r.child,c.memoizedState=ph(a),c.childLanes=mh(i,A,a),r.memoizedState=hh,Tl(null,c)):(Ls(r),gh(r,I))}var P=i.memoizedState;if(P!==null&&(I=P.dehydrated,I!==null)){if(_)r.flags&256?(Ls(r),r.flags&=-257,r=yh(i,r,a)):r.memoizedState!==null?(Os(),r.child=i.child,r.flags|=128,r=null):(Os(),I=c.fallback,y=r.mode,c=Tc({mode:"visible",children:c.children},y),I=Br(I,y,a,null),I.flags|=2,c.return=r,I.return=r,c.sibling=I,r.child=c,Qr(r,i.child,null,a),c=r.child,c.memoizedState=ph(a),c.childLanes=mh(i,A,a),r.memoizedState=hh,r=Tl(null,c));else if(Ls(r),Wh(I)){if(A=I.nextSibling&&I.nextSibling.dataset,A)var z=A.dgst;A=z,c=Error(s(419)),c.stack="",c.digest=A,al({value:c,source:null,stack:null}),r=yh(i,r,a)}else if(Dt||Vo(i,r,a,!1),A=(a&i.childLanes)!==0,Dt||A){if(A=it,A!==null&&(c=Fa(A,a),c!==0&&c!==P.retryLane))throw P.retryLane=c,Fr(i,c),yn(A,i,c),fh;Xh(I)||Nc(),r=yh(i,r,a)}else Xh(I)?(r.flags|=192,r.child=i.child,r=null):(i=P.treeContext,rt=Bn(I.nextSibling),Jt=r,qe=!0,bs=null,qn=!1,i!==null&&kg(r,i),r=gh(r,c.children),r.flags|=4096);return r}return y?(Os(),I=c.fallback,y=r.mode,P=i.child,z=P.sibling,c=zi(P,{mode:"hidden",children:c.children}),c.subtreeFlags=P.subtreeFlags&65011712,z!==null?I=zi(z,I):(I=Br(I,y,a,null),I.flags|=2),I.return=r,c.return=r,c.sibling=I,r.child=c,Tl(null,c),c=r.child,I=i.child.memoizedState,I===null?I=ph(a):(y=I.cachePool,y!==null?(P=Nt._currentValue,y=y.parent!==P?{parent:P,pool:P}:y):y=Gg(),I={baseLanes:I.baseLanes|a,cachePool:y}),c.memoizedState=I,c.childLanes=mh(i,A,a),r.memoizedState=hh,Tl(i.child,c)):(Ls(r),a=i.child,i=a.sibling,a=zi(a,{mode:"visible",children:c.children}),a.return=r,a.sibling=null,i!==null&&(A=r.deletions,A===null?(r.deletions=[i],r.flags|=16):A.push(i)),r.child=a,r.memoizedState=null,a)}function gh(i,r){return r=Tc({mode:"visible",children:r},i.mode),r.return=i,i.child=r}function Tc(i,r){return i=An(22,i,null,r),i.lanes=0,i}function yh(i,r,a){return Qr(r,i.child,null,a),i=gh(r,r.pendingProps.children),i.flags|=2,r.memoizedState=null,i}function t_(i,r,a){i.lanes|=r;var c=i.alternate;c!==null&&(c.lanes|=r),Pd(i.return,r,a)}function _h(i,r,a,c,y,_){var A=i.memoizedState;A===null?i.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:y,treeForkCount:_}:(A.isBackwards=r,A.rendering=null,A.renderingStartTime=0,A.last=c,A.tail=a,A.tailMode=y,A.treeForkCount=_)}function n_(i,r,a){var c=r.pendingProps,y=c.revealOrder,_=c.tail;c=c.children;var A=Tt.current,I=(A&2)!==0;if(I?(A=A&1|2,r.flags|=128):A&=1,ae(Tt,A),Kt(i,r,c,a),c=qe?ol:0,!I&&i!==null&&(i.flags&128)!==0)e:for(i=r.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&t_(i,a,r);else if(i.tag===19)t_(i,a,r);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(y){case"forwards":for(a=r.child,y=null;a!==null;)i=a.alternate,i!==null&&ac(i)===null&&(y=a),a=a.sibling;a=y,a===null?(y=r.child,r.child=null):(y=a.sibling,a.sibling=null),_h(r,!1,y,a,_,c);break;case"backwards":case"unstable_legacy-backwards":for(a=null,y=r.child,r.child=null;y!==null;){if(i=y.alternate,i!==null&&ac(i)===null){r.child=y;break}i=y.sibling,y.sibling=a,a=y,y=i}_h(r,!0,a,null,_,c);break;case"together":_h(r,!1,null,null,void 0,c);break;default:r.memoizedState=null}return r.child}function Xi(i,r,a){if(i!==null&&(r.dependencies=i.dependencies),Bs|=r.lanes,(a&r.childLanes)===0)if(i!==null){if(Vo(i,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(i!==null&&r.child!==i.child)throw Error(s(153));if(r.child!==null){for(i=r.child,a=zi(i,i.pendingProps),r.child=a,a.return=r;i.sibling!==null;)i=i.sibling,a=a.sibling=zi(i,i.pendingProps),a.return=r;a.sibling=null}return r.child}function Th(i,r){return(i.lanes&r)!==0?!0:(i=i.dependencies,!!(i!==null&&ju(i)))}function DI(i,r,a){switch(r.tag){case 3:Ut(r,r.stateNode.containerInfo),xs(r,Nt,i.memoizedState.cache),Gr();break;case 27:case 5:Sr(r);break;case 4:Ut(r,r.stateNode.containerInfo);break;case 10:xs(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,zd(r),null;break;case 13:var c=r.memoizedState;if(c!==null)return c.dehydrated!==null?(Ls(r),r.flags|=128,null):(a&r.child.childLanes)!==0?e_(i,r,a):(Ls(r),i=Xi(i,r,a),i!==null?i.sibling:null);Ls(r);break;case 19:var y=(i.flags&128)!==0;if(c=(a&r.childLanes)!==0,c||(Vo(i,r,a,!1),c=(a&r.childLanes)!==0),y){if(c)return n_(i,r,a);r.flags|=128}if(y=r.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),ae(Tt,Tt.current),c)break;return null;case 22:return r.lanes=0,Qy(i,r,a,r.pendingProps);case 24:xs(r,Nt,i.memoizedState.cache)}return Xi(i,r,a)}function i_(i,r,a){if(i!==null)if(i.memoizedProps!==r.pendingProps)Dt=!0;else{if(!Th(i,a)&&(r.flags&128)===0)return Dt=!1,DI(i,r,a);Dt=(i.flags&131072)!==0}else Dt=!1,qe&&(r.flags&1048576)!==0&&Ug(r,ol,r.index);switch(r.lanes=0,r.tag){case 16:e:{var c=r.pendingProps;if(i=Yr(r.elementType),r.type=i,typeof i=="function")Cd(i)?(c=Xr(i,c),r.tag=1,r=Zy(null,r,i,c,a)):(r.tag=0,r=dh(null,r,i,c,a));else{if(i!=null){var y=i.$$typeof;if(y===le){r.tag=11,r=Jy(null,r,i,c,a);break e}else if(y===D){r.tag=14,r=Yy(null,r,i,c,a);break e}}throw r=Oe(i)||i,Error(s(306,r,""))}}return r;case 0:return dh(i,r,r.type,r.pendingProps,a);case 1:return c=r.type,y=Xr(c,r.pendingProps),Zy(i,r,c,y,a);case 3:e:{if(Ut(r,r.stateNode.containerInfo),i===null)throw Error(s(387));c=r.pendingProps;var _=r.memoizedState;y=_.element,qd(i,r),pl(r,c,null,a);var A=r.memoizedState;if(c=A.cache,xs(r,Nt,c),c!==_.cache&&xd(r,[Nt],a,!0),hl(),c=A.element,_.isDehydrated)if(_={element:c,isDehydrated:!1,cache:A.cache},r.updateQueue.baseState=_,r.memoizedState=_,r.flags&256){r=jy(i,r,c,a);break e}else if(c!==y){y=kn(Error(s(424)),r),al(y),r=jy(i,r,c,a);break e}else{switch(i=r.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(rt=Bn(i.firstChild),Jt=r,qe=!0,bs=null,qn=!0,a=Qg(r,null,c,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Gr(),c===y){r=Xi(i,r,a);break e}Kt(i,r,c,a)}r=r.child}return r;case 26:return _c(i,r),i===null?(a=pT(r.type,null,r.pendingProps,null))?r.memoizedState=a:qe||(a=r.type,i=r.pendingProps,c=Uc(Me.current).createElement(a),c[It]=r,c[qt]=i,Qt(c,a,i),Rt(c),r.stateNode=c):r.memoizedState=pT(r.type,i.memoizedProps,r.pendingProps,i.memoizedState),null;case 27:return Sr(r),i===null&&qe&&(c=r.stateNode=fT(r.type,r.pendingProps,Me.current),Jt=r,qn=!0,y=rt,Ys(r.type)?(Zh=y,rt=Bn(c.firstChild)):rt=y),Kt(i,r,r.pendingProps.children,a),_c(i,r),i===null&&(r.flags|=4194304),r.child;case 5:return i===null&&qe&&((y=c=rt)&&(c=oR(c,r.type,r.pendingProps,qn),c!==null?(r.stateNode=c,Jt=r,rt=Bn(c.firstChild),qn=!1,y=!0):y=!1),y||Ps(r)),Sr(r),y=r.type,_=r.pendingProps,A=i!==null?i.memoizedProps:null,c=_.children,Kh(y,_)?c=null:A!==null&&Kh(y,A)&&(r.flags|=32),r.memoizedState!==null&&(y=Yd(i,r,EI,null,null,a),Vl._currentValue=y),_c(i,r),Kt(i,r,c,a),r.child;case 6:return i===null&&qe&&((i=a=rt)&&(a=aR(a,r.pendingProps,qn),a!==null?(r.stateNode=a,Jt=r,rt=null,i=!0):i=!1),i||Ps(r)),null;case 13:return e_(i,r,a);case 4:return Ut(r,r.stateNode.containerInfo),c=r.pendingProps,i===null?r.child=Qr(r,null,c,a):Kt(i,r,c,a),r.child;case 11:return Jy(i,r,r.type,r.pendingProps,a);case 7:return Kt(i,r,r.pendingProps,a),r.child;case 8:return Kt(i,r,r.pendingProps.children,a),r.child;case 12:return Kt(i,r,r.pendingProps.children,a),r.child;case 10:return c=r.pendingProps,xs(r,r.type,c.value),Kt(i,r,c.children,a),r.child;case 9:return y=r.type._context,c=r.pendingProps.children,zr(r),y=Yt(y),c=c(y),r.flags|=1,Kt(i,r,c,a),r.child;case 14:return Yy(i,r,r.type,r.pendingProps,a);case 15:return Ky(i,r,r.type,r.pendingProps,a);case 19:return n_(i,r,a);case 31:return MI(i,r,a);case 22:return Qy(i,r,a,r.pendingProps);case 24:return zr(r),c=Yt(Nt),i===null?(y=kd(),y===null&&(y=it,_=Vd(),y.pooledCache=_,_.refCount++,_!==null&&(y.pooledCacheLanes|=a),y=_),r.memoizedState={parent:c,cache:y},Od(r),xs(r,Nt,y)):((i.lanes&a)!==0&&(qd(i,r),pl(r,null,null,a),hl()),y=i.memoizedState,_=r.memoizedState,y.parent!==c?(y={parent:c,cache:c},r.memoizedState=y,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=y),xs(r,Nt,c)):(c=_.cache,xs(r,Nt,c),c!==y.cache&&xd(r,[Nt],a,!0))),Kt(i,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function Wi(i){i.flags|=4}function vh(i,r,a,c,y){if((r=(i.mode&32)!==0)&&(r=!1),r){if(i.flags|=16777216,(y&335544128)===y)if(i.stateNode.complete)i.flags|=8192;else if(D_())i.flags|=8192;else throw Kr=ic,Ld}else i.flags&=-16777217}function s_(i,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!TT(r))if(D_())i.flags|=8192;else throw Kr=ic,Ld}function vc(i,r){r!==null&&(i.flags|=4),i.flags&16384&&(r=i.tag!==22?Ru():536870912,i.lanes|=r,Yo|=r)}function vl(i,r){if(!qe)switch(i.tailMode){case"hidden":r=i.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?i.tail=null:a.sibling=null;break;case"collapsed":a=i.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?r||i.tail===null?i.tail=null:i.tail.sibling=null:c.sibling=null}}function ot(i){var r=i.alternate!==null&&i.alternate.child===i.child,a=0,c=0;if(r)for(var y=i.child;y!==null;)a|=y.lanes|y.childLanes,c|=y.subtreeFlags&65011712,c|=y.flags&65011712,y.return=i,y=y.sibling;else for(y=i.child;y!==null;)a|=y.lanes|y.childLanes,c|=y.subtreeFlags,c|=y.flags,y.return=i,y=y.sibling;return i.subtreeFlags|=c,i.childLanes=a,r}function bI(i,r,a){var c=r.pendingProps;switch(Nd(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ot(r),null;case 1:return ot(r),null;case 3:return a=r.stateNode,c=null,i!==null&&(c=i.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),Ki(Nt),ct(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(i===null||i.child===null)&&(xo(r)?Wi(r):i===null||i.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Dd())),ot(r),null;case 26:var y=r.type,_=r.memoizedState;return i===null?(Wi(r),_!==null?(ot(r),s_(r,_)):(ot(r),vh(r,y,null,c,a))):_?_!==i.memoizedState?(Wi(r),ot(r),s_(r,_)):(ot(r),r.flags&=-16777217):(i=i.memoizedProps,i!==c&&Wi(r),ot(r),vh(r,y,i,c,a)),null;case 27:if(co(r),a=Me.current,y=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==c&&Wi(r);else{if(!c){if(r.stateNode===null)throw Error(s(166));return ot(r),null}i=he.current,xo(r)?Lg(r):(i=fT(y,c,a),r.stateNode=i,Wi(r))}return ot(r),null;case 5:if(co(r),y=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==c&&Wi(r);else{if(!c){if(r.stateNode===null)throw Error(s(166));return ot(r),null}if(_=he.current,xo(r))Lg(r);else{var A=Uc(Me.current);switch(_){case 1:_=A.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:_=A.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":_=A.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":_=A.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":_=A.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof c.is=="string"?A.createElement("select",{is:c.is}):A.createElement("select"),c.multiple?_.multiple=!0:c.size&&(_.size=c.size);break;default:_=typeof c.is=="string"?A.createElement(y,{is:c.is}):A.createElement(y)}}_[It]=r,_[qt]=c;e:for(A=r.child;A!==null;){if(A.tag===5||A.tag===6)_.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===r)break e;for(;A.sibling===null;){if(A.return===null||A.return===r)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}r.stateNode=_;e:switch(Qt(_,y,c),y){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&Wi(r)}}return ot(r),vh(r,r.type,i===null?null:i.memoizedProps,r.pendingProps,a),null;case 6:if(i&&r.stateNode!=null)i.memoizedProps!==c&&Wi(r);else{if(typeof c!="string"&&r.stateNode===null)throw Error(s(166));if(i=Me.current,xo(r)){if(i=r.stateNode,a=r.memoizedProps,c=null,y=Jt,y!==null)switch(y.tag){case 27:case 5:c=y.memoizedProps}i[It]=r,i=!!(i.nodeValue===a||c!==null&&c.suppressHydrationWarning===!0||eT(i.nodeValue,a)),i||Ps(r,!0)}else i=Uc(i).createTextNode(c),i[It]=r,r.stateNode=i}return ot(r),null;case 31:if(a=r.memoizedState,i===null||i.memoizedState!==null){if(c=xo(r),a!==null){if(i===null){if(!c)throw Error(s(318));if(i=r.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(557));i[It]=r}else Gr(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ot(r),i=!1}else a=Dd(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=a),i=!0;if(!i)return r.flags&256?(In(r),r):(In(r),null);if((r.flags&128)!==0)throw Error(s(558))}return ot(r),null;case 13:if(c=r.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(y=xo(r),c!==null&&c.dehydrated!==null){if(i===null){if(!y)throw Error(s(318));if(y=r.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(s(317));y[It]=r}else Gr(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ot(r),y=!1}else y=Dd(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=y),y=!0;if(!y)return r.flags&256?(In(r),r):(In(r),null)}return In(r),(r.flags&128)!==0?(r.lanes=a,r):(a=c!==null,i=i!==null&&i.memoizedState!==null,a&&(c=r.child,y=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(y=c.alternate.memoizedState.cachePool.pool),_=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(_=c.memoizedState.cachePool.pool),_!==y&&(c.flags|=2048)),a!==i&&a&&(r.child.flags|=8192),vc(r,r.updateQueue),ot(r),null);case 4:return ct(),i===null&&Gh(r.stateNode.containerInfo),ot(r),null;case 10:return Ki(r.type),ot(r),null;case 19:if(ee(Tt),c=r.memoizedState,c===null)return ot(r),null;if(y=(r.flags&128)!==0,_=c.rendering,_===null)if(y)vl(c,!1);else{if(gt!==0||i!==null&&(i.flags&128)!==0)for(i=r.child;i!==null;){if(_=ac(i),_!==null){for(r.flags|=128,vl(c,!1),i=_.updateQueue,r.updateQueue=i,vc(r,i),r.subtreeFlags=0,i=a,a=r.child;a!==null;)Pg(a,i),a=a.sibling;return ae(Tt,Tt.current&1|2),qe&&Ji(r,c.treeForkCount),r.child}i=i.sibling}c.tail!==null&&on()>Ic&&(r.flags|=128,y=!0,vl(c,!1),r.lanes=4194304)}else{if(!y)if(i=ac(_),i!==null){if(r.flags|=128,y=!0,i=i.updateQueue,r.updateQueue=i,vc(r,i),vl(c,!0),c.tail===null&&c.tailMode==="hidden"&&!_.alternate&&!qe)return ot(r),null}else 2*on()-c.renderingStartTime>Ic&&a!==536870912&&(r.flags|=128,y=!0,vl(c,!1),r.lanes=4194304);c.isBackwards?(_.sibling=r.child,r.child=_):(i=c.last,i!==null?i.sibling=_:r.child=_,c.last=_)}return c.tail!==null?(i=c.tail,c.rendering=i,c.tail=i.sibling,c.renderingStartTime=on(),i.sibling=null,a=Tt.current,ae(Tt,y?a&1|2:a&1),qe&&Ji(r,c.treeForkCount),i):(ot(r),null);case 22:case 23:return In(r),Hd(),c=r.memoizedState!==null,i!==null?i.memoizedState!==null!==c&&(r.flags|=8192):c&&(r.flags|=8192),c?(a&536870912)!==0&&(r.flags&128)===0&&(ot(r),r.subtreeFlags&6&&(r.flags|=8192)):ot(r),a=r.updateQueue,a!==null&&vc(r,a.retryQueue),a=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),c=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),c!==a&&(r.flags|=2048),i!==null&&ee(Jr),null;case 24:return a=null,i!==null&&(a=i.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),Ki(Nt),ot(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function PI(i,r){switch(Nd(r),r.tag){case 1:return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 3:return Ki(Nt),ct(),i=r.flags,(i&65536)!==0&&(i&128)===0?(r.flags=i&-65537|128,r):null;case 26:case 27:case 5:return co(r),null;case 31:if(r.memoizedState!==null){if(In(r),r.alternate===null)throw Error(s(340));Gr()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 13:if(In(r),i=r.memoizedState,i!==null&&i.dehydrated!==null){if(r.alternate===null)throw Error(s(340));Gr()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 19:return ee(Tt),null;case 4:return ct(),null;case 10:return Ki(r.type),null;case 22:case 23:return In(r),Hd(),i!==null&&ee(Jr),i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 24:return Ki(Nt),null;case 25:return null;default:return null}}function r_(i,r){switch(Nd(r),r.tag){case 3:Ki(Nt),ct();break;case 26:case 27:case 5:co(r);break;case 4:ct();break;case 31:r.memoizedState!==null&&In(r);break;case 13:In(r);break;case 19:ee(Tt);break;case 10:Ki(r.type);break;case 22:case 23:In(r),Hd(),i!==null&&ee(Jr);break;case 24:Ki(Nt)}}function El(i,r){try{var a=r.updateQueue,c=a!==null?a.lastEffect:null;if(c!==null){var y=c.next;a=y;do{if((a.tag&i)===i){c=void 0;var _=a.create,A=a.inst;c=_(),A.destroy=c}a=a.next}while(a!==y)}}catch(I){Ze(r,r.return,I)}}function qs(i,r,a){try{var c=r.updateQueue,y=c!==null?c.lastEffect:null;if(y!==null){var _=y.next;c=_;do{if((c.tag&i)===i){var A=c.inst,I=A.destroy;if(I!==void 0){A.destroy=void 0,y=r;var P=a,z=I;try{z()}catch(X){Ze(y,P,X)}}}c=c.next}while(c!==_)}}catch(X){Ze(r,r.return,X)}}function o_(i){var r=i.updateQueue;if(r!==null){var a=i.stateNode;try{Xg(r,a)}catch(c){Ze(i,i.return,c)}}}function a_(i,r,a){a.props=Xr(i.type,i.memoizedProps),a.state=i.memoizedState;try{a.componentWillUnmount()}catch(c){Ze(i,r,c)}}function Sl(i,r){try{var a=i.ref;if(a!==null){switch(i.tag){case 26:case 27:case 5:var c=i.stateNode;break;case 30:c=i.stateNode;break;default:c=i.stateNode}typeof a=="function"?i.refCleanup=a(c):a.current=c}}catch(y){Ze(i,r,y)}}function Mi(i,r){var a=i.ref,c=i.refCleanup;if(a!==null)if(typeof c=="function")try{c()}catch(y){Ze(i,r,y)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(y){Ze(i,r,y)}else a.current=null}function l_(i){var r=i.type,a=i.memoizedProps,c=i.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&c.focus();break e;case"img":a.src?c.src=a.src:a.srcSet&&(c.srcset=a.srcSet)}}catch(y){Ze(i,i.return,y)}}function Eh(i,r,a){try{var c=i.stateNode;eR(c,i.type,a,r),c[qt]=r}catch(y){Ze(i,i.return,y)}}function u_(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Ys(i.type)||i.tag===4}function Sh(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||u_(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Ys(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Ah(i,r,a){var c=i.tag;if(c===5||c===6)i=i.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(i,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(i),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=Xn));else if(c!==4&&(c===27&&Ys(i.type)&&(a=i.stateNode,r=null),i=i.child,i!==null))for(Ah(i,r,a),i=i.sibling;i!==null;)Ah(i,r,a),i=i.sibling}function Ec(i,r,a){var c=i.tag;if(c===5||c===6)i=i.stateNode,r?a.insertBefore(i,r):a.appendChild(i);else if(c!==4&&(c===27&&Ys(i.type)&&(a=i.stateNode),i=i.child,i!==null))for(Ec(i,r,a),i=i.sibling;i!==null;)Ec(i,r,a),i=i.sibling}function c_(i){var r=i.stateNode,a=i.memoizedProps;try{for(var c=i.type,y=r.attributes;y.length;)r.removeAttributeNode(y[0]);Qt(r,c,a),r[It]=i,r[qt]=a}catch(_){Ze(i,i.return,_)}}var Zi=!1,bt=!1,Ch=!1,f_=typeof WeakSet=="function"?WeakSet:Set,Bt=null;function xI(i,r){if(i=i.containerInfo,Jh=Gc,i=Ag(i),yd(i)){if("selectionStart"in i)var a={start:i.selectionStart,end:i.selectionEnd};else e:{a=(a=i.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var y=c.anchorOffset,_=c.focusNode;c=c.focusOffset;try{a.nodeType,_.nodeType}catch{a=null;break e}var A=0,I=-1,P=-1,z=0,X=0,j=i,J=null;t:for(;;){for(var K;j!==a||y!==0&&j.nodeType!==3||(I=A+y),j!==_||c!==0&&j.nodeType!==3||(P=A+c),j.nodeType===3&&(A+=j.nodeValue.length),(K=j.firstChild)!==null;)J=j,j=K;for(;;){if(j===i)break t;if(J===a&&++z===y&&(I=A),J===_&&++X===c&&(P=A),(K=j.nextSibling)!==null)break;j=J,J=j.parentNode}j=K}a=I===-1||P===-1?null:{start:I,end:P}}else a=null}a=a||{start:0,end:0}}else a=null;for(Yh={focusedElem:i,selectionRange:a},Gc=!1,Bt=r;Bt!==null;)if(r=Bt,i=r.child,(r.subtreeFlags&1028)!==0&&i!==null)i.return=r,Bt=i;else for(;Bt!==null;){switch(r=Bt,_=r.alternate,i=r.flags,r.tag){case 0:if((i&4)!==0&&(i=r.updateQueue,i=i!==null?i.events:null,i!==null))for(a=0;a<i.length;a++)y=i[a],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&_!==null){i=void 0,a=r,y=_.memoizedProps,_=_.memoizedState,c=a.stateNode;try{var pe=Xr(a.type,y);i=c.getSnapshotBeforeUpdate(pe,_),c.__reactInternalSnapshotBeforeUpdate=i}catch(ve){Ze(a,a.return,ve)}}break;case 3:if((i&1024)!==0){if(i=r.stateNode.containerInfo,a=i.nodeType,a===9)$h(i);else if(a===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":$h(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=r.sibling,i!==null){i.return=r.return,Bt=i;break}Bt=r.return}}function d_(i,r,a){var c=a.flags;switch(a.tag){case 0:case 11:case 15:es(i,a),c&4&&El(5,a);break;case 1:if(es(i,a),c&4)if(i=a.stateNode,r===null)try{i.componentDidMount()}catch(A){Ze(a,a.return,A)}else{var y=Xr(a.type,r.memoizedProps);r=r.memoizedState;try{i.componentDidUpdate(y,r,i.__reactInternalSnapshotBeforeUpdate)}catch(A){Ze(a,a.return,A)}}c&64&&o_(a),c&512&&Sl(a,a.return);break;case 3:if(es(i,a),c&64&&(i=a.updateQueue,i!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{Xg(i,r)}catch(A){Ze(a,a.return,A)}}break;case 27:r===null&&c&4&&c_(a);case 26:case 5:es(i,a),r===null&&c&4&&l_(a),c&512&&Sl(a,a.return);break;case 12:es(i,a);break;case 31:es(i,a),c&4&&m_(i,a);break;case 13:es(i,a),c&4&&g_(i,a),c&64&&(i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(a=GI.bind(null,a),lR(i,a))));break;case 22:if(c=a.memoizedState!==null||Zi,!c){r=r!==null&&r.memoizedState!==null||bt,y=Zi;var _=bt;Zi=c,(bt=r)&&!_?ts(i,a,(a.subtreeFlags&8772)!==0):es(i,a),Zi=y,bt=_}break;case 30:break;default:es(i,a)}}function h_(i){var r=i.alternate;r!==null&&(i.alternate=null,h_(r)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(r=i.stateNode,r!==null&&go(r)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var dt=null,hn=!1;function ji(i,r,a){for(a=a.child;a!==null;)p_(i,r,a),a=a.sibling}function p_(i,r,a){if(Ht&&typeof Ht.onCommitFiberUnmount=="function")try{Ht.onCommitFiberUnmount(Yn,a)}catch{}switch(a.tag){case 26:bt||Mi(a,r),ji(i,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:bt||Mi(a,r);var c=dt,y=hn;Ys(a.type)&&(dt=a.stateNode,hn=!1),ji(i,r,a),bl(a.stateNode),dt=c,hn=y;break;case 5:bt||Mi(a,r);case 6:if(c=dt,y=hn,dt=null,ji(i,r,a),dt=c,hn=y,dt!==null)if(hn)try{(dt.nodeType===9?dt.body:dt.nodeName==="HTML"?dt.ownerDocument.body:dt).removeChild(a.stateNode)}catch(_){Ze(a,r,_)}else try{dt.removeChild(a.stateNode)}catch(_){Ze(a,r,_)}break;case 18:dt!==null&&(hn?(i=dt,oT(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,a.stateNode),ea(i)):oT(dt,a.stateNode));break;case 4:c=dt,y=hn,dt=a.stateNode.containerInfo,hn=!0,ji(i,r,a),dt=c,hn=y;break;case 0:case 11:case 14:case 15:qs(2,a,r),bt||qs(4,a,r),ji(i,r,a);break;case 1:bt||(Mi(a,r),c=a.stateNode,typeof c.componentWillUnmount=="function"&&a_(a,r,c)),ji(i,r,a);break;case 21:ji(i,r,a);break;case 22:bt=(c=bt)||a.memoizedState!==null,ji(i,r,a),bt=c;break;default:ji(i,r,a)}}function m_(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{ea(i)}catch(a){Ze(r,r.return,a)}}}function g_(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{ea(i)}catch(a){Ze(r,r.return,a)}}function VI(i){switch(i.tag){case 31:case 13:case 19:var r=i.stateNode;return r===null&&(r=i.stateNode=new f_),r;case 22:return i=i.stateNode,r=i._retryCache,r===null&&(r=i._retryCache=new f_),r;default:throw Error(s(435,i.tag))}}function Sc(i,r){var a=VI(i);r.forEach(function(c){if(!a.has(c)){a.add(c);var y=HI.bind(null,i,c);c.then(y,y)}})}function pn(i,r){var a=r.deletions;if(a!==null)for(var c=0;c<a.length;c++){var y=a[c],_=i,A=r,I=A;e:for(;I!==null;){switch(I.tag){case 27:if(Ys(I.type)){dt=I.stateNode,hn=!1;break e}break;case 5:dt=I.stateNode,hn=!1;break e;case 3:case 4:dt=I.stateNode.containerInfo,hn=!0;break e}I=I.return}if(dt===null)throw Error(s(160));p_(_,A,y),dt=null,hn=!1,_=y.alternate,_!==null&&(_.return=null),y.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)y_(r,i),r=r.sibling}var ni=null;function y_(i,r){var a=i.alternate,c=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:pn(r,i),mn(i),c&4&&(qs(3,i,i.return),El(3,i),qs(5,i,i.return));break;case 1:pn(r,i),mn(i),c&512&&(bt||a===null||Mi(a,a.return)),c&64&&Zi&&(i=i.updateQueue,i!==null&&(c=i.callbacks,c!==null&&(a=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=a===null?c:a.concat(c))));break;case 26:var y=ni;if(pn(r,i),mn(i),c&512&&(bt||a===null||Mi(a,a.return)),c&4){var _=a!==null?a.memoizedState:null;if(c=i.memoizedState,a===null)if(c===null)if(i.stateNode===null){e:{c=i.type,a=i.memoizedProps,y=y.ownerDocument||y;t:switch(c){case"title":_=y.getElementsByTagName("title")[0],(!_||_[mi]||_[It]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=y.createElement(c),y.head.insertBefore(_,y.querySelector("head > title"))),Qt(_,c,a),_[It]=i,Rt(_),c=_;break e;case"link":var A=yT("link","href",y).get(c+(a.href||""));if(A){for(var I=0;I<A.length;I++)if(_=A[I],_.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&_.getAttribute("rel")===(a.rel==null?null:a.rel)&&_.getAttribute("title")===(a.title==null?null:a.title)&&_.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){A.splice(I,1);break t}}_=y.createElement(c),Qt(_,c,a),y.head.appendChild(_);break;case"meta":if(A=yT("meta","content",y).get(c+(a.content||""))){for(I=0;I<A.length;I++)if(_=A[I],_.getAttribute("content")===(a.content==null?null:""+a.content)&&_.getAttribute("name")===(a.name==null?null:a.name)&&_.getAttribute("property")===(a.property==null?null:a.property)&&_.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&_.getAttribute("charset")===(a.charSet==null?null:a.charSet)){A.splice(I,1);break t}}_=y.createElement(c),Qt(_,c,a),y.head.appendChild(_);break;default:throw Error(s(468,c))}_[It]=i,Rt(_),c=_}i.stateNode=c}else _T(y,i.type,i.stateNode);else i.stateNode=gT(y,c,i.memoizedProps);else _!==c?(_===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):_.count--,c===null?_T(y,i.type,i.stateNode):gT(y,c,i.memoizedProps)):c===null&&i.stateNode!==null&&Eh(i,i.memoizedProps,a.memoizedProps)}break;case 27:pn(r,i),mn(i),c&512&&(bt||a===null||Mi(a,a.return)),a!==null&&c&4&&Eh(i,i.memoizedProps,a.memoizedProps);break;case 5:if(pn(r,i),mn(i),c&512&&(bt||a===null||Mi(a,a.return)),i.flags&32){y=i.stateNode;try{dn(y,"")}catch(pe){Ze(i,i.return,pe)}}c&4&&i.stateNode!=null&&(y=i.memoizedProps,Eh(i,y,a!==null?a.memoizedProps:y)),c&1024&&(Ch=!0);break;case 6:if(pn(r,i),mn(i),c&4){if(i.stateNode===null)throw Error(s(162));c=i.memoizedProps,a=i.stateNode;try{a.nodeValue=c}catch(pe){Ze(i,i.return,pe)}}break;case 3:if(Oc=null,y=ni,ni=kc(r.containerInfo),pn(r,i),ni=y,mn(i),c&4&&a!==null&&a.memoizedState.isDehydrated)try{ea(r.containerInfo)}catch(pe){Ze(i,i.return,pe)}Ch&&(Ch=!1,__(i));break;case 4:c=ni,ni=kc(i.stateNode.containerInfo),pn(r,i),mn(i),ni=c;break;case 12:pn(r,i),mn(i);break;case 31:pn(r,i),mn(i),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,Sc(i,c)));break;case 13:pn(r,i),mn(i),i.child.flags&8192&&i.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Cc=on()),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,Sc(i,c)));break;case 22:y=i.memoizedState!==null;var P=a!==null&&a.memoizedState!==null,z=Zi,X=bt;if(Zi=z||y,bt=X||P,pn(r,i),bt=X,Zi=z,mn(i),c&8192)e:for(r=i.stateNode,r._visibility=y?r._visibility&-2:r._visibility|1,y&&(a===null||P||Zi||bt||Wr(i)),a=null,r=i;;){if(r.tag===5||r.tag===26){if(a===null){P=a=r;try{if(_=P.stateNode,y)A=_.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{I=P.stateNode;var j=P.memoizedProps.style,J=j!=null&&j.hasOwnProperty("display")?j.display:null;I.style.display=J==null||typeof J=="boolean"?"":(""+J).trim()}}catch(pe){Ze(P,P.return,pe)}}}else if(r.tag===6){if(a===null){P=r;try{P.stateNode.nodeValue=y?"":P.memoizedProps}catch(pe){Ze(P,P.return,pe)}}}else if(r.tag===18){if(a===null){P=r;try{var K=P.stateNode;y?aT(K,!0):aT(P.stateNode,!1)}catch(pe){Ze(P,P.return,pe)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===i)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}c&4&&(c=i.updateQueue,c!==null&&(a=c.retryQueue,a!==null&&(c.retryQueue=null,Sc(i,a))));break;case 19:pn(r,i),mn(i),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,Sc(i,c)));break;case 30:break;case 21:break;default:pn(r,i),mn(i)}}function mn(i){var r=i.flags;if(r&2){try{for(var a,c=i.return;c!==null;){if(u_(c)){a=c;break}c=c.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var y=a.stateNode,_=Sh(i);Ec(i,_,y);break;case 5:var A=a.stateNode;a.flags&32&&(dn(A,""),a.flags&=-33);var I=Sh(i);Ec(i,I,A);break;case 3:case 4:var P=a.stateNode.containerInfo,z=Sh(i);Ah(i,z,P);break;default:throw Error(s(161))}}catch(X){Ze(i,i.return,X)}i.flags&=-3}r&4096&&(i.flags&=-4097)}function __(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var r=i;__(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),i=i.sibling}}function es(i,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)d_(i,r.alternate,r),r=r.sibling}function Wr(i){for(i=i.child;i!==null;){var r=i;switch(r.tag){case 0:case 11:case 14:case 15:qs(4,r,r.return),Wr(r);break;case 1:Mi(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&a_(r,r.return,a),Wr(r);break;case 27:bl(r.stateNode);case 26:case 5:Mi(r,r.return),Wr(r);break;case 22:r.memoizedState===null&&Wr(r);break;case 30:Wr(r);break;default:Wr(r)}i=i.sibling}}function ts(i,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var c=r.alternate,y=i,_=r,A=_.flags;switch(_.tag){case 0:case 11:case 15:ts(y,_,a),El(4,_);break;case 1:if(ts(y,_,a),c=_,y=c.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(z){Ze(c,c.return,z)}if(c=_,y=c.updateQueue,y!==null){var I=c.stateNode;try{var P=y.shared.hiddenCallbacks;if(P!==null)for(y.shared.hiddenCallbacks=null,y=0;y<P.length;y++)$g(P[y],I)}catch(z){Ze(c,c.return,z)}}a&&A&64&&o_(_),Sl(_,_.return);break;case 27:c_(_);case 26:case 5:ts(y,_,a),a&&c===null&&A&4&&l_(_),Sl(_,_.return);break;case 12:ts(y,_,a);break;case 31:ts(y,_,a),a&&A&4&&m_(y,_);break;case 13:ts(y,_,a),a&&A&4&&g_(y,_);break;case 22:_.memoizedState===null&&ts(y,_,a),Sl(_,_.return);break;case 30:break;default:ts(y,_,a)}r=r.sibling}}function Ih(i,r){var a=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),i=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(i=r.memoizedState.cachePool.pool),i!==a&&(i!=null&&i.refCount++,a!=null&&ll(a))}function Rh(i,r){i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&ll(i))}function ii(i,r,a,c){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)T_(i,r,a,c),r=r.sibling}function T_(i,r,a,c){var y=r.flags;switch(r.tag){case 0:case 11:case 15:ii(i,r,a,c),y&2048&&El(9,r);break;case 1:ii(i,r,a,c);break;case 3:ii(i,r,a,c),y&2048&&(i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&ll(i)));break;case 12:if(y&2048){ii(i,r,a,c),i=r.stateNode;try{var _=r.memoizedProps,A=_.id,I=_.onPostCommit;typeof I=="function"&&I(A,r.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(P){Ze(r,r.return,P)}}else ii(i,r,a,c);break;case 31:ii(i,r,a,c);break;case 13:ii(i,r,a,c);break;case 23:break;case 22:_=r.stateNode,A=r.alternate,r.memoizedState!==null?_._visibility&2?ii(i,r,a,c):Al(i,r):_._visibility&2?ii(i,r,a,c):(_._visibility|=2,Ho(i,r,a,c,(r.subtreeFlags&10256)!==0||!1)),y&2048&&Ih(A,r);break;case 24:ii(i,r,a,c),y&2048&&Rh(r.alternate,r);break;default:ii(i,r,a,c)}}function Ho(i,r,a,c,y){for(y=y&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var _=i,A=r,I=a,P=c,z=A.flags;switch(A.tag){case 0:case 11:case 15:Ho(_,A,I,P,y),El(8,A);break;case 23:break;case 22:var X=A.stateNode;A.memoizedState!==null?X._visibility&2?Ho(_,A,I,P,y):Al(_,A):(X._visibility|=2,Ho(_,A,I,P,y)),y&&z&2048&&Ih(A.alternate,A);break;case 24:Ho(_,A,I,P,y),y&&z&2048&&Rh(A.alternate,A);break;default:Ho(_,A,I,P,y)}r=r.sibling}}function Al(i,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=i,c=r,y=c.flags;switch(c.tag){case 22:Al(a,c),y&2048&&Ih(c.alternate,c);break;case 24:Al(a,c),y&2048&&Rh(c.alternate,c);break;default:Al(a,c)}r=r.sibling}}var Cl=8192;function zo(i,r,a){if(i.subtreeFlags&Cl)for(i=i.child;i!==null;)v_(i,r,a),i=i.sibling}function v_(i,r,a){switch(i.tag){case 26:zo(i,r,a),i.flags&Cl&&i.memoizedState!==null&&vR(a,ni,i.memoizedState,i.memoizedProps);break;case 5:zo(i,r,a);break;case 3:case 4:var c=ni;ni=kc(i.stateNode.containerInfo),zo(i,r,a),ni=c;break;case 22:i.memoizedState===null&&(c=i.alternate,c!==null&&c.memoizedState!==null?(c=Cl,Cl=16777216,zo(i,r,a),Cl=c):zo(i,r,a));break;default:zo(i,r,a)}}function E_(i){var r=i.alternate;if(r!==null&&(i=r.child,i!==null)){r.child=null;do r=i.sibling,i.sibling=null,i=r;while(i!==null)}}function Il(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var c=r[a];Bt=c,A_(c,i)}E_(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)S_(i),i=i.sibling}function S_(i){switch(i.tag){case 0:case 11:case 15:Il(i),i.flags&2048&&qs(9,i,i.return);break;case 3:Il(i);break;case 12:Il(i);break;case 22:var r=i.stateNode;i.memoizedState!==null&&r._visibility&2&&(i.return===null||i.return.tag!==13)?(r._visibility&=-3,Ac(i)):Il(i);break;default:Il(i)}}function Ac(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var c=r[a];Bt=c,A_(c,i)}E_(i)}for(i=i.child;i!==null;){switch(r=i,r.tag){case 0:case 11:case 15:qs(8,r,r.return),Ac(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,Ac(r));break;default:Ac(r)}i=i.sibling}}function A_(i,r){for(;Bt!==null;){var a=Bt;switch(a.tag){case 0:case 11:case 15:qs(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var c=a.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:ll(a.memoizedState.cache)}if(c=a.child,c!==null)c.return=a,Bt=c;else e:for(a=i;Bt!==null;){c=Bt;var y=c.sibling,_=c.return;if(h_(c),c===a){Bt=null;break e}if(y!==null){y.return=_,Bt=y;break e}Bt=_}}}var UI={getCacheForType:function(i){var r=Yt(Nt),a=r.data.get(i);return a===void 0&&(a=i(),r.data.set(i,a)),a},cacheSignal:function(){return Yt(Nt).controller.signal}},kI=typeof WeakMap=="function"?WeakMap:Map,Ke=0,it=null,be=null,xe=0,We=0,Rn=null,Fs=!1,Jo=!1,wh=!1,ns=0,gt=0,Bs=0,Zr=0,Nh=0,wn=0,Yo=0,Rl=null,gn=null,Mh=!1,Cc=0,C_=0,Ic=1/0,Rc=null,Gs=null,Lt=0,Hs=null,Ko=null,is=0,Dh=0,bh=null,I_=null,wl=0,Ph=null;function Nn(){return(Ke&2)!==0&&xe!==0?xe&-xe:Q.T!==null?Oh():wu()}function R_(){if(wn===0)if((xe&536870912)===0||qe){var i=Ir;Ir<<=1,(Ir&3932160)===0&&(Ir=262144),wn=i}else wn=536870912;return i=Cn.current,i!==null&&(i.flags|=32),wn}function yn(i,r,a){(i===it&&(We===2||We===9)||i.cancelPendingCommit!==null)&&(Qo(i,0),zs(i,xe,wn,!1)),Rr(i,a),((Ke&2)===0||i!==it)&&(i===it&&((Ke&2)===0&&(Zr|=a),gt===4&&zs(i,xe,wn,!1)),Di(i))}function w_(i,r,a){if((Ke&6)!==0)throw Error(s(327));var c=!a&&(r&127)===0&&(r&i.expiredLanes)===0||Kn(i,r),y=c?qI(i,r):Vh(i,r,!0),_=c;do{if(y===0){Jo&&!c&&zs(i,r,0,!1);break}else{if(a=i.current.alternate,_&&!LI(a)){y=Vh(i,r,!1),_=!1;continue}if(y===2){if(_=r,i.errorRecoveryDisabledLanes&_)var A=0;else A=i.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){r=A;e:{var I=i;y=Rl;var P=I.current.memoizedState.isDehydrated;if(P&&(Qo(I,A).flags|=256),A=Vh(I,A,!1),A!==2){if(wh&&!P){I.errorRecoveryDisabledLanes|=_,Zr|=_,y=4;break e}_=gn,gn=y,_!==null&&(gn===null?gn=_:gn.push.apply(gn,_))}y=A}if(_=!1,y!==2)continue}}if(y===1){Qo(i,0),zs(i,r,0,!0);break}e:{switch(c=i,_=y,_){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:zs(c,r,wn,!Fs);break e;case 2:gn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(y=Cc+300-on(),10<y)){if(zs(c,r,wn,!Fs),di(c,0,!0)!==0)break e;is=r,c.timeoutHandle=sT(N_.bind(null,c,a,gn,Rc,Mh,r,wn,Zr,Yo,Fs,_,"Throttled",-0,0),y);break e}N_(c,a,gn,Rc,Mh,r,wn,Zr,Yo,Fs,_,null,-0,0)}}break}while(!0);Di(i)}function N_(i,r,a,c,y,_,A,I,P,z,X,j,J,K){if(i.timeoutHandle=-1,j=r.subtreeFlags,j&8192||(j&16785408)===16785408){j={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Xn},v_(r,_,j);var pe=(_&62914560)===_?Cc-on():(_&4194048)===_?C_-on():0;if(pe=ER(j,pe),pe!==null){is=_,i.cancelPendingCommit=pe(k_.bind(null,i,r,_,a,c,y,A,I,P,X,j,null,J,K)),zs(i,_,A,!z);return}}k_(i,r,_,a,c,y,A,I,P)}function LI(i){for(var r=i;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var c=0;c<a.length;c++){var y=a[c],_=y.getSnapshot;y=y.value;try{if(!Sn(_(),y))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function zs(i,r,a,c){r&=~Nh,r&=~Zr,i.suspendedLanes|=r,i.pingedLanes&=~r,c&&(i.warmLanes|=r),c=i.expirationTimes;for(var y=r;0<y;){var _=31-yt(y),A=1<<_;c[_]=-1,y&=~A}a!==0&&wr(i,a,r)}function wc(){return(Ke&6)===0?(Nl(0),!1):!0}function xh(){if(be!==null){if(We===0)var i=be.return;else i=be,Yi=Hr=null,$d(i),Oo=null,cl=0,i=be;for(;i!==null;)r_(i.alternate,i),i=i.return;be=null}}function Qo(i,r){var a=i.timeoutHandle;a!==-1&&(i.timeoutHandle=-1,iR(a)),a=i.cancelPendingCommit,a!==null&&(i.cancelPendingCommit=null,a()),is=0,xh(),it=i,be=a=zi(i.current,null),xe=r,We=0,Rn=null,Fs=!1,Jo=Kn(i,r),wh=!1,Yo=wn=Nh=Zr=Bs=gt=0,gn=Rl=null,Mh=!1,(r&8)!==0&&(r|=r&32);var c=i.entangledLanes;if(c!==0)for(i=i.entanglements,c&=r;0<c;){var y=31-yt(c),_=1<<y;r|=i[y],c&=~_}return ns=r,Qu(),a}function M_(i,r){Ne=null,Q.H=_l,r===Lo||r===nc?(r=Jg(),We=3):r===Ld?(r=Jg(),We=4):We=r===fh?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Rn=r,be===null&&(gt=1,gc(i,kn(r,i.current)))}function D_(){var i=Cn.current;return i===null?!0:(xe&4194048)===xe?Fn===null:(xe&62914560)===xe||(xe&536870912)!==0?i===Fn:!1}function b_(){var i=Q.H;return Q.H=_l,i===null?_l:i}function P_(){var i=Q.A;return Q.A=UI,i}function Nc(){gt=4,Fs||(xe&4194048)!==xe&&Cn.current!==null||(Jo=!0),(Bs&134217727)===0&&(Zr&134217727)===0||it===null||zs(it,xe,wn,!1)}function Vh(i,r,a){var c=Ke;Ke|=2;var y=b_(),_=P_();(it!==i||xe!==r)&&(Rc=null,Qo(i,r)),r=!1;var A=gt;e:do try{if(We!==0&&be!==null){var I=be,P=Rn;switch(We){case 8:xh(),A=6;break e;case 3:case 2:case 9:case 6:Cn.current===null&&(r=!0);var z=We;if(We=0,Rn=null,$o(i,I,P,z),a&&Jo){A=0;break e}break;default:z=We,We=0,Rn=null,$o(i,I,P,z)}}OI(),A=gt;break}catch(X){M_(i,X)}while(!0);return r&&i.shellSuspendCounter++,Yi=Hr=null,Ke=c,Q.H=y,Q.A=_,be===null&&(it=null,xe=0,Qu()),A}function OI(){for(;be!==null;)x_(be)}function qI(i,r){var a=Ke;Ke|=2;var c=b_(),y=P_();it!==i||xe!==r?(Rc=null,Ic=on()+500,Qo(i,r)):Jo=Kn(i,r);e:do try{if(We!==0&&be!==null){r=be;var _=Rn;t:switch(We){case 1:We=0,Rn=null,$o(i,r,_,1);break;case 2:case 9:if(Hg(_)){We=0,Rn=null,V_(r);break}r=function(){We!==2&&We!==9||it!==i||(We=7),Di(i)},_.then(r,r);break e;case 3:We=7;break e;case 4:We=5;break e;case 7:Hg(_)?(We=0,Rn=null,V_(r)):(We=0,Rn=null,$o(i,r,_,7));break;case 5:var A=null;switch(be.tag){case 26:A=be.memoizedState;case 5:case 27:var I=be;if(A?TT(A):I.stateNode.complete){We=0,Rn=null;var P=I.sibling;if(P!==null)be=P;else{var z=I.return;z!==null?(be=z,Mc(z)):be=null}break t}}We=0,Rn=null,$o(i,r,_,5);break;case 6:We=0,Rn=null,$o(i,r,_,6);break;case 8:xh(),gt=6;break e;default:throw Error(s(462))}}FI();break}catch(X){M_(i,X)}while(!0);return Yi=Hr=null,Q.H=c,Q.A=y,Ke=a,be!==null?0:(it=null,xe=0,Qu(),gt)}function FI(){for(;be!==null&&!cd();)x_(be)}function x_(i){var r=i_(i.alternate,i,ns);i.memoizedProps=i.pendingProps,r===null?Mc(i):be=r}function V_(i){var r=i,a=r.alternate;switch(r.tag){case 15:case 0:r=Wy(a,r,r.pendingProps,r.type,void 0,xe);break;case 11:r=Wy(a,r,r.pendingProps,r.type.render,r.ref,xe);break;case 5:$d(r);default:r_(a,r),r=be=Pg(r,ns),r=i_(a,r,ns)}i.memoizedProps=i.pendingProps,r===null?Mc(i):be=r}function $o(i,r,a,c){Yi=Hr=null,$d(r),Oo=null,cl=0;var y=r.return;try{if(NI(i,y,r,a,xe)){gt=1,gc(i,kn(a,i.current)),be=null;return}}catch(_){if(y!==null)throw be=y,_;gt=1,gc(i,kn(a,i.current)),be=null;return}r.flags&32768?(qe||c===1?i=!0:Jo||(xe&536870912)!==0?i=!1:(Fs=i=!0,(c===2||c===9||c===3||c===6)&&(c=Cn.current,c!==null&&c.tag===13&&(c.flags|=16384))),U_(r,i)):Mc(r)}function Mc(i){var r=i;do{if((r.flags&32768)!==0){U_(r,Fs);return}i=r.return;var a=bI(r.alternate,r,ns);if(a!==null){be=a;return}if(r=r.sibling,r!==null){be=r;return}be=r=i}while(r!==null);gt===0&&(gt=5)}function U_(i,r){do{var a=PI(i.alternate,i);if(a!==null){a.flags&=32767,be=a;return}if(a=i.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(i=i.sibling,i!==null)){be=i;return}be=i=a}while(i!==null);gt=6,be=null}function k_(i,r,a,c,y,_,A,I,P){i.cancelPendingCommit=null;do Dc();while(Lt!==0);if((Ke&6)!==0)throw Error(s(327));if(r!==null){if(r===i.current)throw Error(s(177));if(_=r.lanes|r.childLanes,_|=Sd,hd(i,a,_,A,I,P),i===it&&(be=it=null,xe=0),Ko=r,Hs=i,is=a,Dh=_,bh=y,I_=c,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,zI(vs,function(){return B_(),null})):(i.callbackNode=null,i.callbackPriority=0),c=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||c){c=Q.T,Q.T=null,y=oe.p,oe.p=2,A=Ke,Ke|=4;try{xI(i,r,a)}finally{Ke=A,oe.p=y,Q.T=c}}Lt=1,L_(),O_(),q_()}}function L_(){if(Lt===1){Lt=0;var i=Hs,r=Ko,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=Q.T,Q.T=null;var c=oe.p;oe.p=2;var y=Ke;Ke|=4;try{y_(r,i);var _=Yh,A=Ag(i.containerInfo),I=_.focusedElem,P=_.selectionRange;if(A!==I&&I&&I.ownerDocument&&Sg(I.ownerDocument.documentElement,I)){if(P!==null&&yd(I)){var z=P.start,X=P.end;if(X===void 0&&(X=z),"selectionStart"in I)I.selectionStart=z,I.selectionEnd=Math.min(X,I.value.length);else{var j=I.ownerDocument||document,J=j&&j.defaultView||window;if(J.getSelection){var K=J.getSelection(),pe=I.textContent.length,ve=Math.min(P.start,pe),nt=P.end===void 0?ve:Math.min(P.end,pe);!K.extend&&ve>nt&&(A=nt,nt=ve,ve=A);var q=Eg(I,ve),U=Eg(I,nt);if(q&&U&&(K.rangeCount!==1||K.anchorNode!==q.node||K.anchorOffset!==q.offset||K.focusNode!==U.node||K.focusOffset!==U.offset)){var H=j.createRange();H.setStart(q.node,q.offset),K.removeAllRanges(),ve>nt?(K.addRange(H),K.extend(U.node,U.offset)):(H.setEnd(U.node,U.offset),K.addRange(H))}}}}for(j=[],K=I;K=K.parentNode;)K.nodeType===1&&j.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof I.focus=="function"&&I.focus(),I=0;I<j.length;I++){var W=j[I];W.element.scrollLeft=W.left,W.element.scrollTop=W.top}}Gc=!!Jh,Yh=Jh=null}finally{Ke=y,oe.p=c,Q.T=a}}i.current=r,Lt=2}}function O_(){if(Lt===2){Lt=0;var i=Hs,r=Ko,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=Q.T,Q.T=null;var c=oe.p;oe.p=2;var y=Ke;Ke|=4;try{d_(i,r.alternate,r)}finally{Ke=y,oe.p=c,Q.T=a}}Lt=3}}function q_(){if(Lt===4||Lt===3){Lt=0,vu();var i=Hs,r=Ko,a=is,c=I_;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Lt=5:(Lt=0,Ko=Hs=null,F_(i,i.pendingLanes));var y=i.pendingLanes;if(y===0&&(Gs=null),Fi(a),r=r.stateNode,Ht&&typeof Ht.onCommitFiberRoot=="function")try{Ht.onCommitFiberRoot(Yn,r,void 0,(r.current.flags&128)===128)}catch{}if(c!==null){r=Q.T,y=oe.p,oe.p=2,Q.T=null;try{for(var _=i.onRecoverableError,A=0;A<c.length;A++){var I=c[A];_(I.value,{componentStack:I.stack})}}finally{Q.T=r,oe.p=y}}(is&3)!==0&&Dc(),Di(i),y=i.pendingLanes,(a&261930)!==0&&(y&42)!==0?i===Ph?wl++:(wl=0,Ph=i):wl=0,Nl(0)}}function F_(i,r){(i.pooledCacheLanes&=r)===0&&(r=i.pooledCache,r!=null&&(i.pooledCache=null,ll(r)))}function Dc(){return L_(),O_(),q_(),B_()}function B_(){if(Lt!==5)return!1;var i=Hs,r=Dh;Dh=0;var a=Fi(is),c=Q.T,y=oe.p;try{oe.p=32>a?32:a,Q.T=null,a=bh,bh=null;var _=Hs,A=is;if(Lt=0,Ko=Hs=null,is=0,(Ke&6)!==0)throw Error(s(331));var I=Ke;if(Ke|=4,S_(_.current),T_(_,_.current,A,a),Ke=I,Nl(0,!1),Ht&&typeof Ht.onPostCommitFiberRoot=="function")try{Ht.onPostCommitFiberRoot(Yn,_)}catch{}return!0}finally{oe.p=y,Q.T=c,F_(i,r)}}function G_(i,r,a){r=kn(a,r),r=ch(i.stateNode,r,2),i=ks(i,r,2),i!==null&&(Rr(i,2),Di(i))}function Ze(i,r,a){if(i.tag===3)G_(i,i,a);else for(;r!==null;){if(r.tag===3){G_(r,i,a);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Gs===null||!Gs.has(c))){i=kn(a,i),a=Hy(2),c=ks(r,a,2),c!==null&&(zy(a,c,r,i),Rr(c,2),Di(c));break}}r=r.return}}function Uh(i,r,a){var c=i.pingCache;if(c===null){c=i.pingCache=new kI;var y=new Set;c.set(r,y)}else y=c.get(r),y===void 0&&(y=new Set,c.set(r,y));y.has(a)||(wh=!0,y.add(a),i=BI.bind(null,i,r,a),r.then(i,i))}function BI(i,r,a){var c=i.pingCache;c!==null&&c.delete(r),i.pingedLanes|=i.suspendedLanes&a,i.warmLanes&=~a,it===i&&(xe&a)===a&&(gt===4||gt===3&&(xe&62914560)===xe&&300>on()-Cc?(Ke&2)===0&&Qo(i,0):Nh|=a,Yo===xe&&(Yo=0)),Di(i)}function H_(i,r){r===0&&(r=Ru()),i=Fr(i,r),i!==null&&(Rr(i,r),Di(i))}function GI(i){var r=i.memoizedState,a=0;r!==null&&(a=r.retryLane),H_(i,a)}function HI(i,r){var a=0;switch(i.tag){case 31:case 13:var c=i.stateNode,y=i.memoizedState;y!==null&&(a=y.retryLane);break;case 19:c=i.stateNode;break;case 22:c=i.stateNode._retryCache;break;default:throw Error(s(314))}c!==null&&c.delete(r),H_(i,a)}function zI(i,r){return kt(i,r)}var bc=null,Xo=null,kh=!1,Pc=!1,Lh=!1,Js=0;function Di(i){i!==Xo&&i.next===null&&(Xo===null?bc=Xo=i:Xo=Xo.next=i),Pc=!0,kh||(kh=!0,YI())}function Nl(i,r){if(!Lh&&Pc){Lh=!0;do for(var a=!1,c=bc;c!==null;){if(i!==0){var y=c.pendingLanes;if(y===0)var _=0;else{var A=c.suspendedLanes,I=c.pingedLanes;_=(1<<31-yt(42|i)+1)-1,_&=y&~(A&~I),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(a=!0,K_(c,_))}else _=xe,_=di(c,c===it?_:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(_&3)===0||Kn(c,_)||(a=!0,K_(c,_));c=c.next}while(a);Lh=!1}}function JI(){z_()}function z_(){Pc=kh=!1;var i=0;Js!==0&&nR()&&(i=Js);for(var r=on(),a=null,c=bc;c!==null;){var y=c.next,_=J_(c,r);_===0?(c.next=null,a===null?bc=y:a.next=y,y===null&&(Xo=a)):(a=c,(i!==0||(_&3)!==0)&&(Pc=!0)),c=y}Lt!==0&&Lt!==5||Nl(i),Js!==0&&(Js=0)}function J_(i,r){for(var a=i.suspendedLanes,c=i.pingedLanes,y=i.expirationTimes,_=i.pendingLanes&-62914561;0<_;){var A=31-yt(_),I=1<<A,P=y[A];P===-1?((I&a)===0||(I&c)!==0)&&(y[A]=dd(I,r)):P<=r&&(i.expiredLanes|=I),_&=~I}if(r=it,a=xe,a=di(i,i===r?a:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),c=i.callbackNode,a===0||i===r&&(We===2||We===9)||i.cancelPendingCommit!==null)return c!==null&&c!==null&&Ts(c),i.callbackNode=null,i.callbackPriority=0;if((a&3)===0||Kn(i,a)){if(r=a&-a,r===i.callbackPriority)return r;switch(c!==null&&Ts(c),Fi(a)){case 2:case 8:a=Oa;break;case 32:a=vs;break;case 268435456:a=Eu;break;default:a=vs}return c=Y_.bind(null,i),a=kt(a,c),i.callbackPriority=r,i.callbackNode=a,r}return c!==null&&c!==null&&Ts(c),i.callbackPriority=2,i.callbackNode=null,2}function Y_(i,r){if(Lt!==0&&Lt!==5)return i.callbackNode=null,i.callbackPriority=0,null;var a=i.callbackNode;if(Dc()&&i.callbackNode!==a)return null;var c=xe;return c=di(i,i===it?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),c===0?null:(w_(i,c,r),J_(i,on()),i.callbackNode!=null&&i.callbackNode===a?Y_.bind(null,i):null)}function K_(i,r){if(Dc())return null;w_(i,r,!0)}function YI(){sR(function(){(Ke&6)!==0?kt(La,JI):z_()})}function Oh(){if(Js===0){var i=Uo;i===0&&(i=ci,ci<<=1,(ci&261888)===0&&(ci=256)),Js=i}return Js}function Q_(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:vo(""+i)}function $_(i,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,i.id&&a.setAttribute("form",i.id),r.parentNode.insertBefore(a,r),i=new FormData(i),a.parentNode.removeChild(a),i}function KI(i,r,a,c,y){if(r==="submit"&&a&&a.stateNode===y){var _=Q_((y[qt]||null).action),A=c.submitter;A&&(r=(r=A[qt]||null)?Q_(r.formAction):A.getAttribute("formAction"),r!==null&&(_=r,A=null));var I=new Ai("action","action",null,c,y);i.push({event:I,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Js!==0){var P=A?$_(y,A):new FormData(y);sh(a,{pending:!0,data:P,method:y.method,action:_},null,P)}}else typeof _=="function"&&(I.preventDefault(),P=A?$_(y,A):new FormData(y),sh(a,{pending:!0,data:P,method:y.method,action:_},_,P))},currentTarget:y}]})}}for(var qh=0;qh<Ed.length;qh++){var Fh=Ed[qh],QI=Fh.toLowerCase(),$I=Fh[0].toUpperCase()+Fh.slice(1);ti(QI,"on"+$I)}ti(Rg,"onAnimationEnd"),ti(wg,"onAnimationIteration"),ti(Ng,"onAnimationStart"),ti("dblclick","onDoubleClick"),ti("focusin","onFocus"),ti("focusout","onBlur"),ti(fI,"onTransitionRun"),ti(dI,"onTransitionStart"),ti(hI,"onTransitionCancel"),ti(Mg,"onTransitionEnd"),Ti("onMouseEnter",["mouseout","mouseover"]),Ti("onMouseLeave",["mouseout","mouseover"]),Ti("onPointerEnter",["pointerout","pointerover"]),Ti("onPointerLeave",["pointerout","pointerover"]),_i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),_i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),_i("onBeforeInput",["compositionend","keypress","textInput","paste"]),_i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),_i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),_i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ml="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),XI=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ml));function X_(i,r){r=(r&4)!==0;for(var a=0;a<i.length;a++){var c=i[a],y=c.event;c=c.listeners;e:{var _=void 0;if(r)for(var A=c.length-1;0<=A;A--){var I=c[A],P=I.instance,z=I.currentTarget;if(I=I.listener,P!==_&&y.isPropagationStopped())break e;_=I,y.currentTarget=z;try{_(y)}catch(X){Ku(X)}y.currentTarget=null,_=P}else for(A=0;A<c.length;A++){if(I=c[A],P=I.instance,z=I.currentTarget,I=I.listener,P!==_&&y.isPropagationStopped())break e;_=I,y.currentTarget=z;try{_(y)}catch(X){Ku(X)}y.currentTarget=null,_=P}}}}function Pe(i,r){var a=r[mo];a===void 0&&(a=r[mo]=new Set);var c=i+"__bubble";a.has(c)||(W_(r,i,2,!1),a.add(c))}function Bh(i,r,a){var c=0;r&&(c|=4),W_(a,i,c,r)}var xc="_reactListening"+Math.random().toString(36).slice(2);function Gh(i){if(!i[xc]){i[xc]=!0,Ba.forEach(function(a){a!=="selectionchange"&&(XI.has(a)||Bh(a,!1,i),Bh(a,!0,i))});var r=i.nodeType===9?i:i.ownerDocument;r===null||r[xc]||(r[xc]=!0,Bh("selectionchange",!1,r))}}function W_(i,r,a,c){switch(RT(r)){case 2:var y=CR;break;case 8:y=IR;break;default:y=ip}a=y.bind(null,r,a,i),y=void 0,!Pr||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(y=!0),c?y!==void 0?i.addEventListener(r,a,{capture:!0,passive:y}):i.addEventListener(r,a,!0):y!==void 0?i.addEventListener(r,a,{passive:y}):i.addEventListener(r,a,!1)}function Hh(i,r,a,c,y){var _=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var A=c.tag;if(A===3||A===4){var I=c.stateNode.containerInfo;if(I===y)break;if(A===4)for(A=c.return;A!==null;){var P=A.tag;if((P===3||P===4)&&A.stateNode.containerInfo===y)return;A=A.return}for(;I!==null;){if(A=gi(I),A===null)return;if(P=A.tag,P===5||P===6||P===26||P===27){c=_=A;continue e}I=I.parentNode}}c=c.return}Rs(function(){var z=_,X=Pn(a),j=[];e:{var J=Dg.get(i);if(J!==void 0){var K=Ai,pe=i;switch(i){case"keypress":if(Vr(a)===0)break e;case"keydown":case"keyup":K=zu;break;case"focusin":pe="focus",K=kr;break;case"focusout":pe="blur",K=kr;break;case"beforeblur":case"afterblur":K=kr;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=el;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=Uu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=E;break;case Rg:case wg:case Ng:K=Lu;break;case Mg:K=R;break;case"scroll":case"scrollend":K=ja;break;case"wheel":K=Y;break;case"copy":case"cut":case"paste":K=Ou;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=Hi;break;case"toggle":case"beforetoggle":K=we}var ve=(r&4)!==0,nt=!ve&&(i==="scroll"||i==="scrollend"),q=ve?J!==null?J+"Capture":null:J;ve=[];for(var U=z,H;U!==null;){var W=U;if(H=W.stateNode,W=W.tag,W!==5&&W!==26&&W!==27||H===null||q===null||(W=Wn(U,q),W!=null&&ve.push(Dl(U,W,H))),nt)break;U=U.return}0<ve.length&&(J=new K(J,pe,null,a,X),j.push({event:J,listeners:ve}))}}if((r&7)===0){e:{if(J=i==="mouseover"||i==="pointerover",K=i==="mouseout"||i==="pointerout",J&&a!==Xa&&(pe=a.relatedTarget||a.fromElement)&&(gi(pe)||pe[pi]))break e;if((K||J)&&(J=X.window===X?X:(J=X.ownerDocument)?J.defaultView||J.parentWindow:window,K?(pe=a.relatedTarget||a.toElement,K=z,pe=pe?gi(pe):null,pe!==null&&(nt=l(pe),ve=pe.tag,pe!==nt||ve!==5&&ve!==27&&ve!==6)&&(pe=null)):(K=null,pe=z),K!==pe)){if(ve=el,W="onMouseLeave",q="onMouseEnter",U="mouse",(i==="pointerout"||i==="pointerover")&&(ve=Hi,W="onPointerLeave",q="onPointerEnter",U="pointer"),nt=K==null?J:vn(K),H=pe==null?J:vn(pe),J=new ve(W,U+"leave",K,a,X),J.target=nt,J.relatedTarget=H,W=null,gi(X)===z&&(ve=new ve(q,U+"enter",pe,a,X),ve.target=H,ve.relatedTarget=nt,W=ve),nt=W,K&&pe)t:{for(ve=WI,q=K,U=pe,H=0,W=q;W;W=ve(W))H++;W=0;for(var ye=U;ye;ye=ve(ye))W++;for(;0<H-W;)q=ve(q),H--;for(;0<W-H;)U=ve(U),W--;for(;H--;){if(q===U||U!==null&&q===U.alternate){ve=q;break t}q=ve(q),U=ve(U)}ve=null}else ve=null;K!==null&&Z_(j,J,K,ve,!1),pe!==null&&nt!==null&&Z_(j,nt,pe,ve,!0)}}e:{if(J=z?vn(z):window,K=J.nodeName&&J.nodeName.toLowerCase(),K==="select"||K==="input"&&J.type==="file")var He=mg;else if(hg(J))if(gg)He=lI;else{He=oI;var ge=rI}else K=J.nodeName,!K||K.toLowerCase()!=="input"||J.type!=="checkbox"&&J.type!=="radio"?z&&To(z.elementType)&&(He=mg):He=aI;if(He&&(He=He(i,z))){pg(j,He,a,X);break e}ge&&ge(i,J,z),i==="focusout"&&z&&J.type==="number"&&z.memoizedProps.value!=null&&Ka(J,"number",J.value)}switch(ge=z?vn(z):window,i){case"focusin":(hg(ge)||ge.contentEditable==="true")&&(wo=ge,_d=z,rl=null);break;case"focusout":rl=_d=wo=null;break;case"mousedown":Td=!0;break;case"contextmenu":case"mouseup":case"dragend":Td=!1,Cg(j,a,X);break;case"selectionchange":if(cI)break;case"keydown":case"keyup":Cg(j,a,X)}var De;if(Ye)e:{switch(i){case"compositionstart":var Ve="onCompositionStart";break e;case"compositionend":Ve="onCompositionEnd";break e;case"compositionupdate":Ve="onCompositionUpdate";break e}Ve=void 0}else Ro?Lr(i,a)&&(Ve="onCompositionEnd"):i==="keydown"&&a.keyCode===229&&(Ve="onCompositionStart");Ve&&(Ri&&a.locale!=="ko"&&(Ro||Ve!=="onCompositionStart"?Ve==="onCompositionEnd"&&Ro&&(De=Za()):(Si=X,Wa="value"in Si?Si.value:Si.textContent,Ro=!0)),ge=Vc(z,Ve),0<ge.length&&(Ve=new Ii(Ve,i,null,a,X),j.push({event:Ve,listeners:ge}),De?Ve.data=De:(De=Io(a),De!==null&&(Ve.data=De)))),(De=Vn?tI(i,a):nI(i,a))&&(Ve=Vc(z,"onBeforeInput"),0<Ve.length&&(ge=new Ii("onBeforeInput","beforeinput",null,a,X),j.push({event:ge,listeners:Ve}),ge.data=De)),KI(j,i,z,a,X)}X_(j,r)})}function Dl(i,r,a){return{instance:i,listener:r,currentTarget:a}}function Vc(i,r){for(var a=r+"Capture",c=[];i!==null;){var y=i,_=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||_===null||(y=Wn(i,a),y!=null&&c.unshift(Dl(i,y,_)),y=Wn(i,r),y!=null&&c.push(Dl(i,y,_))),i.tag===3)return c;i=i.return}return[]}function WI(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function Z_(i,r,a,c,y){for(var _=r._reactName,A=[];a!==null&&a!==c;){var I=a,P=I.alternate,z=I.stateNode;if(I=I.tag,P!==null&&P===c)break;I!==5&&I!==26&&I!==27||z===null||(P=z,y?(z=Wn(a,_),z!=null&&A.unshift(Dl(a,z,P))):y||(z=Wn(a,_),z!=null&&A.push(Dl(a,z,P)))),a=a.return}A.length!==0&&i.push({event:r,listeners:A})}var ZI=/\r\n?/g,jI=/\u0000|\uFFFD/g;function j_(i){return(typeof i=="string"?i:""+i).replace(ZI,`
`).replace(jI,"")}function eT(i,r){return r=j_(r),j_(i)===r}function tt(i,r,a,c,y,_){switch(a){case"children":typeof c=="string"?r==="body"||r==="textarea"&&c===""||dn(i,c):(typeof c=="number"||typeof c=="bigint")&&r!=="body"&&dn(i,""+c);break;case"className":En(i,"class",c);break;case"tabIndex":En(i,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":En(i,a,c);break;case"style":$a(i,c,_);break;case"data":if(r!=="object"){En(i,"data",c);break}case"src":case"href":if(c===""&&(r!=="a"||a!=="href")){i.removeAttribute(a);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(a);break}c=vo(""+c),i.setAttribute(a,c);break;case"action":case"formAction":if(typeof c=="function"){i.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(a==="formAction"?(r!=="input"&&tt(i,r,"name",y.name,y,null),tt(i,r,"formEncType",y.formEncType,y,null),tt(i,r,"formMethod",y.formMethod,y,null),tt(i,r,"formTarget",y.formTarget,y,null)):(tt(i,r,"encType",y.encType,y,null),tt(i,r,"method",y.method,y,null),tt(i,r,"target",y.target,y,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(a);break}c=vo(""+c),i.setAttribute(a,c);break;case"onClick":c!=null&&(i.onclick=Xn);break;case"onScroll":c!=null&&Pe("scroll",i);break;case"onScrollEnd":c!=null&&Pe("scrollend",i);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(a=c.__html,a!=null){if(y.children!=null)throw Error(s(60));i.innerHTML=a}}break;case"multiple":i.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":i.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){i.removeAttribute("xlink:href");break}a=vo(""+c),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(a,""+c):i.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(a,""):i.removeAttribute(a);break;case"capture":case"download":c===!0?i.setAttribute(a,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(a,c):i.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?i.setAttribute(a,c):i.removeAttribute(a);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?i.removeAttribute(a):i.setAttribute(a,c);break;case"popover":Pe("beforetoggle",i),Pe("toggle",i),yo(i,"popover",c);break;case"xlinkActuate":wt(i,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":wt(i,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":wt(i,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":wt(i,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":wt(i,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":wt(i,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":wt(i,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":wt(i,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":wt(i,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":yo(i,"is",c);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Vu.get(a)||a,yo(i,a,c))}}function zh(i,r,a,c,y,_){switch(a){case"style":$a(i,c,_);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(a=c.__html,a!=null){if(y.children!=null)throw Error(s(60));i.innerHTML=a}}break;case"children":typeof c=="string"?dn(i,c):(typeof c=="number"||typeof c=="bigint")&&dn(i,""+c);break;case"onScroll":c!=null&&Pe("scroll",i);break;case"onScrollEnd":c!=null&&Pe("scrollend",i);break;case"onClick":c!=null&&(i.onclick=Xn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ga.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(y=a.endsWith("Capture"),r=a.slice(2,y?a.length-7:void 0),_=i[qt]||null,_=_!=null?_[a]:null,typeof _=="function"&&i.removeEventListener(r,_,y),typeof c=="function")){typeof _!="function"&&_!==null&&(a in i?i[a]=null:i.hasAttribute(a)&&i.removeAttribute(a)),i.addEventListener(r,c,y);break e}a in i?i[a]=c:c===!0?i.setAttribute(a,""):yo(i,a,c)}}}function Qt(i,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Pe("error",i),Pe("load",i);var c=!1,y=!1,_;for(_ in a)if(a.hasOwnProperty(_)){var A=a[_];if(A!=null)switch(_){case"src":c=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:tt(i,r,_,A,a,null)}}y&&tt(i,r,"srcSet",a.srcSet,a,null),c&&tt(i,r,"src",a.src,a,null);return;case"input":Pe("invalid",i);var I=_=A=y=null,P=null,z=null;for(c in a)if(a.hasOwnProperty(c)){var X=a[c];if(X!=null)switch(c){case"name":y=X;break;case"type":A=X;break;case"checked":P=X;break;case"defaultChecked":z=X;break;case"value":_=X;break;case"defaultValue":I=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(s(137,r));break;default:tt(i,r,c,X,a,null)}}bu(i,_,I,P,z,A,y,!1);return;case"select":Pe("invalid",i),c=A=_=null;for(y in a)if(a.hasOwnProperty(y)&&(I=a[y],I!=null))switch(y){case"value":_=I;break;case"defaultValue":A=I;break;case"multiple":c=I;default:tt(i,r,y,I,a,null)}r=_,a=A,i.multiple=!!c,r!=null?Ss(i,!!c,r,!1):a!=null&&Ss(i,!!c,a,!0);return;case"textarea":Pe("invalid",i),_=y=c=null;for(A in a)if(a.hasOwnProperty(A)&&(I=a[A],I!=null))switch(A){case"value":c=I;break;case"defaultValue":y=I;break;case"children":_=I;break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(s(91));break;default:tt(i,r,A,I,a,null)}As(i,c,y,_);return;case"option":for(P in a)if(a.hasOwnProperty(P)&&(c=a[P],c!=null))switch(P){case"selected":i.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:tt(i,r,P,c,a,null)}return;case"dialog":Pe("beforetoggle",i),Pe("toggle",i),Pe("cancel",i),Pe("close",i);break;case"iframe":case"object":Pe("load",i);break;case"video":case"audio":for(c=0;c<Ml.length;c++)Pe(Ml[c],i);break;case"image":Pe("error",i),Pe("load",i);break;case"details":Pe("toggle",i);break;case"embed":case"source":case"link":Pe("error",i),Pe("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(z in a)if(a.hasOwnProperty(z)&&(c=a[z],c!=null))switch(z){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:tt(i,r,z,c,a,null)}return;default:if(To(r)){for(X in a)a.hasOwnProperty(X)&&(c=a[X],c!==void 0&&zh(i,r,X,c,a,void 0));return}}for(I in a)a.hasOwnProperty(I)&&(c=a[I],c!=null&&tt(i,r,I,c,a,null))}function eR(i,r,a,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,_=null,A=null,I=null,P=null,z=null,X=null;for(K in a){var j=a[K];if(a.hasOwnProperty(K)&&j!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":P=j;default:c.hasOwnProperty(K)||tt(i,r,K,null,c,j)}}for(var J in c){var K=c[J];if(j=a[J],c.hasOwnProperty(J)&&(K!=null||j!=null))switch(J){case"type":_=K;break;case"name":y=K;break;case"checked":z=K;break;case"defaultChecked":X=K;break;case"value":A=K;break;case"defaultValue":I=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(s(137,r));break;default:K!==j&&tt(i,r,J,K,c,j)}}_o(i,A,I,P,z,X,_,y);return;case"select":K=A=I=J=null;for(_ in a)if(P=a[_],a.hasOwnProperty(_)&&P!=null)switch(_){case"value":break;case"multiple":K=P;default:c.hasOwnProperty(_)||tt(i,r,_,null,c,P)}for(y in c)if(_=c[y],P=a[y],c.hasOwnProperty(y)&&(_!=null||P!=null))switch(y){case"value":J=_;break;case"defaultValue":I=_;break;case"multiple":A=_;default:_!==P&&tt(i,r,y,_,c,P)}r=I,a=A,c=K,J!=null?Ss(i,!!a,J,!1):!!c!=!!a&&(r!=null?Ss(i,!!a,r,!0):Ss(i,!!a,a?[]:"",!1));return;case"textarea":K=J=null;for(I in a)if(y=a[I],a.hasOwnProperty(I)&&y!=null&&!c.hasOwnProperty(I))switch(I){case"value":break;case"children":break;default:tt(i,r,I,null,c,y)}for(A in c)if(y=c[A],_=a[A],c.hasOwnProperty(A)&&(y!=null||_!=null))switch(A){case"value":J=y;break;case"defaultValue":K=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(s(91));break;default:y!==_&&tt(i,r,A,y,c,_)}Pu(i,J,K);return;case"option":for(var pe in a)if(J=a[pe],a.hasOwnProperty(pe)&&J!=null&&!c.hasOwnProperty(pe))switch(pe){case"selected":i.selected=!1;break;default:tt(i,r,pe,null,c,J)}for(P in c)if(J=c[P],K=a[P],c.hasOwnProperty(P)&&J!==K&&(J!=null||K!=null))switch(P){case"selected":i.selected=J&&typeof J!="function"&&typeof J!="symbol";break;default:tt(i,r,P,J,c,K)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ve in a)J=a[ve],a.hasOwnProperty(ve)&&J!=null&&!c.hasOwnProperty(ve)&&tt(i,r,ve,null,c,J);for(z in c)if(J=c[z],K=a[z],c.hasOwnProperty(z)&&J!==K&&(J!=null||K!=null))switch(z){case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(s(137,r));break;default:tt(i,r,z,J,c,K)}return;default:if(To(r)){for(var nt in a)J=a[nt],a.hasOwnProperty(nt)&&J!==void 0&&!c.hasOwnProperty(nt)&&zh(i,r,nt,void 0,c,J);for(X in c)J=c[X],K=a[X],!c.hasOwnProperty(X)||J===K||J===void 0&&K===void 0||zh(i,r,X,J,c,K);return}}for(var q in a)J=a[q],a.hasOwnProperty(q)&&J!=null&&!c.hasOwnProperty(q)&&tt(i,r,q,null,c,J);for(j in c)J=c[j],K=a[j],!c.hasOwnProperty(j)||J===K||J==null&&K==null||tt(i,r,j,J,c,K)}function tT(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function tR(){if(typeof performance.getEntriesByType=="function"){for(var i=0,r=0,a=performance.getEntriesByType("resource"),c=0;c<a.length;c++){var y=a[c],_=y.transferSize,A=y.initiatorType,I=y.duration;if(_&&I&&tT(A)){for(A=0,I=y.responseEnd,c+=1;c<a.length;c++){var P=a[c],z=P.startTime;if(z>I)break;var X=P.transferSize,j=P.initiatorType;X&&tT(j)&&(P=P.responseEnd,A+=X*(P<I?1:(I-z)/(P-z)))}if(--c,r+=8*(_+A)/(y.duration/1e3),i++,10<i)break}}if(0<i)return r/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var Jh=null,Yh=null;function Uc(i){return i.nodeType===9?i:i.ownerDocument}function nT(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function iT(i,r){if(i===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&r==="foreignObject"?0:i}function Kh(i,r){return i==="textarea"||i==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Qh=null;function nR(){var i=window.event;return i&&i.type==="popstate"?i===Qh?!1:(Qh=i,!0):(Qh=null,!1)}var sT=typeof setTimeout=="function"?setTimeout:void 0,iR=typeof clearTimeout=="function"?clearTimeout:void 0,rT=typeof Promise=="function"?Promise:void 0,sR=typeof queueMicrotask=="function"?queueMicrotask:typeof rT<"u"?function(i){return rT.resolve(null).then(i).catch(rR)}:sT;function rR(i){setTimeout(function(){throw i})}function Ys(i){return i==="head"}function oT(i,r){var a=r,c=0;do{var y=a.nextSibling;if(i.removeChild(a),y&&y.nodeType===8)if(a=y.data,a==="/$"||a==="/&"){if(c===0){i.removeChild(y),ea(r);return}c--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")c++;else if(a==="html")bl(i.ownerDocument.documentElement);else if(a==="head"){a=i.ownerDocument.head,bl(a);for(var _=a.firstChild;_;){var A=_.nextSibling,I=_.nodeName;_[mi]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&_.rel.toLowerCase()==="stylesheet"||a.removeChild(_),_=A}}else a==="body"&&bl(i.ownerDocument.body);a=y}while(a);ea(r)}function aT(i,r){var a=i;i=0;do{var c=a.nextSibling;if(a.nodeType===1?r?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(r?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),c&&c.nodeType===8)if(a=c.data,a==="/$"){if(i===0)break;i--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||i++;a=c}while(a)}function $h(i){var r=i.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":$h(a),go(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}i.removeChild(a)}}function oR(i,r,a,c){for(;i.nodeType===1;){var y=a;if(i.nodeName.toLowerCase()!==r.toLowerCase()){if(!c&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(c){if(!i[mi])switch(r){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(_=i.getAttribute("rel"),_==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(_!==y.rel||i.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||i.getAttribute("title")!==(y.title==null?null:y.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(_=i.getAttribute("src"),(_!==(y.src==null?null:y.src)||i.getAttribute("type")!==(y.type==null?null:y.type)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&_&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(r==="input"&&i.type==="hidden"){var _=y.name==null?null:""+y.name;if(y.type==="hidden"&&i.getAttribute("name")===_)return i}else return i;if(i=Bn(i.nextSibling),i===null)break}return null}function aR(i,r,a){if(r==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=Bn(i.nextSibling),i===null))return null;return i}function lT(i,r){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!r||(i=Bn(i.nextSibling),i===null))return null;return i}function Xh(i){return i.data==="$?"||i.data==="$~"}function Wh(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function lR(i,r){var a=i.ownerDocument;if(i.data==="$~")i._reactRetry=r;else if(i.data!=="$?"||a.readyState!=="loading")r();else{var c=function(){r(),a.removeEventListener("DOMContentLoaded",c)};a.addEventListener("DOMContentLoaded",c),i._reactRetry=c}}function Bn(i){for(;i!=null;i=i.nextSibling){var r=i.nodeType;if(r===1||r===3)break;if(r===8){if(r=i.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return i}var Zh=null;function uT(i){i=i.nextSibling;for(var r=0;i;){if(i.nodeType===8){var a=i.data;if(a==="/$"||a==="/&"){if(r===0)return Bn(i.nextSibling);r--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||r++}i=i.nextSibling}return null}function cT(i){i=i.previousSibling;for(var r=0;i;){if(i.nodeType===8){var a=i.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(r===0)return i;r--}else a!=="/$"&&a!=="/&"||r++}i=i.previousSibling}return null}function fT(i,r,a){switch(r=Uc(a),i){case"html":if(i=r.documentElement,!i)throw Error(s(452));return i;case"head":if(i=r.head,!i)throw Error(s(453));return i;case"body":if(i=r.body,!i)throw Error(s(454));return i;default:throw Error(s(451))}}function bl(i){for(var r=i.attributes;r.length;)i.removeAttributeNode(r[0]);go(i)}var Gn=new Map,dT=new Set;function kc(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var ss=oe.d;oe.d={f:uR,r:cR,D:fR,C:dR,L:hR,m:pR,X:gR,S:mR,M:yR};function uR(){var i=ss.f(),r=wc();return i||r}function cR(i){var r=bn(i);r!==null&&r.tag===5&&r.type==="form"?My(r):ss.r(i)}var Wo=typeof document>"u"?null:document;function hT(i,r,a){var c=Wo;if(c&&typeof r=="string"&&r){var y=fn(r);y='link[rel="'+i+'"][href="'+y+'"]',typeof a=="string"&&(y+='[crossorigin="'+a+'"]'),dT.has(y)||(dT.add(y),i={rel:i,crossOrigin:a,href:r},c.querySelector(y)===null&&(r=c.createElement("link"),Qt(r,"link",i),Rt(r),c.head.appendChild(r)))}}function fR(i){ss.D(i),hT("dns-prefetch",i,null)}function dR(i,r){ss.C(i,r),hT("preconnect",i,r)}function hR(i,r,a){ss.L(i,r,a);var c=Wo;if(c&&i&&r){var y='link[rel="preload"][as="'+fn(r)+'"]';r==="image"&&a&&a.imageSrcSet?(y+='[imagesrcset="'+fn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(y+='[imagesizes="'+fn(a.imageSizes)+'"]')):y+='[href="'+fn(i)+'"]';var _=y;switch(r){case"style":_=Zo(i);break;case"script":_=jo(i)}Gn.has(_)||(i=v({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:i,as:r},a),Gn.set(_,i),c.querySelector(y)!==null||r==="style"&&c.querySelector(Pl(_))||r==="script"&&c.querySelector(xl(_))||(r=c.createElement("link"),Qt(r,"link",i),Rt(r),c.head.appendChild(r)))}}function pR(i,r){ss.m(i,r);var a=Wo;if(a&&i){var c=r&&typeof r.as=="string"?r.as:"script",y='link[rel="modulepreload"][as="'+fn(c)+'"][href="'+fn(i)+'"]',_=y;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=jo(i)}if(!Gn.has(_)&&(i=v({rel:"modulepreload",href:i},r),Gn.set(_,i),a.querySelector(y)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(xl(_)))return}c=a.createElement("link"),Qt(c,"link",i),Rt(c),a.head.appendChild(c)}}}function mR(i,r,a){ss.S(i,r,a);var c=Wo;if(c&&i){var y=yi(c).hoistableStyles,_=Zo(i);r=r||"default";var A=y.get(_);if(!A){var I={loading:0,preload:null};if(A=c.querySelector(Pl(_)))I.loading=5;else{i=v({rel:"stylesheet",href:i,"data-precedence":r},a),(a=Gn.get(_))&&jh(i,a);var P=A=c.createElement("link");Rt(P),Qt(P,"link",i),P._p=new Promise(function(z,X){P.onload=z,P.onerror=X}),P.addEventListener("load",function(){I.loading|=1}),P.addEventListener("error",function(){I.loading|=2}),I.loading|=4,Lc(A,r,c)}A={type:"stylesheet",instance:A,count:1,state:I},y.set(_,A)}}}function gR(i,r){ss.X(i,r);var a=Wo;if(a&&i){var c=yi(a).hoistableScripts,y=jo(i),_=c.get(y);_||(_=a.querySelector(xl(y)),_||(i=v({src:i,async:!0},r),(r=Gn.get(y))&&ep(i,r),_=a.createElement("script"),Rt(_),Qt(_,"link",i),a.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},c.set(y,_))}}function yR(i,r){ss.M(i,r);var a=Wo;if(a&&i){var c=yi(a).hoistableScripts,y=jo(i),_=c.get(y);_||(_=a.querySelector(xl(y)),_||(i=v({src:i,async:!0,type:"module"},r),(r=Gn.get(y))&&ep(i,r),_=a.createElement("script"),Rt(_),Qt(_,"link",i),a.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},c.set(y,_))}}function pT(i,r,a,c){var y=(y=Me.current)?kc(y):null;if(!y)throw Error(s(446));switch(i){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=Zo(a.href),a=yi(y).hoistableStyles,c=a.get(r),c||(c={type:"style",instance:null,count:0,state:null},a.set(r,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){i=Zo(a.href);var _=yi(y).hoistableStyles,A=_.get(i);if(A||(y=y.ownerDocument||y,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(i,A),(_=y.querySelector(Pl(i)))&&!_._p&&(A.instance=_,A.state.loading=5),Gn.has(i)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Gn.set(i,a),_||_R(y,i,a,A.state))),r&&c===null)throw Error(s(528,""));return A}if(r&&c!==null)throw Error(s(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=jo(a),a=yi(y).hoistableScripts,c=a.get(r),c||(c={type:"script",instance:null,count:0,state:null},a.set(r,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,i))}}function Zo(i){return'href="'+fn(i)+'"'}function Pl(i){return'link[rel="stylesheet"]['+i+"]"}function mT(i){return v({},i,{"data-precedence":i.precedence,precedence:null})}function _R(i,r,a,c){i.querySelector('link[rel="preload"][as="style"]['+r+"]")?c.loading=1:(r=i.createElement("link"),c.preload=r,r.addEventListener("load",function(){return c.loading|=1}),r.addEventListener("error",function(){return c.loading|=2}),Qt(r,"link",a),Rt(r),i.head.appendChild(r))}function jo(i){return'[src="'+fn(i)+'"]'}function xl(i){return"script[async]"+i}function gT(i,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var c=i.querySelector('style[data-href~="'+fn(a.href)+'"]');if(c)return r.instance=c,Rt(c),c;var y=v({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return c=(i.ownerDocument||i).createElement("style"),Rt(c),Qt(c,"style",y),Lc(c,a.precedence,i),r.instance=c;case"stylesheet":y=Zo(a.href);var _=i.querySelector(Pl(y));if(_)return r.state.loading|=4,r.instance=_,Rt(_),_;c=mT(a),(y=Gn.get(y))&&jh(c,y),_=(i.ownerDocument||i).createElement("link"),Rt(_);var A=_;return A._p=new Promise(function(I,P){A.onload=I,A.onerror=P}),Qt(_,"link",c),r.state.loading|=4,Lc(_,a.precedence,i),r.instance=_;case"script":return _=jo(a.src),(y=i.querySelector(xl(_)))?(r.instance=y,Rt(y),y):(c=a,(y=Gn.get(_))&&(c=v({},a),ep(c,y)),i=i.ownerDocument||i,y=i.createElement("script"),Rt(y),Qt(y,"link",c),i.head.appendChild(y),r.instance=y);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(c=r.instance,r.state.loading|=4,Lc(c,a.precedence,i));return r.instance}function Lc(i,r,a){for(var c=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=c.length?c[c.length-1]:null,_=y,A=0;A<c.length;A++){var I=c[A];if(I.dataset.precedence===r)_=I;else if(_!==y)break}_?_.parentNode.insertBefore(i,_.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(i,r.firstChild))}function jh(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.title==null&&(i.title=r.title)}function ep(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.integrity==null&&(i.integrity=r.integrity)}var Oc=null;function yT(i,r,a){if(Oc===null){var c=new Map,y=Oc=new Map;y.set(a,c)}else y=Oc,c=y.get(a),c||(c=new Map,y.set(a,c));if(c.has(i))return c;for(c.set(i,null),a=a.getElementsByTagName(i),y=0;y<a.length;y++){var _=a[y];if(!(_[mi]||_[It]||i==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var A=_.getAttribute(r)||"";A=i+A;var I=c.get(A);I?I.push(_):c.set(A,[_])}}return c}function _T(i,r,a){i=i.ownerDocument||i,i.head.insertBefore(a,r==="title"?i.querySelector("head > title"):null)}function TR(i,r,a){if(a===1||r.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return i=r.disabled,typeof r.precedence=="string"&&i==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function TT(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function vR(i,r,a,c){if(a.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var y=Zo(c.href),_=r.querySelector(Pl(y));if(_){r=_._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(i.count++,i=qc.bind(i),r.then(i,i)),a.state.loading|=4,a.instance=_,Rt(_);return}_=r.ownerDocument||r,c=mT(c),(y=Gn.get(y))&&jh(c,y),_=_.createElement("link"),Rt(_);var A=_;A._p=new Promise(function(I,P){A.onload=I,A.onerror=P}),Qt(_,"link",c),a.instance=_}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(a,r),(r=a.state.preload)&&(a.state.loading&3)===0&&(i.count++,a=qc.bind(i),r.addEventListener("load",a),r.addEventListener("error",a))}}var tp=0;function ER(i,r){return i.stylesheets&&i.count===0&&Bc(i,i.stylesheets),0<i.count||0<i.imgCount?function(a){var c=setTimeout(function(){if(i.stylesheets&&Bc(i,i.stylesheets),i.unsuspend){var _=i.unsuspend;i.unsuspend=null,_()}},6e4+r);0<i.imgBytes&&tp===0&&(tp=62500*tR());var y=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Bc(i,i.stylesheets),i.unsuspend)){var _=i.unsuspend;i.unsuspend=null,_()}},(i.imgBytes>tp?50:800)+r);return i.unsuspend=a,function(){i.unsuspend=null,clearTimeout(c),clearTimeout(y)}}:null}function qc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Bc(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Fc=null;function Bc(i,r){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Fc=new Map,r.forEach(SR,i),Fc=null,qc.call(i))}function SR(i,r){if(!(r.state.loading&4)){var a=Fc.get(i);if(a)var c=a.get(null);else{a=new Map,Fc.set(i,a);for(var y=i.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<y.length;_++){var A=y[_];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(a.set(A.dataset.precedence,A),c=A)}c&&a.set(null,c)}y=r.instance,A=y.getAttribute("data-precedence"),_=a.get(A)||c,_===c&&a.set(null,y),a.set(A,y),this.count++,c=qc.bind(this),y.addEventListener("load",c),y.addEventListener("error",c),_?_.parentNode.insertBefore(y,_.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(y,i.firstChild)),r.state.loading|=4}}var Vl={$$typeof:ne,Provider:null,Consumer:null,_currentValue:Te,_currentValue2:Te,_threadCount:0};function AR(i,r,a,c,y,_,A,I,P){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=hi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hi(0),this.hiddenUpdates=hi(null),this.identifierPrefix=c,this.onUncaughtError=y,this.onCaughtError=_,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=P,this.incompleteTransitions=new Map}function vT(i,r,a,c,y,_,A,I,P,z,X,j){return i=new AR(i,r,a,A,P,z,X,j,I),r=1,_===!0&&(r|=24),_=An(3,null,null,r),i.current=_,_.stateNode=i,r=Vd(),r.refCount++,i.pooledCache=r,r.refCount++,_.memoizedState={element:c,isDehydrated:a,cache:r},Od(_),i}function ET(i){return i?(i=Do,i):Do}function ST(i,r,a,c,y,_){y=ET(y),c.context===null?c.context=y:c.pendingContext=y,c=Us(r),c.payload={element:a},_=_===void 0?null:_,_!==null&&(c.callback=_),a=ks(i,c,r),a!==null&&(yn(a,i,r),dl(a,i,r))}function AT(i,r){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var a=i.retryLane;i.retryLane=a!==0&&a<r?a:r}}function np(i,r){AT(i,r),(i=i.alternate)&&AT(i,r)}function CT(i){if(i.tag===13||i.tag===31){var r=Fr(i,67108864);r!==null&&yn(r,i,67108864),np(i,67108864)}}function IT(i){if(i.tag===13||i.tag===31){var r=Nn();r=Nr(r);var a=Fr(i,r);a!==null&&yn(a,i,r),np(i,r)}}var Gc=!0;function CR(i,r,a,c){var y=Q.T;Q.T=null;var _=oe.p;try{oe.p=2,ip(i,r,a,c)}finally{oe.p=_,Q.T=y}}function IR(i,r,a,c){var y=Q.T;Q.T=null;var _=oe.p;try{oe.p=8,ip(i,r,a,c)}finally{oe.p=_,Q.T=y}}function ip(i,r,a,c){if(Gc){var y=sp(c);if(y===null)Hh(i,r,c,Hc,a),wT(i,c);else if(wR(y,i,r,a,c))c.stopPropagation();else if(wT(i,c),r&4&&-1<RR.indexOf(i)){for(;y!==null;){var _=bn(y);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var A=fi(_.pendingLanes);if(A!==0){var I=_;for(I.pendingLanes|=2,I.entangledLanes|=2;A;){var P=1<<31-yt(A);I.entanglements[1]|=P,A&=~P}Di(_),(Ke&6)===0&&(Ic=on()+500,Nl(0))}}break;case 31:case 13:I=Fr(_,2),I!==null&&yn(I,_,2),wc(),np(_,2)}if(_=sp(c),_===null&&Hh(i,r,c,Hc,a),_===y)break;y=_}y!==null&&c.stopPropagation()}else Hh(i,r,c,null,a)}}function sp(i){return i=Pn(i),rp(i)}var Hc=null;function rp(i){if(Hc=null,i=gi(i),i!==null){var r=l(i);if(r===null)i=null;else{var a=r.tag;if(a===13){if(i=u(r),i!==null)return i;i=null}else if(a===31){if(i=d(r),i!==null)return i;i=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;i=null}else r!==i&&(i=null)}}return Hc=i,null}function RT(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Cr()){case La:return 2;case Oa:return 8;case vs:case fd:return 32;case Eu:return 268435456;default:return 32}default:return 32}}var op=!1,Ks=null,Qs=null,$s=null,Ul=new Map,kl=new Map,Xs=[],RR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function wT(i,r){switch(i){case"focusin":case"focusout":Ks=null;break;case"dragenter":case"dragleave":Qs=null;break;case"mouseover":case"mouseout":$s=null;break;case"pointerover":case"pointerout":Ul.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":kl.delete(r.pointerId)}}function Ll(i,r,a,c,y,_){return i===null||i.nativeEvent!==_?(i={blockedOn:r,domEventName:a,eventSystemFlags:c,nativeEvent:_,targetContainers:[y]},r!==null&&(r=bn(r),r!==null&&CT(r)),i):(i.eventSystemFlags|=c,r=i.targetContainers,y!==null&&r.indexOf(y)===-1&&r.push(y),i)}function wR(i,r,a,c,y){switch(r){case"focusin":return Ks=Ll(Ks,i,r,a,c,y),!0;case"dragenter":return Qs=Ll(Qs,i,r,a,c,y),!0;case"mouseover":return $s=Ll($s,i,r,a,c,y),!0;case"pointerover":var _=y.pointerId;return Ul.set(_,Ll(Ul.get(_)||null,i,r,a,c,y)),!0;case"gotpointercapture":return _=y.pointerId,kl.set(_,Ll(kl.get(_)||null,i,r,a,c,y)),!0}return!1}function NT(i){var r=gi(i.target);if(r!==null){var a=l(r);if(a!==null){if(r=a.tag,r===13){if(r=u(a),r!==null){i.blockedOn=r,Qn(i.priority,function(){IT(a)});return}}else if(r===31){if(r=d(a),r!==null){i.blockedOn=r,Qn(i.priority,function(){IT(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){i.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}i.blockedOn=null}function zc(i){if(i.blockedOn!==null)return!1;for(var r=i.targetContainers;0<r.length;){var a=sp(i.nativeEvent);if(a===null){a=i.nativeEvent;var c=new a.constructor(a.type,a);Xa=c,a.target.dispatchEvent(c),Xa=null}else return r=bn(a),r!==null&&CT(r),i.blockedOn=a,!1;r.shift()}return!0}function MT(i,r,a){zc(i)&&a.delete(r)}function NR(){op=!1,Ks!==null&&zc(Ks)&&(Ks=null),Qs!==null&&zc(Qs)&&(Qs=null),$s!==null&&zc($s)&&($s=null),Ul.forEach(MT),kl.forEach(MT)}function Jc(i,r){i.blockedOn===r&&(i.blockedOn=null,op||(op=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,NR)))}var Yc=null;function DT(i){Yc!==i&&(Yc=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Yc===i&&(Yc=null);for(var r=0;r<i.length;r+=3){var a=i[r],c=i[r+1],y=i[r+2];if(typeof c!="function"){if(rp(c||a)===null)continue;break}var _=bn(a);_!==null&&(i.splice(r,3),r-=3,sh(_,{pending:!0,data:y,method:a.method,action:c},c,y))}}))}function ea(i){function r(P){return Jc(P,i)}Ks!==null&&Jc(Ks,i),Qs!==null&&Jc(Qs,i),$s!==null&&Jc($s,i),Ul.forEach(r),kl.forEach(r);for(var a=0;a<Xs.length;a++){var c=Xs[a];c.blockedOn===i&&(c.blockedOn=null)}for(;0<Xs.length&&(a=Xs[0],a.blockedOn===null);)NT(a),a.blockedOn===null&&Xs.shift();if(a=(i.ownerDocument||i).$$reactFormReplay,a!=null)for(c=0;c<a.length;c+=3){var y=a[c],_=a[c+1],A=y[qt]||null;if(typeof _=="function")A||DT(a);else if(A){var I=null;if(_&&_.hasAttribute("formAction")){if(y=_,A=_[qt]||null)I=A.formAction;else if(rp(y)!==null)continue}else I=A.action;typeof I=="function"?a[c+1]=I:(a.splice(c,3),c-=3),DT(a)}}}function bT(){function i(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(A){return y=A})},focusReset:"manual",scroll:"manual"})}function r(){y!==null&&(y(),y=null),c||setTimeout(a,20)}function a(){if(!c&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,y=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(a,100),function(){c=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),y!==null&&(y(),y=null)}}}function ap(i){this._internalRoot=i}Kc.prototype.render=ap.prototype.render=function(i){var r=this._internalRoot;if(r===null)throw Error(s(409));var a=r.current,c=Nn();ST(a,c,i,r,null,null)},Kc.prototype.unmount=ap.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var r=i.containerInfo;ST(i.current,2,null,i,null,null),wc(),r[pi]=null}};function Kc(i){this._internalRoot=i}Kc.prototype.unstable_scheduleHydration=function(i){if(i){var r=wu();i={blockedOn:null,target:i,priority:r};for(var a=0;a<Xs.length&&r!==0&&r<Xs[a].priority;a++);Xs.splice(a,0,i),a===0&&NT(i)}};var PT=e.version;if(PT!=="19.2.1")throw Error(s(527,PT,"19.2.1"));oe.findDOMNode=function(i){var r=i._reactInternals;if(r===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=m(r),i=i!==null?T(i):null,i=i===null?null:i.stateNode,i};var MR={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qc.isDisabled&&Qc.supportsFiber)try{Yn=Qc.inject(MR),Ht=Qc}catch{}}return ql.createRoot=function(i,r){if(!o(i))throw Error(s(299));var a=!1,c="",y=qy,_=Fy,A=By;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onUncaughtError!==void 0&&(y=r.onUncaughtError),r.onCaughtError!==void 0&&(_=r.onCaughtError),r.onRecoverableError!==void 0&&(A=r.onRecoverableError)),r=vT(i,1,!1,null,null,a,c,null,y,_,A,bT),i[pi]=r.current,Gh(i),new ap(r)},ql.hydrateRoot=function(i,r,a){if(!o(i))throw Error(s(299));var c=!1,y="",_=qy,A=Fy,I=By,P=null;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(y=a.identifierPrefix),a.onUncaughtError!==void 0&&(_=a.onUncaughtError),a.onCaughtError!==void 0&&(A=a.onCaughtError),a.onRecoverableError!==void 0&&(I=a.onRecoverableError),a.formState!==void 0&&(P=a.formState)),r=vT(i,1,!0,r,a??null,c,y,P,_,A,I,bT),r.context=ET(null),a=r.current,c=Nn(),c=Nr(c),y=Us(c),y.callback=null,ks(a,y,c),a=c,r.current.lanes=a,Rr(r,a),Di(r),i[pi]=r.current,Gh(i),new Kc(r)},ql.version="19.2.1",ql}var GT;function FR(){if(GT)return cp.exports;GT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),cp.exports=qR(),cp.exports}var BR=FR();const GR=KS(BR),HR=()=>{};var HT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QS=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let o=n.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},zR=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const o=n[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const l=n[t++];e[s++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=n[t++],u=n[t++],d=n[t++],g=((o&7)<<18|(l&63)<<12|(u&63)<<6|d&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const l=n[t++],u=n[t++];e[s++]=String.fromCharCode((o&15)<<12|(l&63)<<6|u&63)}}return e.join("")},$S={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<n.length;o+=3){const l=n[o],u=o+1<n.length,d=u?n[o+1]:0,g=o+2<n.length,m=g?n[o+2]:0,T=l>>2,v=(l&3)<<4|d>>4;let S=(d&15)<<2|m>>6,w=m&63;g||(w=64,u||(S=64)),s.push(t[T],t[v],t[S],t[w])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(QS(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):zR(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<n.length;){const l=t[n.charAt(o++)],d=o<n.length?t[n.charAt(o)]:0;++o;const m=o<n.length?t[n.charAt(o)]:64;++o;const v=o<n.length?t[n.charAt(o)]:64;if(++o,l==null||d==null||m==null||v==null)throw new JR;const S=l<<2|d>>4;if(s.push(S),m!==64){const w=d<<4&240|m>>2;if(s.push(w),v!==64){const O=m<<6&192|v;s.push(O)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class JR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const YR=function(n){const e=QS(n);return $S.encodeByteArray(e,!0)},pf=function(n){return YR(n).replace(/\./g,"")},XS=function(n){try{return $S.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QR=()=>KR().__FIREBASE_DEFAULTS__,$R=()=>{if(typeof process>"u"||typeof HT>"u")return;const n=HT.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},XR=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&XS(n[1]);return e&&JSON.parse(e)},Of=()=>{try{return HR()||QR()||$R()||XR()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},WS=n=>{var e,t;return(t=(e=Of())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},WR=n=>{const e=WS(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},ZS=()=>{var n;return(n=Of())==null?void 0:n.config},jS=n=>{var e;return(e=Of())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aa(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function eA(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jR(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",o=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[pf(JSON.stringify(t)),pf(JSON.stringify(u)),""].join(".")}const Jl={};function ew(){const n={prod:[],emulator:[]};for(const e of Object.keys(Jl))Jl[e]?n.emulator.push(e):n.prod.push(e);return n}function tw(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let zT=!1;function tA(n,e){if(typeof window>"u"||typeof document>"u"||!Aa(window.location.host)||Jl[n]===e||Jl[n]||zT)return;Jl[n]=e;function t(S){return`__firebase__banner__${S}`}const s="__firebase__banner",l=ew().prod.length>0;function u(){const S=document.getElementById(s);S&&S.remove()}function d(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function g(S,w){S.setAttribute("width","24"),S.setAttribute("id",w),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function m(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{zT=!0,u()},S}function T(S,w){S.setAttribute("id",w),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function v(){const S=tw(s),w=t("text"),O=document.getElementById(w)||document.createElement("span"),G=t("learnmore"),F=document.getElementById(G)||document.createElement("a"),$=t("preprendIcon"),te=document.getElementById($)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const ne=S.element;d(ne),T(F,G);const le=m();g(te,$),ne.append(te,O,F,le),document.body.appendChild(ne)}l?(O.innerText="Preview backend disconnected.",te.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(te.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,O.innerText="Preview backend running in this workspace."),O.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function nw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(rn())}function iw(){var e;const n=(e=Of())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function sw(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function rw(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function ow(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function aw(){const n=rn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function lw(){return!iw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function uw(){try{return typeof indexedDB=="object"}catch{return!1}}function cw(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fw="FirebaseError";class ms extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=fw,Object.setPrototypeOf(this,ms.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,lu.prototype.create)}}class lu{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],u=l?dw(l,s):"Error",d=`${this.serviceName}: ${u} (${o}).`;return new ms(o,d,s)}}function dw(n,e){return n.replace(hw,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const hw=/\{\$([^}]+)}/g;function pw(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function no(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const l=n[o],u=e[o];if(JT(l)&&JT(u)){if(!no(l,u))return!1}else if(l!==u)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function JT(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uu(n){const e=[];for(const[t,s]of Object.entries(n))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function mw(n,e){const t=new gw(n,e);return t.subscribe.bind(t)}class gw{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let o;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");yw(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:s},o.next===void 0&&(o.next=pp),o.error===void 0&&(o.error=pp),o.complete===void 0&&(o.complete=pp);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function yw(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function pp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cn(n){return n&&n._delegate?n._delegate:n}class io{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _w{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new ZR;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(vw(e))try{this.getOrInitializeService({instanceIdentifier:jr})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});s.resolve(l)}catch{}}}}clearInstance(e=jr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=jr){return this.instances.has(e)}getOptions(e=jr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);s===d&&u.resolve(o)}return o}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const l=this.instances.get(s);return l&&e(l,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:Tw(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=jr){return this.component?this.component.multipleInstances?e:jr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Tw(n){return n===jr?void 0:n}function vw(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new _w(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ue;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ue||(Ue={}));const Sw={debug:Ue.DEBUG,verbose:Ue.VERBOSE,info:Ue.INFO,warn:Ue.WARN,error:Ue.ERROR,silent:Ue.SILENT},Aw=Ue.INFO,Cw={[Ue.DEBUG]:"log",[Ue.VERBOSE]:"log",[Ue.INFO]:"info",[Ue.WARN]:"warn",[Ue.ERROR]:"error"},Iw=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),o=Cw[e];if(o)console[o](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class lm{constructor(e){this.name=e,this._logLevel=Aw,this._logHandler=Iw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Sw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ue.DEBUG,...e),this._logHandler(this,Ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ue.VERBOSE,...e),this._logHandler(this,Ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ue.INFO,...e),this._logHandler(this,Ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ue.WARN,...e),this._logHandler(this,Ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ue.ERROR,...e),this._logHandler(this,Ue.ERROR,...e)}}const Rw=(n,e)=>e.some(t=>n instanceof t);let YT,KT;function ww(){return YT||(YT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Nw(){return KT||(KT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const nA=new WeakMap,Rp=new WeakMap,iA=new WeakMap,mp=new WeakMap,um=new WeakMap;function Mw(n){const e=new Promise((t,s)=>{const o=()=>{n.removeEventListener("success",l),n.removeEventListener("error",u)},l=()=>{t(sr(n.result)),o()},u=()=>{s(n.error),o()};n.addEventListener("success",l),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&nA.set(t,n)}).catch(()=>{}),um.set(e,n),e}function Dw(n){if(Rp.has(n))return;const e=new Promise((t,s)=>{const o=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",u),n.removeEventListener("abort",u)},l=()=>{t(),o()},u=()=>{s(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",l),n.addEventListener("error",u),n.addEventListener("abort",u)});Rp.set(n,e)}let wp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Rp.get(n);if(e==="objectStoreNames")return n.objectStoreNames||iA.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return sr(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function bw(n){wp=n(wp)}function Pw(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call(gp(this),e,...t);return iA.set(s,e.sort?e.sort():[e]),sr(s)}:Nw().includes(n)?function(...e){return n.apply(gp(this),e),sr(nA.get(this))}:function(...e){return sr(n.apply(gp(this),e))}}function xw(n){return typeof n=="function"?Pw(n):(n instanceof IDBTransaction&&Dw(n),Rw(n,ww())?new Proxy(n,wp):n)}function sr(n){if(n instanceof IDBRequest)return Mw(n);if(mp.has(n))return mp.get(n);const e=xw(n);return e!==n&&(mp.set(n,e),um.set(e,n)),e}const gp=n=>um.get(n);function Vw(n,e,{blocked:t,upgrade:s,blocking:o,terminated:l}={}){const u=indexedDB.open(n,e),d=sr(u);return s&&u.addEventListener("upgradeneeded",g=>{s(sr(u.result),g.oldVersion,g.newVersion,sr(u.transaction),g)}),t&&u.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),d.then(g=>{l&&g.addEventListener("close",()=>l()),o&&g.addEventListener("versionchange",m=>o(m.oldVersion,m.newVersion,m))}).catch(()=>{}),d}const Uw=["get","getKey","getAll","getAllKeys","count"],kw=["put","add","delete","clear"],yp=new Map;function QT(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(yp.get(e))return yp.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=kw.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||Uw.includes(t)))return;const l=async function(u,...d){const g=this.transaction(u,o?"readwrite":"readonly");let m=g.store;return s&&(m=m.index(d.shift())),(await Promise.all([m[t](...d),o&&g.done]))[0]};return yp.set(e,l),l}bw(n=>({...n,get:(e,t,s)=>QT(e,t)||n.get(e,t,s),has:(e,t)=>!!QT(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lw{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Ow(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function Ow(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Np="@firebase/app",$T="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ls=new lm("@firebase/app"),qw="@firebase/app-compat",Fw="@firebase/analytics-compat",Bw="@firebase/analytics",Gw="@firebase/app-check-compat",Hw="@firebase/app-check",zw="@firebase/auth",Jw="@firebase/auth-compat",Yw="@firebase/database",Kw="@firebase/data-connect",Qw="@firebase/database-compat",$w="@firebase/functions",Xw="@firebase/functions-compat",Ww="@firebase/installations",Zw="@firebase/installations-compat",jw="@firebase/messaging",eN="@firebase/messaging-compat",tN="@firebase/performance",nN="@firebase/performance-compat",iN="@firebase/remote-config",sN="@firebase/remote-config-compat",rN="@firebase/storage",oN="@firebase/storage-compat",aN="@firebase/firestore",lN="@firebase/ai",uN="@firebase/firestore-compat",cN="firebase",fN="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mp="[DEFAULT]",dN={[Np]:"fire-core",[qw]:"fire-core-compat",[Bw]:"fire-analytics",[Fw]:"fire-analytics-compat",[Hw]:"fire-app-check",[Gw]:"fire-app-check-compat",[zw]:"fire-auth",[Jw]:"fire-auth-compat",[Yw]:"fire-rtdb",[Kw]:"fire-data-connect",[Qw]:"fire-rtdb-compat",[$w]:"fire-fn",[Xw]:"fire-fn-compat",[Ww]:"fire-iid",[Zw]:"fire-iid-compat",[jw]:"fire-fcm",[eN]:"fire-fcm-compat",[tN]:"fire-perf",[nN]:"fire-perf-compat",[iN]:"fire-rc",[sN]:"fire-rc-compat",[rN]:"fire-gcs",[oN]:"fire-gcs-compat",[aN]:"fire-fst",[uN]:"fire-fst-compat",[lN]:"fire-vertex","fire-js":"fire-js",[cN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mf=new Map,hN=new Map,Dp=new Map;function XT(n,e){try{n.container.addComponent(e)}catch(t){ls.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ma(n){const e=n.name;if(Dp.has(e))return ls.debug(`There were multiple attempts to register component ${e}.`),!1;Dp.set(e,n);for(const t of mf.values())XT(t,n);for(const t of hN.values())XT(t,n);return!0}function cm(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function ri(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},rr=new lu("app","Firebase",pN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new io("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw rr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ca=fN;function sA(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s={name:Mp,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw rr.create("bad-app-name",{appName:String(o)});if(t||(t=ZS()),!t)throw rr.create("no-options");const l=mf.get(o);if(l){if(no(t,l.options)&&no(s,l.config))return l;throw rr.create("duplicate-app",{appName:o})}const u=new Ew(o);for(const g of Dp.values())u.addComponent(g);const d=new mN(t,s,u);return mf.set(o,d),d}function rA(n=Mp){const e=mf.get(n);if(!e&&n===Mp&&ZS())return sA();if(!e)throw rr.create("no-app",{appName:n});return e}function or(n,e,t){let s=dN[n]??n;t&&(s+=`-${t}`);const o=s.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const u=[`Unable to register library "${s}" with version "${e}":`];o&&u.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&l&&u.push("and"),l&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ls.warn(u.join(" "));return}ma(new io(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gN="firebase-heartbeat-database",yN=1,Zl="firebase-heartbeat-store";let _p=null;function oA(){return _p||(_p=Vw(gN,yN,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Zl)}catch(t){console.warn(t)}}}}).catch(n=>{throw rr.create("idb-open",{originalErrorMessage:n.message})})),_p}async function _N(n){try{const t=(await oA()).transaction(Zl),s=await t.objectStore(Zl).get(aA(n));return await t.done,s}catch(e){if(e instanceof ms)ls.warn(e.message);else{const t=rr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ls.warn(t.message)}}}async function WT(n,e){try{const s=(await oA()).transaction(Zl,"readwrite");await s.objectStore(Zl).put(e,aA(n)),await s.done}catch(t){if(t instanceof ms)ls.warn(t.message);else{const s=rr.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ls.warn(s.message)}}}function aA(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TN=1024,vN=30;class EN{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new AN(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=ZT();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(u=>u.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>vN){const u=CN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){ls.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=ZT(),{heartbeatsToSend:s,unsentEntries:o}=SN(this._heartbeatsCache.heartbeats),l=pf(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return ls.warn(t),""}}}function ZT(){return new Date().toISOString().substring(0,10)}function SN(n,e=TN){const t=[];let s=n.slice();for(const o of n){const l=t.find(u=>u.agent===o.agent);if(l){if(l.dates.push(o.date),jT(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),jT(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class AN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return uw()?cw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await _N(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return WT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return WT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function jT(n){return pf(JSON.stringify({version:2,heartbeats:n})).length}function CN(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let s=1;s<n.length;s++)n[s].date<t&&(t=n[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IN(n){ma(new io("platform-logger",e=>new Lw(e),"PRIVATE")),ma(new io("heartbeat",e=>new EN(e),"PRIVATE")),or(Np,$T,n),or(Np,$T,"esm2020"),or("fire-js","")}IN("");var RN="firebase",wN="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */or(RN,wN,"app");var ev=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ar,lA;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,M){function N(){}N.prototype=M.prototype,D.F=M.prototype,D.prototype=new N,D.prototype.constructor=D,D.D=function(V,x,L){for(var b=Array(arguments.length-2),Oe=2;Oe<arguments.length;Oe++)b[Oe-2]=arguments[Oe];return M.prototype[x].apply(V,b)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(D,M,N){N||(N=0);const V=Array(16);if(typeof M=="string")for(var x=0;x<16;++x)V[x]=M.charCodeAt(N++)|M.charCodeAt(N++)<<8|M.charCodeAt(N++)<<16|M.charCodeAt(N++)<<24;else for(x=0;x<16;++x)V[x]=M[N++]|M[N++]<<8|M[N++]<<16|M[N++]<<24;M=D.g[0],N=D.g[1],x=D.g[2];let L=D.g[3],b;b=M+(L^N&(x^L))+V[0]+3614090360&4294967295,M=N+(b<<7&4294967295|b>>>25),b=L+(x^M&(N^x))+V[1]+3905402710&4294967295,L=M+(b<<12&4294967295|b>>>20),b=x+(N^L&(M^N))+V[2]+606105819&4294967295,x=L+(b<<17&4294967295|b>>>15),b=N+(M^x&(L^M))+V[3]+3250441966&4294967295,N=x+(b<<22&4294967295|b>>>10),b=M+(L^N&(x^L))+V[4]+4118548399&4294967295,M=N+(b<<7&4294967295|b>>>25),b=L+(x^M&(N^x))+V[5]+1200080426&4294967295,L=M+(b<<12&4294967295|b>>>20),b=x+(N^L&(M^N))+V[6]+2821735955&4294967295,x=L+(b<<17&4294967295|b>>>15),b=N+(M^x&(L^M))+V[7]+4249261313&4294967295,N=x+(b<<22&4294967295|b>>>10),b=M+(L^N&(x^L))+V[8]+1770035416&4294967295,M=N+(b<<7&4294967295|b>>>25),b=L+(x^M&(N^x))+V[9]+2336552879&4294967295,L=M+(b<<12&4294967295|b>>>20),b=x+(N^L&(M^N))+V[10]+4294925233&4294967295,x=L+(b<<17&4294967295|b>>>15),b=N+(M^x&(L^M))+V[11]+2304563134&4294967295,N=x+(b<<22&4294967295|b>>>10),b=M+(L^N&(x^L))+V[12]+1804603682&4294967295,M=N+(b<<7&4294967295|b>>>25),b=L+(x^M&(N^x))+V[13]+4254626195&4294967295,L=M+(b<<12&4294967295|b>>>20),b=x+(N^L&(M^N))+V[14]+2792965006&4294967295,x=L+(b<<17&4294967295|b>>>15),b=N+(M^x&(L^M))+V[15]+1236535329&4294967295,N=x+(b<<22&4294967295|b>>>10),b=M+(x^L&(N^x))+V[1]+4129170786&4294967295,M=N+(b<<5&4294967295|b>>>27),b=L+(N^x&(M^N))+V[6]+3225465664&4294967295,L=M+(b<<9&4294967295|b>>>23),b=x+(M^N&(L^M))+V[11]+643717713&4294967295,x=L+(b<<14&4294967295|b>>>18),b=N+(L^M&(x^L))+V[0]+3921069994&4294967295,N=x+(b<<20&4294967295|b>>>12),b=M+(x^L&(N^x))+V[5]+3593408605&4294967295,M=N+(b<<5&4294967295|b>>>27),b=L+(N^x&(M^N))+V[10]+38016083&4294967295,L=M+(b<<9&4294967295|b>>>23),b=x+(M^N&(L^M))+V[15]+3634488961&4294967295,x=L+(b<<14&4294967295|b>>>18),b=N+(L^M&(x^L))+V[4]+3889429448&4294967295,N=x+(b<<20&4294967295|b>>>12),b=M+(x^L&(N^x))+V[9]+568446438&4294967295,M=N+(b<<5&4294967295|b>>>27),b=L+(N^x&(M^N))+V[14]+3275163606&4294967295,L=M+(b<<9&4294967295|b>>>23),b=x+(M^N&(L^M))+V[3]+4107603335&4294967295,x=L+(b<<14&4294967295|b>>>18),b=N+(L^M&(x^L))+V[8]+1163531501&4294967295,N=x+(b<<20&4294967295|b>>>12),b=M+(x^L&(N^x))+V[13]+2850285829&4294967295,M=N+(b<<5&4294967295|b>>>27),b=L+(N^x&(M^N))+V[2]+4243563512&4294967295,L=M+(b<<9&4294967295|b>>>23),b=x+(M^N&(L^M))+V[7]+1735328473&4294967295,x=L+(b<<14&4294967295|b>>>18),b=N+(L^M&(x^L))+V[12]+2368359562&4294967295,N=x+(b<<20&4294967295|b>>>12),b=M+(N^x^L)+V[5]+4294588738&4294967295,M=N+(b<<4&4294967295|b>>>28),b=L+(M^N^x)+V[8]+2272392833&4294967295,L=M+(b<<11&4294967295|b>>>21),b=x+(L^M^N)+V[11]+1839030562&4294967295,x=L+(b<<16&4294967295|b>>>16),b=N+(x^L^M)+V[14]+4259657740&4294967295,N=x+(b<<23&4294967295|b>>>9),b=M+(N^x^L)+V[1]+2763975236&4294967295,M=N+(b<<4&4294967295|b>>>28),b=L+(M^N^x)+V[4]+1272893353&4294967295,L=M+(b<<11&4294967295|b>>>21),b=x+(L^M^N)+V[7]+4139469664&4294967295,x=L+(b<<16&4294967295|b>>>16),b=N+(x^L^M)+V[10]+3200236656&4294967295,N=x+(b<<23&4294967295|b>>>9),b=M+(N^x^L)+V[13]+681279174&4294967295,M=N+(b<<4&4294967295|b>>>28),b=L+(M^N^x)+V[0]+3936430074&4294967295,L=M+(b<<11&4294967295|b>>>21),b=x+(L^M^N)+V[3]+3572445317&4294967295,x=L+(b<<16&4294967295|b>>>16),b=N+(x^L^M)+V[6]+76029189&4294967295,N=x+(b<<23&4294967295|b>>>9),b=M+(N^x^L)+V[9]+3654602809&4294967295,M=N+(b<<4&4294967295|b>>>28),b=L+(M^N^x)+V[12]+3873151461&4294967295,L=M+(b<<11&4294967295|b>>>21),b=x+(L^M^N)+V[15]+530742520&4294967295,x=L+(b<<16&4294967295|b>>>16),b=N+(x^L^M)+V[2]+3299628645&4294967295,N=x+(b<<23&4294967295|b>>>9),b=M+(x^(N|~L))+V[0]+4096336452&4294967295,M=N+(b<<6&4294967295|b>>>26),b=L+(N^(M|~x))+V[7]+1126891415&4294967295,L=M+(b<<10&4294967295|b>>>22),b=x+(M^(L|~N))+V[14]+2878612391&4294967295,x=L+(b<<15&4294967295|b>>>17),b=N+(L^(x|~M))+V[5]+4237533241&4294967295,N=x+(b<<21&4294967295|b>>>11),b=M+(x^(N|~L))+V[12]+1700485571&4294967295,M=N+(b<<6&4294967295|b>>>26),b=L+(N^(M|~x))+V[3]+2399980690&4294967295,L=M+(b<<10&4294967295|b>>>22),b=x+(M^(L|~N))+V[10]+4293915773&4294967295,x=L+(b<<15&4294967295|b>>>17),b=N+(L^(x|~M))+V[1]+2240044497&4294967295,N=x+(b<<21&4294967295|b>>>11),b=M+(x^(N|~L))+V[8]+1873313359&4294967295,M=N+(b<<6&4294967295|b>>>26),b=L+(N^(M|~x))+V[15]+4264355552&4294967295,L=M+(b<<10&4294967295|b>>>22),b=x+(M^(L|~N))+V[6]+2734768916&4294967295,x=L+(b<<15&4294967295|b>>>17),b=N+(L^(x|~M))+V[13]+1309151649&4294967295,N=x+(b<<21&4294967295|b>>>11),b=M+(x^(N|~L))+V[4]+4149444226&4294967295,M=N+(b<<6&4294967295|b>>>26),b=L+(N^(M|~x))+V[11]+3174756917&4294967295,L=M+(b<<10&4294967295|b>>>22),b=x+(M^(L|~N))+V[2]+718787259&4294967295,x=L+(b<<15&4294967295|b>>>17),b=N+(L^(x|~M))+V[9]+3951481745&4294967295,D.g[0]=D.g[0]+M&4294967295,D.g[1]=D.g[1]+(x+(b<<21&4294967295|b>>>11))&4294967295,D.g[2]=D.g[2]+x&4294967295,D.g[3]=D.g[3]+L&4294967295}s.prototype.v=function(D,M){M===void 0&&(M=D.length);const N=M-this.blockSize,V=this.C;let x=this.h,L=0;for(;L<M;){if(x==0)for(;L<=N;)o(this,D,L),L+=this.blockSize;if(typeof D=="string"){for(;L<M;)if(V[x++]=D.charCodeAt(L++),x==this.blockSize){o(this,V),x=0;break}}else for(;L<M;)if(V[x++]=D[L++],x==this.blockSize){o(this,V),x=0;break}}this.h=x,this.o+=M},s.prototype.A=function(){var D=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);D[0]=128;for(var M=1;M<D.length-8;++M)D[M]=0;M=this.o*8;for(var N=D.length-8;N<D.length;++N)D[N]=M&255,M/=256;for(this.v(D),D=Array(16),M=0,N=0;N<4;++N)for(let V=0;V<32;V+=8)D[M++]=this.g[N]>>>V&255;return D};function l(D,M){var N=d;return Object.prototype.hasOwnProperty.call(N,D)?N[D]:N[D]=M(D)}function u(D,M){this.h=M;const N=[];let V=!0;for(let x=D.length-1;x>=0;x--){const L=D[x]|0;V&&L==M||(N[x]=L,V=!1)}this.g=N}var d={};function g(D){return-128<=D&&D<128?l(D,function(M){return new u([M|0],M<0?-1:0)}):new u([D|0],D<0?-1:0)}function m(D){if(isNaN(D)||!isFinite(D))return v;if(D<0)return F(m(-D));const M=[];let N=1;for(let V=0;D>=N;V++)M[V]=D/N|0,N*=4294967296;return new u(M,0)}function T(D,M){if(D.length==0)throw Error("number format error: empty string");if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(D.charAt(0)=="-")return F(T(D.substring(1),M));if(D.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=m(Math.pow(M,8));let V=v;for(let L=0;L<D.length;L+=8){var x=Math.min(8,D.length-L);const b=parseInt(D.substring(L,L+x),M);x<8?(x=m(Math.pow(M,x)),V=V.j(x).add(m(b))):(V=V.j(N),V=V.add(m(b)))}return V}var v=g(0),S=g(1),w=g(16777216);n=u.prototype,n.m=function(){if(G(this))return-F(this).m();let D=0,M=1;for(let N=0;N<this.g.length;N++){const V=this.i(N);D+=(V>=0?V:4294967296+V)*M,M*=4294967296}return D},n.toString=function(D){if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(O(this))return"0";if(G(this))return"-"+F(this).toString(D);const M=m(Math.pow(D,6));var N=this;let V="";for(;;){const x=le(N,M).g;N=$(N,x.j(M));let L=((N.g.length>0?N.g[0]:N.h)>>>0).toString(D);if(N=x,O(N))return L+V;for(;L.length<6;)L="0"+L;V=L+V}},n.i=function(D){return D<0?0:D<this.g.length?this.g[D]:this.h};function O(D){if(D.h!=0)return!1;for(let M=0;M<D.g.length;M++)if(D.g[M]!=0)return!1;return!0}function G(D){return D.h==-1}n.l=function(D){return D=$(this,D),G(D)?-1:O(D)?0:1};function F(D){const M=D.g.length,N=[];for(let V=0;V<M;V++)N[V]=~D.g[V];return new u(N,~D.h).add(S)}n.abs=function(){return G(this)?F(this):this},n.add=function(D){const M=Math.max(this.g.length,D.g.length),N=[];let V=0;for(let x=0;x<=M;x++){let L=V+(this.i(x)&65535)+(D.i(x)&65535),b=(L>>>16)+(this.i(x)>>>16)+(D.i(x)>>>16);V=b>>>16,L&=65535,b&=65535,N[x]=b<<16|L}return new u(N,N[N.length-1]&-2147483648?-1:0)};function $(D,M){return D.add(F(M))}n.j=function(D){if(O(this)||O(D))return v;if(G(this))return G(D)?F(this).j(F(D)):F(F(this).j(D));if(G(D))return F(this.j(F(D)));if(this.l(w)<0&&D.l(w)<0)return m(this.m()*D.m());const M=this.g.length+D.g.length,N=[];for(var V=0;V<2*M;V++)N[V]=0;for(V=0;V<this.g.length;V++)for(let x=0;x<D.g.length;x++){const L=this.i(V)>>>16,b=this.i(V)&65535,Oe=D.i(x)>>>16,pt=D.i(x)&65535;N[2*V+2*x]+=b*pt,te(N,2*V+2*x),N[2*V+2*x+1]+=L*pt,te(N,2*V+2*x+1),N[2*V+2*x+1]+=b*Oe,te(N,2*V+2*x+1),N[2*V+2*x+2]+=L*Oe,te(N,2*V+2*x+2)}for(D=0;D<M;D++)N[D]=N[2*D+1]<<16|N[2*D];for(D=M;D<2*M;D++)N[D]=0;return new u(N,0)};function te(D,M){for(;(D[M]&65535)!=D[M];)D[M+1]+=D[M]>>>16,D[M]&=65535,M++}function ne(D,M){this.g=D,this.h=M}function le(D,M){if(O(M))throw Error("division by zero");if(O(D))return new ne(v,v);if(G(D))return M=le(F(D),M),new ne(F(M.g),F(M.h));if(G(M))return M=le(D,F(M)),new ne(F(M.g),M.h);if(D.g.length>30){if(G(D)||G(M))throw Error("slowDivide_ only works with positive integers.");for(var N=S,V=M;V.l(D)<=0;)N=me(N),V=me(V);var x=fe(N,1),L=fe(V,1);for(V=fe(V,2),N=fe(N,2);!O(V);){var b=L.add(V);b.l(D)<=0&&(x=x.add(N),L=b),V=fe(V,1),N=fe(N,1)}return M=$(D,x.j(M)),new ne(x,M)}for(x=v;D.l(M)>=0;){for(N=Math.max(1,Math.floor(D.m()/M.m())),V=Math.ceil(Math.log(N)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),L=m(N),b=L.j(M);G(b)||b.l(D)>0;)N-=V,L=m(N),b=L.j(M);O(L)&&(L=S),x=x.add(L),D=$(D,b)}return new ne(x,D)}n.B=function(D){return le(this,D).h},n.and=function(D){const M=Math.max(this.g.length,D.g.length),N=[];for(let V=0;V<M;V++)N[V]=this.i(V)&D.i(V);return new u(N,this.h&D.h)},n.or=function(D){const M=Math.max(this.g.length,D.g.length),N=[];for(let V=0;V<M;V++)N[V]=this.i(V)|D.i(V);return new u(N,this.h|D.h)},n.xor=function(D){const M=Math.max(this.g.length,D.g.length),N=[];for(let V=0;V<M;V++)N[V]=this.i(V)^D.i(V);return new u(N,this.h^D.h)};function me(D){const M=D.g.length+1,N=[];for(let V=0;V<M;V++)N[V]=D.i(V)<<1|D.i(V-1)>>>31;return new u(N,D.h)}function fe(D,M){const N=M>>5;M%=32;const V=D.g.length-N,x=[];for(let L=0;L<V;L++)x[L]=M>0?D.i(L+N)>>>M|D.i(L+N+1)<<32-M:D.i(L+N);return new u(x,D.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,lA=s,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=m,u.fromString=T,ar=u}).apply(typeof ev<"u"?ev:typeof self<"u"?self:typeof window<"u"?window:{});var $c=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var uA,Bl,cA,tf,bp,fA,dA,hA;(function(){var n,e=Object.defineProperty;function t(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof $c=="object"&&$c];for(var E=0;E<p.length;++E){var C=p[E];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var s=t(this);function o(p,E){if(E)e:{var C=s;p=p.split(".");for(var R=0;R<p.length-1;R++){var B=p[R];if(!(B in C))break e;C=C[B]}p=p[p.length-1],R=C[p],E=E(R),E!=R&&E!=null&&e(C,p,{configurable:!0,writable:!0,value:E})}}o("Symbol.dispose",function(p){return p||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(p){return p||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(p){return p||function(E){var C=[],R;for(R in E)Object.prototype.hasOwnProperty.call(E,R)&&C.push([R,E[R]]);return C}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},u=this||self;function d(p){var E=typeof p;return E=="object"&&p!=null||E=="function"}function g(p,E,C){return p.call.apply(p.bind,arguments)}function m(p,E,C){return m=g,m.apply(null,arguments)}function T(p,E){var C=Array.prototype.slice.call(arguments,1);return function(){var R=C.slice();return R.push.apply(R,arguments),p.apply(this,R)}}function v(p,E){function C(){}C.prototype=E.prototype,p.Z=E.prototype,p.prototype=new C,p.prototype.constructor=p,p.Ob=function(R,B,Y){for(var re=Array(arguments.length-2),we=2;we<arguments.length;we++)re[we-2]=arguments[we];return E.prototype[B].apply(R,re)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?p=>p&&AsyncContext.Snapshot.wrap(p):p=>p;function w(p){const E=p.length;if(E>0){const C=Array(E);for(let R=0;R<E;R++)C[R]=p[R];return C}return[]}function O(p,E){for(let R=1;R<arguments.length;R++){const B=arguments[R];var C=typeof B;if(C=C!="object"?C:B?Array.isArray(B)?"array":C:"null",C=="array"||C=="object"&&typeof B.length=="number"){C=p.length||0;const Y=B.length||0;p.length=C+Y;for(let re=0;re<Y;re++)p[C+re]=B[re]}else p.push(B)}}class G{constructor(E,C){this.i=E,this.j=C,this.h=0,this.g=null}get(){let E;return this.h>0?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function F(p){u.setTimeout(()=>{throw p},0)}function $(){var p=D;let E=null;return p.g&&(E=p.g,p.g=p.g.next,p.g||(p.h=null),E.next=null),E}class te{constructor(){this.h=this.g=null}add(E,C){const R=ne.get();R.set(E,C),this.h?this.h.next=R:this.g=R,this.h=R}}var ne=new G(()=>new le,p=>p.reset());class le{constructor(){this.next=this.g=this.h=null}set(E,C){this.h=E,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let me,fe=!1,D=new te,M=()=>{const p=Promise.resolve(void 0);me=()=>{p.then(N)}};function N(){for(var p;p=$();){try{p.h.call(p.g)}catch(C){F(C)}var E=ne;E.j(p),E.h<100&&(E.h++,p.next=E.g,E.g=p)}fe=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function x(p,E){this.type=p,this.g=this.target=E,this.defaultPrevented=!1}x.prototype.h=function(){this.defaultPrevented=!0};var L=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var p=!1,E=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const C=()=>{};u.addEventListener("test",C,E),u.removeEventListener("test",C,E)}catch{}return p})();function b(p){return/^[\s\xa0]*$/.test(p)}function Oe(p,E){x.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p&&this.init(p,E)}v(Oe,x),Oe.prototype.init=function(p,E){const C=this.type=p.type,R=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;this.target=p.target||p.srcElement,this.g=E,E=p.relatedTarget,E||(C=="mouseover"?E=p.fromElement:C=="mouseout"&&(E=p.toElement)),this.relatedTarget=E,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=p.pointerType,this.state=p.state,this.i=p,p.defaultPrevented&&Oe.Z.h.call(this)},Oe.prototype.h=function(){Oe.Z.h.call(this);const p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var pt="closure_listenable_"+(Math.random()*1e6|0),Q=0;function oe(p,E,C,R,B){this.listener=p,this.proxy=null,this.src=E,this.type=C,this.capture=!!R,this.ha=B,this.key=++Q,this.da=this.fa=!1}function Te(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function Ge(p,E,C){for(const R in p)E.call(C,p[R],R,p)}function $e(p,E){for(const C in p)E.call(void 0,p[C],C,p)}function k(p){const E={};for(const C in p)E[C]=p[C];return E}const ee="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ae(p,E){let C,R;for(let B=1;B<arguments.length;B++){R=arguments[B];for(C in R)p[C]=R[C];for(let Y=0;Y<ee.length;Y++)C=ee[Y],Object.prototype.hasOwnProperty.call(R,C)&&(p[C]=R[C])}}function he(p){this.src=p,this.g={},this.h=0}he.prototype.add=function(p,E,C,R,B){const Y=p.toString();p=this.g[Y],p||(p=this.g[Y]=[],this.h++);const re=Me(p,E,R,B);return re>-1?(E=p[re],C||(E.fa=!1)):(E=new oe(E,this.src,Y,!!R,B),E.fa=C,p.push(E)),E};function Ae(p,E){const C=E.type;if(C in p.g){var R=p.g[C],B=Array.prototype.indexOf.call(R,E,void 0),Y;(Y=B>=0)&&Array.prototype.splice.call(R,B,1),Y&&(Te(E),p.g[C].length==0&&(delete p.g[C],p.h--))}}function Me(p,E,C,R){for(let B=0;B<p.length;++B){const Y=p[B];if(!Y.da&&Y.listener==E&&Y.capture==!!C&&Y.ha==R)return B}return-1}var Fe="closure_lm_"+(Math.random()*1e6|0),Ut={};function ct(p,E,C,R,B){if(Array.isArray(E)){for(let Y=0;Y<E.length;Y++)ct(p,E[Y],C,R,B);return null}return C=ka(C),p&&p[pt]?p.J(E,C,d(R)?!!R.capture:!1,B):Sr(p,E,C,!1,R,B)}function Sr(p,E,C,R,B,Y){if(!E)throw Error("Invalid event type");const re=d(B)?!!B.capture:!!B;let we=Ar(p);if(we||(p[Fe]=we=new he(p)),C=we.add(E,C,R,re,Y),C.proxy)return C;if(R=co(),C.proxy=R,R.src=p,R.listener=C,p.addEventListener)L||(B=re),B===void 0&&(B=!1),p.addEventListener(E.toString(),R,B);else if(p.attachEvent)p.attachEvent(ui(E.toString()),R);else if(p.addListener&&p.removeListener)p.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return C}function co(){function p(C){return E.call(p.src,p.listener,C)}const E=Va;return p}function fo(p,E,C,R,B){if(Array.isArray(E))for(var Y=0;Y<E.length;Y++)fo(p,E[Y],C,R,B);else R=d(R)?!!R.capture:!!R,C=ka(C),p&&p[pt]?(p=p.i,Y=String(E).toString(),Y in p.g&&(E=p.g[Y],C=Me(E,C,R,B),C>-1&&(Te(E[C]),Array.prototype.splice.call(E,C,1),E.length==0&&(delete p.g[Y],p.h--)))):p&&(p=Ar(p))&&(E=p.g[E.toString()],p=-1,E&&(p=Me(E,C,R,B)),(C=p>-1?E[p]:null)&&ho(C))}function ho(p){if(typeof p!="number"&&p&&!p.da){var E=p.src;if(E&&E[pt])Ae(E.i,p);else{var C=p.type,R=p.proxy;E.removeEventListener?E.removeEventListener(C,R,p.capture):E.detachEvent?E.detachEvent(ui(C),R):E.addListener&&E.removeListener&&E.removeListener(R),(C=Ar(E))?(Ae(C,p),C.h==0&&(C.src=null,E[Fe]=null)):Te(p)}}}function ui(p){return p in Ut?Ut[p]:Ut[p]="on"+p}function Va(p,E){if(p.da)p=!0;else{E=new Oe(E,this);const C=p.listener,R=p.ha||p.src;p.fa&&ho(p),p=C.call(R,E)}return p}function Ar(p){return p=p[Fe],p instanceof he?p:null}var Ua="__closure_events_fn_"+(Math.random()*1e9>>>0);function ka(p){return typeof p=="function"?p:(p[Ua]||(p[Ua]=function(E){return p.handleEvent(E)}),p[Ua])}function At(){V.call(this),this.i=new he(this),this.M=this,this.G=null}v(At,V),At.prototype[pt]=!0,At.prototype.removeEventListener=function(p,E,C,R){fo(this,p,E,C,R)};function kt(p,E){var C,R=p.G;if(R)for(C=[];R;R=R.G)C.push(R);if(p=p.M,R=E.type||E,typeof E=="string")E=new x(E,p);else if(E instanceof x)E.target=E.target||p;else{var B=E;E=new x(R,p),ae(E,B)}B=!0;let Y,re;if(C)for(re=C.length-1;re>=0;re--)Y=E.g=C[re],B=Ts(Y,R,!0,E)&&B;if(Y=E.g=p,B=Ts(Y,R,!0,E)&&B,B=Ts(Y,R,!1,E)&&B,C)for(re=0;re<C.length;re++)Y=E.g=C[re],B=Ts(Y,R,!1,E)&&B}At.prototype.N=function(){if(At.Z.N.call(this),this.i){var p=this.i;for(const E in p.g){const C=p.g[E];for(let R=0;R<C.length;R++)Te(C[R]);delete p.g[E],p.h--}}this.G=null},At.prototype.J=function(p,E,C,R){return this.i.add(String(p),E,!1,C,R)},At.prototype.K=function(p,E,C,R){return this.i.add(String(p),E,!0,C,R)};function Ts(p,E,C,R){if(E=p.i.g[String(E)],!E)return!0;E=E.concat();let B=!0;for(let Y=0;Y<E.length;++Y){const re=E[Y];if(re&&!re.da&&re.capture==C){const we=re.listener,_t=re.ha||re.src;re.fa&&Ae(p.i,re),B=we.call(_t,R)!==!1&&B}}return B&&!R.defaultPrevented}function cd(p,E){if(typeof p!="function")if(p&&typeof p.handleEvent=="function")p=m(p.handleEvent,p);else throw Error("Invalid listener argument");return Number(E)>2147483647?-1:u.setTimeout(p,E||0)}function vu(p){p.g=cd(()=>{p.g=null,p.i&&(p.i=!1,vu(p))},p.l);const E=p.h;p.h=null,p.m.apply(null,E)}class on extends V{constructor(E,C){super(),this.m=E,this.l=C,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:vu(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Cr(p){V.call(this),this.h=p,this.g={}}v(Cr,V);var La=[];function Oa(p){Ge(p.g,function(E,C){this.g.hasOwnProperty(C)&&ho(E)},p),p.g={}}Cr.prototype.N=function(){Cr.Z.N.call(this),Oa(this)},Cr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var vs=u.JSON.stringify,fd=u.JSON.parse,Eu=class{stringify(p){return u.JSON.stringify(p,void 0)}parse(p){return u.JSON.parse(p,void 0)}};function Su(){}function Au(){}var Yn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ht(){x.call(this,"d")}v(Ht,x);function Dn(){x.call(this,"c")}v(Dn,x);var yt={},Cu=null;function po(){return Cu=Cu||new At}yt.Ia="serverreachability";function Iu(p){x.call(this,yt.Ia,p)}v(Iu,x);function ci(p){const E=po();kt(E,new Iu(E))}yt.STAT_EVENT="statevent";function Ir(p,E){x.call(this,yt.STAT_EVENT,p),this.stat=E}v(Ir,x);function Ct(p){const E=po();kt(E,new Ir(E,p))}yt.Ja="timingevent";function fi(p,E){x.call(this,yt.Ja,p),this.size=E}v(fi,x);function di(p,E){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){p()},E)}function Kn(){this.g=!0}Kn.prototype.ua=function(){this.g=!1};function dd(p,E,C,R,B,Y){p.info(function(){if(p.g)if(Y){var re="",we=Y.split("&");for(let Ye=0;Ye<we.length;Ye++){var _t=we[Ye].split("=");if(_t.length>1){const ft=_t[0];_t=_t[1];const Vn=ft.split("_");re=Vn.length>=2&&Vn[1]=="type"?re+(ft+"="+_t+"&"):re+(ft+"=redacted&")}}}else re=null;else re=Y;return"XMLHTTP REQ ("+R+") [attempt "+B+"]: "+E+`
`+C+`
`+re})}function Ru(p,E,C,R,B,Y,re){p.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+B+"]: "+E+`
`+C+`
`+Y+" "+re})}function hi(p,E,C,R){p.info(function(){return"XMLHTTP TEXT ("+E+"): "+hd(p,C)+(R?" "+R:"")})}function Rr(p,E){p.info(function(){return"TIMEOUT: "+E})}Kn.prototype.info=function(){};function hd(p,E){if(!p.g)return E;if(!E)return null;try{const Y=JSON.parse(E);if(Y){for(p=0;p<Y.length;p++)if(Array.isArray(Y[p])){var C=Y[p];if(!(C.length<2)){var R=C[1];if(Array.isArray(R)&&!(R.length<1)){var B=R[0];if(B!="noop"&&B!="stop"&&B!="close")for(let re=1;re<R.length;re++)R[re]=""}}}}return vs(Y)}catch{return E}}var wr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},qa={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Fa;function Nr(){}v(Nr,Su),Nr.prototype.g=function(){return new XMLHttpRequest},Fa=new Nr;function Fi(p){return encodeURIComponent(String(p))}function wu(p){var E=1;p=p.split(":");const C=[];for(;E>0&&p.length;)C.push(p.shift()),E--;return p.length&&C.push(p.join(":")),C}function Qn(p,E,C,R){this.j=p,this.i=E,this.l=C,this.S=R||1,this.V=new Cr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new $n}function $n(){this.i=null,this.g="",this.h=!1}var It={},qt={};function pi(p,E,C){p.M=1,p.A=Mr(wt(E)),p.u=C,p.R=!0,mo(p,null)}function mo(p,E){p.F=Date.now(),mi(p),p.B=wt(p.A);var C=p.B,R=p.S;Array.isArray(R)||(R=[String(R)]),To(C.i,"t",R),p.C=0,C=p.j.L,p.h=new $n,p.g=Gu(p.j,C?E:null,!p.u),p.P>0&&(p.O=new on(m(p.Y,p,p.g),p.P)),E=p.V,C=p.g,R=p.ba;var B="readystatechange";Array.isArray(B)||(B&&(La[0]=B.toString()),B=La);for(let Y=0;Y<B.length;Y++){const re=ct(C,B[Y],R||E.handleEvent,!1,E.h||E);if(!re)break;E.g[re.key]=re}E=p.J?k(p.J):{},p.u?(p.v||(p.v="POST"),E["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.B,p.v,p.u,E)):(p.v="GET",p.g.ea(p.B,p.v,null,E)),ci(),dd(p.i,p.v,p.B,p.l,p.S,p.u)}Qn.prototype.ba=function(p){p=p.target;const E=this.O;E&&Zn(p)==3?E.j():this.Y(p)},Qn.prototype.Y=function(p){try{if(p==this.g)e:{const we=Zn(this.g),_t=this.g.ya(),Ye=this.g.ca();if(!(we<3)&&(we!=3||this.g&&(this.h.h||this.g.la()||zt(this.g)))){this.K||we!=4||_t==7||(_t==8||Ye<=0?ci(3):ci(2)),gi(this);var E=this.g.ca();this.X=E;var C=pd(this);if(this.o=E==200,Ru(this.i,this.v,this.B,this.l,this.S,we,E),this.o){if(this.U&&!this.L){t:{if(this.g){var R,B=this.g;if((R=B.g?B.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(R)){var Y=R;break t}}Y=null}if(p=Y)hi(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,yi(this,p);else{this.o=!1,this.m=3,Ct(12),vn(this),bn(this);break e}}if(this.R){p=!0;let ft;for(;!this.K&&this.C<C.length;)if(ft=Mu(this,C),ft==qt){we==4&&(this.m=4,Ct(14),p=!1),hi(this.i,this.l,null,"[Incomplete Response]");break}else if(ft==It){this.m=4,Ct(15),hi(this.i,this.l,C,"[Invalid Chunk]"),p=!1;break}else hi(this.i,this.l,ft,null),yi(this,ft);if(Nu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),we!=4||C.length!=0||this.h.h||(this.m=1,Ct(16),p=!1),this.o=this.o&&p,!p)hi(this.i,this.l,C,"[Invalid Chunked Response]"),vn(this),bn(this);else if(C.length>0&&!this.W){this.W=!0;var re=this.j;re.g==this&&re.aa&&!re.P&&(re.j.info("Great, no buffering proxy detected. Bytes received: "+C.length),tl(re),re.P=!0,Ct(11))}}else hi(this.i,this.l,C,null),yi(this,C);we==4&&vn(this),this.o&&!this.K&&(we==4?Ou(this.j,this):(this.o=!1,mi(this)))}else Gi(this.g),E==400&&C.indexOf("Unknown SID")>0?(this.m=3,Ct(12)):(this.m=0,Ct(13)),vn(this),bn(this)}}}catch{}finally{}};function pd(p){if(!Nu(p))return p.g.la();const E=zt(p.g);if(E==="")return"";let C="";const R=E.length,B=Zn(p.g)==4;if(!p.h.i){if(typeof TextDecoder>"u")return vn(p),bn(p),"";p.h.i=new u.TextDecoder}for(let Y=0;Y<R;Y++)p.h.h=!0,C+=p.h.i.decode(E[Y],{stream:!(B&&Y==R-1)});return E.length=0,p.h.g+=C,p.C=0,p.h.g}function Nu(p){return p.g?p.v=="GET"&&p.M!=2&&p.j.Aa:!1}function Mu(p,E){var C=p.C,R=E.indexOf(`
`,C);return R==-1?qt:(C=Number(E.substring(C,R)),isNaN(C)?It:(R+=1,R+C>E.length?qt:(E=E.slice(R,R+C),p.C=R+C,E)))}Qn.prototype.cancel=function(){this.K=!0,vn(this)};function mi(p){p.T=Date.now()+p.H,go(p,p.H)}function go(p,E){if(p.D!=null)throw Error("WatchDog timer not null");p.D=di(m(p.aa,p),E)}function gi(p){p.D&&(u.clearTimeout(p.D),p.D=null)}Qn.prototype.aa=function(){this.D=null;const p=Date.now();p-this.T>=0?(Rr(this.i,this.B),this.M!=2&&(ci(),Ct(17)),vn(this),this.m=2,bn(this)):go(this,this.T-p)};function bn(p){p.j.I==0||p.K||Ou(p.j,p)}function vn(p){gi(p);var E=p.O;E&&typeof E.dispose=="function"&&E.dispose(),p.O=null,Oa(p.V),p.g&&(E=p.g,p.g=null,E.abort(),E.dispose())}function yi(p,E){try{var C=p.j;if(C.I!=0&&(C.g==p||Ti(C.h,p))){if(!p.L&&Ti(C.h,p)&&C.I==3){try{var R=C.Ba.g.parse(E)}catch{R=null}if(Array.isArray(R)&&R.length==3){var B=R;if(B[0]==0){e:if(!C.v){if(C.g)if(C.g.F+3e3<p.F)Co(C),Ns(C);else break e;kr(C),Ct(18)}}else C.xa=B[1],0<C.xa-C.K&&B[2]<37500&&C.F&&C.A==0&&!C.C&&(C.C=di(m(C.Va,C),6e3));_i(C.h)<=1&&C.ta&&(C.ta=void 0)}else Ii(C,11)}else if((p.L||C.g==p)&&Co(C),!b(E))for(B=C.Ba.g.parse(E),E=0;E<B.length;E++){let Ye=B[E];const ft=Ye[0];if(!(ft<=C.K))if(C.K=ft,Ye=Ye[1],C.I==2)if(Ye[0]=="c"){C.M=Ye[1],C.ba=Ye[2];const Vn=Ye[3];Vn!=null&&(C.ka=Vn,C.j.info("VER="+C.ka));const Ri=Ye[4];Ri!=null&&(C.za=Ri,C.j.info("SVER="+C.za));const jn=Ye[5];jn!=null&&typeof jn=="number"&&jn>0&&(R=1.5*jn,C.O=R,C.j.info("backChannelRequestTimeoutMs_="+R)),R=C;const ei=p.g;if(ei){const Lr=ei.g?ei.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Lr){var Y=R.h;Y.g||Lr.indexOf("spdy")==-1&&Lr.indexOf("quic")==-1&&Lr.indexOf("h2")==-1||(Y.j=Y.l,Y.g=new Set,Y.h&&(Ha(Y,Y.h),Y.h=null))}if(R.G){const Io=ei.g?ei.g.getResponseHeader("X-HTTP-Session-Id"):null;Io&&(R.wa=Io,Xe(R.J,R.G,Io))}}C.I=3,C.l&&C.l.ra(),C.aa&&(C.T=Date.now()-p.F,C.j.info("Handshake RTT: "+C.T+"ms")),R=C;var re=p;if(R.na=Bu(R,R.L?R.ba:null,R.W),re.L){za(R.h,re);var we=re,_t=R.O;_t&&(we.H=_t),we.D&&(gi(we),mi(we)),R.g=re}else ku(R);C.i.length>0&&Ci(C)}else Ye[0]!="stop"&&Ye[0]!="close"||Ii(C,7);else C.I==3&&(Ye[0]=="stop"||Ye[0]=="close"?Ye[0]=="stop"?Ii(C,7):ja(C):Ye[0]!="noop"&&C.l&&C.l.qa(Ye),C.A=0)}}ci(4)}catch{}}var Rt=class{constructor(p,E){this.g=p,this.map=E}};function Ba(p){this.l=p||10,u.PerformanceNavigationTiming?(p=u.performance.getEntriesByType("navigation"),p=p.length>0&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ga(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function _i(p){return p.h?1:p.g?p.g.size:0}function Ti(p,E){return p.h?p.h==E:p.g?p.g.has(E):!1}function Ha(p,E){p.g?p.g.add(E):p.h=E}function za(p,E){p.h&&p.h==E?p.h=null:p.g&&p.g.has(E)&&p.g.delete(E)}Ba.prototype.cancel=function(){if(this.i=Ja(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function Ja(p){if(p.h!=null)return p.i.concat(p.h.G);if(p.g!=null&&p.g.size!==0){let E=p.i;for(const C of p.g.values())E=E.concat(C.G);return E}return w(p.i)}var Du=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function yo(p,E){if(p){p=p.split("&");for(let C=0;C<p.length;C++){const R=p[C].indexOf("=");let B,Y=null;R>=0?(B=p[C].substring(0,R),Y=p[C].substring(R+1)):B=p[C],E(B,Y?decodeURIComponent(Y.replace(/\+/g," ")):"")}}}function En(p){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let E;p instanceof En?(this.l=p.l,Ft(this,p.j),this.o=p.o,this.g=p.g,Es(this,p.u),this.h=p.h,Ya(this,Vu(p.i)),this.m=p.m):p&&(E=String(p).match(Du))?(this.l=!1,Ft(this,E[1]||"",!0),this.o=vi(E[2]||""),this.g=vi(E[3]||"",!0),Es(this,E[4]),this.h=vi(E[5]||"",!0),Ya(this,E[6]||"",!0),this.m=vi(E[7]||"")):(this.l=!1,this.i=new As(null,this.l))}En.prototype.toString=function(){const p=[];var E=this.j;E&&p.push(Dr(E,_o,!0),":");var C=this.g;return(C||E=="file")&&(p.push("//"),(E=this.o)&&p.push(Dr(E,_o,!0),"@"),p.push(Fi(C).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.u,C!=null&&p.push(":",String(C))),(C=this.h)&&(this.g&&C.charAt(0)!="/"&&p.push("/"),p.push(Dr(C,C.charAt(0)=="/"?Ka:bu,!0))),(C=this.i.toString())&&p.push("?",C),(C=this.m)&&p.push("#",Dr(C,Pu)),p.join("")},En.prototype.resolve=function(p){const E=wt(this);let C=!!p.j;C?Ft(E,p.j):C=!!p.o,C?E.o=p.o:C=!!p.g,C?E.g=p.g:C=p.u!=null;var R=p.h;if(C)Es(E,p.u);else if(C=!!p.h){if(R.charAt(0)!="/")if(this.g&&!this.h)R="/"+R;else{var B=E.h.lastIndexOf("/");B!=-1&&(R=E.h.slice(0,B+1)+R)}if(B=R,B==".."||B==".")R="";else if(B.indexOf("./")!=-1||B.indexOf("/.")!=-1){R=B.lastIndexOf("/",0)==0,B=B.split("/");const Y=[];for(let re=0;re<B.length;){const we=B[re++];we=="."?R&&re==B.length&&Y.push(""):we==".."?((Y.length>1||Y.length==1&&Y[0]!="")&&Y.pop(),R&&re==B.length&&Y.push("")):(Y.push(we),R=!0)}R=Y.join("/")}else R=B}return C?E.h=R:C=p.i.toString()!=="",C?Ya(E,Vu(p.i)):C=!!p.m,C&&(E.m=p.m),E};function wt(p){return new En(p)}function Ft(p,E,C){p.j=C?vi(E,!0):E,p.j&&(p.j=p.j.replace(/:$/,""))}function Es(p,E){if(E){if(E=Number(E),isNaN(E)||E<0)throw Error("Bad port number "+E);p.u=E}else p.u=null}function Ya(p,E,C){E instanceof As?(p.i=E,vo(p.i,p.l)):(C||(E=Dr(E,Ss)),p.i=new As(E,p.l))}function Xe(p,E,C){p.i.set(E,C)}function Mr(p){return Xe(p,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),p}function vi(p,E){return p?E?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function Dr(p,E,C){return typeof p=="string"?(p=encodeURI(p).replace(E,fn),C&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function fn(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var _o=/[#\/\?@]/g,bu=/[#\?:]/g,Ka=/[#\?]/g,Ss=/[#\?@]/g,Pu=/#/g;function As(p,E){this.h=this.g=null,this.i=p||null,this.j=!!E}function dn(p){p.g||(p.g=new Map,p.h=0,p.i&&yo(p.i,function(E,C){p.add(decodeURIComponent(E.replace(/\+/g," ")),C)}))}n=As.prototype,n.add=function(p,E){dn(this),this.i=null,p=Cs(this,p);let C=this.g.get(p);return C||this.g.set(p,C=[]),C.push(E),this.h+=1,this};function xu(p,E){dn(p),E=Cs(p,E),p.g.has(E)&&(p.i=null,p.h-=p.g.get(E).length,p.g.delete(E))}function Qa(p,E){return dn(p),E=Cs(p,E),p.g.has(E)}n.forEach=function(p,E){dn(this),this.g.forEach(function(C,R){C.forEach(function(B){p.call(E,B,R,this)},this)},this)};function $a(p,E){dn(p);let C=[];if(typeof E=="string")Qa(p,E)&&(C=C.concat(p.g.get(Cs(p,E))));else for(p=Array.from(p.g.values()),E=0;E<p.length;E++)C=C.concat(p[E]);return C}n.set=function(p,E){return dn(this),this.i=null,p=Cs(this,p),Qa(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[E]),this.h+=1,this},n.get=function(p,E){return p?(p=$a(this,p),p.length>0?String(p[0]):E):E};function To(p,E,C){xu(p,E),C.length>0&&(p.i=null,p.g.set(Cs(p,E),w(C)),p.h+=C.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],E=Array.from(this.g.keys());for(let R=0;R<E.length;R++){var C=E[R];const B=Fi(C);C=$a(this,C);for(let Y=0;Y<C.length;Y++){let re=B;C[Y]!==""&&(re+="="+Fi(C[Y])),p.push(re)}}return this.i=p.join("&")};function Vu(p){const E=new As;return E.i=p.i,p.g&&(E.g=new Map(p.g),E.h=p.h),E}function Cs(p,E){return E=String(E),p.j&&(E=E.toLowerCase()),E}function vo(p,E){E&&!p.j&&(dn(p),p.i=null,p.g.forEach(function(C,R){const B=R.toLowerCase();R!=B&&(xu(this,R),To(this,B,C))},p)),p.j=E}function Xn(p,E){const C=new Kn;if(u.Image){const R=new Image;R.onload=T(Pn,C,"TestLoadImage: loaded",!0,E,R),R.onerror=T(Pn,C,"TestLoadImage: error",!1,E,R),R.onabort=T(Pn,C,"TestLoadImage: abort",!1,E,R),R.ontimeout=T(Pn,C,"TestLoadImage: timeout",!1,E,R),u.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=p}else E(!1)}function Xa(p,E){const C=new Kn,R=new AbortController,B=setTimeout(()=>{R.abort(),Pn(C,"TestPingServer: timeout",!1,E)},1e4);fetch(p,{signal:R.signal}).then(Y=>{clearTimeout(B),Y.ok?Pn(C,"TestPingServer: ok",!0,E):Pn(C,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(B),Pn(C,"TestPingServer: error",!1,E)})}function Pn(p,E,C,R,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),R(C)}catch{}}function Is(){this.g=new Eu}function Ei(p){this.i=p.Sb||null,this.h=p.ab||!1}v(Ei,Su),Ei.prototype.g=function(){return new br(this.i,this.h)};function br(p,E){At.call(this),this.H=p,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}v(br,At),n=br.prototype,n.open=function(p,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=p,this.D=E,this.readyState=1,Wn(this)},n.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const E={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};p&&(E.body=p),(this.H||u).fetch(new Request(this.D,E)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Rs(this)),this.readyState=0},n.Pa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,Wn(this)),this.g&&(this.readyState=3,Wn(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Eo(this)}else p.text().then(this.Oa.bind(this),this.ga.bind(this))};function Eo(p){p.j.read().then(p.Ma.bind(p)).catch(p.ga.bind(p))}n.Ma=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var E=p.value?p.value:new Uint8Array(0);(E=this.B.decode(E,{stream:!p.done}))&&(this.response=this.responseText+=E)}p.done?Rs(this):Wn(this),this.readyState==3&&Eo(this)}},n.Oa=function(p){this.g&&(this.response=this.responseText=p,Rs(this))},n.Na=function(p){this.g&&(this.response=p,Rs(this))},n.ga=function(){this.g&&Rs(this)};function Rs(p){p.readyState=4,p.l=null,p.j=null,p.B=null,Wn(p)}n.setRequestHeader=function(p,E){this.A.append(p,E)},n.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],E=this.h.entries();for(var C=E.next();!C.done;)C=C.value,p.push(C[0]+": "+C[1]),C=E.next();return p.join(`\r
`)};function Wn(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(br.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function xn(p){let E="";return Ge(p,function(C,R){E+=R,E+=":",E+=C,E+=`\r
`}),E}function Pr(p,E,C){e:{for(R in C){var R=!1;break e}R=!0}R||(C=xn(C),typeof p=="string"?C!=null&&Fi(C):Xe(p,E,C))}function je(p){At.call(this),this.headers=new Map,this.L=p||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}v(je,At);var Si=/^https?$/i,Wa=["POST","PUT"];n=je.prototype,n.Fa=function(p){this.H=p},n.ea=function(p,E,C,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);E=E?E.toUpperCase():"GET",this.D=p,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Fa.g(),this.g.onreadystatechange=S(m(this.Ca,this));try{this.B=!0,this.g.open(E,String(p),!0),this.B=!1}catch(Y){xr(this,Y);return}if(p=C||"",C=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var B in R)C.set(B,R[B]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const Y of R.keys())C.set(Y,R.get(Y));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(C.keys()).find(Y=>Y.toLowerCase()=="content-type"),B=u.FormData&&p instanceof u.FormData,!(Array.prototype.indexOf.call(Wa,E,void 0)>=0)||R||B||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Y,re]of C)this.g.setRequestHeader(Y,re);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(p),this.v=!1}catch(Y){xr(this,Y)}};function xr(p,E){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=E,p.o=5,Za(p),Bi(p)}function Za(p){p.A||(p.A=!0,kt(p,"complete"),kt(p,"error"))}n.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=p||7,kt(this,"complete"),kt(this,"abort"),Bi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Bi(this,!0)),je.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Vr(this):this.Xa())},n.Xa=function(){Vr(this)};function Vr(p){if(p.h&&typeof l<"u"){if(p.v&&Zn(p)==4)setTimeout(p.Ca.bind(p),0);else if(kt(p,"readystatechange"),Zn(p)==4){p.h=!1;try{const Y=p.ca();e:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var C;if(!(C=E)){var R;if(R=Y===0){let re=String(p.D).match(Du)[1]||null;!re&&u.self&&u.self.location&&(re=u.self.location.protocol.slice(0,-1)),R=!Si.test(re?re.toLowerCase():"")}C=R}if(C)kt(p,"complete"),kt(p,"success");else{p.o=6;try{var B=Zn(p)>2?p.g.statusText:""}catch{B=""}p.l=B+" ["+p.ca()+"]",Za(p)}}finally{Bi(p)}}}}function Bi(p,E){if(p.g){p.m&&(clearTimeout(p.m),p.m=null);const C=p.g;p.g=null,E||kt(p,"ready");try{C.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Zn(p){return p.g?p.g.readyState:0}n.ca=function(){try{return Zn(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(p){if(this.g){var E=this.g.responseText;return p&&E.indexOf(p)==0&&(E=E.substring(p.length)),fd(E)}};function zt(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.F){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function Gi(p){const E={};p=(p.g&&Zn(p)>=2&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<p.length;R++){if(b(p[R]))continue;var C=wu(p[R]);const B=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const Y=E[B]||[];E[B]=Y,Y.push(C)}$e(E,function(R){return R.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ai(p,E,C){return C&&C.internalChannelParams&&C.internalChannelParams[p]||E}function ws(p){this.za=0,this.i=[],this.j=new Kn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ai("failFast",!1,p),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ai("baseRetryDelayMs",5e3,p),this.Za=Ai("retryDelaySeedMs",1e4,p),this.Ta=Ai("forwardChannelMaxRetries",2,p),this.va=Ai("forwardChannelRequestTimeoutMs",2e4,p),this.ma=p&&p.xmlHttpFactory||void 0,this.Ua=p&&p.Rb||void 0,this.Aa=p&&p.useFetchStreams||!1,this.O=void 0,this.L=p&&p.supportsCrossDomainXhr||!1,this.M="",this.h=new Ba(p&&p.concurrentRequestLimit),this.Ba=new Is,this.S=p&&p.fastHandshake||!1,this.R=p&&p.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=p&&p.Pb||!1,p&&p.ua&&this.j.ua(),p&&p.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&p&&p.detectBufferingProxy||!1,this.ia=void 0,p&&p.longPollingTimeout&&p.longPollingTimeout>0&&(this.ia=p.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=ws.prototype,n.ka=8,n.I=1,n.connect=function(p,E,C,R){Ct(0),this.W=p,this.H=E||{},C&&R!==void 0&&(this.H.OSID=C,this.H.OAID=R),this.F=this.X,this.J=Bu(this,null,this.W),Ci(this)};function ja(p){if(So(p),p.I==3){var E=p.V++,C=wt(p.J);if(Xe(C,"SID",p.M),Xe(C,"RID",E),Xe(C,"TYPE","terminate"),Ur(p,C),E=new Qn(p,p.j,E),E.M=2,E.A=Mr(wt(C)),C=!1,u.navigator&&u.navigator.sendBeacon)try{C=u.navigator.sendBeacon(E.A.toString(),"")}catch{}!C&&u.Image&&(new Image().src=E.A,C=!0),C||(E.g=Gu(E.j,null),E.g.ea(E.A)),E.F=Date.now(),mi(E)}Fu(p)}function Ns(p){p.g&&(tl(p),p.g.cancel(),p.g=null)}function So(p){Ns(p),p.v&&(u.clearTimeout(p.v),p.v=null),Co(p),p.h.cancel(),p.m&&(typeof p.m=="number"&&u.clearTimeout(p.m),p.m=null)}function Ci(p){if(!Ga(p.h)&&!p.m){p.m=!0;var E=p.Ea;me||M(),fe||(me(),fe=!0),D.add(E,p),p.D=0}}function Ao(p,E){return _i(p.h)>=p.h.j-(p.m?1:0)?!1:p.m?(p.i=E.G.concat(p.i),!0):p.I==1||p.I==2||p.D>=(p.Sa?0:p.Ta)?!1:(p.m=di(m(p.Ea,p,E),qu(p,p.D)),p.D++,!0)}n.Ea=function(p){if(this.m)if(this.m=null,this.I==1){if(!p){this.V=Math.floor(Math.random()*1e5),p=this.V++;const B=new Qn(this,this.j,p);let Y=this.o;if(this.U&&(Y?(Y=k(Y),ae(Y,this.U)):Y=this.U),this.u!==null||this.R||(B.J=Y,Y=null),this.S)e:{for(var E=0,C=0;C<this.i.length;C++){t:{var R=this.i[C];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(E+=R,E>4096){E=C;break e}if(E===4096||C===this.i.length-1){E=C+1;break e}}E=1e3}else E=1e3;E=Uu(this,B,E),C=wt(this.J),Xe(C,"RID",p),Xe(C,"CVER",22),this.G&&Xe(C,"X-HTTP-Session-Id",this.G),Ur(this,C),Y&&(this.R?E="headers="+Fi(xn(Y))+"&"+E:this.u&&Pr(C,this.u,Y)),Ha(this.h,B),this.Ra&&Xe(C,"TYPE","init"),this.S?(Xe(C,"$req",E),Xe(C,"SID","null"),B.U=!0,pi(B,C,null)):pi(B,C,E),this.I=2}}else this.I==3&&(p?el(this,p):this.i.length==0||Ga(this.h)||el(this))};function el(p,E){var C;E?C=E.l:C=p.V++;const R=wt(p.J);Xe(R,"SID",p.M),Xe(R,"RID",C),Xe(R,"AID",p.K),Ur(p,R),p.u&&p.o&&Pr(R,p.u,p.o),C=new Qn(p,p.j,C,p.D+1),p.u===null&&(C.J=p.o),E&&(p.i=E.G.concat(p.i)),E=Uu(p,C,1e3),C.H=Math.round(p.va*.5)+Math.round(p.va*.5*Math.random()),Ha(p.h,C),pi(C,R,E)}function Ur(p,E){p.H&&Ge(p.H,function(C,R){Xe(E,R,C)}),p.l&&Ge({},function(C,R){Xe(E,R,C)})}function Uu(p,E,C){C=Math.min(p.i.length,C);const R=p.l?m(p.l.Ka,p.l,p):null;e:{var B=p.i;let we=-1;for(;;){const _t=["count="+C];we==-1?C>0?(we=B[0].g,_t.push("ofs="+we)):we=0:_t.push("ofs="+we);let Ye=!0;for(let ft=0;ft<C;ft++){var Y=B[ft].g;const Vn=B[ft].map;if(Y-=we,Y<0)we=Math.max(0,B[ft].g-100),Ye=!1;else try{Y="req"+Y+"_"||"";try{var re=Vn instanceof Map?Vn:Object.entries(Vn);for(const[Ri,jn]of re){let ei=jn;d(jn)&&(ei=vs(jn)),_t.push(Y+Ri+"="+encodeURIComponent(ei))}}catch(Ri){throw _t.push(Y+"type="+encodeURIComponent("_badmap")),Ri}}catch{R&&R(Vn)}}if(Ye){re=_t.join("&");break e}}re=void 0}return p=p.i.splice(0,C),E.G=p,re}function ku(p){if(!p.g&&!p.v){p.Y=1;var E=p.Da;me||M(),fe||(me(),fe=!0),D.add(E,p),p.A=0}}function kr(p){return p.g||p.v||p.A>=3?!1:(p.Y++,p.v=di(m(p.Da,p),qu(p,p.A)),p.A++,!0)}n.Da=function(){if(this.v=null,Lu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var p=4*this.T;this.j.info("BP detection timer enabled: "+p),this.B=di(m(this.Wa,this),p)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ct(10),Ns(this),Lu(this))};function tl(p){p.B!=null&&(u.clearTimeout(p.B),p.B=null)}function Lu(p){p.g=new Qn(p,p.j,"rpc",p.Y),p.u===null&&(p.g.J=p.o),p.g.P=0;var E=wt(p.na);Xe(E,"RID","rpc"),Xe(E,"SID",p.M),Xe(E,"AID",p.K),Xe(E,"CI",p.F?"0":"1"),!p.F&&p.ia&&Xe(E,"TO",p.ia),Xe(E,"TYPE","xmlhttp"),Ur(p,E),p.u&&p.o&&Pr(E,p.u,p.o),p.O&&(p.g.H=p.O);var C=p.g;p=p.ba,C.M=1,C.A=Mr(wt(E)),C.u=null,C.R=!0,mo(C,p)}n.Va=function(){this.C!=null&&(this.C=null,Ns(this),kr(this),Ct(19))};function Co(p){p.C!=null&&(u.clearTimeout(p.C),p.C=null)}function Ou(p,E){var C=null;if(p.g==E){Co(p),tl(p),p.g=null;var R=2}else if(Ti(p.h,E))C=E.G,za(p.h,E),R=1;else return;if(p.I!=0){if(E.o)if(R==1){C=E.u?E.u.length:0,E=Date.now()-E.F;var B=p.D;R=po(),kt(R,new fi(R,C)),Ci(p)}else ku(p);else if(B=E.m,B==3||B==0&&E.X>0||!(R==1&&Ao(p,E)||R==2&&kr(p)))switch(C&&C.length>0&&(E=p.h,E.i=E.i.concat(C)),B){case 1:Ii(p,5);break;case 4:Ii(p,10);break;case 3:Ii(p,6);break;default:Ii(p,2)}}}function qu(p,E){let C=p.Qa+Math.floor(Math.random()*p.Za);return p.isActive()||(C*=2),C*E}function Ii(p,E){if(p.j.info("Error code "+E),E==2){var C=m(p.bb,p),R=p.Ua;const B=!R;R=new En(R||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Ft(R,"https"),Mr(R),B?Xn(R.toString(),C):Xa(R.toString(),C)}else Ct(2);p.I=0,p.l&&p.l.pa(E),Fu(p),So(p)}n.bb=function(p){p?(this.j.info("Successfully pinged google.com"),Ct(2)):(this.j.info("Failed to ping google.com"),Ct(1))};function Fu(p){if(p.I=0,p.ja=[],p.l){const E=Ja(p.h);(E.length!=0||p.i.length!=0)&&(O(p.ja,E),O(p.ja,p.i),p.h.i.length=0,w(p.i),p.i.length=0),p.l.oa()}}function Bu(p,E,C){var R=C instanceof En?wt(C):new En(C);if(R.g!="")E&&(R.g=E+"."+R.g),Es(R,R.u);else{var B=u.location;R=B.protocol,E=E?E+"."+B.hostname:B.hostname,B=+B.port;const Y=new En(null);R&&Ft(Y,R),E&&(Y.g=E),B&&Es(Y,B),C&&(Y.h=C),R=Y}return C=p.G,E=p.wa,C&&E&&Xe(R,C,E),Xe(R,"VER",p.ka),Ur(p,R),R}function Gu(p,E,C){if(E&&!p.L)throw Error("Can't create secondary domain capable XhrIo object.");return E=p.Aa&&!p.ma?new je(new Ei({ab:C})):new je(p.ma),E.Fa(p.L),E}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Hu(){}n=Hu.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Ms(){}Ms.prototype.g=function(p,E){return new an(p,E)};function an(p,E){At.call(this),this.g=new ws(E),this.l=p,this.h=E&&E.messageUrlParams||null,p=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(p?p["X-WebChannel-Content-Type"]=E.messageContentType:p={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.sa&&(p?p["X-WebChannel-Client-Profile"]=E.sa:p={"X-WebChannel-Client-Profile":E.sa}),this.g.U=p,(p=E&&E.Qb)&&!b(p)&&(this.g.u=p),this.A=E&&E.supportsCrossDomainXhr||!1,this.v=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!b(E)&&(this.g.G=E,p=this.h,p!==null&&E in p&&(p=this.h,E in p&&delete p[E])),this.j=new Hi(this)}v(an,At),an.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},an.prototype.close=function(){ja(this.g)},an.prototype.o=function(p){var E=this.g;if(typeof p=="string"){var C={};C.__data__=p,p=C}else this.v&&(C={},C.__data__=vs(p),p=C);E.i.push(new Rt(E.Ya++,p)),E.I==3&&Ci(E)},an.prototype.N=function(){this.g.l=null,delete this.j,ja(this.g),delete this.g,an.Z.N.call(this)};function zu(p){Ht.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var E=p.__sm__;if(E){e:{for(const C in E){p=C;break e}p=void 0}(this.i=p)&&(p=this.i,E=E!==null&&p in E?E[p]:void 0),this.data=E}else this.data=p}v(zu,Ht);function Ju(){Dn.call(this),this.status=1}v(Ju,Dn);function Hi(p){this.g=p}v(Hi,Hu),Hi.prototype.ra=function(){kt(this.g,"a")},Hi.prototype.qa=function(p){kt(this.g,new zu(p))},Hi.prototype.pa=function(p){kt(this.g,new Ju)},Hi.prototype.oa=function(){kt(this.g,"b")},Ms.prototype.createWebChannel=Ms.prototype.g,an.prototype.send=an.prototype.o,an.prototype.open=an.prototype.m,an.prototype.close=an.prototype.close,hA=function(){return new Ms},dA=function(){return po()},fA=yt,bp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},wr.NO_ERROR=0,wr.TIMEOUT=8,wr.HTTP_ERROR=6,tf=wr,qa.COMPLETE="complete",cA=qa,Au.EventType=Yn,Yn.OPEN="a",Yn.CLOSE="b",Yn.ERROR="c",Yn.MESSAGE="d",At.prototype.listen=At.prototype.J,Bl=Au,je.prototype.listenOnce=je.prototype.K,je.prototype.getLastError=je.prototype.Ha,je.prototype.getLastErrorCode=je.prototype.ya,je.prototype.getStatus=je.prototype.ca,je.prototype.getResponseJson=je.prototype.La,je.prototype.getResponseText=je.prototype.la,je.prototype.send=je.prototype.ea,je.prototype.setWithCredentials=je.prototype.Fa,uA=je}).apply(typeof $c<"u"?$c:typeof self<"u"?self:typeof window<"u"?window:{});const tv="@firebase/firestore",nv="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}tn.UNAUTHENTICATED=new tn(null),tn.GOOGLE_CREDENTIALS=new tn("google-credentials-uid"),tn.FIRST_PARTY=new tn("first-party-uid"),tn.MOCK_USER=new tn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ia="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const so=new lm("@firebase/firestore");function ta(){return so.logLevel}function de(n,...e){if(so.logLevel<=Ue.DEBUG){const t=e.map(fm);so.debug(`Firestore (${Ia}): ${n}`,...t)}}function us(n,...e){if(so.logLevel<=Ue.ERROR){const t=e.map(fm);so.error(`Firestore (${Ia}): ${n}`,...t)}}function ga(n,...e){if(so.logLevel<=Ue.WARN){const t=e.map(fm);so.warn(`Firestore (${Ia}): ${n}`,...t)}}function fm(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ee(n,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,pA(n,s,t)}function pA(n,e,t){let s=`FIRESTORE (${Ia}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw us(s),new Error(s)}function Qe(n,e,t,s){let o="Unexpected state";typeof t=="string"?o=t:s=t,n||pA(e,o,s)}function Re(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ce extends ms{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class NN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(tn.UNAUTHENTICATED)))}shutdown(){}}class MN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class DN{constructor(e){this.t=e,this.currentUser=tn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Qe(this.o===void 0,42304);let s=this.i;const o=g=>this.i!==s?(s=this.i,t(g)):Promise.resolve();let l=new as;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new as,e.enqueueRetryable((()=>o(this.currentUser)))};const u=()=>{const g=l;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},d=g=>{de("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((g=>d(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?d(g):(de("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new as)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(de("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Qe(typeof s.accessToken=="string",31837,{l:s}),new mA(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Qe(e===null||typeof e=="string",2055,{h:e}),new tn(e)}}class bN{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=tn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class PN{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new bN(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(tn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class iv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class xN{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ri(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Qe(this.o===void 0,3512);const s=l=>{l.error!=null&&de("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.m;return this.m=l.token,de("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>s(l)))};const o=l=>{de("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):de("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new iv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Qe(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new iv(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VN(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=VN(40);for(let l=0;l<o.length;++l)s.length<20&&o[l]<t&&(s+=e.charAt(o[l]%62))}return s}}function ke(n,e){return n<e?-1:n>e?1:0}function Pp(n,e){const t=Math.min(n.length,e.length);for(let s=0;s<t;s++){const o=n.charAt(s),l=e.charAt(s);if(o!==l)return Tp(o)===Tp(l)?ke(o,l):Tp(o)?1:-1}return ke(n.length,e.length)}const UN=55296,kN=57343;function Tp(n){const e=n.charCodeAt(0);return e>=UN&&e<=kN}function ya(n,e,t){return n.length===e.length&&n.every(((s,o)=>t(s,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sv="__name__";class bi{constructor(e,t,s){t===void 0?t=0:t>e.length&&Ee(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&Ee(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return bi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof bi?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const l=bi.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return ke(e.length,t.length)}static compareSegments(e,t){const s=bi.isNumericId(e),o=bi.isNumericId(t);return s&&!o?-1:!s&&o?1:s&&o?bi.extractNumericId(e).compare(bi.extractNumericId(t)):Pp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ar.fromString(e.substring(4,e.length-2))}}class st extends bi{construct(e,t,s){return new st(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new ce(Z.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((o=>o.length>0)))}return new st(t)}static emptyPath(){return new st([])}}const LN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Wt extends bi{construct(e,t,s){return new Wt(e,t,s)}static isValidIdentifier(e){return LN.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Wt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===sv}static keyField(){return new Wt([sv])}static fromServerFormat(e){const t=[];let s="",o=0;const l=()=>{if(s.length===0)throw new ce(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let u=!1;for(;o<e.length;){const d=e[o];if(d==="\\"){if(o+1===e.length)throw new ce(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new ce(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,o+=2}else d==="`"?(u=!u,o++):d!=="."||u?(s+=d,o++):(l(),o++)}if(l(),u)throw new ce(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Wt(t)}static emptyPath(){return new Wt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(e){this.path=e}static fromPath(e){return new _e(st.fromString(e))}static fromName(e){return new _e(st.fromString(e).popFirst(5))}static empty(){return new _e(st.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&st.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return st.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new _e(new st(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gA(n,e,t){if(!t)throw new ce(Z.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function ON(n,e,t,s){if(e===!0&&s===!0)throw new ce(Z.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function rv(n){if(!_e.isDocumentKey(n))throw new ce(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function ov(n){if(_e.isDocumentKey(n))throw new ce(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function yA(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function qf(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ee(12329,{type:typeof n})}function cs(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ce(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=qf(n);throw new ce(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vt(n,e){const t={typeString:n};return e&&(t.value=e),t}function cu(n,e){if(!yA(n))throw new ce(Z.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const o=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in n)){t=`JSON missing required field: '${s}'`;break}const u=n[s];if(o&&typeof u!==o){t=`JSON field '${s}' must be a ${o}.`;break}if(l!==void 0&&u!==l.value){t=`Expected '${s}' field to equal '${l.value}'`;break}}if(t)throw new ce(Z.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const av=-62135596800,lv=1e6;class ut{static now(){return ut.fromMillis(Date.now())}static fromDate(e){return ut.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*lv);return new ut(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ce(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ce(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<av)throw new ce(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ce(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/lv}_compareTo(e){return this.seconds===e.seconds?ke(this.nanoseconds,e.nanoseconds):ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ut._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(cu(e,ut._jsonSchema))return new ut(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-av;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ut._jsonSchemaVersion="firestore/timestamp/1.0",ut._jsonSchema={type:Vt("string",ut._jsonSchemaVersion),seconds:Vt("number"),nanoseconds:Vt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{static fromTimestamp(e){return new Ce(e)}static min(){return new Ce(new ut(0,0))}static max(){return new Ce(new ut(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jl=-1;function qN(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,o=Ce.fromTimestamp(s===1e9?new ut(t+1,0):new ut(t,s));return new fr(o,_e.empty(),e)}function FN(n){return new fr(n.readTime,n.key,jl)}class fr{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new fr(Ce.min(),_e.empty(),jl)}static max(){return new fr(Ce.max(),_e.empty(),jl)}}function BN(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=_e.comparator(n.documentKey,e.documentKey),t!==0?t:ke(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class HN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ra(n){if(n.code!==Z.FAILED_PRECONDITION||n.message!==GN)throw n;de("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ee(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ie(((s,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ie?t:ie.resolve(t)}catch(t){return ie.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ie.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ie.reject(t)}static resolve(e){return new ie(((t,s)=>{t(e)}))}static reject(e){return new ie(((t,s)=>{s(e)}))}static waitFor(e){return new ie(((t,s)=>{let o=0,l=0,u=!1;e.forEach((d=>{++o,d.next((()=>{++l,u&&l===o&&t()}),(g=>s(g)))})),u=!0,l===o&&t()}))}static or(e){let t=ie.resolve(!1);for(const s of e)t=t.next((o=>o?ie.resolve(o):s()));return t}static forEach(e,t){const s=[];return e.forEach(((o,l)=>{s.push(t.call(this,o,l))})),this.waitFor(s)}static mapArray(e,t){return new ie(((s,o)=>{const l=e.length,u=new Array(l);let d=0;for(let g=0;g<l;g++){const m=g;t(e[m]).next((T=>{u[m]=T,++d,d===l&&s(u)}),(T=>o(T)))}}))}static doWhile(e,t){return new ie(((s,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):s()};l()}))}}function zN(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function wa(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ff.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hm=-1;function Bf(n){return n==null}function gf(n){return n===0&&1/n==-1/0}function JN(n){return typeof n=="number"&&Number.isInteger(n)&&!gf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _A="";function YN(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=uv(e)),e=KN(n.get(t),e);return uv(e)}function KN(n,e){let t=e;const s=n.length;for(let o=0;o<s;o++){const l=n.charAt(o);switch(l){case"\0":t+="";break;case _A:t+="";break;default:t+=l}}return t}function uv(n){return n+_A+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cv(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function _r(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function TA(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e,t){this.comparator=e,this.root=t||$t.EMPTY}insert(e,t){return new ht(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,$t.BLACK,null,null))}remove(e){return new ht(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$t.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Xc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Xc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Xc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Xc(this.root,e,this.comparator,!0)}}class Xc{constructor(e,t,s,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class $t{constructor(e,t,s,o,l){this.key=e,this.value=t,this.color=s??$t.RED,this.left=o??$t.EMPTY,this.right=l??$t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,o,l){return new $t(e??this.key,t??this.value,s??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let o=this;const l=s(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,s),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return $t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return $t.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,$t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,$t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ee(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ee(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ee(27949);return e+(this.isRed()?0:1)}}$t.EMPTY=null,$t.RED=!0,$t.BLACK=!1;$t.EMPTY=new class{constructor(){this.size=0}get key(){throw Ee(57766)}get value(){throw Ee(16141)}get color(){throw Ee(16727)}get left(){throw Ee(29726)}get right(){throw Ee(36894)}copy(e,t,s,o,l){return this}insert(e,t,s){return new $t(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.comparator=e,this.data=new ht(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new fv(this.data.getIterator())}getIteratorFrom(e){return new fv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof Ot)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Ot(this.comparator);return t.data=e,t}}class fv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e){this.fields=e,e.sort(Wt.comparator)}static empty(){return new Mn([])}unionWith(e){let t=new Ot(Wt.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new Mn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ya(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new vA("Invalid base64 string: "+l):l}})(e);return new Zt(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let u=0;u<o.length;++u)l+=String.fromCharCode(o[u]);return l})(e);return new Zt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Zt.EMPTY_BYTE_STRING=new Zt("");const QN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function dr(n){if(Qe(!!n,39018),typeof n=="string"){let e=0;const t=QN.exec(n);if(Qe(!!t,46558,{timestamp:n}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Et(n.seconds),nanos:Et(n.nanos)}}function Et(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function hr(n){return typeof n=="string"?Zt.fromBase64String(n):Zt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EA="server_timestamp",SA="__type__",AA="__previous_value__",CA="__local_write_time__";function pm(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[SA])==null?void 0:s.stringValue)===EA}function Gf(n){const e=n.mapValue.fields[AA];return pm(e)?Gf(e):e}function eu(n){const e=dr(n.mapValue.fields[CA].timestampValue);return new ut(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $N{constructor(e,t,s,o,l,u,d,g,m,T){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=g,this.useFetchStreams=m,this.isUsingEmulator=T}}const yf="(default)";class tu{constructor(e,t){this.projectId=e,this.database=t||yf}static empty(){return new tu("","")}get isDefaultDatabase(){return this.database===yf}isEqual(e){return e instanceof tu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IA="__type__",XN="__max__",Wc={mapValue:{}},RA="__vector__",_f="value";function pr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?pm(n)?4:ZN(n)?9007199254740991:WN(n)?10:11:Ee(28295,{value:n})}function qi(n,e){if(n===e)return!0;const t=pr(n);if(t!==pr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return eu(n).isEqual(eu(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const u=dr(o.timestampValue),d=dr(l.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(o,l){return hr(o.bytesValue).isEqual(hr(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(o,l){return Et(o.geoPointValue.latitude)===Et(l.geoPointValue.latitude)&&Et(o.geoPointValue.longitude)===Et(l.geoPointValue.longitude)})(n,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return Et(o.integerValue)===Et(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const u=Et(o.doubleValue),d=Et(l.doubleValue);return u===d?gf(u)===gf(d):isNaN(u)&&isNaN(d)}return!1})(n,e);case 9:return ya(n.arrayValue.values||[],e.arrayValue.values||[],qi);case 10:case 11:return(function(o,l){const u=o.mapValue.fields||{},d=l.mapValue.fields||{};if(cv(u)!==cv(d))return!1;for(const g in u)if(u.hasOwnProperty(g)&&(d[g]===void 0||!qi(u[g],d[g])))return!1;return!0})(n,e);default:return Ee(52216,{left:n})}}function nu(n,e){return(n.values||[]).find((t=>qi(t,e)))!==void 0}function _a(n,e){if(n===e)return 0;const t=pr(n),s=pr(e);if(t!==s)return ke(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return ke(n.booleanValue,e.booleanValue);case 2:return(function(l,u){const d=Et(l.integerValue||l.doubleValue),g=Et(u.integerValue||u.doubleValue);return d<g?-1:d>g?1:d===g?0:isNaN(d)?isNaN(g)?0:-1:1})(n,e);case 3:return dv(n.timestampValue,e.timestampValue);case 4:return dv(eu(n),eu(e));case 5:return Pp(n.stringValue,e.stringValue);case 6:return(function(l,u){const d=hr(l),g=hr(u);return d.compareTo(g)})(n.bytesValue,e.bytesValue);case 7:return(function(l,u){const d=l.split("/"),g=u.split("/");for(let m=0;m<d.length&&m<g.length;m++){const T=ke(d[m],g[m]);if(T!==0)return T}return ke(d.length,g.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,u){const d=ke(Et(l.latitude),Et(u.latitude));return d!==0?d:ke(Et(l.longitude),Et(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return hv(n.arrayValue,e.arrayValue);case 10:return(function(l,u){var S,w,O,G;const d=l.fields||{},g=u.fields||{},m=(S=d[_f])==null?void 0:S.arrayValue,T=(w=g[_f])==null?void 0:w.arrayValue,v=ke(((O=m==null?void 0:m.values)==null?void 0:O.length)||0,((G=T==null?void 0:T.values)==null?void 0:G.length)||0);return v!==0?v:hv(m,T)})(n.mapValue,e.mapValue);case 11:return(function(l,u){if(l===Wc.mapValue&&u===Wc.mapValue)return 0;if(l===Wc.mapValue)return 1;if(u===Wc.mapValue)return-1;const d=l.fields||{},g=Object.keys(d),m=u.fields||{},T=Object.keys(m);g.sort(),T.sort();for(let v=0;v<g.length&&v<T.length;++v){const S=Pp(g[v],T[v]);if(S!==0)return S;const w=_a(d[g[v]],m[T[v]]);if(w!==0)return w}return ke(g.length,T.length)})(n.mapValue,e.mapValue);default:throw Ee(23264,{he:t})}}function dv(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ke(n,e);const t=dr(n),s=dr(e),o=ke(t.seconds,s.seconds);return o!==0?o:ke(t.nanos,s.nanos)}function hv(n,e){const t=n.values||[],s=e.values||[];for(let o=0;o<t.length&&o<s.length;++o){const l=_a(t[o],s[o]);if(l)return l}return ke(t.length,s.length)}function Ta(n){return xp(n)}function xp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const s=dr(t);return`time(${s.seconds},${s.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return hr(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return _e.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let s="[",o=!0;for(const l of t.values||[])o?o=!1:s+=",",s+=xp(l);return s+"]"})(n.arrayValue):"mapValue"in n?(function(t){const s=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const u of s)l?l=!1:o+=",",o+=`${u}:${xp(t.fields[u])}`;return o+"}"})(n.mapValue):Ee(61005,{value:n})}function nf(n){switch(pr(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Gf(n);return e?16+nf(e):16;case 5:return 2*n.stringValue.length;case 6:return hr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,l)=>o+nf(l)),0)})(n.arrayValue);case 10:case 11:return(function(s){let o=0;return _r(s.fields,((l,u)=>{o+=l.length+nf(u)})),o})(n.mapValue);default:throw Ee(13486,{value:n})}}function pv(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Vp(n){return!!n&&"integerValue"in n}function mm(n){return!!n&&"arrayValue"in n}function mv(n){return!!n&&"nullValue"in n}function gv(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function sf(n){return!!n&&"mapValue"in n}function WN(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[IA])==null?void 0:s.stringValue)===RA}function Yl(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return _r(n.mapValue.fields,((t,s)=>e.mapValue.fields[t]=Yl(s))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Yl(n.arrayValue.values[t]);return e}return{...n}}function ZN(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===XN}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this.value=e}static empty(){return new Tn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!sf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Yl(t)}setAll(e){let t=Wt.emptyPath(),s={},o=[];e.forEach(((u,d)=>{if(!t.isImmediateParentOf(d)){const g=this.getFieldsMap(t);this.applyChanges(g,s,o),s={},o=[],t=d.popLast()}u?s[d.lastSegment()]=Yl(u):o.push(d.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,s,o)}delete(e){const t=this.field(e.popLast());sf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return qi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=t.mapValue.fields[e.get(s)];sf(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,s){_r(t,((o,l)=>e[o]=l));for(const o of s)delete e[o]}clone(){return new Tn(Yl(this.value))}}function wA(n){const e=[];return _r(n.fields,((t,s)=>{const o=new Wt([t]);if(sf(s)){const l=wA(s.mapValue).fields;if(l.length===0)e.push(o);else for(const u of l)e.push(o.child(u))}else e.push(o)})),new Mn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e,t,s,o,l,u,d){this.key=e,this.documentType=t,this.version=s,this.readTime=o,this.createTime=l,this.data=u,this.documentState=d}static newInvalidDocument(e){return new nn(e,0,Ce.min(),Ce.min(),Ce.min(),Tn.empty(),0)}static newFoundDocument(e,t,s,o){return new nn(e,1,t,Ce.min(),s,o,0)}static newNoDocument(e,t){return new nn(e,2,t,Ce.min(),Ce.min(),Tn.empty(),0)}static newUnknownDocument(e,t){return new nn(e,3,t,Ce.min(),Ce.min(),Tn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Tn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Tn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof nn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new nn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf{constructor(e,t){this.position=e,this.inclusive=t}}function yv(n,e,t){let s=0;for(let o=0;o<n.position.length;o++){const l=e[o],u=n.position[o];if(l.field.isKeyField()?s=_e.comparator(_e.fromName(u.referenceValue),t.key):s=_a(u,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function _v(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!qi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{constructor(e,t="asc"){this.field=e,this.dir=t}}function jN(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{}class xt extends NA{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new tM(e,t,s):t==="array-contains"?new sM(e,s):t==="in"?new rM(e,s):t==="not-in"?new oM(e,s):t==="array-contains-any"?new aM(e,s):new xt(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new nM(e,s):new iM(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(_a(t,this.value)):t!==null&&pr(this.value)===pr(t)&&this.matchesComparison(_a(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ee(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ai extends NA{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new ai(e,t)}matches(e){return MA(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function MA(n){return n.op==="and"}function DA(n){return eM(n)&&MA(n)}function eM(n){for(const e of n.filters)if(e instanceof ai)return!1;return!0}function Up(n){if(n instanceof xt)return n.field.canonicalString()+n.op.toString()+Ta(n.value);if(DA(n))return n.filters.map((e=>Up(e))).join(",");{const e=n.filters.map((t=>Up(t))).join(",");return`${n.op}(${e})`}}function bA(n,e){return n instanceof xt?(function(s,o){return o instanceof xt&&s.op===o.op&&s.field.isEqual(o.field)&&qi(s.value,o.value)})(n,e):n instanceof ai?(function(s,o){return o instanceof ai&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((l,u,d)=>l&&bA(u,o.filters[d])),!0):!1})(n,e):void Ee(19439)}function PA(n){return n instanceof xt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Ta(t.value)}`})(n):n instanceof ai?(function(t){return t.op.toString()+" {"+t.getFilters().map(PA).join(" ,")+"}"})(n):"Filter"}class tM extends xt{constructor(e,t,s){super(e,t,s),this.key=_e.fromName(s.referenceValue)}matches(e){const t=_e.comparator(e.key,this.key);return this.matchesComparison(t)}}class nM extends xt{constructor(e,t){super(e,"in",t),this.keys=xA("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class iM extends xt{constructor(e,t){super(e,"not-in",t),this.keys=xA("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function xA(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((s=>_e.fromName(s.referenceValue)))}class sM extends xt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return mm(t)&&nu(t.arrayValue,this.value)}}class rM extends xt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&nu(this.value.arrayValue,t)}}class oM extends xt{constructor(e,t){super(e,"not-in",t)}matches(e){if(nu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!nu(this.value.arrayValue,t)}}class aM extends xt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!mm(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>nu(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lM{constructor(e,t=null,s=[],o=[],l=null,u=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=l,this.startAt=u,this.endAt=d,this.Te=null}}function Tv(n,e=null,t=[],s=[],o=null,l=null,u=null){return new lM(n,e,t,s,o,l,u)}function gm(n){const e=Re(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>Up(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(l){return l.field.canonicalString()+l.dir})(s))).join(","),Bf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>Ta(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>Ta(s))).join(",")),e.Te=t}return e.Te}function ym(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!jN(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!bA(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!_v(n.startAt,e.startAt)&&_v(n.endAt,e.endAt)}function kp(n){return _e.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(e,t=null,s=[],o=[],l=null,u="F",d=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=l,this.limitType=u,this.startAt=d,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function uM(n,e,t,s,o,l,u,d){return new Na(n,e,t,s,o,l,u,d)}function _m(n){return new Na(n)}function vv(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function VA(n){return n.collectionGroup!==null}function Kl(n){const e=Re(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let d=new Ot(Wt.comparator);return u.filters.forEach((g=>{g.getFlattenedFilters().forEach((m=>{m.isInequality()&&(d=d.add(m.field))}))})),d})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new iu(l,s))})),t.has(Wt.keyField().canonicalString())||e.Ie.push(new iu(Wt.keyField(),s))}return e.Ie}function Pi(n){const e=Re(n);return e.Ee||(e.Ee=cM(e,Kl(n))),e.Ee}function cM(n,e){if(n.limitType==="F")return Tv(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new iu(o.field,l)}));const t=n.endAt?new Tf(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new Tf(n.startAt.position,n.startAt.inclusive):null;return Tv(n.path,n.collectionGroup,e,n.filters,n.limit,t,s)}}function Lp(n,e){const t=n.filters.concat([e]);return new Na(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function vf(n,e,t){return new Na(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Hf(n,e){return ym(Pi(n),Pi(e))&&n.limitType===e.limitType}function UA(n){return`${gm(Pi(n))}|lt:${n.limitType}`}function na(n){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((o=>PA(o))).join(", ")}]`),Bf(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((o=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(o))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((o=>Ta(o))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((o=>Ta(o))).join(",")),`Target(${s})`})(Pi(n))}; limitType=${n.limitType})`}function zf(n,e){return e.isFoundDocument()&&(function(s,o){const l=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):_e.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)})(n,e)&&(function(s,o){for(const l of Kl(s))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(s,o){for(const l of s.filters)if(!l.matches(o))return!1;return!0})(n,e)&&(function(s,o){return!(s.startAt&&!(function(u,d,g){const m=yv(u,d,g);return u.inclusive?m<=0:m<0})(s.startAt,Kl(s),o)||s.endAt&&!(function(u,d,g){const m=yv(u,d,g);return u.inclusive?m>=0:m>0})(s.endAt,Kl(s),o))})(n,e)}function fM(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function kA(n){return(e,t)=>{let s=!1;for(const o of Kl(n)){const l=dM(o,e,t);if(l!==0)return l;s=s||o.field.isKeyField()}return 0}}function dM(n,e,t){const s=n.field.isKeyField()?_e.comparator(e.key,t.key):(function(l,u,d){const g=u.data.field(l),m=d.data.field(l);return g!==null&&m!==null?_a(g,m):Ee(42886)})(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return Ee(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[o,l]of s)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){_r(this.inner,((t,s)=>{for(const[o,l]of s)e(o,l)}))}isEmpty(){return TA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hM=new ht(_e.comparator);function fs(){return hM}const LA=new ht(_e.comparator);function Gl(...n){let e=LA;for(const t of n)e=e.insert(t.key,t);return e}function OA(n){let e=LA;return n.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function eo(){return Ql()}function qA(){return Ql()}function Ql(){return new ao((n=>n.toString()),((n,e)=>n.isEqual(e)))}const pM=new ht(_e.comparator),mM=new Ot(_e.comparator);function Le(...n){let e=mM;for(const t of n)e=e.add(t);return e}const gM=new Ot(ke);function yM(){return gM}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tm(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:gf(e)?"-0":e}}function FA(n){return{integerValue:""+n}}function BA(n,e){return JN(e)?FA(e):Tm(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(){this._=void 0}}function _M(n,e,t){return n instanceof Ef?(function(o,l){const u={fields:{[SA]:{stringValue:EA},[CA]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&pm(l)&&(l=Gf(l)),l&&(u.fields[AA]=l),{mapValue:u}})(t,e):n instanceof su?HA(n,e):n instanceof ru?zA(n,e):(function(o,l){const u=GA(o,l),d=Ev(u)+Ev(o.Ae);return Vp(u)&&Vp(o.Ae)?FA(d):Tm(o.serializer,d)})(n,e)}function TM(n,e,t){return n instanceof su?HA(n,e):n instanceof ru?zA(n,e):t}function GA(n,e){return n instanceof ou?(function(s){return Vp(s)||(function(l){return!!l&&"doubleValue"in l})(s)})(e)?e:{integerValue:0}:null}class Ef extends Jf{}class su extends Jf{constructor(e){super(),this.elements=e}}function HA(n,e){const t=JA(e);for(const s of n.elements)t.some((o=>qi(o,s)))||t.push(s);return{arrayValue:{values:t}}}class ru extends Jf{constructor(e){super(),this.elements=e}}function zA(n,e){let t=JA(e);for(const s of n.elements)t=t.filter((o=>!qi(o,s)));return{arrayValue:{values:t}}}class ou extends Jf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Ev(n){return Et(n.integerValue||n.doubleValue)}function JA(n){return mm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vM{constructor(e,t){this.field=e,this.transform=t}}function EM(n,e){return n.field.isEqual(e.field)&&(function(s,o){return s instanceof su&&o instanceof su||s instanceof ru&&o instanceof ru?ya(s.elements,o.elements,qi):s instanceof ou&&o instanceof ou?qi(s.Ae,o.Ae):s instanceof Ef&&o instanceof Ef})(n.transform,e.transform)}class SM{constructor(e,t){this.version=e,this.transformResults=t}}class xi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new xi}static exists(e){return new xi(void 0,e)}static updateTime(e){return new xi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function rf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Yf{}function YA(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new QA(n.key,xi.none()):new fu(n.key,n.data,xi.none());{const t=n.data,s=Tn.empty();let o=new Ot(Wt.comparator);for(let l of e.fields)if(!o.has(l)){let u=t.field(l);u===null&&l.length>1&&(l=l.popLast(),u=t.field(l)),u===null?s.delete(l):s.set(l,u),o=o.add(l)}return new Tr(n.key,s,new Mn(o.toArray()),xi.none())}}function AM(n,e,t){n instanceof fu?(function(o,l,u){const d=o.value.clone(),g=Av(o.fieldTransforms,l,u.transformResults);d.setAll(g),l.convertToFoundDocument(u.version,d).setHasCommittedMutations()})(n,e,t):n instanceof Tr?(function(o,l,u){if(!rf(o.precondition,l))return void l.convertToUnknownDocument(u.version);const d=Av(o.fieldTransforms,l,u.transformResults),g=l.data;g.setAll(KA(o)),g.setAll(d),l.convertToFoundDocument(u.version,g).setHasCommittedMutations()})(n,e,t):(function(o,l,u){l.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function $l(n,e,t,s){return n instanceof fu?(function(l,u,d,g){if(!rf(l.precondition,u))return d;const m=l.value.clone(),T=Cv(l.fieldTransforms,g,u);return m.setAll(T),u.convertToFoundDocument(u.version,m).setHasLocalMutations(),null})(n,e,t,s):n instanceof Tr?(function(l,u,d,g){if(!rf(l.precondition,u))return d;const m=Cv(l.fieldTransforms,g,u),T=u.data;return T.setAll(KA(l)),T.setAll(m),u.convertToFoundDocument(u.version,T).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((v=>v.field)))})(n,e,t,s):(function(l,u,d){return rf(l.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d})(n,e,t)}function CM(n,e){let t=null;for(const s of n.fieldTransforms){const o=e.data.field(s.field),l=GA(s.transform,o||null);l!=null&&(t===null&&(t=Tn.empty()),t.set(s.field,l))}return t||null}function Sv(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&ya(s,o,((l,u)=>EM(l,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class fu extends Yf{constructor(e,t,s,o=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Tr extends Yf{constructor(e,t,s,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function KA(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}})),e}function Av(n,e,t){const s=new Map;Qe(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let o=0;o<t.length;o++){const l=n[o],u=l.transform,d=e.data.field(l.field);s.set(l.field,TM(u,d,t[o]))}return s}function Cv(n,e,t){const s=new Map;for(const o of n){const l=o.transform,u=t.data.field(o.field);s.set(o.field,_M(l,u,e))}return s}class QA extends Yf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class IM extends Yf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RM{constructor(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&AM(l,e,s[o])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=$l(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=$l(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=qA();return this.mutations.forEach((o=>{const l=e.get(o.key),u=l.overlayedDocument;let d=this.applyToLocalView(u,l.mutatedFields);d=t.has(o.key)?null:d;const g=YA(u,d);g!==null&&s.set(o.key,g),u.isValidDocument()||u.convertToNoDocument(Ce.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Le())}isEqual(e){return this.batchId===e.batchId&&ya(this.mutations,e.mutations,((t,s)=>Sv(t,s)))&&ya(this.baseMutations,e.baseMutations,((t,s)=>Sv(t,s)))}}class vm{constructor(e,t,s,o){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}static from(e,t,s){Qe(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return pM})();const l=e.mutations;for(let u=0;u<l.length;u++)o=o.insert(l[u].key,s[u].version);return new vm(e,t,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wM{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NM{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pt,Be;function MM(n){switch(n){case Z.OK:return Ee(64938);case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0;default:return Ee(15467,{code:n})}}function $A(n){if(n===void 0)return us("GRPC error has no .code"),Z.UNKNOWN;switch(n){case Pt.OK:return Z.OK;case Pt.CANCELLED:return Z.CANCELLED;case Pt.UNKNOWN:return Z.UNKNOWN;case Pt.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case Pt.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case Pt.INTERNAL:return Z.INTERNAL;case Pt.UNAVAILABLE:return Z.UNAVAILABLE;case Pt.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case Pt.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case Pt.NOT_FOUND:return Z.NOT_FOUND;case Pt.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case Pt.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case Pt.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case Pt.ABORTED:return Z.ABORTED;case Pt.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case Pt.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case Pt.DATA_LOSS:return Z.DATA_LOSS;default:return Ee(39323,{code:n})}}(Be=Pt||(Pt={}))[Be.OK=0]="OK",Be[Be.CANCELLED=1]="CANCELLED",Be[Be.UNKNOWN=2]="UNKNOWN",Be[Be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Be[Be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Be[Be.NOT_FOUND=5]="NOT_FOUND",Be[Be.ALREADY_EXISTS=6]="ALREADY_EXISTS",Be[Be.PERMISSION_DENIED=7]="PERMISSION_DENIED",Be[Be.UNAUTHENTICATED=16]="UNAUTHENTICATED",Be[Be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Be[Be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Be[Be.ABORTED=10]="ABORTED",Be[Be.OUT_OF_RANGE=11]="OUT_OF_RANGE",Be[Be.UNIMPLEMENTED=12]="UNIMPLEMENTED",Be[Be.INTERNAL=13]="INTERNAL",Be[Be.UNAVAILABLE=14]="UNAVAILABLE",Be[Be.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DM(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bM=new ar([4294967295,4294967295],0);function Iv(n){const e=DM().encode(n),t=new lA;return t.update(e),new Uint8Array(t.digest())}function Rv(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new ar([t,s],0),new ar([o,l],0)]}class Em{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Hl(`Invalid padding: ${t}`);if(s<0)throw new Hl(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Hl(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Hl(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=ar.fromNumber(this.ge)}ye(e,t,s){let o=e.add(t.multiply(ar.fromNumber(s)));return o.compare(bM)===1&&(o=new ar([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Iv(e),[s,o]=Rv(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(s,o,l);if(!this.we(u))return!1}return!0}static create(e,t,s){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),u=new Em(l,o,t);return s.forEach((d=>u.insert(d))),u}insert(e){if(this.ge===0)return;const t=Iv(e),[s,o]=Rv(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(s,o,l);this.Se(u)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Hl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf{constructor(e,t,s,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const o=new Map;return o.set(e,du.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Kf(Ce.min(),o,new ht(ke),fs(),Le())}}class du{constructor(e,t,s,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new du(s,t,Le(),Le(),Le())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of{constructor(e,t,s,o){this.be=e,this.removedTargetIds=t,this.key=s,this.De=o}}class XA{constructor(e,t){this.targetId=e,this.Ce=t}}class WA{constructor(e,t,s=Zt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=o}}class wv{constructor(){this.ve=0,this.Fe=Nv(),this.Me=Zt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Le(),t=Le(),s=Le();return this.Fe.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:Ee(38017,{changeType:l})}})),new du(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=Nv()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Qe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class PM{constructor(e){this.Ge=e,this.ze=new Map,this.je=fs(),this.Je=Zc(),this.He=Zc(),this.Ye=new ht(ke)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:Ee(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,s=e.Ce.count,o=this.ot(t);if(o){const l=o.target;if(kp(l))if(s===0){const u=new _e(l.path);this.et(t,u,nn.newNoDocument(u,Ce.min()))}else Qe(s===1,20013,{expectedCount:s});else{const u=this._t(t);if(u!==s){const d=this.ut(e),g=d?this.ct(d,e,u):1;if(g!==0){this.it(t);const m=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,m)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:l=0}=t;let u,d;try{u=hr(s).toUint8Array()}catch(g){if(g instanceof vA)return ga("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{d=new Em(u,o,l)}catch(g){return ga(g instanceof Hl?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return d.ge===0?null:d}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let o=0;return s.forEach((l=>{const u=this.Ge.ht(),d=`projects/${u.projectId}/databases/${u.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.et(t,l,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((l,u)=>{const d=this.ot(u);if(d){if(l.current&&kp(d.target)){const g=new _e(d.target.path);this.It(g).has(u)||this.Et(u,g)||this.et(u,g,nn.newNoDocument(g,e))}l.Be&&(t.set(u,l.ke()),l.qe())}}));let s=Le();this.He.forEach(((l,u)=>{let d=!0;u.forEachWhile((g=>{const m=this.ot(g);return!m||m.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(s=s.add(l))})),this.je.forEach(((l,u)=>u.setReadTime(e)));const o=new Kf(e,t,this.Ye,this.je,s);return this.je=fs(),this.Je=Zc(),this.He=Zc(),this.Ye=new ht(ke),o}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new wv,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Ot(ke),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Ot(ke),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||de("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new wv),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Zc(){return new ht(_e.comparator)}function Nv(){return new ht(_e.comparator)}const xM={asc:"ASCENDING",desc:"DESCENDING"},VM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},UM={and:"AND",or:"OR"};class kM{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Op(n,e){return n.useProto3Json||Bf(e)?e:{value:e}}function Sf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ZA(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function LM(n,e){return Sf(n,e.toTimestamp())}function Vi(n){return Qe(!!n,49232),Ce.fromTimestamp((function(t){const s=dr(t);return new ut(s.seconds,s.nanos)})(n))}function Sm(n,e){return qp(n,e).canonicalString()}function qp(n,e){const t=(function(o){return new st(["projects",o.projectId,"databases",o.database])})(n).child("documents");return e===void 0?t:t.child(e)}function jA(n){const e=st.fromString(n);return Qe(s0(e),10190,{key:e.toString()}),e}function Fp(n,e){return Sm(n.databaseId,e.path)}function vp(n,e){const t=jA(e);if(t.get(1)!==n.databaseId.projectId)throw new ce(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ce(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new _e(t0(t))}function e0(n,e){return Sm(n.databaseId,e)}function OM(n){const e=jA(n);return e.length===4?st.emptyPath():t0(e)}function Bp(n){return new st(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function t0(n){return Qe(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Mv(n,e,t){return{name:Fp(n,e),fields:t.value.mapValue.fields}}function qM(n,e){let t;if("targetChange"in e){e.targetChange;const s=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Ee(39313,{state:m})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(m,T){return m.useProto3Json?(Qe(T===void 0||typeof T=="string",58123),Zt.fromBase64String(T||"")):(Qe(T===void 0||T instanceof Buffer||T instanceof Uint8Array,16193),Zt.fromUint8Array(T||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&(function(m){const T=m.code===void 0?Z.UNKNOWN:$A(m.code);return new ce(T,m.message||"")})(u);t=new WA(s,o,l,d||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=vp(n,s.document.name),l=Vi(s.document.updateTime),u=s.document.createTime?Vi(s.document.createTime):Ce.min(),d=new Tn({mapValue:{fields:s.document.fields}}),g=nn.newFoundDocument(o,l,u,d),m=s.targetIds||[],T=s.removedTargetIds||[];t=new of(m,T,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=vp(n,s.document),l=s.readTime?Vi(s.readTime):Ce.min(),u=nn.newNoDocument(o,l),d=s.removedTargetIds||[];t=new of([],d,u.key,u)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=vp(n,s.document),l=s.removedTargetIds||[];t=new of([],l,o,null)}else{if(!("filter"in e))return Ee(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:l}=s,u=new NM(o,l),d=s.targetId;t=new XA(d,u)}}return t}function FM(n,e){let t;if(e instanceof fu)t={update:Mv(n,e.key,e.value)};else if(e instanceof QA)t={delete:Fp(n,e.key)};else if(e instanceof Tr)t={update:Mv(n,e.key,e.data),updateMask:$M(e.fieldMask)};else{if(!(e instanceof IM))return Ee(16599,{Vt:e.type});t={verify:Fp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(l,u){const d=u.transform;if(d instanceof Ef)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof su)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof ru)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof ou)return{fieldPath:u.field.canonicalString(),increment:d.Ae};throw Ee(20930,{transform:u.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:LM(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ee(27497)})(n,e.precondition)),t}function BM(n,e){return n&&n.length>0?(Qe(e!==void 0,14353),n.map((t=>(function(o,l){let u=o.updateTime?Vi(o.updateTime):Vi(l);return u.isEqual(Ce.min())&&(u=Vi(l)),new SM(u,o.transformResults||[])})(t,e)))):[]}function GM(n,e){return{documents:[e0(n,e.path)]}}function HM(n,e){const t={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=e0(n,o);const l=(function(m){if(m.length!==0)return i0(ai.create(m,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const u=(function(m){if(m.length!==0)return m.map((T=>(function(S){return{field:ia(S.field),direction:YM(S.dir)}})(T)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=Op(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{ft:t,parent:o}}function zM(n){let e=OM(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){Qe(s===1,65062);const T=t.from[0];T.allDescendants?o=T.collectionId:e=e.child(T.collectionId)}let l=[];t.where&&(l=(function(v){const S=n0(v);return S instanceof ai&&DA(S)?S.getFilters():[S]})(t.where));let u=[];t.orderBy&&(u=(function(v){return v.map((S=>(function(O){return new iu(sa(O.field),(function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(O.direction))})(S)))})(t.orderBy));let d=null;t.limit&&(d=(function(v){let S;return S=typeof v=="object"?v.value:v,Bf(S)?null:S})(t.limit));let g=null;t.startAt&&(g=(function(v){const S=!!v.before,w=v.values||[];return new Tf(w,S)})(t.startAt));let m=null;return t.endAt&&(m=(function(v){const S=!v.before,w=v.values||[];return new Tf(w,S)})(t.endAt)),uM(e,o,u,l,d,"F",g,m)}function JM(n,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ee(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function n0(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=sa(t.unaryFilter.field);return xt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=sa(t.unaryFilter.field);return xt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=sa(t.unaryFilter.field);return xt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=sa(t.unaryFilter.field);return xt.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ee(61313);default:return Ee(60726)}})(n):n.fieldFilter!==void 0?(function(t){return xt.create(sa(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ee(58110);default:return Ee(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return ai.create(t.compositeFilter.filters.map((s=>n0(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ee(1026)}})(t.compositeFilter.op))})(n):Ee(30097,{filter:n})}function YM(n){return xM[n]}function KM(n){return VM[n]}function QM(n){return UM[n]}function ia(n){return{fieldPath:n.canonicalString()}}function sa(n){return Wt.fromServerFormat(n.fieldPath)}function i0(n){return n instanceof xt?(function(t){if(t.op==="=="){if(gv(t.value))return{unaryFilter:{field:ia(t.field),op:"IS_NAN"}};if(mv(t.value))return{unaryFilter:{field:ia(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(gv(t.value))return{unaryFilter:{field:ia(t.field),op:"IS_NOT_NAN"}};if(mv(t.value))return{unaryFilter:{field:ia(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ia(t.field),op:KM(t.op),value:t.value}}})(n):n instanceof ai?(function(t){const s=t.getFilters().map((o=>i0(o)));return s.length===1?s[0]:{compositeFilter:{op:QM(t.op),filters:s}}})(n):Ee(54877,{filter:n})}function $M(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function s0(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(e,t,s,o,l=Ce.min(),u=Ce.min(),d=Zt.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=g}withSequenceNumber(e){return new ir(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ir(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ir(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ir(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XM{constructor(e){this.yt=e}}function WM(n){const e=zM({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?vf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZM{constructor(){this.Cn=new jM}addToCollectionParentIndex(e,t){return this.Cn.add(t),ie.resolve()}getCollectionParents(e,t){return ie.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ie.resolve()}deleteFieldIndex(e,t){return ie.resolve()}deleteAllFieldIndexes(e){return ie.resolve()}createTargetIndexes(e,t){return ie.resolve()}getDocumentsMatchingTarget(e,t){return ie.resolve(null)}getIndexType(e,t){return ie.resolve(0)}getFieldIndexes(e,t){return ie.resolve([])}getNextCollectionGroupToUpdate(e){return ie.resolve(null)}getMinOffset(e,t){return ie.resolve(fr.min())}getMinOffsetFromCollectionGroup(e,t){return ie.resolve(fr.min())}updateCollectionGroup(e,t,s){return ie.resolve()}updateIndexEntries(e,t){return ie.resolve()}}class jM{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new Ot(st.comparator),l=!o.has(s);return this.index[t]=o.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Ot(st.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},r0=41943040;class _n{static withCacheSize(e){return new _n(e,_n.DEFAULT_COLLECTION_PERCENTILE,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_n.DEFAULT_COLLECTION_PERCENTILE=10,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_n.DEFAULT=new _n(r0,_n.DEFAULT_COLLECTION_PERCENTILE,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_n.DISABLED=new _n(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new va(0)}static cr(){return new va(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bv="LruGarbageCollector",e1=1048576;function Pv([n,e],[t,s]){const o=ke(n,t);return o===0?ke(e,s):o}class t1{constructor(e){this.Ir=e,this.buffer=new Ot(Pv),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();Pv(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class n1{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){de(bv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){wa(t)?de(bv,"Ignoring IndexedDB error during garbage collection: ",t):await Ra(t)}await this.Vr(3e5)}))}}class i1{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return ie.resolve(Ff.ce);const s=new t1(t);return this.mr.forEachTarget(e,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(de("LruGarbageCollector","Garbage collection skipped; disabled"),ie.resolve(Dv)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(de("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Dv):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,o,l,u,d,g,m;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((v=>(v>this.params.maximumSequenceNumbersToCollect?(de("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),o=this.params.maximumSequenceNumbersToCollect):o=v,u=Date.now(),this.nthSequenceNumber(e,o)))).next((v=>(s=v,d=Date.now(),this.removeTargets(e,s,t)))).next((v=>(l=v,g=Date.now(),this.removeOrphanedDocuments(e,s)))).next((v=>(m=Date.now(),ta()<=Ue.DEBUG&&de("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-T}ms
	Determined least recently used ${o} in `+(d-u)+`ms
	Removed ${l} targets in `+(g-d)+`ms
	Removed ${v} documents in `+(m-g)+`ms
Total Duration: ${m-T}ms`),ie.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:v}))))}}function s1(n,e){return new i1(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1{constructor(){this.changes=new ao((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,nn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?ie.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1{constructor(e,t,s,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(s!==null&&$l(s.mutation,o,Mn.empty(),ut.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,Le()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=Le()){const o=eo();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,s).next((l=>{let u=Gl();return l.forEach(((d,g)=>{u=u.insert(d,g.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const s=eo();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,Le())))}populateOverlays(e,t,s){const o=[];return s.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((u,d)=>{t.set(u,d)}))}))}computeViews(e,t,s,o){let l=fs();const u=Ql(),d=(function(){return Ql()})();return t.forEach(((g,m)=>{const T=s.get(m.key);o.has(m.key)&&(T===void 0||T.mutation instanceof Tr)?l=l.insert(m.key,m):T!==void 0?(u.set(m.key,T.mutation.getFieldMask()),$l(T.mutation,m,T.mutation.getFieldMask(),ut.now())):u.set(m.key,Mn.empty())})),this.recalculateAndSaveOverlays(e,l).next((g=>(g.forEach(((m,T)=>u.set(m,T))),t.forEach(((m,T)=>d.set(m,new o1(T,u.get(m)??null)))),d)))}recalculateAndSaveOverlays(e,t){const s=Ql();let o=new ht(((u,d)=>u-d)),l=Le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const d of u)d.keys().forEach((g=>{const m=t.get(g);if(m===null)return;let T=s.get(g)||Mn.empty();T=d.applyToLocalView(m,T),s.set(g,T);const v=(o.get(d.batchId)||Le()).add(g);o=o.insert(d.batchId,v)}))})).next((()=>{const u=[],d=o.getReverseIterator();for(;d.hasNext();){const g=d.getNext(),m=g.key,T=g.value,v=qA();T.forEach((S=>{if(!l.has(S)){const w=YA(t.get(S),s.get(S));w!==null&&v.set(S,w),l=l.add(S)}})),u.push(this.documentOverlayCache.saveOverlays(e,m,v))}return ie.waitFor(u)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,o){return(function(u){return _e.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):VA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,o):this.getDocumentsMatchingCollectionQuery(e,t,s,o)}getNextDocuments(e,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,o).next((l=>{const u=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,o-l.size):ie.resolve(eo());let d=jl,g=l;return u.next((m=>ie.forEach(m,((T,v)=>(d<v.largestBatchId&&(d=v.largestBatchId),l.get(T)?ie.resolve():this.remoteDocumentCache.getEntry(e,T).next((S=>{g=g.insert(T,S)}))))).next((()=>this.populateOverlays(e,m,l))).next((()=>this.computeViews(e,g,m,Le()))).next((T=>({batchId:d,changes:OA(T)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new _e(t)).next((s=>{let o=Gl();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,o){const l=t.collectionGroup;let u=Gl();return this.indexManager.getCollectionParents(e,l).next((d=>ie.forEach(d,(g=>{const m=(function(v,S){return new Na(S,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)})(t,g.child(l));return this.getDocumentsMatchingCollectionQuery(e,m,s,o).next((T=>{T.forEach(((v,S)=>{u=u.insert(v,S)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,s,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((u=>(l=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,o)))).next((u=>{l.forEach(((g,m)=>{const T=m.getKey();u.get(T)===null&&(u=u.insert(T,nn.newInvalidDocument(T)))}));let d=Gl();return u.forEach(((g,m)=>{const T=l.get(g);T!==void 0&&$l(T.mutation,m,Mn.empty(),ut.now()),zf(t,m)&&(d=d.insert(g,m))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ie.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:Vi(o.createTime)}})(t)),ie.resolve()}getNamedQuery(e,t){return ie.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:WM(o.bundledQuery),readTime:Vi(o.readTime)}})(t)),ie.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{constructor(){this.overlays=new ht(_e.comparator),this.qr=new Map}getOverlay(e,t){return ie.resolve(this.overlays.get(t))}getOverlays(e,t){const s=eo();return ie.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&s.set(o,l)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((o,l)=>{this.St(e,t,l)})),ie.resolve()}removeOverlaysForBatchId(e,t,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(s)),ie.resolve()}getOverlaysForCollection(e,t,s){const o=eo(),l=t.length+1,u=new _e(t.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const g=d.getNext().value,m=g.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===l&&g.largestBatchId>s&&o.set(g.getKey(),g)}return ie.resolve(o)}getOverlaysForCollectionGroup(e,t,s,o){let l=new ht(((m,T)=>m-T));const u=this.overlays.getIterator();for(;u.hasNext();){const m=u.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>s){let T=l.get(m.largestBatchId);T===null&&(T=eo(),l=l.insert(m.largestBatchId,T)),T.set(m.getKey(),m)}}const d=eo(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((m,T)=>d.set(m,T))),!(d.size()>=o)););return ie.resolve(d)}St(e,t,s){const o=this.overlays.get(s.key);if(o!==null){const u=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,u)}this.overlays=this.overlays.insert(s.key,new wM(t,s));let l=this.qr.get(t);l===void 0&&(l=Le(),this.qr.set(t,l)),this.qr.set(t,l.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1{constructor(){this.sessionToken=Zt.EMPTY_BYTE_STRING}getSessionToken(e){return ie.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ie.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Am{constructor(){this.Qr=new Ot(Gt.$r),this.Ur=new Ot(Gt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new Gt(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new Gt(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new _e(new st([])),s=new Gt(t,e),o=new Gt(t,e+1),l=[];return this.Ur.forEachInRange([s,o],(u=>{this.Gr(u),l.push(u.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new _e(new st([])),s=new Gt(t,e),o=new Gt(t,e+1);let l=Le();return this.Ur.forEachInRange([s,o],(u=>{l=l.add(u.key)})),l}containsKey(e){const t=new Gt(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Gt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return _e.comparator(e.key,t.key)||ke(e.Yr,t.Yr)}static Kr(e,t){return ke(e.Yr,t.Yr)||_e.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Ot(Gt.$r)}checkEmpty(e){return ie.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,o){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new RM(l,t,s,o);this.mutationQueue.push(u);for(const d of o)this.Zr=this.Zr.add(new Gt(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return ie.resolve(u)}lookupMutationBatch(e,t){return ie.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=this.ei(s),l=o<0?0:o;return ie.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ie.resolve(this.mutationQueue.length===0?hm:this.tr-1)}getAllMutationBatches(e){return ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Gt(t,0),o=new Gt(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([s,o],(u=>{const d=this.Xr(u.Yr);l.push(d)})),ie.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Ot(ke);return t.forEach((o=>{const l=new Gt(o,0),u=new Gt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,u],(d=>{s=s.add(d.Yr)}))})),ie.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1;let l=s;_e.isDocumentKey(l)||(l=l.child(""));const u=new Gt(new _e(l),0);let d=new Ot(ke);return this.Zr.forEachWhile((g=>{const m=g.key.path;return!!s.isPrefixOf(m)&&(m.length===o&&(d=d.add(g.Yr)),!0)}),u),ie.resolve(this.ti(d))}ti(e){const t=[];return e.forEach((s=>{const o=this.Xr(s);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){Qe(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return ie.forEach(t.mutations,(o=>{const l=new Gt(o.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new Gt(t,0),o=this.Zr.firstAfterOrEqual(s);return ie.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ie.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d1{constructor(e){this.ri=e,this.docs=(function(){return new ht(_e.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,o=this.docs.get(s),l=o?o.size:0,u=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return ie.resolve(s?s.document.mutableCopy():nn.newInvalidDocument(t))}getEntries(e,t){let s=fs();return t.forEach((o=>{const l=this.docs.get(o);s=s.insert(o,l?l.document.mutableCopy():nn.newInvalidDocument(o))})),ie.resolve(s)}getDocumentsMatchingQuery(e,t,s,o){let l=fs();const u=t.path,d=new _e(u.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(d);for(;g.hasNext();){const{key:m,value:{document:T}}=g.getNext();if(!u.isPrefixOf(m.path))break;m.path.length>u.length+1||BN(FN(T),s)<=0||(o.has(T.key)||zf(t,T))&&(l=l.insert(T.key,T.mutableCopy()))}return ie.resolve(l)}getAllFromCollectionGroup(e,t,s,o){Ee(9500)}ii(e,t){return ie.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new h1(this)}getSize(e){return ie.resolve(this.size)}}class h1 extends r1{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)})),ie.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1{constructor(e){this.persistence=e,this.si=new ao((t=>gm(t)),ym),this.lastRemoteSnapshotVersion=Ce.min(),this.highestTargetId=0,this.oi=0,this._i=new Am,this.targetCount=0,this.ai=va.ur()}forEachTarget(e,t){return this.si.forEach(((s,o)=>t(o))),ie.resolve()}getLastRemoteSnapshotVersion(e){return ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ie.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ie.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),ie.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new va(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ie.resolve()}updateTargetData(e,t){return this.Pr(t),ie.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ie.resolve()}removeTargets(e,t,s){let o=0;const l=[];return this.si.forEach(((u,d)=>{d.sequenceNumber<=t&&s.get(d.targetId)===null&&(this.si.delete(u),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),o++)})),ie.waitFor(l).next((()=>o))}getTargetCount(e){return ie.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return ie.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),ie.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((u=>{l.push(o.markPotentiallyOrphaned(e,u))})),ie.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ie.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return ie.resolve(s)}containsKey(e,t){return ie.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o0{constructor(e,t){this.ui={},this.overlays={},this.ci=new Ff(0),this.li=!1,this.li=!0,this.hi=new c1,this.referenceDelegate=e(this),this.Pi=new p1(this),this.indexManager=new ZM,this.remoteDocumentCache=(function(o){return new d1(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new XM(t),this.Ii=new l1(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new u1,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new f1(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){de("MemoryPersistence","Starting transaction:",e);const o=new m1(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((l=>this.referenceDelegate.di(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ai(e,t){return ie.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class m1 extends HN{constructor(e){super(),this.currentSequenceNumber=e}}class Cm{constructor(e){this.persistence=e,this.Ri=new Am,this.Vi=null}static mi(e){return new Cm(e)}get fi(){if(this.Vi)return this.Vi;throw Ee(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),ie.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),ie.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ie.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.fi.add(l.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ie.forEach(this.fi,(s=>{const o=_e.fromPath(s);return this.gi(e,o).next((l=>{l||t.removeEntry(o,Ce.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return ie.or([()=>ie.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Af{constructor(e,t){this.persistence=e,this.pi=new ao((s=>YN(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=s1(this,t)}static mi(e,t){return new Af(e,t)}Ei(){}di(e){return ie.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((o=>s+o))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return ie.forEach(this.pi,((s,o)=>this.br(e,s,o).next((l=>l?ie.resolve():t(o)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ii(e,(u=>this.br(e,u,t).next((d=>{d||(s++,l.removeEntry(u,Ce.min()))})))).next((()=>l.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ie.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),ie.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),ie.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ie.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=nf(e.data.value)),t}br(e,t,s){return ie.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return ie.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(e,t,s,o){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=o}static As(e,t){let s=Le(),o=Le();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new Im(e,t.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g1{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y1{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return lw()?8:zN(rn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,o){const l={result:null};return this.ys(e,t).next((u=>{l.result=u})).next((()=>{if(!l.result)return this.ws(e,t,o,s).next((u=>{l.result=u}))})).next((()=>{if(l.result)return;const u=new g1;return this.Ss(e,t,u).next((d=>{if(l.result=d,this.Vs)return this.bs(e,t,u,d.size)}))})).next((()=>l.result))}bs(e,t,s,o){return s.documentReadCount<this.fs?(ta()<=Ue.DEBUG&&de("QueryEngine","SDK will not create cache indexes for query:",na(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ie.resolve()):(ta()<=Ue.DEBUG&&de("QueryEngine","Query:",na(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(ta()<=Ue.DEBUG&&de("QueryEngine","The SDK decides to create cache indexes for query:",na(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Pi(t))):ie.resolve())}ys(e,t){if(vv(t))return ie.resolve(null);let s=Pi(t);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=vf(t,null,"F"),s=Pi(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((l=>{const u=Le(...l);return this.ps.getDocuments(e,u).next((d=>this.indexManager.getMinOffset(e,s).next((g=>{const m=this.Ds(t,d);return this.Cs(t,m,u,g.readTime)?this.ys(e,vf(t,null,"F")):this.vs(e,m,t,g)}))))})))))}ws(e,t,s,o){return vv(t)||o.isEqual(Ce.min())?ie.resolve(null):this.ps.getDocuments(e,s).next((l=>{const u=this.Ds(t,l);return this.Cs(t,u,s,o)?ie.resolve(null):(ta()<=Ue.DEBUG&&de("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),na(t)),this.vs(e,u,t,qN(o,jl)).next((d=>d)))}))}Ds(e,t){let s=new Ot(kA(e));return t.forEach(((o,l)=>{zf(e,l)&&(s=s.add(l))})),s}Cs(e,t,s,o){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Ss(e,t,s){return ta()<=Ue.DEBUG&&de("QueryEngine","Using full collection scan to execute query:",na(t)),this.ps.getDocumentsMatchingQuery(e,t,fr.min(),s)}vs(e,t,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next((l=>(t.forEach((u=>{l=l.insert(u.key,u)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rm="LocalStore",_1=3e8;class T1{constructor(e,t,s,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new ht(ke),this.xs=new ao((l=>gm(l)),ym),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new a1(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function v1(n,e,t,s){return new T1(n,e,t,s)}async function a0(n,e){const t=Re(n);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next((l=>(o=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((l=>{const u=[],d=[];let g=Le();for(const m of o){u.push(m.batchId);for(const T of m.mutations)g=g.add(T.key)}for(const m of l){d.push(m.batchId);for(const T of m.mutations)g=g.add(T.key)}return t.localDocuments.getDocuments(s,g).next((m=>({Ls:m,removedBatchIds:u,addedBatchIds:d})))}))}))}function E1(n,e){const t=Re(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(d,g,m,T){const v=m.batch,S=v.keys();let w=ie.resolve();return S.forEach((O=>{w=w.next((()=>T.getEntry(g,O))).next((G=>{const F=m.docVersions.get(O);Qe(F!==null,48541),G.version.compareTo(F)<0&&(v.applyToRemoteDocument(G,m),G.isValidDocument()&&(G.setReadTime(m.commitVersion),T.addEntry(G)))}))})),w.next((()=>d.mutationQueue.removeMutationBatch(g,v)))})(t,s,e,l).next((()=>l.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(d){let g=Le();for(let m=0;m<d.mutationResults.length;++m)d.mutationResults[m].transformResults.length>0&&(g=g.add(d.batch.mutations[m].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(s,o)))}))}function l0(n){const e=Re(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function S1(n,e){const t=Re(n),s=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const u=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const d=[];e.targetChanges.forEach(((T,v)=>{const S=o.get(v);if(!S)return;d.push(t.Pi.removeMatchingKeys(l,T.removedDocuments,v).next((()=>t.Pi.addMatchingKeys(l,T.addedDocuments,v))));let w=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(v)!==null?w=w.withResumeToken(Zt.EMPTY_BYTE_STRING,Ce.min()).withLastLimboFreeSnapshotVersion(Ce.min()):T.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(T.resumeToken,s)),o=o.insert(v,w),(function(G,F,$){return G.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-G.snapshotVersion.toMicroseconds()>=_1?!0:$.addedDocuments.size+$.modifiedDocuments.size+$.removedDocuments.size>0})(S,w,T)&&d.push(t.Pi.updateTargetData(l,w))}));let g=fs(),m=Le();if(e.documentUpdates.forEach((T=>{e.resolvedLimboDocuments.has(T)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,T))})),d.push(A1(l,u,e.documentUpdates).next((T=>{g=T.ks,m=T.qs}))),!s.isEqual(Ce.min())){const T=t.Pi.getLastRemoteSnapshotVersion(l).next((v=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,s)));d.push(T)}return ie.waitFor(d).next((()=>u.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,g,m))).next((()=>g))})).then((l=>(t.Ms=o,l)))}function A1(n,e,t){let s=Le(),o=Le();return t.forEach((l=>s=s.add(l))),e.getEntries(n,s).next((l=>{let u=fs();return t.forEach(((d,g)=>{const m=l.get(d);g.isFoundDocument()!==m.isFoundDocument()&&(o=o.add(d)),g.isNoDocument()&&g.version.isEqual(Ce.min())?(e.removeEntry(d,g.readTime),u=u.insert(d,g)):!m.isValidDocument()||g.version.compareTo(m.version)>0||g.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(g),u=u.insert(d,g)):de(Rm,"Ignoring outdated watch update for ",d,". Current version:",m.version," Watch version:",g.version)})),{ks:u,qs:o}}))}function C1(n,e){const t=Re(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=hm),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function I1(n,e){const t=Re(n);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return t.Pi.getTargetData(s,e).next((l=>l?(o=l,ie.resolve(o)):t.Pi.allocateTargetId(s).next((u=>(o=new ir(e,u,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=t.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function Gp(n,e,t){const s=Re(n),o=s.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,(u=>s.persistence.referenceDelegate.removeTarget(u,o)))}catch(u){if(!wa(u))throw u;de(Rm,`Failed to update sequence numbers for target ${e}: ${u}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function xv(n,e,t){const s=Re(n);let o=Ce.min(),l=Le();return s.persistence.runTransaction("Execute query","readwrite",(u=>(function(g,m,T){const v=Re(g),S=v.xs.get(T);return S!==void 0?ie.resolve(v.Ms.get(S)):v.Pi.getTargetData(m,T)})(s,u,Pi(e)).next((d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(u,d.targetId).next((g=>{l=g}))})).next((()=>s.Fs.getDocumentsMatchingQuery(u,e,t?o:Ce.min(),t?l:Le()))).next((d=>(R1(s,fM(e),d),{documents:d,Qs:l})))))}function R1(n,e,t){let s=n.Os.get(e)||Ce.min();t.forEach(((o,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)})),n.Os.set(e,s)}class Vv{constructor(){this.activeTargetIds=yM()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class w1{constructor(){this.Mo=new Vv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Vv,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uv="ConnectivityMonitor";class kv{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){de(Uv,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){de(Uv,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jc=null;function Hp(){return jc===null?jc=(function(){return 268435456+Math.round(2147483648*Math.random())})():jc++,"0x"+jc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ep="RestConnection",M1={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class D1{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===yf?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,t,s,o,l){const u=Hp(),d=this.zo(e,t.toUriEncodedString());de(Ep,`Sending RPC '${e}' ${u}:`,d,s);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,o,l);const{host:m}=new URL(d),T=Aa(m);return this.Jo(e,d,g,s,T).then((v=>(de(Ep,`Received RPC '${e}' ${u}: `,v),v)),(v=>{throw ga(Ep,`RPC '${e}' ${u} failed with error: `,v,"url: ",d,"request:",s),v}))}Ho(e,t,s,o,l,u){return this.Go(e,t,s,o,l)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ia})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),s&&s.headers.forEach(((o,l)=>e[l]=o))}zo(e,t){const s=M1[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b1{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const en="WebChannelConnection";class P1 extends D1{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,o,l){const u=Hp();return new Promise(((d,g)=>{const m=new uA;m.setWithCredentials(!0),m.listenOnce(cA.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case tf.NO_ERROR:const v=m.getResponseJson();de(en,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(v)),d(v);break;case tf.TIMEOUT:de(en,`RPC '${e}' ${u} timed out`),g(new ce(Z.DEADLINE_EXCEEDED,"Request time out"));break;case tf.HTTP_ERROR:const S=m.getStatus();if(de(en,`RPC '${e}' ${u} failed with status:`,S,"response text:",m.getResponseText()),S>0){let w=m.getResponseJson();Array.isArray(w)&&(w=w[0]);const O=w==null?void 0:w.error;if(O&&O.status&&O.message){const G=(function($){const te=$.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(te)>=0?te:Z.UNKNOWN})(O.status);g(new ce(G,O.message))}else g(new ce(Z.UNKNOWN,"Server responded with status "+m.getStatus()))}else g(new ce(Z.UNAVAILABLE,"Connection failed."));break;default:Ee(9055,{l_:e,streamId:u,h_:m.getLastErrorCode(),P_:m.getLastError()})}}finally{de(en,`RPC '${e}' ${u} completed.`)}}));const T=JSON.stringify(o);de(en,`RPC '${e}' ${u} sending request:`,o),m.send(t,"POST",T,s,15)}))}T_(e,t,s){const o=Hp(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=hA(),d=dA(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(g.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,t,s),g.encodeInitMessageHeaders=!0;const T=l.join("");de(en,`Creating RPC '${e}' stream ${o}: ${T}`,g);const v=u.createWebChannel(T,g);this.I_(v);let S=!1,w=!1;const O=new b1({Yo:F=>{w?de(en,`Not sending because RPC '${e}' stream ${o} is closed:`,F):(S||(de(en,`Opening RPC '${e}' stream ${o} transport.`),v.open(),S=!0),de(en,`RPC '${e}' stream ${o} sending:`,F),v.send(F))},Zo:()=>v.close()}),G=(F,$,te)=>{F.listen($,(ne=>{try{te(ne)}catch(le){setTimeout((()=>{throw le}),0)}}))};return G(v,Bl.EventType.OPEN,(()=>{w||(de(en,`RPC '${e}' stream ${o} transport opened.`),O.o_())})),G(v,Bl.EventType.CLOSE,(()=>{w||(w=!0,de(en,`RPC '${e}' stream ${o} transport closed`),O.a_(),this.E_(v))})),G(v,Bl.EventType.ERROR,(F=>{w||(w=!0,ga(en,`RPC '${e}' stream ${o} transport errored. Name:`,F.name,"Message:",F.message),O.a_(new ce(Z.UNAVAILABLE,"The operation could not be completed")))})),G(v,Bl.EventType.MESSAGE,(F=>{var $;if(!w){const te=F.data[0];Qe(!!te,16349);const ne=te,le=(ne==null?void 0:ne.error)||(($=ne[0])==null?void 0:$.error);if(le){de(en,`RPC '${e}' stream ${o} received error:`,le);const me=le.status;let fe=(function(N){const V=Pt[N];if(V!==void 0)return $A(V)})(me),D=le.message;fe===void 0&&(fe=Z.INTERNAL,D="Unknown error status: "+me+" with message "+le.message),w=!0,O.a_(new ce(fe,D)),v.close()}else de(en,`RPC '${e}' stream ${o} received:`,te),O.u_(te)}})),G(d,fA.STAT_EVENT,(F=>{F.stat===bp.PROXY?de(en,`RPC '${e}' stream ${o} detected buffering proxy`):F.stat===bp.NOPROXY&&de(en,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{O.__()}),0),O}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Sp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qf(n){return new kM(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u0{constructor(e,t,s=1e3,o=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=o,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-s);o>0&&de("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lv="PersistentStream";class c0{constructor(e,t,s,o,l,u,d,g){this.Mi=e,this.S_=s,this.b_=o,this.connection=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new u0(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===Z.RESOURCE_EXHAUSTED?(us(t.toString()),us("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===t&&this.G_(s,o)}),(s=>{e((()=>{const o=new ce(Z.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return de(Lv,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(de(Lv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class x1 extends c0{constructor(e,t,s,o,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,u),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=qM(this.serializer,e),s=(function(l){if(!("targetChange"in l))return Ce.min();const u=l.targetChange;return u.targetIds&&u.targetIds.length?Ce.min():u.readTime?Vi(u.readTime):Ce.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=Bp(this.serializer),t.addTarget=(function(l,u){let d;const g=u.target;if(d=kp(g)?{documents:GM(l,g)}:{query:HM(l,g).ft},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=ZA(l,u.resumeToken);const m=Op(l,u.expectedCount);m!==null&&(d.expectedCount=m)}else if(u.snapshotVersion.compareTo(Ce.min())>0){d.readTime=Sf(l,u.snapshotVersion.toTimestamp());const m=Op(l,u.expectedCount);m!==null&&(d.expectedCount=m)}return d})(this.serializer,e);const s=JM(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=Bp(this.serializer),t.removeTarget=e,this.q_(t)}}class V1 extends c0{constructor(e,t,s,o,l,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,o,u),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Qe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Qe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Qe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=BM(e.writeResults,e.commitTime),s=Vi(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=Bp(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>FM(this.serializer,s)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1{}class k1 extends U1{constructor(e,t,s,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ce(Z.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Go(e,qp(t,s),o,l,u))).catch((l=>{throw l.name==="FirebaseError"?(l.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ce(Z.UNKNOWN,l.toString())}))}Ho(e,t,s,o,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Ho(e,qp(t,s),o,u,d,l))).catch((u=>{throw u.name==="FirebaseError"?(u.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ce(Z.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class L1{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(us(t),this.aa=!1):de("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ro="RemoteStore";class O1{constructor(e,t,s,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((u=>{s.enqueueAndForget((async()=>{lo(this)&&(de(ro,"Restarting streams for network reachability change."),await(async function(g){const m=Re(g);m.Ea.add(4),await hu(m),m.Ra.set("Unknown"),m.Ea.delete(4),await $f(m)})(this))}))})),this.Ra=new L1(s,o)}}async function $f(n){if(lo(n))for(const e of n.da)await e(!0)}async function hu(n){for(const e of n.da)await e(!1)}function f0(n,e){const t=Re(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Dm(t)?Mm(t):Ma(t).O_()&&Nm(t,e))}function wm(n,e){const t=Re(n),s=Ma(t);t.Ia.delete(e),s.O_()&&d0(t,e),t.Ia.size===0&&(s.O_()?s.L_():lo(t)&&t.Ra.set("Unknown"))}function Nm(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ce.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ma(n).Y_(e)}function d0(n,e){n.Va.Ue(e),Ma(n).Z_(e)}function Mm(n){n.Va=new PM({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Ma(n).start(),n.Ra.ua()}function Dm(n){return lo(n)&&!Ma(n).x_()&&n.Ia.size>0}function lo(n){return Re(n).Ea.size===0}function h0(n){n.Va=void 0}async function q1(n){n.Ra.set("Online")}async function F1(n){n.Ia.forEach(((e,t)=>{Nm(n,e)}))}async function B1(n,e){h0(n),Dm(n)?(n.Ra.ha(e),Mm(n)):n.Ra.set("Unknown")}async function G1(n,e,t){if(n.Ra.set("Online"),e instanceof WA&&e.state===2&&e.cause)try{await(async function(o,l){const u=l.cause;for(const d of l.targetIds)o.Ia.has(d)&&(await o.remoteSyncer.rejectListen(d,u),o.Ia.delete(d),o.Va.removeTarget(d))})(n,e)}catch(s){de(ro,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Cf(n,s)}else if(e instanceof of?n.Va.Ze(e):e instanceof XA?n.Va.st(e):n.Va.tt(e),!t.isEqual(Ce.min()))try{const s=await l0(n.localStore);t.compareTo(s)>=0&&await(function(l,u){const d=l.Va.Tt(u);return d.targetChanges.forEach(((g,m)=>{if(g.resumeToken.approximateByteSize()>0){const T=l.Ia.get(m);T&&l.Ia.set(m,T.withResumeToken(g.resumeToken,u))}})),d.targetMismatches.forEach(((g,m)=>{const T=l.Ia.get(g);if(!T)return;l.Ia.set(g,T.withResumeToken(Zt.EMPTY_BYTE_STRING,T.snapshotVersion)),d0(l,g);const v=new ir(T.target,g,m,T.sequenceNumber);Nm(l,v)})),l.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(s){de(ro,"Failed to raise snapshot:",s),await Cf(n,s)}}async function Cf(n,e,t){if(!wa(e))throw e;n.Ea.add(1),await hu(n),n.Ra.set("Offline"),t||(t=()=>l0(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{de(ro,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await $f(n)}))}function p0(n,e){return e().catch((t=>Cf(n,t,e)))}async function Xf(n){const e=Re(n),t=mr(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:hm;for(;H1(e);)try{const o=await C1(e.localStore,s);if(o===null){e.Ta.length===0&&t.L_();break}s=o.batchId,z1(e,o)}catch(o){await Cf(e,o)}m0(e)&&g0(e)}function H1(n){return lo(n)&&n.Ta.length<10}function z1(n,e){n.Ta.push(e);const t=mr(n);t.O_()&&t.X_&&t.ea(e.mutations)}function m0(n){return lo(n)&&!mr(n).x_()&&n.Ta.length>0}function g0(n){mr(n).start()}async function J1(n){mr(n).ra()}async function Y1(n){const e=mr(n);for(const t of n.Ta)e.ea(t.mutations)}async function K1(n,e,t){const s=n.Ta.shift(),o=vm.from(s,e,t);await p0(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await Xf(n)}async function Q1(n,e){e&&mr(n).X_&&await(async function(s,o){if((function(u){return MM(u)&&u!==Z.ABORTED})(o.code)){const l=s.Ta.shift();mr(s).B_(),await p0(s,(()=>s.remoteSyncer.rejectFailedWrite(l.batchId,o))),await Xf(s)}})(n,e),m0(n)&&g0(n)}async function Ov(n,e){const t=Re(n);t.asyncQueue.verifyOperationInProgress(),de(ro,"RemoteStore received new credentials");const s=lo(t);t.Ea.add(3),await hu(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await $f(t)}async function $1(n,e){const t=Re(n);e?(t.Ea.delete(2),await $f(t)):e||(t.Ea.add(2),await hu(t),t.Ra.set("Unknown"))}function Ma(n){return n.ma||(n.ma=(function(t,s,o){const l=Re(t);return l.sa(),new x1(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Xo:q1.bind(null,n),t_:F1.bind(null,n),r_:B1.bind(null,n),H_:G1.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),Dm(n)?Mm(n):n.Ra.set("Unknown")):(await n.ma.stop(),h0(n))}))),n.ma}function mr(n){return n.fa||(n.fa=(function(t,s,o){const l=Re(t);return l.sa(),new V1(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:J1.bind(null,n),r_:Q1.bind(null,n),ta:Y1.bind(null,n),na:K1.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Xf(n)):(await n.fa.stop(),n.Ta.length>0&&(de(ro,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm{constructor(e,t,s,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=l,this.deferred=new as,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,l){const u=Date.now()+s,d=new bm(e,t,u,o,l);return d.start(s),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ce(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Pm(n,e){if(us("AsyncQueue",`${e}: ${n}`),wa(n))return new ce(Z.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{static emptySet(e){return new aa(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||_e.comparator(t.key,s.key):(t,s)=>_e.comparator(t.key,s.key),this.keyedMap=Gl(),this.sortedSet=new ht(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof aa)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new aa;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv{constructor(){this.ga=new ht(_e.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ee(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class Ea{constructor(e,t,s,o,l,u,d,g,m){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=g,this.hasCachedResults=m}static fromInitialDocuments(e,t,s,o,l){const u=[];return t.forEach((d=>{u.push({type:0,doc:d})})),new Ea(e,t,aa.emptySet(t),u,s,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Hf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class W1{constructor(){this.queries=Fv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const o=Re(t),l=o.queries;o.queries=Fv(),l.forEach(((u,d)=>{for(const g of d.Sa)g.onError(s)}))})(this,new ce(Z.ABORTED,"Firestore shutting down"))}}function Fv(){return new ao((n=>UA(n)),Hf)}async function y0(n,e){const t=Re(n);let s=3;const o=e.query;let l=t.queries.get(o);l?!l.ba()&&e.Da()&&(s=2):(l=new X1,s=e.Da()?0:1);try{switch(s){case 0:l.wa=await t.onListen(o,!0);break;case 1:l.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(u){const d=Pm(u,`Initialization of query '${na(e.query)}' failed`);return void e.onError(d)}t.queries.set(o,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&xm(t)}async function _0(n,e){const t=Re(n),s=e.query;let o=3;const l=t.queries.get(s);if(l){const u=l.Sa.indexOf(e);u>=0&&(l.Sa.splice(u,1),l.Sa.length===0?o=e.Da()?0:1:!l.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function Z1(n,e){const t=Re(n);let s=!1;for(const o of e){const l=o.query,u=t.queries.get(l);if(u){for(const d of u.Sa)d.Fa(o)&&(s=!0);u.wa=o}}s&&xm(t)}function j1(n,e,t){const s=Re(n),o=s.queries.get(e);if(o)for(const l of o.Sa)l.onError(t);s.queries.delete(e)}function xm(n){n.Ca.forEach((e=>{e.next()}))}var zp,Bv;(Bv=zp||(zp={})).Ma="default",Bv.Cache="cache";class T0{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new Ea(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Ea.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==zp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v0{constructor(e){this.key=e}}class E0{constructor(e){this.key=e}}class eD{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Le(),this.mutatedKeys=Le(),this.eu=kA(e),this.tu=new aa(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new qv,o=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,u=o,d=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,m=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((T,v)=>{const S=o.get(T),w=zf(this.query,v)?v:null,O=!!S&&this.mutatedKeys.has(S.key),G=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let F=!1;S&&w?S.data.isEqual(w.data)?O!==G&&(s.track({type:3,doc:w}),F=!0):this.su(S,w)||(s.track({type:2,doc:w}),F=!0,(g&&this.eu(w,g)>0||m&&this.eu(w,m)<0)&&(d=!0)):!S&&w?(s.track({type:0,doc:w}),F=!0):S&&!w&&(s.track({type:1,doc:S}),F=!0,(g||m)&&(d=!0)),F&&(w?(u=u.add(w),l=G?l.add(T):l.delete(T)):(u=u.delete(T),l=l.delete(T)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const T=this.query.limitType==="F"?u.last():u.first();u=u.delete(T.key),l=l.delete(T.key),s.track({type:1,doc:T})}return{tu:u,iu:s,Cs:d,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,o){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((T,v)=>(function(w,O){const G=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ee(20277,{Rt:F})}};return G(w)-G(O)})(T.type,v.type)||this.eu(T.doc,v.doc))),this.ou(s),o=o??!1;const d=t&&!o?this._u():[],g=this.Xa.size===0&&this.current&&!o?1:0,m=g!==this.Za;return this.Za=g,u.length!==0||m?{snapshot:new Ea(this.query,e.tu,l,u,e.mutatedKeys,g===0,m,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new qv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Le(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new E0(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new v0(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=Le();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Ea.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Vm="SyncEngine";class tD{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class nD{constructor(e){this.key=e,this.hu=!1}}class iD{constructor(e,t,s,o,l,u){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new ao((d=>UA(d)),Hf),this.Iu=new Map,this.Eu=new Set,this.du=new ht(_e.comparator),this.Au=new Map,this.Ru=new Am,this.Vu={},this.mu=new Map,this.fu=va.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function sD(n,e,t=!0){const s=w0(n);let o;const l=s.Tu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.lu()):o=await S0(s,e,t,!0),o}async function rD(n,e){const t=w0(n);await S0(t,e,!0,!1)}async function S0(n,e,t,s){const o=await I1(n.localStore,Pi(e)),l=o.targetId,u=n.sharedClientState.addLocalQueryTarget(l,t);let d;return s&&(d=await oD(n,e,l,u==="current",o.resumeToken)),n.isPrimaryClient&&t&&f0(n.remoteStore,o),d}async function oD(n,e,t,s,o){n.pu=(v,S,w)=>(async function(G,F,$,te){let ne=F.view.ru($);ne.Cs&&(ne=await xv(G.localStore,F.query,!1).then((({documents:D})=>F.view.ru(D,ne))));const le=te&&te.targetChanges.get(F.targetId),me=te&&te.targetMismatches.get(F.targetId)!=null,fe=F.view.applyChanges(ne,G.isPrimaryClient,le,me);return Hv(G,F.targetId,fe.au),fe.snapshot})(n,v,S,w);const l=await xv(n.localStore,e,!0),u=new eD(e,l.Qs),d=u.ru(l.documents),g=du.createSynthesizedTargetChangeForCurrentChange(t,s&&n.onlineState!=="Offline",o),m=u.applyChanges(d,n.isPrimaryClient,g);Hv(n,t,m.au);const T=new tD(e,t,u);return n.Tu.set(e,T),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),m.snapshot}async function aD(n,e,t){const s=Re(n),o=s.Tu.get(e),l=s.Iu.get(o.targetId);if(l.length>1)return s.Iu.set(o.targetId,l.filter((u=>!Hf(u,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await Gp(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),t&&wm(s.remoteStore,o.targetId),Jp(s,o.targetId)})).catch(Ra)):(Jp(s,o.targetId),await Gp(s.localStore,o.targetId,!0))}async function lD(n,e){const t=Re(n),s=t.Tu.get(e),o=t.Iu.get(s.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),wm(t.remoteStore,s.targetId))}async function uD(n,e,t){const s=gD(n);try{const o=await(function(u,d){const g=Re(u),m=ut.now(),T=d.reduce(((w,O)=>w.add(O.key)),Le());let v,S;return g.persistence.runTransaction("Locally write mutations","readwrite",(w=>{let O=fs(),G=Le();return g.Ns.getEntries(w,T).next((F=>{O=F,O.forEach((($,te)=>{te.isValidDocument()||(G=G.add($))}))})).next((()=>g.localDocuments.getOverlayedDocuments(w,O))).next((F=>{v=F;const $=[];for(const te of d){const ne=CM(te,v.get(te.key).overlayedDocument);ne!=null&&$.push(new Tr(te.key,ne,wA(ne.value.mapValue),xi.exists(!0)))}return g.mutationQueue.addMutationBatch(w,m,$,d)})).next((F=>{S=F;const $=F.applyToLocalDocumentSet(v,G);return g.documentOverlayCache.saveOverlays(w,F.batchId,$)}))})).then((()=>({batchId:S.batchId,changes:OA(v)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(u,d,g){let m=u.Vu[u.currentUser.toKey()];m||(m=new ht(ke)),m=m.insert(d,g),u.Vu[u.currentUser.toKey()]=m})(s,o.batchId,t),await pu(s,o.changes),await Xf(s.remoteStore)}catch(o){const l=Pm(o,"Failed to persist write");t.reject(l)}}async function A0(n,e){const t=Re(n);try{const s=await S1(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const u=t.Au.get(l);u&&(Qe(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?u.hu=!0:o.modifiedDocuments.size>0?Qe(u.hu,14607):o.removedDocuments.size>0&&(Qe(u.hu,42227),u.hu=!1))})),await pu(t,s,e)}catch(s){await Ra(s)}}function Gv(n,e,t){const s=Re(n);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const o=[];s.Tu.forEach(((l,u)=>{const d=u.view.va(e);d.snapshot&&o.push(d.snapshot)})),(function(u,d){const g=Re(u);g.onlineState=d;let m=!1;g.queries.forEach(((T,v)=>{for(const S of v.Sa)S.va(d)&&(m=!0)})),m&&xm(g)})(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function cD(n,e,t){const s=Re(n);s.sharedClientState.updateQueryState(e,"rejected",t);const o=s.Au.get(e),l=o&&o.key;if(l){let u=new ht(_e.comparator);u=u.insert(l,nn.newNoDocument(l,Ce.min()));const d=Le().add(l),g=new Kf(Ce.min(),new Map,new ht(ke),u,d);await A0(s,g),s.du=s.du.remove(l),s.Au.delete(e),Um(s)}else await Gp(s.localStore,e,!1).then((()=>Jp(s,e,t))).catch(Ra)}async function fD(n,e){const t=Re(n),s=e.batch.batchId;try{const o=await E1(t.localStore,e);I0(t,s,null),C0(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await pu(t,o)}catch(o){await Ra(o)}}async function dD(n,e,t){const s=Re(n);try{const o=await(function(u,d){const g=Re(u);return g.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let T;return g.mutationQueue.lookupMutationBatch(m,d).next((v=>(Qe(v!==null,37113),T=v.keys(),g.mutationQueue.removeMutationBatch(m,v)))).next((()=>g.mutationQueue.performConsistencyCheck(m))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(m,T,d))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,T))).next((()=>g.localDocuments.getDocuments(m,T)))}))})(s.localStore,e);I0(s,e,t),C0(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await pu(s,o)}catch(o){await Ra(o)}}function C0(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function I0(n,e,t){const s=Re(n);let o=s.Vu[s.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),s.Vu[s.currentUser.toKey()]=o}}function Jp(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.Iu.get(e))n.Tu.delete(s),t&&n.Pu.yu(s,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((s=>{n.Ru.containsKey(s)||R0(n,s)}))}function R0(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(wm(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),Um(n))}function Hv(n,e,t){for(const s of t)s instanceof v0?(n.Ru.addReference(s.key,e),hD(n,s)):s instanceof E0?(de(Vm,"Document no longer in limbo: "+s.key),n.Ru.removeReference(s.key,e),n.Ru.containsKey(s.key)||R0(n,s.key)):Ee(19791,{wu:s})}function hD(n,e){const t=e.key,s=t.path.canonicalString();n.du.get(t)||n.Eu.has(s)||(de(Vm,"New document in limbo: "+t),n.Eu.add(s),Um(n))}function Um(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new _e(st.fromString(e)),s=n.fu.next();n.Au.set(s,new nD(t)),n.du=n.du.insert(t,s),f0(n.remoteStore,new ir(Pi(_m(t.path)),s,"TargetPurposeLimboResolution",Ff.ce))}}async function pu(n,e,t){const s=Re(n),o=[],l=[],u=[];s.Tu.isEmpty()||(s.Tu.forEach(((d,g)=>{u.push(s.pu(g,e,t).then((m=>{var T;if((m||t)&&s.isPrimaryClient){const v=m?!m.fromCache:(T=t==null?void 0:t.targetChanges.get(g.targetId))==null?void 0:T.current;s.sharedClientState.updateQueryState(g.targetId,v?"current":"not-current")}if(m){o.push(m);const v=Im.As(g.targetId,m);l.push(v)}})))})),await Promise.all(u),s.Pu.H_(o),await(async function(g,m){const T=Re(g);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",(v=>ie.forEach(m,(S=>ie.forEach(S.Es,(w=>T.persistence.referenceDelegate.addReference(v,S.targetId,w))).next((()=>ie.forEach(S.ds,(w=>T.persistence.referenceDelegate.removeReference(v,S.targetId,w)))))))))}catch(v){if(!wa(v))throw v;de(Rm,"Failed to update sequence numbers: "+v)}for(const v of m){const S=v.targetId;if(!v.fromCache){const w=T.Ms.get(S),O=w.snapshotVersion,G=w.withLastLimboFreeSnapshotVersion(O);T.Ms=T.Ms.insert(S,G)}}})(s.localStore,l))}async function pD(n,e){const t=Re(n);if(!t.currentUser.isEqual(e)){de(Vm,"User change. New user:",e.toKey());const s=await a0(t.localStore,e);t.currentUser=e,(function(l,u){l.mu.forEach((d=>{d.forEach((g=>{g.reject(new ce(Z.CANCELLED,u))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await pu(t,s.Ls)}}function mD(n,e){const t=Re(n),s=t.Au.get(e);if(s&&s.hu)return Le().add(s.key);{let o=Le();const l=t.Iu.get(e);if(!l)return o;for(const u of l){const d=t.Tu.get(u);o=o.unionWith(d.view.nu)}return o}}function w0(n){const e=Re(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=A0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=mD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=cD.bind(null,e),e.Pu.H_=Z1.bind(null,e.eventManager),e.Pu.yu=j1.bind(null,e.eventManager),e}function gD(n){const e=Re(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=fD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=dD.bind(null,e),e}class If{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Qf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return v1(this.persistence,new y1,e.initialUser,this.serializer)}Cu(e){return new o0(Cm.mi,this.serializer)}Du(e){return new w1}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}If.provider={build:()=>new If};class yD extends If{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Qe(this.persistence.referenceDelegate instanceof Af,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new n1(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?_n.withCacheSize(this.cacheSizeBytes):_n.DEFAULT;return new o0((s=>Af.mi(s,t)),this.serializer)}}class Yp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Gv(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=pD.bind(null,this.syncEngine),await $1(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new W1})()}createDatastore(e){const t=Qf(e.databaseInfo.databaseId),s=(function(l){return new P1(l)})(e.databaseInfo);return(function(l,u,d,g){return new k1(l,u,d,g)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,o,l,u,d){return new O1(s,o,l,u,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>Gv(this.syncEngine,t,0)),(function(){return kv.v()?new kv:new N1})())}createSyncEngine(e,t){return(function(o,l,u,d,g,m,T){const v=new iD(o,l,u,d,g,m);return T&&(v.gu=!0),v})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const l=Re(o);de(ro,"RemoteStore shutting down."),l.Ea.add(5),await hu(l),l.Aa.shutdown(),l.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Yp.provider={build:()=>new Yp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):us("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gr="FirestoreClient";class _D{constructor(e,t,s,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=o,this.user=tn.UNAUTHENTICATED,this.clientId=dm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,(async u=>{de(gr,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(s,(u=>(de(gr,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new as;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=Pm(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Ap(n,e){n.asyncQueue.verifyOperationInProgress(),de(gr,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener((async o=>{s.isEqual(o)||(await a0(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function zv(n,e){n.asyncQueue.verifyOperationInProgress();const t=await TD(n);de(gr,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((s=>Ov(e.remoteStore,s))),n.setAppCheckTokenChangeListener(((s,o)=>Ov(e.remoteStore,o))),n._onlineComponents=e}async function TD(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){de(gr,"Using user provided OfflineComponentProvider");try{await Ap(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===Z.FAILED_PRECONDITION||o.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;ga("Error using user provided cache. Falling back to memory cache: "+t),await Ap(n,new If)}}else de(gr,"Using default OfflineComponentProvider"),await Ap(n,new yD(void 0));return n._offlineComponents}async function M0(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(de(gr,"Using user provided OnlineComponentProvider"),await zv(n,n._uninitializedComponentsProvider._online)):(de(gr,"Using default OnlineComponentProvider"),await zv(n,new Yp))),n._onlineComponents}function vD(n){return M0(n).then((e=>e.syncEngine))}async function D0(n){const e=await M0(n),t=e.eventManager;return t.onListen=sD.bind(null,e.syncEngine),t.onUnlisten=aD.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=rD.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=lD.bind(null,e.syncEngine),t}function ED(n,e,t={}){const s=new as;return n.asyncQueue.enqueueAndForget((async()=>(function(l,u,d,g,m){const T=new N0({next:S=>{T.Nu(),u.enqueueAndForget((()=>_0(l,v)));const w=S.docs.has(d);!w&&S.fromCache?m.reject(new ce(Z.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&S.fromCache&&g&&g.source==="server"?m.reject(new ce(Z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(S)},error:S=>m.reject(S)}),v=new T0(_m(d.path),T,{includeMetadataChanges:!0,qa:!0});return y0(l,v)})(await D0(n),n.asyncQueue,e,t,s))),s.promise}function SD(n,e,t={}){const s=new as;return n.asyncQueue.enqueueAndForget((async()=>(function(l,u,d,g,m){const T=new N0({next:S=>{T.Nu(),u.enqueueAndForget((()=>_0(l,v))),S.fromCache&&g.source==="server"?m.reject(new ce(Z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(S)},error:S=>m.reject(S)}),v=new T0(d,T,{includeMetadataChanges:!0,qa:!0});return y0(l,v)})(await D0(n),n.asyncQueue,e,t,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b0(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P0="firestore.googleapis.com",Yv=!0;class Kv{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ce(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=P0,this.ssl=Yv}else this.host=e.host,this.ssl=e.ssl??Yv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=r0;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<e1)throw new ce(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ON("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=b0(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ce(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ce(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ce(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Wf{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Kv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ce(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ce(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Kv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new NN;switch(s.type){case"firstParty":return new PN(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ce(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=Jv.get(t);s&&(de("ComponentProvider","Removing Datastore"),Jv.delete(t),s.terminate())})(this),Promise.resolve()}}function AD(n,e,t,s={}){var m;n=cs(n,Wf);const o=Aa(e),l=n._getSettings(),u={...l,emulatorOptions:n._getEmulatorOptions()},d=`${e}:${t}`;o&&(eA(`https://${d}`),tA("Firestore",!0)),l.host!==P0&&l.host!==d&&ga("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...l,host:d,ssl:o,emulatorOptions:s};if(!no(g,u)&&(n._setSettings(g),s.mockUserToken)){let T,v;if(typeof s.mockUserToken=="string")T=s.mockUserToken,v=tn.MOCK_USER;else{T=jR(s.mockUserToken,(m=n._app)==null?void 0:m.options.projectId);const S=s.mockUserToken.sub||s.mockUserToken.user_id;if(!S)throw new ce(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new tn(S)}n._authCredentials=new MN(new mA(T,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new vr(this.firestore,e,this._query)}}class St{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new lr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new St(this.firestore,e,this._key)}toJSON(){return{type:St._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(cu(t,St._jsonSchema))return new St(e,s||null,new _e(st.fromString(t.referencePath)))}}St._jsonSchemaVersion="firestore/documentReference/1.0",St._jsonSchema={type:Vt("string",St._jsonSchemaVersion),referencePath:Vt("string")};class lr extends vr{constructor(e,t,s){super(e,t,_m(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new St(this.firestore,null,new _e(e))}withConverter(e){return new lr(this.firestore,e,this._path)}}function CD(n,e,...t){if(n=cn(n),gA("collection","path",e),n instanceof Wf){const s=st.fromString(e,...t);return ov(s),new lr(n,null,s)}{if(!(n instanceof St||n instanceof lr))throw new ce(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(st.fromString(e,...t));return ov(s),new lr(n.firestore,null,s)}}function Sa(n,e,...t){if(n=cn(n),arguments.length===1&&(e=dm.newId()),gA("doc","path",e),n instanceof Wf){const s=st.fromString(e,...t);return rv(s),new St(n,null,new _e(s))}{if(!(n instanceof St||n instanceof lr))throw new ce(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(st.fromString(e,...t));return rv(s),new St(n.firestore,n instanceof lr?n.converter:null,new _e(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qv="AsyncQueue";class $v{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new u0(this,"async_queue_retry"),this._c=()=>{const s=Sp();s&&de(Qv,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=Sp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Sp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new as;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!wa(e))throw e;de(Qv,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,us("INTERNAL UNHANDLED ERROR: ",Xv(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=bm.createAndSchedule(this,e,t,s,(l=>this.hc(l)));return this.tc.push(o),o}uc(){this.nc&&Ee(47125,{Pc:Xv(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Xv(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class mu extends Wf{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new $v,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new $v(e),this._firestoreClient=void 0,await e}}}function ID(n,e){const t=typeof n=="object"?n:rA(),s=typeof n=="string"?n:yf,o=cm(t,"firestore").getImmediate({identifier:s});if(!o._initialized){const l=WR("firestore");l&&AD(o,...l)}return o}function km(n){if(n._terminated)throw new ce(Z.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||RD(n),n._firestoreClient}function RD(n){var s,o,l;const e=n._freezeSettings(),t=(function(d,g,m,T){return new $N(d,g,m,T.host,T.ssl,T.experimentalForceLongPolling,T.experimentalAutoDetectLongPolling,b0(T.experimentalLongPollingOptions),T.useFetchStreams,T.isUsingEmulator)})(n._databaseId,((s=n._app)==null?void 0:s.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new _D(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(d){const g=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(g),_online:g}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Hn(Zt.fromBase64String(e))}catch(t){throw new ce(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Hn(Zt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Hn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(cu(e,Hn._jsonSchema))return Hn.fromBase64String(e.bytes)}}Hn._jsonSchemaVersion="firestore/bytes/1.0",Hn._jsonSchema={type:Vt("string",Hn._jsonSchemaVersion),bytes:Vt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zf{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ce(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Wt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ce(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ce(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ke(this._lat,e._lat)||ke(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ui._jsonSchemaVersion}}static fromJSON(e){if(cu(e,Ui._jsonSchema))return new Ui(e.latitude,e.longitude)}}Ui._jsonSchemaVersion="firestore/geoPoint/1.0",Ui._jsonSchema={type:Vt("string",Ui._jsonSchemaVersion),latitude:Vt("number"),longitude:Vt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ki._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(cu(e,ki._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new ki(e.vectorValues);throw new ce(Z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ki._jsonSchemaVersion="firestore/vectorValue/1.0",ki._jsonSchema={type:Vt("string",ki._jsonSchemaVersion),vectorValues:Vt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wD=/^__.*__$/;class ND{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new Tr(e,this.data,this.fieldMask,t,this.fieldTransforms):new fu(e,this.data,t,this.fieldTransforms)}}class x0{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Tr(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function V0(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ee(40011,{Ac:n})}}class Lm{constructor(e,t,s,o,l,u){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=o,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Lm({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Rf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(V0(this.Ac)&&wD.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class MD{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Qf(e)}Cc(e,t,s,o=!1){return new Lm({Ac:e,methodName:t,Dc:s,path:Wt.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Om(n){const e=n._freezeSettings(),t=Qf(n._databaseId);return new MD(n._databaseId,!!e.ignoreUndefinedProperties,t)}function DD(n,e,t,s,o,l={}){const u=n.Cc(l.merge||l.mergeFields?2:0,e,t,o);Fm("Data must be an object, but it was:",u,s);const d=U0(s,u);let g,m;if(l.merge)g=new Mn(u.fieldMask),m=u.fieldTransforms;else if(l.mergeFields){const T=[];for(const v of l.mergeFields){const S=Kp(e,v,t);if(!u.contains(S))throw new ce(Z.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);L0(T,S)||T.push(S)}g=new Mn(T),m=u.fieldTransforms.filter((v=>g.covers(v.field)))}else g=null,m=u.fieldTransforms;return new ND(new Tn(d),g,m)}class ed extends jf{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ed}}class qm extends jf{constructor(e,t){super(e),this.Fc=t}_toFieldTransform(e){const t=new ou(e.serializer,BA(e.serializer,this.Fc));return new vM(e.path,t)}isEqual(e){return e instanceof qm&&this.Fc===e.Fc}}function bD(n,e,t,s){const o=n.Cc(1,e,t);Fm("Data must be an object, but it was:",o,s);const l=[],u=Tn.empty();_r(s,((g,m)=>{const T=Bm(e,g,t);m=cn(m);const v=o.yc(T);if(m instanceof ed)l.push(T);else{const S=gu(m,v);S!=null&&(l.push(T),u.set(T,S))}}));const d=new Mn(l);return new x0(u,d,o.fieldTransforms)}function PD(n,e,t,s,o,l){const u=n.Cc(1,e,t),d=[Kp(e,s,t)],g=[o];if(l.length%2!=0)throw new ce(Z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<l.length;S+=2)d.push(Kp(e,l[S])),g.push(l[S+1]);const m=[],T=Tn.empty();for(let S=d.length-1;S>=0;--S)if(!L0(m,d[S])){const w=d[S];let O=g[S];O=cn(O);const G=u.yc(w);if(O instanceof ed)m.push(w);else{const F=gu(O,G);F!=null&&(m.push(w),T.set(w,F))}}const v=new Mn(m);return new x0(T,v,u.fieldTransforms)}function xD(n,e,t,s=!1){return gu(t,n.Cc(s?4:3,e))}function gu(n,e){if(k0(n=cn(n)))return Fm("Unsupported field value:",e,n),U0(n,e);if(n instanceof jf)return(function(s,o){if(!V0(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,o){const l=[];let u=0;for(const d of s){let g=gu(d,o.wc(u));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),u++}return{arrayValue:{values:l}}})(n,e)}return(function(s,o){if((s=cn(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return BA(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=ut.fromDate(s);return{timestampValue:Sf(o.serializer,l)}}if(s instanceof ut){const l=new ut(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Sf(o.serializer,l)}}if(s instanceof Ui)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Hn)return{bytesValue:ZA(o.serializer,s._byteString)};if(s instanceof St){const l=o.databaseId,u=s.firestore._databaseId;if(!u.isEqual(l))throw o.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Sm(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof ki)return(function(u,d){return{mapValue:{fields:{[IA]:{stringValue:RA},[_f]:{arrayValue:{values:u.toArray().map((m=>{if(typeof m!="number")throw d.Sc("VectorValues must only contain numeric values.");return Tm(d.serializer,m)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${qf(s)}`)})(n,e)}function U0(n,e){const t={};return TA(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):_r(n,((s,o)=>{const l=gu(o,e.mc(s));l!=null&&(t[s]=l)})),{mapValue:{fields:t}}}function k0(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ut||n instanceof Ui||n instanceof Hn||n instanceof St||n instanceof jf||n instanceof ki)}function Fm(n,e,t){if(!k0(t)||!yA(t)){const s=qf(t);throw s==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+s)}}function Kp(n,e,t){if((e=cn(e))instanceof Zf)return e._internalPath;if(typeof e=="string")return Bm(n,e);throw Rf("Field path arguments must be of type string or ",n,!1,void 0,t)}const VD=new RegExp("[~\\*/\\[\\]]");function Bm(n,e,t){if(e.search(VD)>=0)throw Rf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Zf(...e.split("."))._internalPath}catch{throw Rf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Rf(n,e,t,s,o){const l=s&&!s.isEmpty(),u=o!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let g="";return(l||u)&&(g+=" (found",l&&(g+=` in field ${s}`),u&&(g+=` in document ${o}`),g+=")"),new ce(Z.INVALID_ARGUMENT,d+n+g)}function L0(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0{constructor(e,t,s,o,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new St(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new UD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Gm("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class UD extends O0{data(){return super.data()}}function Gm(n,e){return typeof e=="string"?Bm(n,e):e instanceof Zf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kD(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ce(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Hm{}class zm extends Hm{}function LD(n,e,...t){let s=[];e instanceof Hm&&s.push(e),s=s.concat(t),(function(l){const u=l.filter((g=>g instanceof Ym)).length,d=l.filter((g=>g instanceof Jm)).length;if(u>1||u>0&&d>0)throw new ce(Z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)n=o._apply(n);return n}class Jm extends zm{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new Jm(e,t,s)}_apply(e){const t=this._parse(e);return q0(e._query,t),new vr(e.firestore,e.converter,Lp(e._query,t))}_parse(e){const t=Om(e.firestore);return(function(l,u,d,g,m,T,v){let S;if(m.isKeyField()){if(T==="array-contains"||T==="array-contains-any")throw new ce(Z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on documentId().`);if(T==="in"||T==="not-in"){Zv(v,T);const O=[];for(const G of v)O.push(Wv(g,l,G));S={arrayValue:{values:O}}}else S=Wv(g,l,v)}else T!=="in"&&T!=="not-in"&&T!=="array-contains-any"||Zv(v,T),S=xD(d,u,v,T==="in"||T==="not-in");return xt.create(m,T,S)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class Ym extends Hm{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Ym(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:ai.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,l){let u=o;const d=l.getFlattenedFilters();for(const g of d)q0(u,g),u=Lp(u,g)})(e._query,t),new vr(e.firestore,e.converter,Lp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Km extends zm{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Km(e,t)}_apply(e){const t=(function(o,l,u){if(o.startAt!==null)throw new ce(Z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new ce(Z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new iu(l,u)})(e._query,this._field,this._direction);return new vr(e.firestore,e.converter,(function(o,l){const u=o.explicitOrderBy.concat([l]);return new Na(o.path,o.collectionGroup,u,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,t))}}function OD(n,e="asc"){const t=e,s=Gm("orderBy",n);return Km._create(s,t)}class Qm extends zm{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new Qm(e,t,s)}_apply(e){return new vr(e.firestore,e.converter,vf(e._query,this._limit,this._limitType))}}function qD(n){return Qm._create("limit",n,"F")}function Wv(n,e,t){if(typeof(t=cn(t))=="string"){if(t==="")throw new ce(Z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!VA(e)&&t.indexOf("/")!==-1)throw new ce(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(st.fromString(t));if(!_e.isDocumentKey(s))throw new ce(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return pv(n,new _e(s))}if(t instanceof St)return pv(n,t._key);throw new ce(Z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${qf(t)}.`)}function Zv(n,e){if(!Array.isArray(n)||n.length===0)throw new ce(Z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function q0(n,e){const t=(function(o,l){for(const u of o)for(const d of u.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ce(Z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ce(Z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class FD{convertValue(e,t="none"){switch(pr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Et(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(hr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ee(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return _r(e,((o,l)=>{s[o]=this.convertValue(l,t)})),s}convertVectorValue(e){var s,o,l;const t=(l=(o=(s=e.fields)==null?void 0:s[_f].arrayValue)==null?void 0:o.values)==null?void 0:l.map((u=>Et(u.doubleValue)));return new ki(t)}convertGeoPoint(e){return new Ui(Et(e.latitude),Et(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Gf(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(eu(e));default:return null}}convertTimestamp(e){const t=dr(e);return new ut(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=st.fromString(e);Qe(s0(s),9688,{name:e});const o=new tu(s.get(1),s.get(3)),l=new _e(s.popFirst(5));return o.isEqual(t)||us(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BD(n,e,t){let s;return s=n?n.toFirestore(e):e,s}class zl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class to extends O0{constructor(e,t,s,o,l,u){super(e,t,s,o,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new af(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Gm("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ce(Z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=to._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}to._jsonSchemaVersion="firestore/documentSnapshot/1.0",to._jsonSchema={type:Vt("string",to._jsonSchemaVersion),bundleSource:Vt("string","DocumentSnapshot"),bundleName:Vt("string"),bundle:Vt("string")};class af extends to{data(e={}){return super.data(e)}}class la{constructor(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new zl(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new af(this._firestore,this._userDataWriter,s.key,s,new zl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ce(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let u=0;return o._snapshot.docChanges.map((d=>{const g=new af(o._firestore,o._userDataWriter,d.doc.key,d.doc,new zl(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);return d.doc,{type:"added",doc:g,oldIndex:-1,newIndex:u++}}))}{let u=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const g=new af(o._firestore,o._userDataWriter,d.doc.key,d.doc,new zl(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);let m=-1,T=-1;return d.type!==0&&(m=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),d.type!==1&&(u=u.add(d.doc),T=u.indexOf(d.doc.key)),{type:GD(d.type),doc:g,oldIndex:m,newIndex:T}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ce(Z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=la._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=dm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function GD(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ee(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $m(n){n=cs(n,St);const e=cs(n.firestore,mu);return ED(km(e),n._key).then((t=>JD(e,n,t)))}la._jsonSchemaVersion="firestore/querySnapshot/1.0",la._jsonSchema={type:Vt("string",la._jsonSchemaVersion),bundleSource:Vt("string","QuerySnapshot"),bundleName:Vt("string"),bundle:Vt("string")};class F0 extends FD{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new St(this.firestore,null,t)}}function HD(n){n=cs(n,vr);const e=cs(n.firestore,mu),t=km(e),s=new F0(e);return kD(n._query),SD(t,n._query).then((o=>new la(e,s,n,o)))}function zD(n,e,t){n=cs(n,St);const s=cs(n.firestore,mu),o=BD(n.converter,e);return G0(s,[DD(Om(s),"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,xi.none())])}function B0(n,e,t,...s){n=cs(n,St);const o=cs(n.firestore,mu),l=Om(o);let u;return u=typeof(e=cn(e))=="string"||e instanceof Zf?PD(l,"updateDoc",n._key,e,t,s):bD(l,"updateDoc",n._key,e),G0(o,[u.toMutation(n._key,xi.exists(!0))])}function G0(n,e){return(function(s,o){const l=new as;return s.asyncQueue.enqueueAndForget((async()=>uD(await vD(s),o,l))),l.promise})(km(n),e)}function JD(n,e,t){const s=t.docs.get(e._key),o=new F0(n);return new to(n,o,e._key,s,new zl(t.hasPendingWrites,t.fromCache),e.converter)}function jv(n){return new qm("increment",n)}(function(e,t=!0){(function(o){Ia=o})(Ca),ma(new io("firestore",((s,{instanceIdentifier:o,options:l})=>{const u=s.getProvider("app").getImmediate(),d=new mu(new DN(s.getProvider("auth-internal")),new xN(u,s.getProvider("app-check-internal")),(function(m,T){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new ce(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new tu(m.options.projectId,T)})(u,o),u);return l={useFetchStreams:t,...l},d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),or(tv,nv,e),or(tv,nv,"esm2020")})();function H0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const YD=H0,z0=new lu("auth","Firebase",H0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wf=new lm("@firebase/auth");function KD(n,...e){wf.logLevel<=Ue.WARN&&wf.warn(`Auth (${Ca}): ${n}`,...e)}function lf(n,...e){wf.logLevel<=Ue.ERROR&&wf.error(`Auth (${Ca}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ds(n,...e){throw Xm(n,...e)}function Li(n,...e){return Xm(n,...e)}function J0(n,e,t){const s={...YD(),[e]:t};return new lu("auth","Firebase",s).create(e,{appName:n.name})}function ur(n){return J0(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Xm(n,...e){if(typeof n!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=n.name),n._errorFactory.create(t,...s)}return z0.create(n,...e)}function Se(n,e,...t){if(!n)throw Xm(e,...t)}function rs(n){const e="INTERNAL ASSERTION FAILED: "+n;throw lf(e),new Error(e)}function hs(n,e){n||rs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qp(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function QD(){return eE()==="http:"||eE()==="https:"}function eE(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $D(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(QD()||rw()||"connection"in navigator)?navigator.onLine:!0}function XD(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu{constructor(e,t){this.shortDelay=e,this.longDelay=t,hs(t>e,"Short delay should be less than long delay!"),this.isMobile=nw()||ow()}get(){return $D()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wm(n,e){hs(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y0{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;rs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;rs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;rs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZD=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],jD=new yu(3e4,6e4);function td(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Da(n,e,t,s,o={}){return K0(n,o,async()=>{let l={},u={};s&&(e==="GET"?u=s:l={body:JSON.stringify(s)});const d=uu({key:n.config.apiKey,...u}).slice(1),g=await n._getAdditionalHeaders();g["Content-Type"]="application/json",n.languageCode&&(g["X-Firebase-Locale"]=n.languageCode);const m={method:e,headers:g,...l};return sw()||(m.referrerPolicy="no-referrer"),n.emulatorConfig&&Aa(n.emulatorConfig.host)&&(m.credentials="include"),Y0.fetch()(await $0(n,n.config.apiHost,t,d),m)})}async function K0(n,e,t){n._canInitEmulator=!1;const s={...WD,...e};try{const o=new eb(n),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const u=await l.json();if("needConfirmation"in u)throw ef(n,"account-exists-with-different-credential",u);if(l.ok&&!("errorMessage"in u))return u;{const d=l.ok?u.errorMessage:u.error.message,[g,m]=d.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw ef(n,"credential-already-in-use",u);if(g==="EMAIL_EXISTS")throw ef(n,"email-already-in-use",u);if(g==="USER_DISABLED")throw ef(n,"user-disabled",u);const T=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw J0(n,T,m);ds(n,T)}}catch(o){if(o instanceof ms)throw o;ds(n,"network-request-failed",{message:String(o)})}}async function Q0(n,e,t,s,o={}){const l=await Da(n,e,t,s,o);return"mfaPendingCredential"in l&&ds(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function $0(n,e,t,s){const o=`${e}${t}?${s}`,l=n,u=l.config.emulator?Wm(n.config,o):`${n.config.apiScheme}://${o}`;return ZD.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(u).toString():u}class eb{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(Li(this.auth,"network-request-failed")),jD.get())})}}function ef(n,e,t){const s={appName:n.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const o=Li(n,e,s);return o.customData._tokenResponse=t,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tb(n,e){return Da(n,"POST","/v1/accounts:delete",e)}async function Nf(n,e){return Da(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xl(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function nb(n,e=!1){const t=cn(n),s=await t.getIdToken(e),o=Zm(s);Se(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,u=l==null?void 0:l.sign_in_provider;return{claims:o,token:s,authTime:Xl(Cp(o.auth_time)),issuedAtTime:Xl(Cp(o.iat)),expirationTime:Xl(Cp(o.exp)),signInProvider:u||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Cp(n){return Number(n)*1e3}function Zm(n){const[e,t,s]=n.split(".");if(e===void 0||t===void 0||s===void 0)return lf("JWT malformed, contained fewer than 3 sections"),null;try{const o=XS(t);return o?JSON.parse(o):(lf("Failed to decode base64 JWT payload"),null)}catch(o){return lf("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function tE(n){const e=Zm(n);return Se(e,"internal-error"),Se(typeof e.exp<"u","internal-error"),Se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function au(n,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof ms&&ib(s)&&n.auth.currentUser===n&&await n.auth.signOut(),s}}function ib({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sb{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xl(this.lastLoginAt),this.creationTime=Xl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mf(n){var v;const e=n.auth,t=await n.getIdToken(),s=await au(n,Nf(e,{idToken:t}));Se(s==null?void 0:s.users.length,e,"internal-error");const o=s.users[0];n._notifyReloadListener(o);const l=(v=o.providerUserInfo)!=null&&v.length?X0(o.providerUserInfo):[],u=ob(n.providerData,l),d=n.isAnonymous,g=!(n.email&&o.passwordHash)&&!(u!=null&&u.length),m=d?g:!1,T={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new $p(o.createdAt,o.lastLoginAt),isAnonymous:m};Object.assign(n,T)}async function rb(n){const e=cn(n);await Mf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function ob(n,e){return[...n.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function X0(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ab(n,e){const t=await K0(n,{},async()=>{const s=uu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=n.config,u=await $0(n,o,"/v1/token",`key=${l}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:d,body:s};return n.emulatorConfig&&Aa(n.emulatorConfig.host)&&(g.credentials="include"),Y0.fetch()(u,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function lb(n,e){return Da(n,"POST","/v2/accounts:revokeToken",td(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Se(e.idToken,"internal-error"),Se(typeof e.idToken<"u","internal-error"),Se(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):tE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Se(e.length!==0,"internal-error");const t=tE(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:o,expiresIn:l}=await ab(e,t);this.updateTokensAndExpiration(s,o,Number(l))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:o,expirationTime:l}=t,u=new ua;return s&&(Se(typeof s=="string","internal-error",{appName:e}),u.refreshToken=s),o&&(Se(typeof o=="string","internal-error",{appName:e}),u.accessToken=o),l&&(Se(typeof l=="number","internal-error",{appName:e}),u.expirationTime=l),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ua,this.toJSON())}_performRefresh(){return rs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zs(n,e){Se(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class oi{constructor({uid:e,auth:t,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new sb(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new $p(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await au(this,this.stsTokenManager.getToken(this.auth,e));return Se(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return nb(this,e)}reload(){return rb(this)}_assign(e){this!==e&&(Se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new oi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await Mf(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ri(this.auth.app))return Promise.reject(ur(this.auth));const e=await this.getIdToken();return await au(this,tb(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,o=t.email??void 0,l=t.phoneNumber??void 0,u=t.photoURL??void 0,d=t.tenantId??void 0,g=t._redirectEventId??void 0,m=t.createdAt??void 0,T=t.lastLoginAt??void 0,{uid:v,emailVerified:S,isAnonymous:w,providerData:O,stsTokenManager:G}=t;Se(v&&G,e,"internal-error");const F=ua.fromJSON(this.name,G);Se(typeof v=="string",e,"internal-error"),Zs(s,e.name),Zs(o,e.name),Se(typeof S=="boolean",e,"internal-error"),Se(typeof w=="boolean",e,"internal-error"),Zs(l,e.name),Zs(u,e.name),Zs(d,e.name),Zs(g,e.name),Zs(m,e.name),Zs(T,e.name);const $=new oi({uid:v,auth:e,email:o,emailVerified:S,displayName:s,isAnonymous:w,photoURL:u,phoneNumber:l,tenantId:d,stsTokenManager:F,createdAt:m,lastLoginAt:T});return O&&Array.isArray(O)&&($.providerData=O.map(te=>({...te}))),g&&($._redirectEventId=g),$}static async _fromIdTokenResponse(e,t,s=!1){const o=new ua;o.updateFromServerResponse(t);const l=new oi({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await Mf(l),l}static async _fromGetAccountInfoResponse(e,t,s){const o=t.users[0];Se(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?X0(o.providerUserInfo):[],u=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),d=new ua;d.updateFromIdToken(s);const g=new oi({uid:o.localId,auth:e,stsTokenManager:d,isAnonymous:u}),m={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new $p(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(g,m),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nE=new Map;function os(n){hs(n instanceof Function,"Expected a class definition");let e=nE.get(n);return e?(hs(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,nE.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}W0.type="NONE";const iE=W0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uf(n,e,t){return`firebase:${n}:${e}:${t}`}class ca{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:o,name:l}=this.auth;this.fullUserKey=uf(this.userKey,o.apiKey,l),this.fullPersistenceKey=uf("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Nf(this.auth,{idToken:e}).catch(()=>{});return t?oi._fromGetAccountInfoResponse(this.auth,t,e):null}return oi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new ca(os(iE),e,s);const o=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let l=o[0]||os(iE);const u=uf(s,e.config.apiKey,e.name);let d=null;for(const m of t)try{const T=await m._get(u);if(T){let v;if(typeof T=="string"){const S=await Nf(e,{idToken:T}).catch(()=>{});if(!S)break;v=await oi._fromGetAccountInfoResponse(e,S,T)}else v=oi._fromJSON(e,T);m!==l&&(d=v),l=m;break}}catch{}const g=o.filter(m=>m._shouldAllowMigration);return!l._shouldAllowMigration||!g.length?new ca(l,e,s):(l=g[0],d&&await l._set(u,d.toJSON()),await Promise.all(t.map(async m=>{if(m!==l)try{await m._remove(u)}catch{}})),new ca(l,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sE(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(tC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Z0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(iC(e))return"Blackberry";if(sC(e))return"Webos";if(j0(e))return"Safari";if((e.includes("chrome/")||eC(e))&&!e.includes("edge/"))return"Chrome";if(nC(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=n.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function Z0(n=rn()){return/firefox\//i.test(n)}function j0(n=rn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function eC(n=rn()){return/crios\//i.test(n)}function tC(n=rn()){return/iemobile/i.test(n)}function nC(n=rn()){return/android/i.test(n)}function iC(n=rn()){return/blackberry/i.test(n)}function sC(n=rn()){return/webos/i.test(n)}function jm(n=rn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function ub(n=rn()){var e;return jm(n)&&!!((e=window.navigator)!=null&&e.standalone)}function cb(){return aw()&&document.documentMode===10}function rC(n=rn()){return jm(n)||nC(n)||sC(n)||iC(n)||/windows phone/i.test(n)||tC(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oC(n,e=[]){let t;switch(n){case"Browser":t=sE(rn());break;case"Worker":t=`${sE(rn())}-${n}`;break;default:t=n}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ca}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fb{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=l=>new Promise((u,d)=>{try{const g=e(l);u(g)}catch(g){d(g)}});s.onAbort=t,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function db(n,e={}){return Da(n,"GET","/v2/passwordPolicy",td(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hb=6;class pb{constructor(e){var s;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??hb,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mb{constructor(e,t,s,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new rE(this),this.idTokenSubscription=new rE(this),this.beforeStateQueue=new fb(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=z0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=os(t)),this._initializationPromise=this.queue(async()=>{var s,o,l;if(!this._deleted&&(this.persistenceManager=await ca.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Nf(this,{idToken:e}),s=await oi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(ri(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(l=this.redirectUser)==null?void 0:l._redirectEventId,d=s==null?void 0:s._redirectEventId,g=await this.tryRedirectSignIn(e);(!u||u===d)&&(g!=null&&g.user)&&(s=g.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Mf(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=XD()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ri(this.app))return Promise.reject(ur(this));const t=e?cn(e):null;return t&&Se(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ri(this.app)?Promise.reject(ur(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ri(this.app)?Promise.reject(ur(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(os(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await db(this),t=new pb(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new lu("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await lb(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&os(e)||this._popupRedirectResolver;Se(t,this,"argument-error"),this.redirectPersistenceManager=await ca.create(this,[os(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let u=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Se(d,this,"internal-error"),d.then(()=>{u||l(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,s,o);return()=>{u=!0,g()}}else{const g=e.addObserver(t);return()=>{u=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=oC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var t;if(ri(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&KD(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function nd(n){return cn(n)}class rE{constructor(e){this.auth=e,this.observer=null,this.addObserver=mw(t=>this.observer=t)}get next(){return Se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function gb(n){eg=n}function yb(n){return eg.loadJS(n)}function _b(){return eg.gapiScript}function Tb(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vb(n,e){const t=cm(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(no(l,e??{}))return o;ds(o,"already-initialized")}return t.initialize({options:e})}function Eb(n,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(os);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function Sb(n,e,t){const s=nd(n);Se(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,l=aC(e),{host:u,port:d}=Ab(e),g=d===null?"":`:${d}`,m={url:`${l}//${u}${g}/`},T=Object.freeze({host:u,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Se(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Se(no(m,s.config.emulator)&&no(T,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=m,s.emulatorConfig=T,s.settings.appVerificationDisabledForTesting=!0,Aa(u)?(eA(`${l}//${u}${g}`),tA("Auth",!0)):Cb()}function aC(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function Ab(n){const e=aC(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const l=o[1];return{host:l,port:oE(s.substr(l.length+1))}}else{const[l,u]=s.split(":");return{host:l,port:oE(u)}}}function oE(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function Cb(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return rs("not implemented")}_getIdTokenResponse(e){return rs("not implemented")}_linkToIdToken(e,t){return rs("not implemented")}_getReauthenticationResolver(e){return rs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fa(n,e){return Q0(n,"POST","/v1/accounts:signInWithIdp",td(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ib="http://localhost";class oo extends lC{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new oo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ds("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...l}=t;if(!s||!o)return null;const u=new oo(s,o);return u.idToken=l.idToken||void 0,u.accessToken=l.accessToken||void 0,u.secret=l.secret,u.nonce=l.nonce,u.pendingToken=l.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return fa(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,fa(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,fa(e,t)}buildRequest(){const e={requestUri:Ib,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=uu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u extends uC{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js extends _u{constructor(){super("facebook.com")}static credential(e){return oo._fromParams({providerId:js.PROVIDER_ID,signInMethod:js.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return js.credentialFromTaggedObject(e)}static credentialFromError(e){return js.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return js.credential(e.oauthAccessToken)}catch{return null}}}js.FACEBOOK_SIGN_IN_METHOD="facebook.com";js.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er extends _u{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return oo._fromParams({providerId:er.PROVIDER_ID,signInMethod:er.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return er.credentialFromTaggedObject(e)}static credentialFromError(e){return er.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return er.credential(t,s)}catch{return null}}}er.GOOGLE_SIGN_IN_METHOD="google.com";er.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr extends _u{constructor(){super("github.com")}static credential(e){return oo._fromParams({providerId:tr.PROVIDER_ID,signInMethod:tr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return tr.credentialFromTaggedObject(e)}static credentialFromError(e){return tr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return tr.credential(e.oauthAccessToken)}catch{return null}}}tr.GITHUB_SIGN_IN_METHOD="github.com";tr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr extends _u{constructor(){super("twitter.com")}static credential(e,t){return oo._fromParams({providerId:nr.PROVIDER_ID,signInMethod:nr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return nr.credentialFromTaggedObject(e)}static credentialFromError(e){return nr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return nr.credential(t,s)}catch{return null}}}nr.TWITTER_SIGN_IN_METHOD="twitter.com";nr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rb(n,e){return Q0(n,"POST","/v1/accounts:signUp",td(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,o=!1){const l=await oi._fromIdTokenResponse(e,s,o),u=aE(s);return new yr({user:l,providerId:u,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const o=aE(s);return new yr({user:e,providerId:o,_tokenResponse:s,operationType:t})}}function aE(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wb(n){var o;if(ri(n.app))return Promise.reject(ur(n));const e=nd(n);if(await e._initializationPromise,(o=e.currentUser)!=null&&o.isAnonymous)return new yr({user:e.currentUser,providerId:null,operationType:"signIn"});const t=await Rb(e,{returnSecureToken:!0}),s=await yr._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df extends ms{constructor(e,t,s,o){super(t.code,t.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,Df.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,o){return new Df(e,t,s,o)}}function cC(n,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Df._fromErrorAndOperation(n,l,e,s):l})}async function Nb(n,e,t=!1){const s=await au(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return yr._forOperation(n,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mb(n,e,t=!1){const{auth:s}=n;if(ri(s.app))return Promise.reject(ur(s));const o="reauthenticate";try{const l=await au(n,cC(s,o,e,n),t);Se(l.idToken,s,"internal-error");const u=Zm(l.idToken);Se(u,s,"internal-error");const{sub:d}=u;return Se(n.uid===d,s,"user-mismatch"),yr._forOperation(n,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&ds(s,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Db(n,e,t=!1){if(ri(n.app))return Promise.reject(ur(n));const s="signIn",o=await cC(n,s,e),l=await yr._fromIdTokenResponse(n,s,o);return t||await n._updateCurrentUser(l.user),l}function bb(n,e,t,s){return cn(n).onIdTokenChanged(e,t,s)}function Pb(n,e,t){return cn(n).beforeAuthStateChanged(e,t)}const bf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(bf,"1"),this.storage.removeItem(bf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xb=1e3,Vb=10;class dC extends fC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=rC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),o=this.localCache[t];s!==o&&e(t,o,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,d,g)=>{this.notifyListeners(u,g)});return}const s=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const u=this.storage.getItem(s);!t&&this.localCache[s]===u||this.notifyListeners(s,u)},l=this.storage.getItem(s);cb()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,Vb):o()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},xb)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}dC.type="LOCAL";const Ub=dC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC extends fC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}hC.type="SESSION";const pC=hC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kb(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const s=new id(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:o,data:l}=t.data,u=this.handlersMap[o];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const d=Array.from(u).map(async m=>m(t.origin,l)),g=await kb(d);t.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}id.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tg(n="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lb{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,u;return new Promise((d,g)=>{const m=tg("",20);o.port1.start();const T=setTimeout(()=>{g(new Error("unsupported_event"))},s);u={messageChannel:o,onMessage(v){const S=v;if(S.data.eventId===m)switch(S.data.status){case"ack":clearTimeout(T),l=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(S.data.response);break;default:clearTimeout(T),clearTimeout(l),g(new Error("invalid_response"));break}}},this.handlers.add(u),o.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[o.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oi(){return window}function Ob(n){Oi().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mC(){return typeof Oi().WorkerGlobalScope<"u"&&typeof Oi().importScripts=="function"}async function qb(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Fb(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function Bb(){return mC()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gC="firebaseLocalStorageDb",Gb=1,Pf="firebaseLocalStorage",yC="fbase_key";class Tu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function sd(n,e){return n.transaction([Pf],e?"readwrite":"readonly").objectStore(Pf)}function Hb(){const n=indexedDB.deleteDatabase(gC);return new Tu(n).toPromise()}function Xp(){const n=indexedDB.open(gC,Gb);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const s=n.result;try{s.createObjectStore(Pf,{keyPath:yC})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const s=n.result;s.objectStoreNames.contains(Pf)?e(s):(s.close(),await Hb(),e(await Xp()))})})}async function lE(n,e,t){const s=sd(n,!0).put({[yC]:e,value:t});return new Tu(s).toPromise()}async function zb(n,e){const t=sd(n,!1).get(e),s=await new Tu(t).toPromise();return s===void 0?null:s.value}function uE(n,e){const t=sd(n,!0).delete(e);return new Tu(t).toPromise()}const Jb=800,Yb=3;class _C{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Xp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>Yb)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return mC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=id._getInstance(Bb()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,s;if(this.activeServiceWorker=await qb(),!this.activeServiceWorker)return;this.sender=new Lb(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Fb()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Xp();return await lE(e,bf,"1"),await uE(e,bf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>lE(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>zb(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>uE(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=sd(o,!1).getAll();return new Tu(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Jb)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}_C.type="LOCAL";const Kb=_C;new yu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qb(n,e){return e?os(e):(Se(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng extends lC{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return fa(e,this._buildIdpRequest())}_linkToIdToken(e,t){return fa(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return fa(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function $b(n){return Db(n.auth,new ng(n),n.bypassAuthState)}function Xb(n){const{auth:e,user:t}=n;return Se(t,e,"internal-error"),Mb(t,new ng(n),n.bypassAuthState)}async function Wb(n){const{auth:e,user:t}=n;return Se(t,e,"internal-error"),Nb(t,new ng(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(e,t,s,o,l=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:o,tenantId:l,error:u,type:d}=e;if(u){this.reject(u);return}const g={auth:this.auth,requestUri:t,sessionId:s,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(g))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return $b;case"linkViaPopup":case"linkViaRedirect":return Wb;case"reauthViaPopup":case"reauthViaRedirect":return Xb;default:ds(this.auth,"internal-error")}}resolve(e){hs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){hs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zb=new yu(2e3,1e4);class ra extends TC{constructor(e,t,s,o,l){super(e,t,o,l),this.provider=s,this.authWindow=null,this.pollId=null,ra.currentPopupAction&&ra.currentPopupAction.cancel(),ra.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Se(e,this.auth,"internal-error"),e}async onExecution(){hs(this.filter.length===1,"Popup operations only handle one event");const e=tg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Li(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Li(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ra.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if((s=(t=this.authWindow)==null?void 0:t.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Li(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Zb.get())};e()}}ra.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jb="pendingRedirect",cf=new Map;class eP extends TC{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=cf.get(this.auth._key());if(!e){try{const s=await tP(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}cf.set(this.auth._key(),e)}return this.bypassAuthState||cf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function tP(n,e){const t=sP(e),s=iP(n);if(!await s._isAvailable())return!1;const o=await s._get(t)==="true";return await s._remove(t),o}function nP(n,e){cf.set(n._key(),e)}function iP(n){return os(n._redirectPersistence)}function sP(n){return uf(jb,n.config.apiKey,n.name)}async function rP(n,e,t=!1){if(ri(n.app))return Promise.reject(ur(n));const s=nd(n),o=Qb(s,e),u=await new eP(s,o,t).execute();return u&&!t&&(delete u.user._redirectEventId,await s._persistUserIfCurrent(u.user),await s._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oP=600*1e3;class aP{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!lP(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!vC(e)){const o=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";t.onError(Li(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=oP&&this.cachedEventUids.clear(),this.cachedEventUids.has(cE(e))}saveEventToCache(e){this.cachedEventUids.add(cE(e)),this.lastProcessedEventTime=Date.now()}}function cE(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function vC({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function lP(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return vC(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uP(n,e={}){return Da(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cP=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,fP=/^https?/;async function dP(n){if(n.config.emulator)return;const{authorizedDomains:e}=await uP(n);for(const t of e)try{if(hP(t))return}catch{}ds(n,"unauthorized-domain")}function hP(n){const e=Qp(),{protocol:t,hostname:s}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&s===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===s}if(!fP.test(t))return!1;if(cP.test(n))return s===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pP=new yu(3e4,6e4);function fE(){const n=Oi().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function mP(n){return new Promise((e,t)=>{var o,l,u;function s(){fE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{fE(),t(Li(n,"network-request-failed"))},timeout:pP.get()})}if((l=(o=Oi().gapi)==null?void 0:o.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((u=Oi().gapi)!=null&&u.load)s();else{const d=Tb("iframefcb");return Oi()[d]=()=>{gapi.load?s():t(Li(n,"network-request-failed"))},yb(`${_b()}?onload=${d}`).catch(g=>t(g))}}).catch(e=>{throw ff=null,e})}let ff=null;function gP(n){return ff=ff||mP(n),ff}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yP=new yu(5e3,15e3),_P="__/auth/iframe",TP="emulator/auth/iframe",vP={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},EP=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function SP(n){const e=n.config;Se(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Wm(e,TP):`https://${n.config.authDomain}/${_P}`,s={apiKey:e.apiKey,appName:n.name,v:Ca},o=EP.get(n.config.apiHost);o&&(s.eid=o);const l=n._getFrameworks();return l.length&&(s.fw=l.join(",")),`${t}?${uu(s).slice(1)}`}async function AP(n){const e=await gP(n),t=Oi().gapi;return Se(t,n,"internal-error"),e.open({where:document.body,url:SP(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:vP,dontclear:!0},s=>new Promise(async(o,l)=>{await s.restyle({setHideOnLeave:!1});const u=Li(n,"network-request-failed"),d=Oi().setTimeout(()=>{l(u)},yP.get());function g(){Oi().clearTimeout(d),o(s)}s.ping(g).then(g,()=>{l(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CP={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},IP=500,RP=600,wP="_blank",NP="http://localhost";class dE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function MP(n,e,t,s=IP,o=RP){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),u=Math.max((window.screen.availWidth-s)/2,0).toString();let d="";const g={...CP,width:s.toString(),height:o.toString(),top:l,left:u},m=rn().toLowerCase();t&&(d=eC(m)?wP:t),Z0(m)&&(e=e||NP,g.scrollbars="yes");const T=Object.entries(g).reduce((S,[w,O])=>`${S}${w}=${O},`,"");if(ub(m)&&d!=="_self")return DP(e||"",d),new dE(null);const v=window.open(e||"",d,T);Se(v,n,"popup-blocked");try{v.focus()}catch{}return new dE(v)}function DP(n,e){const t=document.createElement("a");t.href=n,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bP="__/auth/handler",PP="emulator/auth/handler",xP=encodeURIComponent("fac");async function hE(n,e,t,s,o,l){Se(n.config.authDomain,n,"auth-domain-config-required"),Se(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:s,v:Ca,eventId:o};if(e instanceof uC){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",pw(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[T,v]of Object.entries({}))u[T]=v}if(e instanceof _u){const T=e.getScopes().filter(v=>v!=="");T.length>0&&(u.scopes=T.join(","))}n.tenantId&&(u.tid=n.tenantId);const d=u;for(const T of Object.keys(d))d[T]===void 0&&delete d[T];const g=await n._getAppCheckToken(),m=g?`#${xP}=${encodeURIComponent(g)}`:"";return`${VP(n)}?${uu(d).slice(1)}${m}`}function VP({config:n}){return n.emulator?Wm(n,PP):`https://${n.authDomain}/${bP}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ip="webStorageSupport";class UP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=pC,this._completeRedirectFn=rP,this._overrideRedirectResult=nP}async _openPopup(e,t,s,o){var u;hs((u=this.eventManagers[e._key()])==null?void 0:u.manager,"_initialize() not called before _openPopup()");const l=await hE(e,t,s,Qp(),o);return MP(e,l,tg())}async _openRedirect(e,t,s,o){await this._originValidation(e);const l=await hE(e,t,s,Qp(),o);return Ob(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(hs(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await AP(e),s=new aP(e);return t.register("authEvent",o=>(Se(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Ip,{type:Ip},o=>{var u;const l=(u=o==null?void 0:o[0])==null?void 0:u[Ip];l!==void 0&&t(!!l),ds(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=dP(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return rC()||j0()||jm()}}const kP=UP;var pE="@firebase/auth",mE="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OP(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function qP(n){ma(new io("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:u,authDomain:d}=s.options;Se(u&&!u.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:u,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:oC(n)},m=new mb(s,o,l,g);return Eb(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),ma(new io("auth-internal",e=>{const t=nd(e.getProvider("auth").getImmediate());return(s=>new LP(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),or(pE,mE,OP(n)),or(pE,mE,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FP=300,BP=jS("authIdTokenMaxAge")||FP;let gE=null;const GP=n=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>BP)return;const o=t==null?void 0:t.token;gE!==o&&(gE=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function HP(n=rA()){const e=cm(n,"auth");if(e.isInitialized())return e.getImmediate();const t=vb(n,{popupRedirectResolver:kP,persistence:[Kb,Ub,pC]}),s=jS("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const u=GP(l.toString());Pb(t,u,()=>u(t.currentUser)),bb(t,d=>u(d))}}const o=WS("auth");return o&&Sb(t,`http://${o}`),t}function zP(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}gb({loadJS(n){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",n),s.onload=e,s.onerror=o=>{const l=Li("internal-error");l.customData=o,t(l)},s.type="text/javascript",s.charset="UTF-8",zP().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});qP("Browser");const JP={apiKey:"AIzaSyC8Ro6nGLkqXgDU0rTL_rKkuL3vEmJEhTw",authDomain:"photoquest-72441.firebaseapp.com",projectId:"photoquest-72441",storageBucket:"photoquest-72441.firebasestorage.app",messagingSenderId:"368649991850",appId:"1:368649991850:web:cb7e782e83239865f0c2d3",measurementId:"G-GM6GWQWSJB"};let un=null,Wp=null;try{const n=sA(JP);un=ID(n),Wp=HP(n),console.log("Firebase initialized successfully")}catch(n){console.error("Firebase init failed:",n)}const gs=()=>!!un,ig=n=>n.toLowerCase().trim().replace(/[\s\.]/g,"_"),YP=async(n,e)=>{if(!un)return null;const t=ig(n);try{const s=await $m(Sa(un,"users",t));if(s.exists()){const o=s.data();if(o.password&&o.password!==e)throw new Error(" ");return localStorage.setItem("pq_userid",t),{username:o.username,score:o.score,tasksCompleted:o.tasksCompleted,joinedAt:o.joinedAt,currentTask:o.currentTask,skipsUsedToday:o.skipsUsedToday,lastSkipDate:o.lastSkipDate}}else throw new Error("  ")}catch(s){throw console.error("Login check failed:",s),s}},KP=async(n,e)=>{if(!un)throw new Error("   .");if(Wp)try{await wb(Wp)}catch(u){console.warn("Auth failed, trying direct write...",u)}const t=ig(n);if((await $m(Sa(un,"users",t))).exists())throw new Error("   .     .");const o={username:n,password:e||"",score:0,tasksCompleted:0,joinedAt:new Date().toISOString(),currentTask:null,skipsUsedToday:0,lastSkipDate:new Date().toDateString()};try{await zD(Sa(un,"users",t),o)}catch(u){throw console.error("Firestore Write Error:",u),u.code==="permission-denied"?new Error("   ."):u}return localStorage.setItem("pq_userid",t),{username:o.username,score:o.score,tasksCompleted:o.tasksCompleted,joinedAt:o.joinedAt,currentTask:o.currentTask,skipsUsedToday:o.skipsUsedToday,lastSkipDate:o.lastSkipDate}},QP=async()=>{if(!un)return null;const n=localStorage.getItem("pq_userid");if(!n)return null;try{const e=await $m(Sa(un,"users",n));if(e.exists())return e.data()}catch(e){console.error("Error getting user:",e)}return null},EC=async n=>{if(!un)return;const e=ig(n.username);try{const t=JSON.parse(JSON.stringify(n));await B0(Sa(un,"users",e),t)}catch(t){console.error("Error saving user state:",t)}},$P=async n=>{if(!un)return;const e=localStorage.getItem("pq_userid");if(!e)return;const t=Sa(un,"users",e);try{await B0(t,{score:jv(n),tasksCompleted:jv(1),currentTask:null,lastActive:new Date().toISOString()})}catch(s){console.error("Error updating score:",s)}},XP=async n=>{if(!un)return[];try{const e=LD(CD(un,"users"),OD("score","desc"),qD(50)),t=await HD(e),s=localStorage.getItem("pq_userid");return t.docs.map((l,u)=>{const d=l.data();return{rank:u+1,username:d.username,score:d.score,isCurrentUser:l.id===s}})}catch(e){return console.error("Error getting leaderboard:",e),[]}},SC="photoquest_user",yE=3;let Jn=!1;const rd=()=>{const n=localStorage.getItem(SC);return n?JSON.parse(n):null},cr=n=>{localStorage.setItem(SC,JSON.stringify(n))},WP=["","","2024","_","_","_","_","_","_","_","","","","77",""],ZP=n=>{const e=rd(),t=n==="day"?new Date().getHours():new Date().getDate(),s=WP.map((o,l)=>{const u=(l*17+t)%100;let d=0;return n==="day"?d=50+u*5:n==="week"?d=300+u*20:d=1500+u*50,{rank:0,username:o,score:d,isCurrentUser:!1}});return e&&s.push({rank:0,username:e.username,score:e.score,isCurrentUser:!0}),s.sort((o,l)=>l.score-o.score),s.map((o,l)=>({...o,rank:l+1}))},jP=()=>Jn||!gs(),ex=async(n,e)=>{if(gs()&&!Jn)try{const s=await YP(n,e);if(s)return cr(s),s}catch(s){if(console.error("Login failed:",s.message),s.message.includes("")||s.message.includes(""))throw s;Jn=!0}const t=rd();return t&&t.username.toLowerCase()===n.toLowerCase()?t:null},xf=async()=>{if(gs()&&!Jn)try{const n=await QP();if(n)return cr(n),n}catch(n){console.warn("Firebase get user failed, checking local",n)}return rd()},tx=async(n,e)=>{const t={username:n,score:0,tasksCompleted:0,joinedAt:new Date().toISOString(),currentTask:null,skipsUsedToday:0,lastSkipDate:new Date().toDateString()};if(gs()&&!Jn)try{const s=await KP(n,e);return cr(s),s}catch(s){if(s.message.includes(""))throw s;return console.error("Firebase registration failed. Switching to Offline Mode.",s),Jn=!0,cr(t),t}return cr(t),t},nx=async n=>{const e=rd();if(e&&(e.score+=n,e.tasksCompleted+=1,e.currentTask=null,cr(e)),gs()&&!Jn)try{await $P(n)}catch(t){console.error("Firebase update failed",t),Jn=!0}},ix=async n=>{const e=await xf();if(e)return e.currentTask=n,cr(e),gs()&&!Jn&&await EC(e),e},sx=async()=>{const n=await xf();if(!n)return{success:!1,message:"  "};const e=new Date().toDateString();return n.lastSkipDate!==e&&(n.skipsUsedToday=0,n.lastSkipDate=e),(n.skipsUsedToday||0)>=yE?{success:!1,message:`   (${yE}/3).   .`}:(n.skipsUsedToday=(n.skipsUsedToday||0)+1,n.currentTask=null,cr(n),gs()&&!Jn&&await EC(n),{success:!0,user:n})},rx=async n=>{if(gs()&&!Jn)try{return await XP(n)}catch(e){console.warn("Firebase leaderboard failed",e),Jn=!0}return await new Promise(e=>setTimeout(e,600)),ZP(n)};var si=(n=>(n.REGISTER="REGISTER",n.GAME="GAME",n.LEADERBOARD="LEADERBOARD",n.PROFILE="PROFILE",n))(si||{});const sg=({children:n,variant:e="primary",isLoading:t=!1,className:s="",disabled:o,...l})=>{const u="px-6 py-3 rounded-xl font-bold transition-all active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",d={primary:"bg-gradient-to-r from-indigo-500 to-purple-600 text-white shadow-lg shadow-indigo-500/30",secondary:"bg-slate-700 text-white hover:bg-slate-600",danger:"bg-red-500 text-white hover:bg-red-600",ghost:"bg-transparent text-slate-300 hover:text-white"};return se.jsx("button",{className:`${u} ${d[e]} ${s}`,disabled:o||t,...l,children:t?se.jsx("span",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):n})},ox=({onCapture:n,isProcessing:e})=>{const t=lt.useRef(null),s=lt.useRef(null),[o,l]=lt.useState(null),u=lt.useCallback(async()=>{try{const g=await navigator.mediaDevices.getUserMedia({video:{facingMode:{ideal:"environment"},width:{ideal:1280},height:{ideal:720}},audio:!1});t.current&&(t.current.srcObject=g),l(null)}catch(g){console.error("Camera Error:",g),l("     . ,     .")}},[]);lt.useEffect(()=>(u(),()=>{t.current&&t.current.srcObject&&t.current.srcObject.getTracks().forEach(m=>m.stop())}),[u]);const d=()=>{if(t.current&&s.current){const g=t.current,m=s.current;m.width=g.videoWidth,m.height=g.videoHeight;const T=m.getContext("2d");if(T){T.drawImage(g,0,0,m.width,m.height);const v=m.toDataURL("image/jpeg",.8);n(v)}}};return o?se.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-6 text-center bg-slate-900",children:[se.jsx("div",{className:"text-red-400 mb-4 text-4xl",children:""}),se.jsx("p",{className:"text-slate-300 mb-6",children:o}),se.jsx(sg,{onClick:()=>window.location.reload(),children:" "})]}):se.jsxs("div",{className:"relative w-full h-full bg-black overflow-hidden rounded-2xl shadow-2xl",children:[se.jsx("video",{ref:t,autoPlay:!0,playsInline:!0,muted:!0,className:"absolute inset-0 w-full h-full object-cover"}),se.jsx("canvas",{ref:s,className:"hidden"}),se.jsx("div",{className:"absolute bottom-8 left-0 right-0 flex justify-center pb-20 md:pb-8",children:se.jsx("button",{onClick:d,disabled:e,className:`
            w-20 h-20 rounded-full border-4 border-white flex items-center justify-center
            bg-white/20 backdrop-blur-sm transition-transform active:scale-95
            ${e?"opacity-50 cursor-not-allowed":"hover:bg-white/30"}
          `,children:e?se.jsx("span",{className:"w-8 h-8 border-2 border-white/50 border-t-white rounded-full animate-spin"}):se.jsx("div",{className:"w-16 h-16 bg-white rounded-full"})})})]})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let ax,lx;function ux(){return{geminiUrl:ax,vertexUrl:lx}}function cx(n,e,t,s){var o,l;if(!(n!=null&&n.baseUrl)){const u=ux();return e?(o=u.vertexUrl)!==null&&o!==void 0?o:t:(l=u.geminiUrl)!==null&&l!==void 0?l:s}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ys{}function ue(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(s,o)=>{if(Object.prototype.hasOwnProperty.call(e,o)){const l=e[o];return l!=null?String(l):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function h(n,e,t){for(let l=0;l<e.length-1;l++){const u=e[l];if(u.endsWith("[]")){const d=u.slice(0,-2);if(!(d in n))if(Array.isArray(t))n[d]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(n[d])){const g=n[d];if(Array.isArray(t))for(let m=0;m<g.length;m++){const T=g[m];h(T,e.slice(l+1),t[m])}else for(const m of g)h(m,e.slice(l+1),t)}return}else if(u.endsWith("[0]")){const d=u.slice(0,-3);d in n||(n[d]=[{}]);const g=n[d];h(g[0],e.slice(l+1),t);return}(!n[u]||typeof n[u]!="object")&&(n[u]={}),n=n[u]}const s=e[e.length-1],o=n[s];if(o!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===o)return;if(typeof o=="object"&&typeof t=="object"&&o!==null&&t!==null)Object.assign(o,t);else throw new Error(`Cannot set value for an existing key. Key: ${s}`)}else s==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[s]=t}function f(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let s=0;s<e.length;s++){if(typeof n!="object"||n===null)return t;const o=e[s];if(o.endsWith("[]")){const l=o.slice(0,-2);if(l in n){const u=n[l];return Array.isArray(u)?u.map(d=>f(d,e.slice(s+1),t)):t}else return t}else n=n[o]}return n}catch(s){if(s instanceof TypeError)return t;throw s}}function fx(n,e){for(const[t,s]of Object.entries(e)){const o=t.split("."),l=s.split("."),u=new Set;let d=-1;for(let g=0;g<o.length;g++)if(o[g]==="*"){d=g;break}if(d!==-1&&l.length>d)for(let g=d;g<l.length;g++){const m=l[g];m!=="*"&&!m.endsWith("[]")&&!m.endsWith("[0]")&&u.add(m)}Zp(n,o,l,0,u)}}function Zp(n,e,t,s,o){if(s>=e.length||typeof n!="object"||n===null)return;const l=e[s];if(l.endsWith("[]")){const u=l.slice(0,-2),d=n;if(u in d&&Array.isArray(d[u]))for(const g of d[u])Zp(g,e,t,s+1,o)}else if(l==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const u=n,d=Object.keys(u).filter(m=>!m.startsWith("_")&&!o.has(m)),g={};for(const m of d)g[m]=u[m];for(const[m,T]of Object.entries(g)){const v=[];for(const S of t.slice(s))S==="*"?v.push(m):v.push(S);h(u,v,T)}for(const m of d)delete u[m]}}else{const u=n;l in u&&Zp(u[l],e,t,s+1,o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rg(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dx(n){const e={},t=f(n,["operationName"]);t!=null&&h(e,["operationName"],t);const s=f(n,["resourceName"]);return s!=null&&h(e,["_url","resourceName"],s),e}function hx(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const s=f(n,["metadata"]);s!=null&&h(e,["metadata"],s);const o=f(n,["done"]);o!=null&&h(e,["done"],o);const l=f(n,["error"]);l!=null&&h(e,["error"],l);const u=f(n,["response","generateVideoResponse"]);return u!=null&&h(e,["response"],mx(u)),e}function px(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const s=f(n,["metadata"]);s!=null&&h(e,["metadata"],s);const o=f(n,["done"]);o!=null&&h(e,["done"],o);const l=f(n,["error"]);l!=null&&h(e,["error"],l);const u=f(n,["response"]);return u!=null&&h(e,["response"],gx(u)),e}function mx(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>yx(u))),h(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&h(e,["raiMediaFilteredCount"],s);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&h(e,["raiMediaFilteredReasons"],o),e}function gx(n){const e={},t=f(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>_x(u))),h(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&h(e,["raiMediaFilteredCount"],s);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&h(e,["raiMediaFilteredReasons"],o),e}function yx(n){const e={},t=f(n,["video"]);return t!=null&&h(e,["video"],Cx(t)),e}function _x(n){const e={},t=f(n,["_self"]);return t!=null&&h(e,["video"],Ix(t)),e}function Tx(n){const e={},t=f(n,["operationName"]);return t!=null&&h(e,["_url","operationName"],t),e}function vx(n){const e={},t=f(n,["operationName"]);return t!=null&&h(e,["_url","operationName"],t),e}function Ex(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const s=f(n,["metadata"]);s!=null&&h(e,["metadata"],s);const o=f(n,["done"]);o!=null&&h(e,["done"],o);const l=f(n,["error"]);l!=null&&h(e,["error"],l);const u=f(n,["response"]);return u!=null&&h(e,["response"],Sx(u)),e}function Sx(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["parent"]);s!=null&&h(e,["parent"],s);const o=f(n,["documentName"]);return o!=null&&h(e,["documentName"],o),e}function AC(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const s=f(n,["metadata"]);s!=null&&h(e,["metadata"],s);const o=f(n,["done"]);o!=null&&h(e,["done"],o);const l=f(n,["error"]);l!=null&&h(e,["error"],l);const u=f(n,["response"]);return u!=null&&h(e,["response"],Ax(u)),e}function Ax(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["parent"]);s!=null&&h(e,["parent"],s);const o=f(n,["documentName"]);return o!=null&&h(e,["documentName"],o),e}function Cx(n){const e={},t=f(n,["uri"]);t!=null&&h(e,["uri"],t);const s=f(n,["encodedVideo"]);s!=null&&h(e,["videoBytes"],rg(s));const o=f(n,["encoding"]);return o!=null&&h(e,["mimeType"],o),e}function Ix(n){const e={},t=f(n,["gcsUri"]);t!=null&&h(e,["uri"],t);const s=f(n,["bytesBase64Encoded"]);s!=null&&h(e,["videoBytes"],rg(s));const o=f(n,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var _E;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(_E||(_E={}));var TE;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(TE||(TE={}));var vE;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(vE||(vE={}));var Xt;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(Xt||(Xt={}));var EE;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(EE||(EE={}));var SE;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(SE||(SE={}));var AE;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(AE||(AE={}));var CE;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(CE||(CE={}));var IE;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(IE||(IE={}));var RE;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.HIGH="HIGH"})(RE||(RE={}));var wE;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(wE||(wE={}));var NE;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(NE||(NE={}));var ME;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(ME||(ME={}));var DE;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE"})(DE||(DE={}));var bE;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(bE||(bE={}));var PE;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(PE||(PE={}));var xE;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(xE||(xE={}));var VE;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(VE||(VE={}));var UE;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(UE||(UE={}));var Vf;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(Vf||(Vf={}));var kE;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(kE||(kE={}));var LE;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(LE||(LE={}));var OE;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(OE||(OE={}));var jp;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(jp||(jp={}));var qE;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(qE||(qE={}));var FE;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(FE||(FE={}));var BE;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(BE||(BE={}));var GE;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(GE||(GE={}));var HE;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(HE||(HE={}));var zE;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(zE||(zE={}));var JE;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(JE||(JE={}));var YE;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(YE||(YE={}));var KE;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(KE||(KE={}));var QE;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(QE||(QE={}));var $E;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})($E||($E={}));var XE;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(XE||(XE={}));var WE;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(WE||(WE={}));var ZE;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(ZE||(ZE={}));var jE;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(jE||(jE={}));var eS;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(eS||(eS={}));var tS;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(tS||(tS={}));var nS;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(nS||(nS={}));var iS;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(iS||(iS={}));var sS;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(sS||(sS={}));var rS;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(rS||(rS={}));var oS;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(oS||(oS={}));var aS;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(aS||(aS={}));var lS;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(lS||(lS={}));var uS;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(uS||(uS={}));var cS;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(cS||(cS={}));var fS;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(fS||(fS={}));var dS;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(dS||(dS={}));var hS;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(hS||(hS={}));var pS;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(pS||(pS={}));var oa;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(oa||(oa={}));class em{constructor(e){const t={};for(const s of e.headers.entries())t[s[0]]=s[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class Fl{get text(){var e,t,s,o,l,u,d,g;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let m="",T=!1;const v=[];for(const S of(g=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&g!==void 0?g:[]){for(const[w,O]of Object.entries(S))w!=="text"&&w!=="thought"&&w!=="thoughtSignature"&&(O!==null||O!==void 0)&&v.push(w);if(typeof S.text=="string"){if(typeof S.thought=="boolean"&&S.thought)continue;T=!0,m+=S.text}}return v.length>0&&console.warn(`there are non-text parts ${v} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),T?m:void 0}get data(){var e,t,s,o,l,u,d,g;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let m="";const T=[];for(const v of(g=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&g!==void 0?g:[]){for(const[S,w]of Object.entries(v))S!=="inlineData"&&(w!==null||w!==void 0)&&T.push(S);v.inlineData&&typeof v.inlineData.data=="string"&&(m+=atob(v.inlineData.data))}return T.length>0&&console.warn(`there are non-data parts ${T} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),m.length>0?btoa(m):void 0}get functionCalls(){var e,t,s,o,l,u,d,g;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const m=(g=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||g===void 0?void 0:g.filter(T=>T.functionCall).map(T=>T.functionCall).filter(T=>T!==void 0);if((m==null?void 0:m.length)!==0)return m}get executableCode(){var e,t,s,o,l,u,d,g,m;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const T=(g=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||g===void 0?void 0:g.filter(v=>v.executableCode).map(v=>v.executableCode).filter(v=>v!==void 0);if((T==null?void 0:T.length)!==0)return(m=T==null?void 0:T[0])===null||m===void 0?void 0:m.code}get codeExecutionResult(){var e,t,s,o,l,u,d,g,m;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const T=(g=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||g===void 0?void 0:g.filter(v=>v.codeExecutionResult).map(v=>v.codeExecutionResult).filter(v=>v!==void 0);if((T==null?void 0:T.length)!==0)return(m=T==null?void 0:T[0])===null||m===void 0?void 0:m.output}}class mS{}class gS{}class Rx{}class wx{}class Nx{}class Mx{}class yS{}class _S{}class TS{}class Dx{}class Uf{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const s=new Uf;let o;const l=e;return t?o=px(l):o=hx(l),Object.assign(s,o),s}}class vS{}class ES{}class SS{}class AS{}class bx{}class Px{}class xx{}class og{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const s=new og,l=Ex(e);return Object.assign(s,l),s}}class Vx{}class Ux{}class kx{}class CS{}class Lx{get text(){var e,t,s;let o="",l=!1;const u=[];for(const d of(s=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&s!==void 0?s:[]){for(const[g,m]of Object.entries(d))g!=="text"&&g!=="thought"&&m!==null&&u.push(g);if(typeof d.text=="string"){if(typeof d.thought=="boolean"&&d.thought)continue;l=!0,o+=d.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?o:void 0}get data(){var e,t,s;let o="";const l=[];for(const u of(s=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&s!==void 0?s:[]){for(const[d,g]of Object.entries(u))d!=="inlineData"&&g!==null&&l.push(d);u.inlineData&&typeof u.inlineData.data=="string"&&(o+=atob(u.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class Ox{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class ag{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const s=new ag,l=AC(e);return Object.assign(s,l),s}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Je(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function CC(n,e){const t=Je(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function IC(n){return Array.isArray(n)?n.map(e=>kf(e)):[kf(n)]}function kf(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function RC(n){const e=kf(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function wC(n){const e=kf(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function IS(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function NC(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>IS(e)):[IS(n)]}function tm(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function RS(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function wS(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function sn(n){if(n==null)throw new Error("ContentUnion is required");return tm(n)?n:{role:"user",parts:NC(n)}}function lg(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const s=sn(t);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]});if(n.isVertexAI()){const t=sn(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>sn(t)):[sn(e)]}function zn(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(RS(n)||wS(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[sn(n)]}const e=[],t=[],s=tm(n[0]);for(const o of n){const l=tm(o);if(l!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(o);else{if(RS(o)||wS(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(o)}}return s||e.push({role:"user",parts:NC(t)}),e}function qx(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(s=>s!=="null");if(t.length===1)e.type=Object.values(Xt).includes(t[0].toUpperCase())?t[0].toUpperCase():Xt.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const s of t)e.anyOf.push({type:Object.values(Xt).includes(s.toUpperCase())?s.toUpperCase():Xt.TYPE_UNSPECIFIED})}}function da(n){const e={},t=["items"],s=["anyOf"],o=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=n.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,n=l[1]):l[1].type==="null"&&(e.nullable=!0,n=l[0])),n.type instanceof Array&&qx(n.type,e);for(const[u,d]of Object.entries(n))if(d!=null)if(u=="type"){if(d==="null")throw new Error("type: null can not be the only possible type for the field.");if(d instanceof Array)continue;e.type=Object.values(Xt).includes(d.toUpperCase())?d.toUpperCase():Xt.TYPE_UNSPECIFIED}else if(t.includes(u))e[u]=da(d);else if(s.includes(u)){const g=[];for(const m of d){if(m.type=="null"){e.nullable=!0;continue}g.push(da(m))}e[u]=g}else if(o.includes(u)){const g={};for(const[m,T]of Object.entries(d))g[m]=da(T);e[u]=g}else{if(u==="additionalProperties")continue;e[u]=d}return e}function ug(n){return da(n)}function cg(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function fg(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function ba(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=da(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=da(e.response));return n}function Pa(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function Fx(n,e,t,s=1){const o=!e.startsWith(`${t}/`)&&e.split("/").length===s;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:o?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:o?`${t}/${e}`:e}function _s(n,e){if(typeof e!="string")throw new Error("name must be a string");return Fx(n,e,"cachedContents")}function MC(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function Er(n){return rg(n)}function Bx(n){return n!=null&&typeof n=="object"&&"name"in n}function Gx(n){return n!=null&&typeof n=="object"&&"video"in n}function Hx(n){return n!=null&&typeof n=="object"&&"uri"in n}function DC(n){var e;let t;if(Bx(n)&&(t=n.name),!(Hx(n)&&(t=n.uri,t===void 0))&&!(Gx(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const o=t.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${t}`);t=o[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function bC(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function PC(n){for(const e of["models","tunedModels","publisherModels"])if(zx(n,e))return n[e];return[]}function zx(n,e){return n!==null&&typeof n=="object"&&e in n}function Jx(n,e={}){const t=n,s={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(s.responseJsonSchema=t.outputSchema),e.behavior&&(s.behavior=e.behavior),{functionDeclarations:[s]}}function Yx(n,e={}){const t=[],s=new Set;for(const o of n){const l=o.name;if(s.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);s.add(l);const u=Jx(o,e);u.functionDeclarations&&t.push(...u.functionDeclarations)}return{functionDeclarations:t}}function xC(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const s=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,o=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(o>0||s!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(s>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function Kx(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function VC(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const o=t.inlinedResponses;if(!Array.isArray(o)||o.length===0)return n;let l=!1;for(const u of o){if(typeof u!="object"||u===null)continue;const g=u.response;if(typeof g!="object"||g===null)continue;if(g.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function xa(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function UC(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Qx(n){const e={},t=f(n,["responsesFile"]);t!=null&&h(e,["fileName"],t);const s=f(n,["inlinedResponses","inlinedResponses"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>NV(u))),h(e,["inlinedResponses"],l)}const o=f(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["inlinedEmbedContentResponses"],l)}return e}function $x(n){const e={},t=f(n,["predictionsFormat"]);t!=null&&h(e,["format"],t);const s=f(n,["gcsDestination","outputUriPrefix"]);s!=null&&h(e,["gcsUri"],s);const o=f(n,["bigqueryDestination","outputUri"]);return o!=null&&h(e,["bigqueryUri"],o),e}function Xx(n){const e={},t=f(n,["format"]);t!=null&&h(e,["predictionsFormat"],t);const s=f(n,["gcsUri"]);s!=null&&h(e,["gcsDestination","outputUriPrefix"],s);const o=f(n,["bigqueryUri"]);if(o!=null&&h(e,["bigqueryDestination","outputUri"],o),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(f(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function df(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const s=f(n,["metadata","displayName"]);s!=null&&h(e,["displayName"],s);const o=f(n,["metadata","state"]);o!=null&&h(e,["state"],UC(o));const l=f(n,["metadata","createTime"]);l!=null&&h(e,["createTime"],l);const u=f(n,["metadata","endTime"]);u!=null&&h(e,["endTime"],u);const d=f(n,["metadata","updateTime"]);d!=null&&h(e,["updateTime"],d);const g=f(n,["metadata","model"]);g!=null&&h(e,["model"],g);const m=f(n,["metadata","output"]);return m!=null&&h(e,["dest"],Qx(VC(m))),e}function nm(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const s=f(n,["displayName"]);s!=null&&h(e,["displayName"],s);const o=f(n,["state"]);o!=null&&h(e,["state"],UC(o));const l=f(n,["error"]);l!=null&&h(e,["error"],l);const u=f(n,["createTime"]);u!=null&&h(e,["createTime"],u);const d=f(n,["startTime"]);d!=null&&h(e,["startTime"],d);const g=f(n,["endTime"]);g!=null&&h(e,["endTime"],g);const m=f(n,["updateTime"]);m!=null&&h(e,["updateTime"],m);const T=f(n,["model"]);T!=null&&h(e,["model"],T);const v=f(n,["inputConfig"]);v!=null&&h(e,["src"],Wx(v));const S=f(n,["outputConfig"]);S!=null&&h(e,["dest"],$x(VC(S)));const w=f(n,["completionStats"]);return w!=null&&h(e,["completionStats"],w),e}function Wx(n){const e={},t=f(n,["instancesFormat"]);t!=null&&h(e,["format"],t);const s=f(n,["gcsSource","uris"]);s!=null&&h(e,["gcsUri"],s);const o=f(n,["bigquerySource","inputUri"]);return o!=null&&h(e,["bigqueryUri"],o),e}function Zx(n,e){const t={};if(f(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(f(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const s=f(e,["fileName"]);s!=null&&h(t,["fileName"],s);const o=f(e,["inlinedRequests"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>wV(n,u))),h(t,["requests","requests"],l)}return t}function jx(n){const e={},t=f(n,["format"]);t!=null&&h(e,["instancesFormat"],t);const s=f(n,["gcsUri"]);s!=null&&h(e,["gcsSource","uris"],s);const o=f(n,["bigqueryUri"]);if(o!=null&&h(e,["bigquerySource","inputUri"],o),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function eV(n){const e={},t=f(n,["data"]);if(t!=null&&h(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function tV(n,e){const t={},s=f(e,["name"]);return s!=null&&h(t,["_url","name"],xa(n,s)),t}function nV(n,e){const t={},s=f(e,["name"]);return s!=null&&h(t,["_url","name"],xa(n,s)),t}function iV(n){const e={},t=f(n,["content"]);t!=null&&h(e,["content"],t);const s=f(n,["citationMetadata"]);s!=null&&h(e,["citationMetadata"],sV(s));const o=f(n,["tokenCount"]);o!=null&&h(e,["tokenCount"],o);const l=f(n,["finishReason"]);l!=null&&h(e,["finishReason"],l);const u=f(n,["avgLogprobs"]);u!=null&&h(e,["avgLogprobs"],u);const d=f(n,["groundingMetadata"]);d!=null&&h(e,["groundingMetadata"],d);const g=f(n,["index"]);g!=null&&h(e,["index"],g);const m=f(n,["logprobsResult"]);m!=null&&h(e,["logprobsResult"],m);const T=f(n,["safetyRatings"]);if(T!=null){let S=T;Array.isArray(S)&&(S=S.map(w=>w)),h(e,["safetyRatings"],S)}const v=f(n,["urlContextMetadata"]);return v!=null&&h(e,["urlContextMetadata"],v),e}function sV(n){const e={},t=f(n,["citationSources"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>o)),h(e,["citations"],s)}return e}function kC(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>UV(l))),h(e,["parts"],o)}const s=f(n,["role"]);return s!=null&&h(e,["role"],s),e}function rV(n,e){const t={},s=f(n,["displayName"]);if(e!==void 0&&s!=null&&h(e,["batch","displayName"],s),f(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function oV(n,e){const t={},s=f(n,["displayName"]);e!==void 0&&s!=null&&h(e,["displayName"],s);const o=f(n,["dest"]);return e!==void 0&&o!=null&&h(e,["outputConfig"],Xx(Kx(o))),t}function NS(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],Je(n,s));const o=f(e,["src"]);o!=null&&h(t,["batch","inputConfig"],Zx(n,xC(n,o)));const l=f(e,["config"]);return l!=null&&rV(l,t),t}function aV(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["model"],Je(n,s));const o=f(e,["src"]);o!=null&&h(t,["inputConfig"],jx(xC(n,o)));const l=f(e,["config"]);return l!=null&&oV(l,t),t}function lV(n,e){const t={},s=f(n,["displayName"]);return e!==void 0&&s!=null&&h(e,["batch","displayName"],s),t}function uV(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],Je(n,s));const o=f(e,["src"]);o!=null&&h(t,["batch","inputConfig"],gV(n,o));const l=f(e,["config"]);return l!=null&&lV(l,t),t}function cV(n,e){const t={},s=f(e,["name"]);return s!=null&&h(t,["_url","name"],xa(n,s)),t}function fV(n,e){const t={},s=f(e,["name"]);return s!=null&&h(t,["_url","name"],xa(n,s)),t}function dV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["name"]);s!=null&&h(e,["name"],s);const o=f(n,["done"]);o!=null&&h(e,["done"],o);const l=f(n,["error"]);return l!=null&&h(e,["error"],l),e}function hV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["name"]);s!=null&&h(e,["name"],s);const o=f(n,["done"]);o!=null&&h(e,["done"],o);const l=f(n,["error"]);return l!=null&&h(e,["error"],l),e}function pV(n,e){const t={},s=f(e,["contents"]);if(s!=null){let l=lg(n,s);Array.isArray(l)&&(l=l.map(u=>u)),h(t,["requests[]","request","content"],l)}const o=f(e,["config"]);return o!=null&&(h(t,["_self"],mV(o,t)),fx(t,{"requests[].*":"requests[].request.*"})),t}function mV(n,e){const t={},s=f(n,["taskType"]);e!==void 0&&s!=null&&h(e,["requests[]","taskType"],s);const o=f(n,["title"]);e!==void 0&&o!=null&&h(e,["requests[]","title"],o);const l=f(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&h(e,["requests[]","outputDimensionality"],l),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function gV(n,e){const t={},s=f(e,["fileName"]);s!=null&&h(t,["file_name"],s);const o=f(e,["inlinedRequests"]);return o!=null&&h(t,["requests"],pV(n,o)),t}function yV(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function _V(n){const e={},t=f(n,["id"]);t!=null&&h(e,["id"],t);const s=f(n,["args"]);s!=null&&h(e,["args"],s);const o=f(n,["name"]);if(o!=null&&h(e,["name"],o),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function TV(n){const e={},t=f(n,["mode"]);t!=null&&h(e,["mode"],t);const s=f(n,["allowedFunctionNames"]);if(s!=null&&h(e,["allowedFunctionNames"],s),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function vV(n,e,t){const s={},o=f(e,["systemInstruction"]);t!==void 0&&o!=null&&h(t,["systemInstruction"],kC(sn(o)));const l=f(e,["temperature"]);l!=null&&h(s,["temperature"],l);const u=f(e,["topP"]);u!=null&&h(s,["topP"],u);const d=f(e,["topK"]);d!=null&&h(s,["topK"],d);const g=f(e,["candidateCount"]);g!=null&&h(s,["candidateCount"],g);const m=f(e,["maxOutputTokens"]);m!=null&&h(s,["maxOutputTokens"],m);const T=f(e,["stopSequences"]);T!=null&&h(s,["stopSequences"],T);const v=f(e,["responseLogprobs"]);v!=null&&h(s,["responseLogprobs"],v);const S=f(e,["logprobs"]);S!=null&&h(s,["logprobs"],S);const w=f(e,["presencePenalty"]);w!=null&&h(s,["presencePenalty"],w);const O=f(e,["frequencyPenalty"]);O!=null&&h(s,["frequencyPenalty"],O);const G=f(e,["seed"]);G!=null&&h(s,["seed"],G);const F=f(e,["responseMimeType"]);F!=null&&h(s,["responseMimeType"],F);const $=f(e,["responseSchema"]);$!=null&&h(s,["responseSchema"],ug($));const te=f(e,["responseJsonSchema"]);if(te!=null&&h(s,["responseJsonSchema"],te),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const ne=f(e,["safetySettings"]);if(t!==void 0&&ne!=null){let b=ne;Array.isArray(b)&&(b=b.map(Oe=>kV(Oe))),h(t,["safetySettings"],b)}const le=f(e,["tools"]);if(t!==void 0&&le!=null){let b=Pa(le);Array.isArray(b)&&(b=b.map(Oe=>OV(ba(Oe)))),h(t,["tools"],b)}const me=f(e,["toolConfig"]);if(t!==void 0&&me!=null&&h(t,["toolConfig"],LV(me)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const fe=f(e,["cachedContent"]);t!==void 0&&fe!=null&&h(t,["cachedContent"],_s(n,fe));const D=f(e,["responseModalities"]);D!=null&&h(s,["responseModalities"],D);const M=f(e,["mediaResolution"]);M!=null&&h(s,["mediaResolution"],M);const N=f(e,["speechConfig"]);if(N!=null&&h(s,["speechConfig"],cg(N)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const V=f(e,["thinkingConfig"]);V!=null&&h(s,["thinkingConfig"],V);const x=f(e,["imageConfig"]);x!=null&&h(s,["imageConfig"],RV(x));const L=f(e,["enableEnhancedCivicAnswers"]);return L!=null&&h(s,["enableEnhancedCivicAnswers"],L),s}function EV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["candidates"]);if(s!=null){let g=s;Array.isArray(g)&&(g=g.map(m=>iV(m))),h(e,["candidates"],g)}const o=f(n,["modelVersion"]);o!=null&&h(e,["modelVersion"],o);const l=f(n,["promptFeedback"]);l!=null&&h(e,["promptFeedback"],l);const u=f(n,["responseId"]);u!=null&&h(e,["responseId"],u);const d=f(n,["usageMetadata"]);return d!=null&&h(e,["usageMetadata"],d),e}function SV(n,e){const t={},s=f(e,["name"]);return s!=null&&h(t,["_url","name"],xa(n,s)),t}function AV(n,e){const t={},s=f(e,["name"]);return s!=null&&h(t,["_url","name"],xa(n,s)),t}function CV(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function IV(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function RV(n){const e={},t=f(n,["aspectRatio"]);t!=null&&h(e,["aspectRatio"],t);const s=f(n,["imageSize"]);if(s!=null&&h(e,["imageSize"],s),f(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function wV(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["request","model"],Je(n,s));const o=f(e,["contents"]);if(o!=null){let d=zn(o);Array.isArray(d)&&(d=d.map(g=>kC(g))),h(t,["request","contents"],d)}const l=f(e,["metadata"]);l!=null&&h(t,["metadata"],l);const u=f(e,["config"]);return u!=null&&h(t,["request","generationConfig"],vV(n,u,f(t,["request"],{}))),t}function NV(n){const e={},t=f(n,["response"]);t!=null&&h(e,["response"],EV(t));const s=f(n,["error"]);return s!=null&&h(e,["error"],s),e}function MV(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const o=f(n,["pageToken"]);if(e!==void 0&&o!=null&&h(e,["_query","pageToken"],o),f(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function DV(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const o=f(n,["pageToken"]);e!==void 0&&o!=null&&h(e,["_query","pageToken"],o);const l=f(n,["filter"]);return e!==void 0&&l!=null&&h(e,["_query","filter"],l),t}function bV(n){const e={},t=f(n,["config"]);return t!=null&&MV(t,e),e}function PV(n){const e={},t=f(n,["config"]);return t!=null&&DV(t,e),e}function xV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const o=f(n,["operations"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>df(u))),h(e,["batchJobs"],l)}return e}function VV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const o=f(n,["batchPredictionJobs"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>nm(u))),h(e,["batchJobs"],l)}return e}function UV(n){const e={},t=f(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);const s=f(n,["codeExecutionResult"]);s!=null&&h(e,["codeExecutionResult"],s);const o=f(n,["executableCode"]);o!=null&&h(e,["executableCode"],o);const l=f(n,["fileData"]);l!=null&&h(e,["fileData"],yV(l));const u=f(n,["functionCall"]);u!=null&&h(e,["functionCall"],_V(u));const d=f(n,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const g=f(n,["inlineData"]);g!=null&&h(e,["inlineData"],eV(g));const m=f(n,["text"]);m!=null&&h(e,["text"],m);const T=f(n,["thought"]);T!=null&&h(e,["thought"],T);const v=f(n,["thoughtSignature"]);v!=null&&h(e,["thoughtSignature"],v);const S=f(n,["videoMetadata"]);return S!=null&&h(e,["videoMetadata"],S),e}function kV(n){const e={},t=f(n,["category"]);if(t!=null&&h(e,["category"],t),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=f(n,["threshold"]);return s!=null&&h(e,["threshold"],s),e}function LV(n){const e={},t=f(n,["functionCallingConfig"]);t!=null&&h(e,["functionCallingConfig"],TV(t));const s=f(n,["retrievalConfig"]);return s!=null&&h(e,["retrievalConfig"],s),e}function OV(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let T=t;Array.isArray(T)&&(T=T.map(v=>v)),h(e,["functionDeclarations"],T)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearchRetrieval"]);s!=null&&h(e,["googleSearchRetrieval"],s);const o=f(n,["computerUse"]);o!=null&&h(e,["computerUse"],o);const l=f(n,["fileSearch"]);l!=null&&h(e,["fileSearch"],l);const u=f(n,["codeExecution"]);if(u!=null&&h(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&h(e,["googleMaps"],CV(d));const g=f(n,["googleSearch"]);g!=null&&h(e,["googleSearch"],IV(g));const m=f(n,["urlContext"]);return m!=null&&h(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var ps;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(ps||(ps={}));class uo{constructor(e,t,s,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,s,o)}init(e,t,s){var o,l;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!s||Object.keys(s).length===0?u={config:{}}:typeof s=="object"?u=Object.assign({},s):u=s,u.config&&(u.config.pageToken=t.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(l=(o=u.config)===null||o===void 0?void 0:o.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qV extends ys{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new uo(ps.PAGED_ITEM_BATCH_JOBS,s=>this.listInternal(s),await this.listInternal(t),t),this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)}}createInlinedGenerateContentRequest(e){const t=NS(this.apiClient,e),s=t._url,o=ue("{model}:batchGenerateContent",s),d=t.batch.inputConfig.requests,g=d.requests,m=[];for(const T of g){const v=Object.assign({},T);if(v.systemInstruction){const S=v.systemInstruction;delete v.systemInstruction;const w=v.request;w.systemInstruction=S,v.request=w}m.push(v)}return d.requests=m,delete t.config,delete t._url,delete t._query,{path:o,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const s=t?Object.assign({},t):{},o=Date.now().toString();if(s.displayName||(s.displayName=`genaiBatchJob_${o}`),s.dest===void 0){const l=this.getGcsUri(e),u=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?s.dest=`${l.slice(0,-6)}/dest`:s.dest=`${l}_dest_${o}`;else if(u)s.dest=`${u}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return s}async createInternal(e){var t,s,o,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=aV(this.apiClient,e);return d=ue("batchPredictionJobs",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json()),u.then(T=>nm(T))}else{const m=NS(this.apiClient,e);return d=ue("{model}:batchGenerateContent",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json()),u.then(T=>df(T))}}async createEmbeddingsInternal(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=uV(this.apiClient,e);return l=ue("{model}:asyncBatchEmbedContent",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),o.then(g=>df(g))}}async get(e){var t,s,o,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=AV(this.apiClient,e);return d=ue("batchPredictionJobs/{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json()),u.then(T=>nm(T))}else{const m=SV(this.apiClient,e);return d=ue("batches/{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json()),u.then(T=>df(T))}}async cancel(e){var t,s,o,l;let u="",d={};if(this.apiClient.isVertexAI()){const g=nV(this.apiClient,e);u=ue("batchPredictionJobs/{name}:cancel",g._url),d=g._query,delete g._url,delete g._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const g=tV(this.apiClient,e);u=ue("batches/{name}:cancel",g._url),d=g._query,delete g._url,delete g._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var t,s,o,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=PV(e);return d=ue("batchPredictionJobs",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(v=>{const S=v;return S.sdkHttpResponse={headers:T.headers},S})),u.then(T=>{const v=VV(T),S=new CS;return Object.assign(S,v),S})}else{const m=bV(e);return d=ue("batches",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(v=>{const S=v;return S.sdkHttpResponse={headers:T.headers},S})),u.then(T=>{const v=xV(T),S=new CS;return Object.assign(S,v),S})}}async delete(e){var t,s,o,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=fV(this.apiClient,e);return d=ue("batchPredictionJobs/{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(v=>{const S=v;return S.sdkHttpResponse={headers:T.headers},S})),u.then(T=>hV(T))}else{const m=cV(this.apiClient,e);return d=ue("batches/{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(v=>{const S=v;return S.sdkHttpResponse={headers:T.headers},S})),u.then(T=>dV(T))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function FV(n){const e={},t=f(n,["data"]);if(t!=null&&h(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function MS(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>u2(l))),h(e,["parts"],o)}const s=f(n,["role"]);return s!=null&&h(e,["role"],s),e}function BV(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&h(e,["ttl"],s);const o=f(n,["expireTime"]);e!==void 0&&o!=null&&h(e,["expireTime"],o);const l=f(n,["displayName"]);e!==void 0&&l!=null&&h(e,["displayName"],l);const u=f(n,["contents"]);if(e!==void 0&&u!=null){let T=zn(u);Array.isArray(T)&&(T=T.map(v=>MS(v))),h(e,["contents"],T)}const d=f(n,["systemInstruction"]);e!==void 0&&d!=null&&h(e,["systemInstruction"],MS(sn(d)));const g=f(n,["tools"]);if(e!==void 0&&g!=null){let T=g;Array.isArray(T)&&(T=T.map(v=>f2(v))),h(e,["tools"],T)}const m=f(n,["toolConfig"]);if(e!==void 0&&m!=null&&h(e,["toolConfig"],c2(m)),f(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function GV(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&h(e,["ttl"],s);const o=f(n,["expireTime"]);e!==void 0&&o!=null&&h(e,["expireTime"],o);const l=f(n,["displayName"]);e!==void 0&&l!=null&&h(e,["displayName"],l);const u=f(n,["contents"]);if(e!==void 0&&u!=null){let v=zn(u);Array.isArray(v)&&(v=v.map(S=>S)),h(e,["contents"],v)}const d=f(n,["systemInstruction"]);e!==void 0&&d!=null&&h(e,["systemInstruction"],sn(d));const g=f(n,["tools"]);if(e!==void 0&&g!=null){let v=g;Array.isArray(v)&&(v=v.map(S=>d2(S))),h(e,["tools"],v)}const m=f(n,["toolConfig"]);e!==void 0&&m!=null&&h(e,["toolConfig"],m);const T=f(n,["kmsKeyName"]);return e!==void 0&&T!=null&&h(e,["encryption_spec","kmsKeyName"],T),t}function HV(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["model"],CC(n,s));const o=f(e,["config"]);return o!=null&&BV(o,t),t}function zV(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["model"],CC(n,s));const o=f(e,["config"]);return o!=null&&GV(o,t),t}function JV(n,e){const t={},s=f(e,["name"]);return s!=null&&h(t,["_url","name"],_s(n,s)),t}function YV(n,e){const t={},s=f(e,["name"]);return s!=null&&h(t,["_url","name"],_s(n,s)),t}function KV(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function QV(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function $V(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function XV(n){const e={},t=f(n,["id"]);t!=null&&h(e,["id"],t);const s=f(n,["args"]);s!=null&&h(e,["args"],s);const o=f(n,["name"]);if(o!=null&&h(e,["name"],o),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function WV(n){const e={},t=f(n,["mode"]);t!=null&&h(e,["mode"],t);const s=f(n,["allowedFunctionNames"]);if(s!=null&&h(e,["allowedFunctionNames"],s),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function ZV(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&h(e,["description"],t);const s=f(n,["name"]);s!=null&&h(e,["name"],s);const o=f(n,["parameters"]);o!=null&&h(e,["parameters"],o);const l=f(n,["parametersJsonSchema"]);l!=null&&h(e,["parametersJsonSchema"],l);const u=f(n,["response"]);u!=null&&h(e,["response"],u);const d=f(n,["responseJsonSchema"]);return d!=null&&h(e,["responseJsonSchema"],d),e}function jV(n,e){const t={},s=f(e,["name"]);return s!=null&&h(t,["_url","name"],_s(n,s)),t}function e2(n,e){const t={},s=f(e,["name"]);return s!=null&&h(t,["_url","name"],_s(n,s)),t}function t2(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function n2(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function i2(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&h(e,["_query","pageToken"],o),t}function s2(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&h(e,["_query","pageToken"],o),t}function r2(n){const e={},t=f(n,["config"]);return t!=null&&i2(t,e),e}function o2(n){const e={},t=f(n,["config"]);return t!=null&&s2(t,e),e}function a2(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const o=f(n,["cachedContents"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["cachedContents"],l)}return e}function l2(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const o=f(n,["cachedContents"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["cachedContents"],l)}return e}function u2(n){const e={},t=f(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);const s=f(n,["codeExecutionResult"]);s!=null&&h(e,["codeExecutionResult"],s);const o=f(n,["executableCode"]);o!=null&&h(e,["executableCode"],o);const l=f(n,["fileData"]);l!=null&&h(e,["fileData"],$V(l));const u=f(n,["functionCall"]);u!=null&&h(e,["functionCall"],XV(u));const d=f(n,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const g=f(n,["inlineData"]);g!=null&&h(e,["inlineData"],FV(g));const m=f(n,["text"]);m!=null&&h(e,["text"],m);const T=f(n,["thought"]);T!=null&&h(e,["thought"],T);const v=f(n,["thoughtSignature"]);v!=null&&h(e,["thoughtSignature"],v);const S=f(n,["videoMetadata"]);return S!=null&&h(e,["videoMetadata"],S),e}function c2(n){const e={},t=f(n,["functionCallingConfig"]);t!=null&&h(e,["functionCallingConfig"],WV(t));const s=f(n,["retrievalConfig"]);return s!=null&&h(e,["retrievalConfig"],s),e}function f2(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let T=t;Array.isArray(T)&&(T=T.map(v=>v)),h(e,["functionDeclarations"],T)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearchRetrieval"]);s!=null&&h(e,["googleSearchRetrieval"],s);const o=f(n,["computerUse"]);o!=null&&h(e,["computerUse"],o);const l=f(n,["fileSearch"]);l!=null&&h(e,["fileSearch"],l);const u=f(n,["codeExecution"]);if(u!=null&&h(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&h(e,["googleMaps"],t2(d));const g=f(n,["googleSearch"]);g!=null&&h(e,["googleSearch"],n2(g));const m=f(n,["urlContext"]);return m!=null&&h(e,["urlContext"],m),e}function d2(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(S=>ZV(S))),h(e,["functionDeclarations"],v)}const s=f(n,["retrieval"]);s!=null&&h(e,["retrieval"],s);const o=f(n,["googleSearchRetrieval"]);o!=null&&h(e,["googleSearchRetrieval"],o);const l=f(n,["computerUse"]);if(l!=null&&h(e,["computerUse"],l),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=f(n,["codeExecution"]);u!=null&&h(e,["codeExecution"],u);const d=f(n,["enterpriseWebSearch"]);d!=null&&h(e,["enterpriseWebSearch"],d);const g=f(n,["googleMaps"]);g!=null&&h(e,["googleMaps"],g);const m=f(n,["googleSearch"]);m!=null&&h(e,["googleSearch"],m);const T=f(n,["urlContext"]);return T!=null&&h(e,["urlContext"],T),e}function h2(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&h(e,["ttl"],s);const o=f(n,["expireTime"]);return e!==void 0&&o!=null&&h(e,["expireTime"],o),t}function p2(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&h(e,["ttl"],s);const o=f(n,["expireTime"]);return e!==void 0&&o!=null&&h(e,["expireTime"],o),t}function m2(n,e){const t={},s=f(e,["name"]);s!=null&&h(t,["_url","name"],_s(n,s));const o=f(e,["config"]);return o!=null&&h2(o,t),t}function g2(n,e){const t={},s=f(e,["name"]);s!=null&&h(t,["_url","name"],_s(n,s));const o=f(e,["config"]);return o!=null&&p2(o,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class y2 extends ys{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new uo(ps.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),await this.listInternal(t),t)}async create(e){var t,s,o,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=zV(this.apiClient,e);return d=ue("cachedContents",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json()),u.then(T=>T)}else{const m=HV(this.apiClient,e);return d=ue("cachedContents",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json()),u.then(T=>T)}}async get(e){var t,s,o,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=e2(this.apiClient,e);return d=ue("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json()),u.then(T=>T)}else{const m=jV(this.apiClient,e);return d=ue("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json()),u.then(T=>T)}}async delete(e){var t,s,o,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=YV(this.apiClient,e);return d=ue("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(v=>{const S=v;return S.sdkHttpResponse={headers:T.headers},S})),u.then(T=>{const v=QV(T),S=new SS;return Object.assign(S,v),S})}else{const m=JV(this.apiClient,e);return d=ue("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(v=>{const S=v;return S.sdkHttpResponse={headers:T.headers},S})),u.then(T=>{const v=KV(T),S=new SS;return Object.assign(S,v),S})}}async update(e){var t,s,o,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=g2(this.apiClient,e);return d=ue("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json()),u.then(T=>T)}else{const m=m2(this.apiClient,e);return d=ue("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json()),u.then(T=>T)}}async listInternal(e){var t,s,o,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=o2(e);return d=ue("cachedContents",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(v=>{const S=v;return S.sdkHttpResponse={headers:T.headers},S})),u.then(T=>{const v=l2(T),S=new AS;return Object.assign(S,v),S})}else{const m=r2(e);return d=ue("cachedContents",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(v=>{const S=v;return S.sdkHttpResponse={headers:T.headers},S})),u.then(T=>{const v=a2(T),S=new AS;return Object.assign(S,v),S})}}}function DS(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],s=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function at(n){return this instanceof at?(this.v=n,this):new at(n)}function ha(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(n,e||[]),o,l=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",u),o[Symbol.asyncIterator]=function(){return this},o;function u(w){return function(O){return Promise.resolve(O).then(w,v)}}function d(w,O){s[w]&&(o[w]=function(G){return new Promise(function(F,$){l.push([w,G,F,$])>1||g(w,G)})},O&&(o[w]=O(o[w])))}function g(w,O){try{m(s[w](O))}catch(G){S(l[0][3],G)}}function m(w){w.value instanceof at?Promise.resolve(w.value.v).then(T,v):S(l[0][2],w)}function T(w){g("next",w)}function v(w){g("throw",w)}function S(w,O){w(O),l.shift(),l.length&&g(l[0][0],l[0][1])}}function Wl(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof DS=="function"?DS(n):n[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(l){t[l]=n[l]&&function(u){return new Promise(function(d,g){u=n[l](u),o(d,g,u.done,u.value)})}}function o(l,u,d,g){Promise.resolve(g).then(function(m){l({value:m,done:d})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _2(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:LC(t)}function LC(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function T2(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function bS(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let s=0;for(;s<t;)if(n[s].role==="user")e.push(n[s]),s++;else{const o=[];let l=!0;for(;s<t&&n[s].role==="model";)o.push(n[s]),l&&!LC(n[s])&&(l=!1),s++;l?e.push(...o):e.pop()}return e}class v2{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new E2(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class E2{constructor(e,t,s,o={},l=[]){this.apiClient=e,this.modelsModule=t,this.model=s,this.config=o,this.history=l,this.sendPromise=Promise.resolve(),T2(l)}async sendMessage(e){var t;await this.sendPromise;const s=sn(e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var l,u,d;const g=await o,m=(u=(l=g.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content,T=g.automaticFunctionCallingHistory,v=this.getHistory(!0).length;let S=[];T!=null&&(S=(d=T.slice(v))!==null&&d!==void 0?d:[]);const w=m?[m]:[];this.recordHistory(s,w,S)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(e){var t;await this.sendPromise;const s=sn(e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const l=await o;return this.processStreamResponse(l,s)}getHistory(e=!1){const t=e?bS(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){return ha(this,arguments,function*(){var o,l,u,d,g,m;const T=[];try{for(var v=!0,S=Wl(e),w;w=yield at(S.next()),o=w.done,!o;v=!0){d=w.value,v=!1;const O=d;if(_2(O)){const G=(m=(g=O.candidates)===null||g===void 0?void 0:g[0])===null||m===void 0?void 0:m.content;G!==void 0&&T.push(G)}yield yield at(O)}}catch(O){l={error:O}}finally{try{!v&&!o&&(u=S.return)&&(yield at(u.call(S)))}finally{if(l)throw l.error}}this.recordHistory(t,T)})}recordHistory(e,t,s){let o=[];t.length>0&&t.every(l=>l.role!==void 0)?o=t:o.push({role:"model",parts:[]}),s&&s.length>0?this.history.push(...bS(s)):this.history.push(e),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class od extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,od.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function S2(n){const e={},t=f(n,["file"]);return t!=null&&h(e,["file"],t),e}function A2(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function C2(n){const e={},t=f(n,["name"]);return t!=null&&h(e,["_url","file"],DC(t)),e}function I2(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function R2(n){const e={},t=f(n,["name"]);return t!=null&&h(e,["_url","file"],DC(t)),e}function w2(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&h(e,["_query","pageToken"],o),t}function N2(n){const e={},t=f(n,["config"]);return t!=null&&w2(t,e),e}function M2(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const o=f(n,["files"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["files"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class D2 extends ys{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new uo(ps.PAGED_ITEM_FILES,s=>this.listInternal(s),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=N2(e);return l=ue("files",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(m=>{const T=m;return T.sdkHttpResponse={headers:g.headers},T})),o.then(g=>{const m=M2(g),T=new Vx;return Object.assign(T,m),T})}}async createInternal(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=S2(e);return l=ue("upload/v1beta/files",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),o.then(g=>{const m=A2(g),T=new Ux;return Object.assign(T,m),T})}}async get(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=R2(e);return l=ue("files/{file}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),o.then(g=>g)}}async delete(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=C2(e);return l=ue("files/{file}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(m=>{const T=m;return T.sdkHttpResponse={headers:g.headers},T})),o.then(g=>{const m=I2(g),T=new kx;return Object.assign(T,m),T})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hf(n){const e={},t=f(n,["data"]);if(t!=null&&h(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function b2(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>K2(l))),h(e,["parts"],o)}const s=f(n,["role"]);return s!=null&&h(e,["role"],s),e}function P2(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function x2(n){const e={},t=f(n,["id"]);t!=null&&h(e,["id"],t);const s=f(n,["args"]);s!=null&&h(e,["args"],s);const o=f(n,["name"]);if(o!=null&&h(e,["name"],o),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function V2(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&h(e,["description"],t);const s=f(n,["name"]);s!=null&&h(e,["name"],s);const o=f(n,["parameters"]);o!=null&&h(e,["parameters"],o);const l=f(n,["parametersJsonSchema"]);l!=null&&h(e,["parametersJsonSchema"],l);const u=f(n,["response"]);u!=null&&h(e,["response"],u);const d=f(n,["responseJsonSchema"]);return d!=null&&h(e,["responseJsonSchema"],d),e}function U2(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&h(e,["modelConfig"],t);const s=f(n,["responseJsonSchema"]);s!=null&&h(e,["responseJsonSchema"],s);const o=f(n,["audioTimestamp"]);o!=null&&h(e,["audioTimestamp"],o);const l=f(n,["candidateCount"]);l!=null&&h(e,["candidateCount"],l);const u=f(n,["enableAffectiveDialog"]);u!=null&&h(e,["enableAffectiveDialog"],u);const d=f(n,["frequencyPenalty"]);d!=null&&h(e,["frequencyPenalty"],d);const g=f(n,["logprobs"]);g!=null&&h(e,["logprobs"],g);const m=f(n,["maxOutputTokens"]);m!=null&&h(e,["maxOutputTokens"],m);const T=f(n,["mediaResolution"]);T!=null&&h(e,["mediaResolution"],T);const v=f(n,["presencePenalty"]);v!=null&&h(e,["presencePenalty"],v);const S=f(n,["responseLogprobs"]);S!=null&&h(e,["responseLogprobs"],S);const w=f(n,["responseMimeType"]);w!=null&&h(e,["responseMimeType"],w);const O=f(n,["responseModalities"]);O!=null&&h(e,["responseModalities"],O);const G=f(n,["responseSchema"]);G!=null&&h(e,["responseSchema"],G);const F=f(n,["routingConfig"]);F!=null&&h(e,["routingConfig"],F);const $=f(n,["seed"]);$!=null&&h(e,["seed"],$);const te=f(n,["speechConfig"]);te!=null&&h(e,["speechConfig"],OC(te));const ne=f(n,["stopSequences"]);ne!=null&&h(e,["stopSequences"],ne);const le=f(n,["temperature"]);le!=null&&h(e,["temperature"],le);const me=f(n,["thinkingConfig"]);me!=null&&h(e,["thinkingConfig"],me);const fe=f(n,["topK"]);fe!=null&&h(e,["topK"],fe);const D=f(n,["topP"]);if(D!=null&&h(e,["topP"],D),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function k2(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function L2(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function O2(n,e){const t={},s=f(n,["generationConfig"]);e!==void 0&&s!=null&&h(e,["setup","generationConfig"],s);const o=f(n,["responseModalities"]);e!==void 0&&o!=null&&h(e,["setup","generationConfig","responseModalities"],o);const l=f(n,["temperature"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","temperature"],l);const u=f(n,["topP"]);e!==void 0&&u!=null&&h(e,["setup","generationConfig","topP"],u);const d=f(n,["topK"]);e!==void 0&&d!=null&&h(e,["setup","generationConfig","topK"],d);const g=f(n,["maxOutputTokens"]);e!==void 0&&g!=null&&h(e,["setup","generationConfig","maxOutputTokens"],g);const m=f(n,["mediaResolution"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","mediaResolution"],m);const T=f(n,["seed"]);e!==void 0&&T!=null&&h(e,["setup","generationConfig","seed"],T);const v=f(n,["speechConfig"]);e!==void 0&&v!=null&&h(e,["setup","generationConfig","speechConfig"],fg(v));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&h(e,["setup","generationConfig","thinkingConfig"],S);const w=f(n,["enableAffectiveDialog"]);e!==void 0&&w!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],w);const O=f(n,["systemInstruction"]);e!==void 0&&O!=null&&h(e,["setup","systemInstruction"],b2(sn(O)));const G=f(n,["tools"]);if(e!==void 0&&G!=null){let fe=Pa(G);Array.isArray(fe)&&(fe=fe.map(D=>$2(ba(D)))),h(e,["setup","tools"],fe)}const F=f(n,["sessionResumption"]);e!==void 0&&F!=null&&h(e,["setup","sessionResumption"],Q2(F));const $=f(n,["inputAudioTranscription"]);e!==void 0&&$!=null&&h(e,["setup","inputAudioTranscription"],$);const te=f(n,["outputAudioTranscription"]);e!==void 0&&te!=null&&h(e,["setup","outputAudioTranscription"],te);const ne=f(n,["realtimeInputConfig"]);e!==void 0&&ne!=null&&h(e,["setup","realtimeInputConfig"],ne);const le=f(n,["contextWindowCompression"]);e!==void 0&&le!=null&&h(e,["setup","contextWindowCompression"],le);const me=f(n,["proactivity"]);return e!==void 0&&me!=null&&h(e,["setup","proactivity"],me),t}function q2(n,e){const t={},s=f(n,["generationConfig"]);e!==void 0&&s!=null&&h(e,["setup","generationConfig"],U2(s));const o=f(n,["responseModalities"]);e!==void 0&&o!=null&&h(e,["setup","generationConfig","responseModalities"],o);const l=f(n,["temperature"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","temperature"],l);const u=f(n,["topP"]);e!==void 0&&u!=null&&h(e,["setup","generationConfig","topP"],u);const d=f(n,["topK"]);e!==void 0&&d!=null&&h(e,["setup","generationConfig","topK"],d);const g=f(n,["maxOutputTokens"]);e!==void 0&&g!=null&&h(e,["setup","generationConfig","maxOutputTokens"],g);const m=f(n,["mediaResolution"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","mediaResolution"],m);const T=f(n,["seed"]);e!==void 0&&T!=null&&h(e,["setup","generationConfig","seed"],T);const v=f(n,["speechConfig"]);e!==void 0&&v!=null&&h(e,["setup","generationConfig","speechConfig"],OC(fg(v)));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&h(e,["setup","generationConfig","thinkingConfig"],S);const w=f(n,["enableAffectiveDialog"]);e!==void 0&&w!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],w);const O=f(n,["systemInstruction"]);e!==void 0&&O!=null&&h(e,["setup","systemInstruction"],sn(O));const G=f(n,["tools"]);if(e!==void 0&&G!=null){let fe=Pa(G);Array.isArray(fe)&&(fe=fe.map(D=>X2(ba(D)))),h(e,["setup","tools"],fe)}const F=f(n,["sessionResumption"]);e!==void 0&&F!=null&&h(e,["setup","sessionResumption"],F);const $=f(n,["inputAudioTranscription"]);e!==void 0&&$!=null&&h(e,["setup","inputAudioTranscription"],$);const te=f(n,["outputAudioTranscription"]);e!==void 0&&te!=null&&h(e,["setup","outputAudioTranscription"],te);const ne=f(n,["realtimeInputConfig"]);e!==void 0&&ne!=null&&h(e,["setup","realtimeInputConfig"],ne);const le=f(n,["contextWindowCompression"]);e!==void 0&&le!=null&&h(e,["setup","contextWindowCompression"],le);const me=f(n,["proactivity"]);return e!==void 0&&me!=null&&h(e,["setup","proactivity"],me),t}function F2(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["setup","model"],Je(n,s));const o=f(e,["config"]);return o!=null&&h(t,["config"],O2(o,t)),t}function B2(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["setup","model"],Je(n,s));const o=f(e,["config"]);return o!=null&&h(t,["config"],q2(o,t)),t}function G2(n){const e={},t=f(n,["musicGenerationConfig"]);return t!=null&&h(e,["musicGenerationConfig"],t),e}function H2(n){const e={},t=f(n,["weightedPrompts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>o)),h(e,["weightedPrompts"],s)}return e}function z2(n){const e={},t=f(n,["media"]);if(t!=null){let m=IC(t);Array.isArray(m)&&(m=m.map(T=>hf(T))),h(e,["mediaChunks"],m)}const s=f(n,["audio"]);s!=null&&h(e,["audio"],hf(wC(s)));const o=f(n,["audioStreamEnd"]);o!=null&&h(e,["audioStreamEnd"],o);const l=f(n,["video"]);l!=null&&h(e,["video"],hf(RC(l)));const u=f(n,["text"]);u!=null&&h(e,["text"],u);const d=f(n,["activityStart"]);d!=null&&h(e,["activityStart"],d);const g=f(n,["activityEnd"]);return g!=null&&h(e,["activityEnd"],g),e}function J2(n){const e={},t=f(n,["media"]);if(t!=null){let m=IC(t);Array.isArray(m)&&(m=m.map(T=>T)),h(e,["mediaChunks"],m)}const s=f(n,["audio"]);s!=null&&h(e,["audio"],wC(s));const o=f(n,["audioStreamEnd"]);o!=null&&h(e,["audioStreamEnd"],o);const l=f(n,["video"]);l!=null&&h(e,["video"],RC(l));const u=f(n,["text"]);u!=null&&h(e,["text"],u);const d=f(n,["activityStart"]);d!=null&&h(e,["activityStart"],d);const g=f(n,["activityEnd"]);return g!=null&&h(e,["activityEnd"],g),e}function Y2(n){const e={},t=f(n,["setupComplete"]);t!=null&&h(e,["setupComplete"],t);const s=f(n,["serverContent"]);s!=null&&h(e,["serverContent"],s);const o=f(n,["toolCall"]);o!=null&&h(e,["toolCall"],o);const l=f(n,["toolCallCancellation"]);l!=null&&h(e,["toolCallCancellation"],l);const u=f(n,["usageMetadata"]);u!=null&&h(e,["usageMetadata"],W2(u));const d=f(n,["goAway"]);d!=null&&h(e,["goAway"],d);const g=f(n,["sessionResumptionUpdate"]);return g!=null&&h(e,["sessionResumptionUpdate"],g),e}function K2(n){const e={},t=f(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);const s=f(n,["codeExecutionResult"]);s!=null&&h(e,["codeExecutionResult"],s);const o=f(n,["executableCode"]);o!=null&&h(e,["executableCode"],o);const l=f(n,["fileData"]);l!=null&&h(e,["fileData"],P2(l));const u=f(n,["functionCall"]);u!=null&&h(e,["functionCall"],x2(u));const d=f(n,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const g=f(n,["inlineData"]);g!=null&&h(e,["inlineData"],hf(g));const m=f(n,["text"]);m!=null&&h(e,["text"],m);const T=f(n,["thought"]);T!=null&&h(e,["thought"],T);const v=f(n,["thoughtSignature"]);v!=null&&h(e,["thoughtSignature"],v);const S=f(n,["videoMetadata"]);return S!=null&&h(e,["videoMetadata"],S),e}function Q2(n){const e={},t=f(n,["handle"]);if(t!=null&&h(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function OC(n){const e={},t=f(n,["voiceConfig"]);t!=null&&h(e,["voiceConfig"],t);const s=f(n,["languageCode"]);if(s!=null&&h(e,["languageCode"],s),f(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function $2(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let T=t;Array.isArray(T)&&(T=T.map(v=>v)),h(e,["functionDeclarations"],T)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearchRetrieval"]);s!=null&&h(e,["googleSearchRetrieval"],s);const o=f(n,["computerUse"]);o!=null&&h(e,["computerUse"],o);const l=f(n,["fileSearch"]);l!=null&&h(e,["fileSearch"],l);const u=f(n,["codeExecution"]);if(u!=null&&h(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&h(e,["googleMaps"],k2(d));const g=f(n,["googleSearch"]);g!=null&&h(e,["googleSearch"],L2(g));const m=f(n,["urlContext"]);return m!=null&&h(e,["urlContext"],m),e}function X2(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(S=>V2(S))),h(e,["functionDeclarations"],v)}const s=f(n,["retrieval"]);s!=null&&h(e,["retrieval"],s);const o=f(n,["googleSearchRetrieval"]);o!=null&&h(e,["googleSearchRetrieval"],o);const l=f(n,["computerUse"]);if(l!=null&&h(e,["computerUse"],l),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=f(n,["codeExecution"]);u!=null&&h(e,["codeExecution"],u);const d=f(n,["enterpriseWebSearch"]);d!=null&&h(e,["enterpriseWebSearch"],d);const g=f(n,["googleMaps"]);g!=null&&h(e,["googleMaps"],g);const m=f(n,["googleSearch"]);m!=null&&h(e,["googleSearch"],m);const T=f(n,["urlContext"]);return T!=null&&h(e,["urlContext"],T),e}function W2(n){const e={},t=f(n,["promptTokenCount"]);t!=null&&h(e,["promptTokenCount"],t);const s=f(n,["cachedContentTokenCount"]);s!=null&&h(e,["cachedContentTokenCount"],s);const o=f(n,["candidatesTokenCount"]);o!=null&&h(e,["responseTokenCount"],o);const l=f(n,["toolUsePromptTokenCount"]);l!=null&&h(e,["toolUsePromptTokenCount"],l);const u=f(n,["thoughtsTokenCount"]);u!=null&&h(e,["thoughtsTokenCount"],u);const d=f(n,["totalTokenCount"]);d!=null&&h(e,["totalTokenCount"],d);const g=f(n,["promptTokensDetails"]);if(g!=null){let w=g;Array.isArray(w)&&(w=w.map(O=>O)),h(e,["promptTokensDetails"],w)}const m=f(n,["cacheTokensDetails"]);if(m!=null){let w=m;Array.isArray(w)&&(w=w.map(O=>O)),h(e,["cacheTokensDetails"],w)}const T=f(n,["candidatesTokensDetails"]);if(T!=null){let w=T;Array.isArray(w)&&(w=w.map(O=>O)),h(e,["responseTokensDetails"],w)}const v=f(n,["toolUsePromptTokensDetails"]);if(v!=null){let w=v;Array.isArray(w)&&(w=w.map(O=>O)),h(e,["toolUsePromptTokensDetails"],w)}const S=f(n,["trafficType"]);return S!=null&&h(e,["trafficType"],S),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Z2(n){const e={},t=f(n,["data"]);if(t!=null&&h(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function j2(n){const e={},t=f(n,["content"]);t!=null&&h(e,["content"],t);const s=f(n,["citationMetadata"]);s!=null&&h(e,["citationMetadata"],eU(s));const o=f(n,["tokenCount"]);o!=null&&h(e,["tokenCount"],o);const l=f(n,["finishReason"]);l!=null&&h(e,["finishReason"],l);const u=f(n,["avgLogprobs"]);u!=null&&h(e,["avgLogprobs"],u);const d=f(n,["groundingMetadata"]);d!=null&&h(e,["groundingMetadata"],d);const g=f(n,["index"]);g!=null&&h(e,["index"],g);const m=f(n,["logprobsResult"]);m!=null&&h(e,["logprobsResult"],m);const T=f(n,["safetyRatings"]);if(T!=null){let S=T;Array.isArray(S)&&(S=S.map(w=>w)),h(e,["safetyRatings"],S)}const v=f(n,["urlContextMetadata"]);return v!=null&&h(e,["urlContextMetadata"],v),e}function eU(n){const e={},t=f(n,["citationSources"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>o)),h(e,["citations"],s)}return e}function tU(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],Je(n,s));const o=f(e,["contents"]);if(o!=null){let l=zn(o);Array.isArray(l)&&(l=l.map(u=>u)),h(t,["contents"],l)}return t}function nU(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["tokensInfo"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>l)),h(e,["tokensInfo"],o)}return e}function iU(n){const e={},t=f(n,["values"]);t!=null&&h(e,["values"],t);const s=f(n,["statistics"]);return s!=null&&h(e,["statistics"],sU(s)),e}function sU(n){const e={},t=f(n,["truncated"]);t!=null&&h(e,["truncated"],t);const s=f(n,["token_count"]);return s!=null&&h(e,["tokenCount"],s),e}function ad(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>hk(l))),h(e,["parts"],o)}const s=f(n,["role"]);return s!=null&&h(e,["role"],s),e}function rU(n){const e={},t=f(n,["controlType"]);t!=null&&h(e,["controlType"],t);const s=f(n,["enableControlImageComputation"]);return s!=null&&h(e,["computeControl"],s),e}function oU(n){const e={};if(f(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function aU(n,e){const t={},s=f(n,["systemInstruction"]);e!==void 0&&s!=null&&h(e,["systemInstruction"],sn(s));const o=f(n,["tools"]);if(e!==void 0&&o!=null){let u=o;Array.isArray(u)&&(u=u.map(d=>HC(d))),h(e,["tools"],u)}const l=f(n,["generationConfig"]);return e!==void 0&&l!=null&&h(e,["generationConfig"],ZU(l)),t}function lU(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],Je(n,s));const o=f(e,["contents"]);if(o!=null){let u=zn(o);Array.isArray(u)&&(u=u.map(d=>ad(d))),h(t,["contents"],u)}const l=f(e,["config"]);return l!=null&&oU(l),t}function uU(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],Je(n,s));const o=f(e,["contents"]);if(o!=null){let u=zn(o);Array.isArray(u)&&(u=u.map(d=>d)),h(t,["contents"],u)}const l=f(e,["config"]);return l!=null&&aU(l,t),t}function cU(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["totalTokens"]);s!=null&&h(e,["totalTokens"],s);const o=f(n,["cachedContentTokenCount"]);return o!=null&&h(e,["cachedContentTokenCount"],o),e}function fU(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["totalTokens"]);return s!=null&&h(e,["totalTokens"],s),e}function dU(n,e){const t={},s=f(e,["model"]);return s!=null&&h(t,["_url","name"],Je(n,s)),t}function hU(n,e){const t={},s=f(e,["model"]);return s!=null&&h(t,["_url","name"],Je(n,s)),t}function pU(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function mU(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function gU(n,e){const t={},s=f(n,["outputGcsUri"]);e!==void 0&&s!=null&&h(e,["parameters","storageUri"],s);const o=f(n,["negativePrompt"]);e!==void 0&&o!=null&&h(e,["parameters","negativePrompt"],o);const l=f(n,["numberOfImages"]);e!==void 0&&l!=null&&h(e,["parameters","sampleCount"],l);const u=f(n,["aspectRatio"]);e!==void 0&&u!=null&&h(e,["parameters","aspectRatio"],u);const d=f(n,["guidanceScale"]);e!==void 0&&d!=null&&h(e,["parameters","guidanceScale"],d);const g=f(n,["seed"]);e!==void 0&&g!=null&&h(e,["parameters","seed"],g);const m=f(n,["safetyFilterLevel"]);e!==void 0&&m!=null&&h(e,["parameters","safetySetting"],m);const T=f(n,["personGeneration"]);e!==void 0&&T!=null&&h(e,["parameters","personGeneration"],T);const v=f(n,["includeSafetyAttributes"]);e!==void 0&&v!=null&&h(e,["parameters","includeSafetyAttributes"],v);const S=f(n,["includeRaiReason"]);e!==void 0&&S!=null&&h(e,["parameters","includeRaiReason"],S);const w=f(n,["language"]);e!==void 0&&w!=null&&h(e,["parameters","language"],w);const O=f(n,["outputMimeType"]);e!==void 0&&O!=null&&h(e,["parameters","outputOptions","mimeType"],O);const G=f(n,["outputCompressionQuality"]);e!==void 0&&G!=null&&h(e,["parameters","outputOptions","compressionQuality"],G);const F=f(n,["addWatermark"]);e!==void 0&&F!=null&&h(e,["parameters","addWatermark"],F);const $=f(n,["labels"]);e!==void 0&&$!=null&&h(e,["labels"],$);const te=f(n,["editMode"]);e!==void 0&&te!=null&&h(e,["parameters","editMode"],te);const ne=f(n,["baseSteps"]);return e!==void 0&&ne!=null&&h(e,["parameters","editConfig","baseSteps"],ne),t}function yU(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],Je(n,s));const o=f(e,["prompt"]);o!=null&&h(t,["instances[0]","prompt"],o);const l=f(e,["referenceImages"]);if(l!=null){let d=l;Array.isArray(d)&&(d=d.map(g=>Tk(g))),h(t,["instances[0]","referenceImages"],d)}const u=f(e,["config"]);return u!=null&&gU(u,t),t}function _U(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>ld(l))),h(e,["generatedImages"],o)}return e}function TU(n,e){const t={},s=f(n,["taskType"]);e!==void 0&&s!=null&&h(e,["requests[]","taskType"],s);const o=f(n,["title"]);e!==void 0&&o!=null&&h(e,["requests[]","title"],o);const l=f(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&h(e,["requests[]","outputDimensionality"],l),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function vU(n,e){const t={},s=f(n,["taskType"]);e!==void 0&&s!=null&&h(e,["instances[]","task_type"],s);const o=f(n,["title"]);e!==void 0&&o!=null&&h(e,["instances[]","title"],o);const l=f(n,["outputDimensionality"]);e!==void 0&&l!=null&&h(e,["parameters","outputDimensionality"],l);const u=f(n,["mimeType"]);e!==void 0&&u!=null&&h(e,["instances[]","mimeType"],u);const d=f(n,["autoTruncate"]);return e!==void 0&&d!=null&&h(e,["parameters","autoTruncate"],d),t}function EU(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],Je(n,s));const o=f(e,["contents"]);if(o!=null){let d=lg(n,o);Array.isArray(d)&&(d=d.map(g=>g)),h(t,["requests[]","content"],d)}const l=f(e,["config"]);l!=null&&TU(l,t);const u=f(e,["model"]);return u!==void 0&&h(t,["requests[]","model"],Je(n,u)),t}function SU(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],Je(n,s));const o=f(e,["contents"]);if(o!=null){let u=lg(n,o);Array.isArray(u)&&(u=u.map(d=>d)),h(t,["instances[]","content"],u)}const l=f(e,["config"]);return l!=null&&vU(l,t),t}function AU(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["embeddings"],l)}const o=f(n,["metadata"]);return o!=null&&h(e,["metadata"],o),e}function CU(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["predictions[]","embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>iU(u))),h(e,["embeddings"],l)}const o=f(n,["metadata"]);return o!=null&&h(e,["metadata"],o),e}function IU(n){const e={},t=f(n,["endpoint"]);t!=null&&h(e,["name"],t);const s=f(n,["deployedModelId"]);return s!=null&&h(e,["deployedModelId"],s),e}function RU(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function wU(n){const e={},t=f(n,["id"]);t!=null&&h(e,["id"],t);const s=f(n,["args"]);s!=null&&h(e,["args"],s);const o=f(n,["name"]);if(o!=null&&h(e,["name"],o),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function NU(n){const e={},t=f(n,["mode"]);t!=null&&h(e,["mode"],t);const s=f(n,["allowedFunctionNames"]);if(s!=null&&h(e,["allowedFunctionNames"],s),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function MU(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&h(e,["description"],t);const s=f(n,["name"]);s!=null&&h(e,["name"],s);const o=f(n,["parameters"]);o!=null&&h(e,["parameters"],o);const l=f(n,["parametersJsonSchema"]);l!=null&&h(e,["parametersJsonSchema"],l);const u=f(n,["response"]);u!=null&&h(e,["response"],u);const d=f(n,["responseJsonSchema"]);return d!=null&&h(e,["responseJsonSchema"],d),e}function DU(n,e,t){const s={},o=f(e,["systemInstruction"]);t!==void 0&&o!=null&&h(t,["systemInstruction"],ad(sn(o)));const l=f(e,["temperature"]);l!=null&&h(s,["temperature"],l);const u=f(e,["topP"]);u!=null&&h(s,["topP"],u);const d=f(e,["topK"]);d!=null&&h(s,["topK"],d);const g=f(e,["candidateCount"]);g!=null&&h(s,["candidateCount"],g);const m=f(e,["maxOutputTokens"]);m!=null&&h(s,["maxOutputTokens"],m);const T=f(e,["stopSequences"]);T!=null&&h(s,["stopSequences"],T);const v=f(e,["responseLogprobs"]);v!=null&&h(s,["responseLogprobs"],v);const S=f(e,["logprobs"]);S!=null&&h(s,["logprobs"],S);const w=f(e,["presencePenalty"]);w!=null&&h(s,["presencePenalty"],w);const O=f(e,["frequencyPenalty"]);O!=null&&h(s,["frequencyPenalty"],O);const G=f(e,["seed"]);G!=null&&h(s,["seed"],G);const F=f(e,["responseMimeType"]);F!=null&&h(s,["responseMimeType"],F);const $=f(e,["responseSchema"]);$!=null&&h(s,["responseSchema"],ug($));const te=f(e,["responseJsonSchema"]);if(te!=null&&h(s,["responseJsonSchema"],te),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const ne=f(e,["safetySettings"]);if(t!==void 0&&ne!=null){let b=ne;Array.isArray(b)&&(b=b.map(Oe=>vk(Oe))),h(t,["safetySettings"],b)}const le=f(e,["tools"]);if(t!==void 0&&le!=null){let b=Pa(le);Array.isArray(b)&&(b=b.map(Oe=>wk(ba(Oe)))),h(t,["tools"],b)}const me=f(e,["toolConfig"]);if(t!==void 0&&me!=null&&h(t,["toolConfig"],Rk(me)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const fe=f(e,["cachedContent"]);t!==void 0&&fe!=null&&h(t,["cachedContent"],_s(n,fe));const D=f(e,["responseModalities"]);D!=null&&h(s,["responseModalities"],D);const M=f(e,["mediaResolution"]);M!=null&&h(s,["mediaResolution"],M);const N=f(e,["speechConfig"]);if(N!=null&&h(s,["speechConfig"],cg(N)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const V=f(e,["thinkingConfig"]);V!=null&&h(s,["thinkingConfig"],V);const x=f(e,["imageConfig"]);x!=null&&h(s,["imageConfig"],ik(x));const L=f(e,["enableEnhancedCivicAnswers"]);return L!=null&&h(s,["enableEnhancedCivicAnswers"],L),s}function bU(n,e,t){const s={},o=f(e,["systemInstruction"]);t!==void 0&&o!=null&&h(t,["systemInstruction"],sn(o));const l=f(e,["temperature"]);l!=null&&h(s,["temperature"],l);const u=f(e,["topP"]);u!=null&&h(s,["topP"],u);const d=f(e,["topK"]);d!=null&&h(s,["topK"],d);const g=f(e,["candidateCount"]);g!=null&&h(s,["candidateCount"],g);const m=f(e,["maxOutputTokens"]);m!=null&&h(s,["maxOutputTokens"],m);const T=f(e,["stopSequences"]);T!=null&&h(s,["stopSequences"],T);const v=f(e,["responseLogprobs"]);v!=null&&h(s,["responseLogprobs"],v);const S=f(e,["logprobs"]);S!=null&&h(s,["logprobs"],S);const w=f(e,["presencePenalty"]);w!=null&&h(s,["presencePenalty"],w);const O=f(e,["frequencyPenalty"]);O!=null&&h(s,["frequencyPenalty"],O);const G=f(e,["seed"]);G!=null&&h(s,["seed"],G);const F=f(e,["responseMimeType"]);F!=null&&h(s,["responseMimeType"],F);const $=f(e,["responseSchema"]);$!=null&&h(s,["responseSchema"],ug($));const te=f(e,["responseJsonSchema"]);te!=null&&h(s,["responseJsonSchema"],te);const ne=f(e,["routingConfig"]);ne!=null&&h(s,["routingConfig"],ne);const le=f(e,["modelSelectionConfig"]);le!=null&&h(s,["modelConfig"],le);const me=f(e,["safetySettings"]);if(t!==void 0&&me!=null){let Q=me;Array.isArray(Q)&&(Q=Q.map(oe=>oe)),h(t,["safetySettings"],Q)}const fe=f(e,["tools"]);if(t!==void 0&&fe!=null){let Q=Pa(fe);Array.isArray(Q)&&(Q=Q.map(oe=>HC(ba(oe)))),h(t,["tools"],Q)}const D=f(e,["toolConfig"]);t!==void 0&&D!=null&&h(t,["toolConfig"],D);const M=f(e,["labels"]);t!==void 0&&M!=null&&h(t,["labels"],M);const N=f(e,["cachedContent"]);t!==void 0&&N!=null&&h(t,["cachedContent"],_s(n,N));const V=f(e,["responseModalities"]);V!=null&&h(s,["responseModalities"],V);const x=f(e,["mediaResolution"]);x!=null&&h(s,["mediaResolution"],x);const L=f(e,["speechConfig"]);L!=null&&h(s,["speechConfig"],GC(cg(L)));const b=f(e,["audioTimestamp"]);b!=null&&h(s,["audioTimestamp"],b);const Oe=f(e,["thinkingConfig"]);Oe!=null&&h(s,["thinkingConfig"],Oe);const pt=f(e,["imageConfig"]);if(pt!=null&&h(s,["imageConfig"],sk(pt)),f(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return s}function PS(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],Je(n,s));const o=f(e,["contents"]);if(o!=null){let u=zn(o);Array.isArray(u)&&(u=u.map(d=>ad(d))),h(t,["contents"],u)}const l=f(e,["config"]);return l!=null&&h(t,["generationConfig"],DU(n,l,t)),t}function xS(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],Je(n,s));const o=f(e,["contents"]);if(o!=null){let u=zn(o);Array.isArray(u)&&(u=u.map(d=>d)),h(t,["contents"],u)}const l=f(e,["config"]);return l!=null&&h(t,["generationConfig"],bU(n,l,t)),t}function VS(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["candidates"]);if(s!=null){let g=s;Array.isArray(g)&&(g=g.map(m=>j2(m))),h(e,["candidates"],g)}const o=f(n,["modelVersion"]);o!=null&&h(e,["modelVersion"],o);const l=f(n,["promptFeedback"]);l!=null&&h(e,["promptFeedback"],l);const u=f(n,["responseId"]);u!=null&&h(e,["responseId"],u);const d=f(n,["usageMetadata"]);return d!=null&&h(e,["usageMetadata"],d),e}function US(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["candidates"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(T=>T)),h(e,["candidates"],m)}const o=f(n,["createTime"]);o!=null&&h(e,["createTime"],o);const l=f(n,["modelVersion"]);l!=null&&h(e,["modelVersion"],l);const u=f(n,["promptFeedback"]);u!=null&&h(e,["promptFeedback"],u);const d=f(n,["responseId"]);d!=null&&h(e,["responseId"],d);const g=f(n,["usageMetadata"]);return g!=null&&h(e,["usageMetadata"],g),e}function PU(n,e){const t={};if(f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=f(n,["numberOfImages"]);e!==void 0&&s!=null&&h(e,["parameters","sampleCount"],s);const o=f(n,["aspectRatio"]);e!==void 0&&o!=null&&h(e,["parameters","aspectRatio"],o);const l=f(n,["guidanceScale"]);if(e!==void 0&&l!=null&&h(e,["parameters","guidanceScale"],l),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=f(n,["safetyFilterLevel"]);e!==void 0&&u!=null&&h(e,["parameters","safetySetting"],u);const d=f(n,["personGeneration"]);e!==void 0&&d!=null&&h(e,["parameters","personGeneration"],d);const g=f(n,["includeSafetyAttributes"]);e!==void 0&&g!=null&&h(e,["parameters","includeSafetyAttributes"],g);const m=f(n,["includeRaiReason"]);e!==void 0&&m!=null&&h(e,["parameters","includeRaiReason"],m);const T=f(n,["language"]);e!==void 0&&T!=null&&h(e,["parameters","language"],T);const v=f(n,["outputMimeType"]);e!==void 0&&v!=null&&h(e,["parameters","outputOptions","mimeType"],v);const S=f(n,["outputCompressionQuality"]);if(e!==void 0&&S!=null&&h(e,["parameters","outputOptions","compressionQuality"],S),f(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const w=f(n,["imageSize"]);if(e!==void 0&&w!=null&&h(e,["parameters","sampleImageSize"],w),f(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function xU(n,e){const t={},s=f(n,["outputGcsUri"]);e!==void 0&&s!=null&&h(e,["parameters","storageUri"],s);const o=f(n,["negativePrompt"]);e!==void 0&&o!=null&&h(e,["parameters","negativePrompt"],o);const l=f(n,["numberOfImages"]);e!==void 0&&l!=null&&h(e,["parameters","sampleCount"],l);const u=f(n,["aspectRatio"]);e!==void 0&&u!=null&&h(e,["parameters","aspectRatio"],u);const d=f(n,["guidanceScale"]);e!==void 0&&d!=null&&h(e,["parameters","guidanceScale"],d);const g=f(n,["seed"]);e!==void 0&&g!=null&&h(e,["parameters","seed"],g);const m=f(n,["safetyFilterLevel"]);e!==void 0&&m!=null&&h(e,["parameters","safetySetting"],m);const T=f(n,["personGeneration"]);e!==void 0&&T!=null&&h(e,["parameters","personGeneration"],T);const v=f(n,["includeSafetyAttributes"]);e!==void 0&&v!=null&&h(e,["parameters","includeSafetyAttributes"],v);const S=f(n,["includeRaiReason"]);e!==void 0&&S!=null&&h(e,["parameters","includeRaiReason"],S);const w=f(n,["language"]);e!==void 0&&w!=null&&h(e,["parameters","language"],w);const O=f(n,["outputMimeType"]);e!==void 0&&O!=null&&h(e,["parameters","outputOptions","mimeType"],O);const G=f(n,["outputCompressionQuality"]);e!==void 0&&G!=null&&h(e,["parameters","outputOptions","compressionQuality"],G);const F=f(n,["addWatermark"]);e!==void 0&&F!=null&&h(e,["parameters","addWatermark"],F);const $=f(n,["labels"]);e!==void 0&&$!=null&&h(e,["labels"],$);const te=f(n,["imageSize"]);e!==void 0&&te!=null&&h(e,["parameters","sampleImageSize"],te);const ne=f(n,["enhancePrompt"]);return e!==void 0&&ne!=null&&h(e,["parameters","enhancePrompt"],ne),t}function VU(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],Je(n,s));const o=f(e,["prompt"]);o!=null&&h(t,["instances[0]","prompt"],o);const l=f(e,["config"]);return l!=null&&PU(l,t),t}function UU(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],Je(n,s));const o=f(e,["prompt"]);o!=null&&h(t,["instances[0]","prompt"],o);const l=f(e,["config"]);return l!=null&&xU(l,t),t}function kU(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>QU(u))),h(e,["generatedImages"],l)}const o=f(n,["positivePromptSafetyAttributes"]);return o!=null&&h(e,["positivePromptSafetyAttributes"],FC(o)),e}function LU(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>ld(u))),h(e,["generatedImages"],l)}const o=f(n,["positivePromptSafetyAttributes"]);return o!=null&&h(e,["positivePromptSafetyAttributes"],BC(o)),e}function OU(n,e){const t={},s=f(n,["numberOfVideos"]);if(e!==void 0&&s!=null&&h(e,["parameters","sampleCount"],s),f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=f(n,["durationSeconds"]);if(e!==void 0&&o!=null&&h(e,["parameters","durationSeconds"],o),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=f(n,["aspectRatio"]);e!==void 0&&l!=null&&h(e,["parameters","aspectRatio"],l);const u=f(n,["resolution"]);e!==void 0&&u!=null&&h(e,["parameters","resolution"],u);const d=f(n,["personGeneration"]);if(e!==void 0&&d!=null&&h(e,["parameters","personGeneration"],d),f(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const g=f(n,["negativePrompt"]);e!==void 0&&g!=null&&h(e,["parameters","negativePrompt"],g);const m=f(n,["enhancePrompt"]);if(e!==void 0&&m!=null&&h(e,["parameters","enhancePrompt"],m),f(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const T=f(n,["lastFrame"]);e!==void 0&&T!=null&&h(e,["instances[0]","lastFrame"],ud(T));const v=f(n,["referenceImages"]);if(e!==void 0&&v!=null){let S=v;Array.isArray(S)&&(S=S.map(w=>Fk(w))),h(e,["instances[0]","referenceImages"],S)}if(f(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(f(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function qU(n,e){const t={},s=f(n,["numberOfVideos"]);e!==void 0&&s!=null&&h(e,["parameters","sampleCount"],s);const o=f(n,["outputGcsUri"]);e!==void 0&&o!=null&&h(e,["parameters","storageUri"],o);const l=f(n,["fps"]);e!==void 0&&l!=null&&h(e,["parameters","fps"],l);const u=f(n,["durationSeconds"]);e!==void 0&&u!=null&&h(e,["parameters","durationSeconds"],u);const d=f(n,["seed"]);e!==void 0&&d!=null&&h(e,["parameters","seed"],d);const g=f(n,["aspectRatio"]);e!==void 0&&g!=null&&h(e,["parameters","aspectRatio"],g);const m=f(n,["resolution"]);e!==void 0&&m!=null&&h(e,["parameters","resolution"],m);const T=f(n,["personGeneration"]);e!==void 0&&T!=null&&h(e,["parameters","personGeneration"],T);const v=f(n,["pubsubTopic"]);e!==void 0&&v!=null&&h(e,["parameters","pubsubTopic"],v);const S=f(n,["negativePrompt"]);e!==void 0&&S!=null&&h(e,["parameters","negativePrompt"],S);const w=f(n,["enhancePrompt"]);e!==void 0&&w!=null&&h(e,["parameters","enhancePrompt"],w);const O=f(n,["generateAudio"]);e!==void 0&&O!=null&&h(e,["parameters","generateAudio"],O);const G=f(n,["lastFrame"]);e!==void 0&&G!=null&&h(e,["instances[0]","lastFrame"],li(G));const F=f(n,["referenceImages"]);if(e!==void 0&&F!=null){let ne=F;Array.isArray(ne)&&(ne=ne.map(le=>Bk(le))),h(e,["instances[0]","referenceImages"],ne)}const $=f(n,["mask"]);e!==void 0&&$!=null&&h(e,["instances[0]","mask"],qk($));const te=f(n,["compressionQuality"]);return e!==void 0&&te!=null&&h(e,["parameters","compressionQuality"],te),t}function FU(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const s=f(n,["metadata"]);s!=null&&h(e,["metadata"],s);const o=f(n,["done"]);o!=null&&h(e,["done"],o);const l=f(n,["error"]);l!=null&&h(e,["error"],l);const u=f(n,["response","generateVideoResponse"]);return u!=null&&h(e,["response"],zU(u)),e}function BU(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const s=f(n,["metadata"]);s!=null&&h(e,["metadata"],s);const o=f(n,["done"]);o!=null&&h(e,["done"],o);const l=f(n,["error"]);l!=null&&h(e,["error"],l);const u=f(n,["response"]);return u!=null&&h(e,["response"],JU(u)),e}function GU(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],Je(n,s));const o=f(e,["prompt"]);o!=null&&h(t,["instances[0]","prompt"],o);const l=f(e,["image"]);l!=null&&h(t,["instances[0]","image"],ud(l));const u=f(e,["video"]);u!=null&&h(t,["instances[0]","video"],zC(u));const d=f(e,["source"]);d!=null&&YU(d,t);const g=f(e,["config"]);return g!=null&&OU(g,t),t}function HU(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],Je(n,s));const o=f(e,["prompt"]);o!=null&&h(t,["instances[0]","prompt"],o);const l=f(e,["image"]);l!=null&&h(t,["instances[0]","image"],li(l));const u=f(e,["video"]);u!=null&&h(t,["instances[0]","video"],JC(u));const d=f(e,["source"]);d!=null&&KU(d,t);const g=f(e,["config"]);return g!=null&&qU(g,t),t}function zU(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>XU(u))),h(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&h(e,["raiMediaFilteredCount"],s);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&h(e,["raiMediaFilteredReasons"],o),e}function JU(n){const e={},t=f(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>WU(u))),h(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&h(e,["raiMediaFilteredCount"],s);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&h(e,["raiMediaFilteredReasons"],o),e}function YU(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&h(e,["instances[0]","prompt"],s);const o=f(n,["image"]);e!==void 0&&o!=null&&h(e,["instances[0]","image"],ud(o));const l=f(n,["video"]);return e!==void 0&&l!=null&&h(e,["instances[0]","video"],zC(l)),t}function KU(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&h(e,["instances[0]","prompt"],s);const o=f(n,["image"]);e!==void 0&&o!=null&&h(e,["instances[0]","image"],li(o));const l=f(n,["video"]);return e!==void 0&&l!=null&&h(e,["instances[0]","video"],JC(l)),t}function QU(n){const e={},t=f(n,["_self"]);t!=null&&h(e,["image"],rk(t));const s=f(n,["raiFilteredReason"]);s!=null&&h(e,["raiFilteredReason"],s);const o=f(n,["_self"]);return o!=null&&h(e,["safetyAttributes"],FC(o)),e}function ld(n){const e={},t=f(n,["_self"]);t!=null&&h(e,["image"],qC(t));const s=f(n,["raiFilteredReason"]);s!=null&&h(e,["raiFilteredReason"],s);const o=f(n,["_self"]);o!=null&&h(e,["safetyAttributes"],BC(o));const l=f(n,["prompt"]);return l!=null&&h(e,["enhancedPrompt"],l),e}function $U(n){const e={},t=f(n,["_self"]);t!=null&&h(e,["mask"],qC(t));const s=f(n,["labels"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>l)),h(e,["labels"],o)}return e}function XU(n){const e={},t=f(n,["video"]);return t!=null&&h(e,["video"],Lk(t)),e}function WU(n){const e={},t=f(n,["_self"]);return t!=null&&h(e,["video"],Ok(t)),e}function ZU(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&h(e,["modelConfig"],t);const s=f(n,["responseJsonSchema"]);s!=null&&h(e,["responseJsonSchema"],s);const o=f(n,["audioTimestamp"]);o!=null&&h(e,["audioTimestamp"],o);const l=f(n,["candidateCount"]);l!=null&&h(e,["candidateCount"],l);const u=f(n,["enableAffectiveDialog"]);u!=null&&h(e,["enableAffectiveDialog"],u);const d=f(n,["frequencyPenalty"]);d!=null&&h(e,["frequencyPenalty"],d);const g=f(n,["logprobs"]);g!=null&&h(e,["logprobs"],g);const m=f(n,["maxOutputTokens"]);m!=null&&h(e,["maxOutputTokens"],m);const T=f(n,["mediaResolution"]);T!=null&&h(e,["mediaResolution"],T);const v=f(n,["presencePenalty"]);v!=null&&h(e,["presencePenalty"],v);const S=f(n,["responseLogprobs"]);S!=null&&h(e,["responseLogprobs"],S);const w=f(n,["responseMimeType"]);w!=null&&h(e,["responseMimeType"],w);const O=f(n,["responseModalities"]);O!=null&&h(e,["responseModalities"],O);const G=f(n,["responseSchema"]);G!=null&&h(e,["responseSchema"],G);const F=f(n,["routingConfig"]);F!=null&&h(e,["routingConfig"],F);const $=f(n,["seed"]);$!=null&&h(e,["seed"],$);const te=f(n,["speechConfig"]);te!=null&&h(e,["speechConfig"],GC(te));const ne=f(n,["stopSequences"]);ne!=null&&h(e,["stopSequences"],ne);const le=f(n,["temperature"]);le!=null&&h(e,["temperature"],le);const me=f(n,["thinkingConfig"]);me!=null&&h(e,["thinkingConfig"],me);const fe=f(n,["topK"]);fe!=null&&h(e,["topK"],fe);const D=f(n,["topP"]);if(D!=null&&h(e,["topP"],D),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function jU(n,e){const t={},s=f(e,["model"]);return s!=null&&h(t,["_url","name"],Je(n,s)),t}function ek(n,e){const t={},s=f(e,["model"]);return s!=null&&h(t,["_url","name"],Je(n,s)),t}function tk(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function nk(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function ik(n){const e={},t=f(n,["aspectRatio"]);t!=null&&h(e,["aspectRatio"],t);const s=f(n,["imageSize"]);if(s!=null&&h(e,["imageSize"],s),f(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function sk(n){const e={},t=f(n,["aspectRatio"]);t!=null&&h(e,["aspectRatio"],t);const s=f(n,["imageSize"]);s!=null&&h(e,["imageSize"],s);const o=f(n,["outputMimeType"]);o!=null&&h(e,["imageOutputOptions","mimeType"],o);const l=f(n,["outputCompressionQuality"]);return l!=null&&h(e,["imageOutputOptions","compressionQuality"],l),e}function rk(n){const e={},t=f(n,["bytesBase64Encoded"]);t!=null&&h(e,["imageBytes"],Er(t));const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function qC(n){const e={},t=f(n,["gcsUri"]);t!=null&&h(e,["gcsUri"],t);const s=f(n,["bytesBase64Encoded"]);s!=null&&h(e,["imageBytes"],Er(s));const o=f(n,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function ud(n){const e={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=f(n,["imageBytes"]);t!=null&&h(e,["bytesBase64Encoded"],Er(t));const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function li(n){const e={},t=f(n,["gcsUri"]);t!=null&&h(e,["gcsUri"],t);const s=f(n,["imageBytes"]);s!=null&&h(e,["bytesBase64Encoded"],Er(s));const o=f(n,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function ok(n,e,t){const s={},o=f(e,["pageSize"]);t!==void 0&&o!=null&&h(t,["_query","pageSize"],o);const l=f(e,["pageToken"]);t!==void 0&&l!=null&&h(t,["_query","pageToken"],l);const u=f(e,["filter"]);t!==void 0&&u!=null&&h(t,["_query","filter"],u);const d=f(e,["queryBase"]);return t!==void 0&&d!=null&&h(t,["_url","models_url"],bC(n,d)),s}function ak(n,e,t){const s={},o=f(e,["pageSize"]);t!==void 0&&o!=null&&h(t,["_query","pageSize"],o);const l=f(e,["pageToken"]);t!==void 0&&l!=null&&h(t,["_query","pageToken"],l);const u=f(e,["filter"]);t!==void 0&&u!=null&&h(t,["_query","filter"],u);const d=f(e,["queryBase"]);return t!==void 0&&d!=null&&h(t,["_url","models_url"],bC(n,d)),s}function lk(n,e){const t={},s=f(e,["config"]);return s!=null&&ok(n,s,t),t}function uk(n,e){const t={},s=f(e,["config"]);return s!=null&&ak(n,s,t),t}function ck(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const o=f(n,["_self"]);if(o!=null){let l=PC(o);Array.isArray(l)&&(l=l.map(u=>im(u))),h(e,["models"],l)}return e}function fk(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const o=f(n,["_self"]);if(o!=null){let l=PC(o);Array.isArray(l)&&(l=l.map(u=>sm(u))),h(e,["models"],l)}return e}function dk(n){const e={},t=f(n,["maskMode"]);t!=null&&h(e,["maskMode"],t);const s=f(n,["segmentationClasses"]);s!=null&&h(e,["maskClasses"],s);const o=f(n,["maskDilation"]);return o!=null&&h(e,["dilation"],o),e}function im(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const s=f(n,["displayName"]);s!=null&&h(e,["displayName"],s);const o=f(n,["description"]);o!=null&&h(e,["description"],o);const l=f(n,["version"]);l!=null&&h(e,["version"],l);const u=f(n,["_self"]);u!=null&&h(e,["tunedModelInfo"],Nk(u));const d=f(n,["inputTokenLimit"]);d!=null&&h(e,["inputTokenLimit"],d);const g=f(n,["outputTokenLimit"]);g!=null&&h(e,["outputTokenLimit"],g);const m=f(n,["supportedGenerationMethods"]);m!=null&&h(e,["supportedActions"],m);const T=f(n,["temperature"]);T!=null&&h(e,["temperature"],T);const v=f(n,["maxTemperature"]);v!=null&&h(e,["maxTemperature"],v);const S=f(n,["topP"]);S!=null&&h(e,["topP"],S);const w=f(n,["topK"]);w!=null&&h(e,["topK"],w);const O=f(n,["thinking"]);return O!=null&&h(e,["thinking"],O),e}function sm(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const s=f(n,["displayName"]);s!=null&&h(e,["displayName"],s);const o=f(n,["description"]);o!=null&&h(e,["description"],o);const l=f(n,["versionId"]);l!=null&&h(e,["version"],l);const u=f(n,["deployedModels"]);if(u!=null){let v=u;Array.isArray(v)&&(v=v.map(S=>IU(S))),h(e,["endpoints"],v)}const d=f(n,["labels"]);d!=null&&h(e,["labels"],d);const g=f(n,["_self"]);g!=null&&h(e,["tunedModelInfo"],Mk(g));const m=f(n,["defaultCheckpointId"]);m!=null&&h(e,["defaultCheckpointId"],m);const T=f(n,["checkpoints"]);if(T!=null){let v=T;Array.isArray(v)&&(v=v.map(S=>S)),h(e,["checkpoints"],v)}return e}function hk(n){const e={},t=f(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);const s=f(n,["codeExecutionResult"]);s!=null&&h(e,["codeExecutionResult"],s);const o=f(n,["executableCode"]);o!=null&&h(e,["executableCode"],o);const l=f(n,["fileData"]);l!=null&&h(e,["fileData"],RU(l));const u=f(n,["functionCall"]);u!=null&&h(e,["functionCall"],wU(u));const d=f(n,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const g=f(n,["inlineData"]);g!=null&&h(e,["inlineData"],Z2(g));const m=f(n,["text"]);m!=null&&h(e,["text"],m);const T=f(n,["thought"]);T!=null&&h(e,["thought"],T);const v=f(n,["thoughtSignature"]);v!=null&&h(e,["thoughtSignature"],v);const S=f(n,["videoMetadata"]);return S!=null&&h(e,["videoMetadata"],S),e}function pk(n){const e={},t=f(n,["productImage"]);return t!=null&&h(e,["image"],li(t)),e}function mk(n,e){const t={},s=f(n,["numberOfImages"]);e!==void 0&&s!=null&&h(e,["parameters","sampleCount"],s);const o=f(n,["baseSteps"]);e!==void 0&&o!=null&&h(e,["parameters","baseSteps"],o);const l=f(n,["outputGcsUri"]);e!==void 0&&l!=null&&h(e,["parameters","storageUri"],l);const u=f(n,["seed"]);e!==void 0&&u!=null&&h(e,["parameters","seed"],u);const d=f(n,["safetyFilterLevel"]);e!==void 0&&d!=null&&h(e,["parameters","safetySetting"],d);const g=f(n,["personGeneration"]);e!==void 0&&g!=null&&h(e,["parameters","personGeneration"],g);const m=f(n,["addWatermark"]);e!==void 0&&m!=null&&h(e,["parameters","addWatermark"],m);const T=f(n,["outputMimeType"]);e!==void 0&&T!=null&&h(e,["parameters","outputOptions","mimeType"],T);const v=f(n,["outputCompressionQuality"]);e!==void 0&&v!=null&&h(e,["parameters","outputOptions","compressionQuality"],v);const S=f(n,["enhancePrompt"]);e!==void 0&&S!=null&&h(e,["parameters","enhancePrompt"],S);const w=f(n,["labels"]);return e!==void 0&&w!=null&&h(e,["labels"],w),t}function gk(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],Je(n,s));const o=f(e,["source"]);o!=null&&_k(o,t);const l=f(e,["config"]);return l!=null&&mk(l,t),t}function yk(n){const e={},t=f(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>ld(o))),h(e,["generatedImages"],s)}return e}function _k(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&h(e,["instances[0]","prompt"],s);const o=f(n,["personImage"]);e!==void 0&&o!=null&&h(e,["instances[0]","personImage","image"],li(o));const l=f(n,["productImages"]);if(e!==void 0&&l!=null){let u=l;Array.isArray(u)&&(u=u.map(d=>pk(d))),h(e,["instances[0]","productImages"],u)}return t}function Tk(n){const e={},t=f(n,["referenceImage"]);t!=null&&h(e,["referenceImage"],li(t));const s=f(n,["referenceId"]);s!=null&&h(e,["referenceId"],s);const o=f(n,["referenceType"]);o!=null&&h(e,["referenceType"],o);const l=f(n,["maskImageConfig"]);l!=null&&h(e,["maskImageConfig"],dk(l));const u=f(n,["controlImageConfig"]);u!=null&&h(e,["controlImageConfig"],rU(u));const d=f(n,["styleImageConfig"]);d!=null&&h(e,["styleImageConfig"],d);const g=f(n,["subjectImageConfig"]);return g!=null&&h(e,["subjectImageConfig"],g),e}function FC(n){const e={},t=f(n,["safetyAttributes","categories"]);t!=null&&h(e,["categories"],t);const s=f(n,["safetyAttributes","scores"]);s!=null&&h(e,["scores"],s);const o=f(n,["contentType"]);return o!=null&&h(e,["contentType"],o),e}function BC(n){const e={},t=f(n,["safetyAttributes","categories"]);t!=null&&h(e,["categories"],t);const s=f(n,["safetyAttributes","scores"]);s!=null&&h(e,["scores"],s);const o=f(n,["contentType"]);return o!=null&&h(e,["contentType"],o),e}function vk(n){const e={},t=f(n,["category"]);if(t!=null&&h(e,["category"],t),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=f(n,["threshold"]);return s!=null&&h(e,["threshold"],s),e}function Ek(n){const e={},t=f(n,["image"]);return t!=null&&h(e,["image"],li(t)),e}function Sk(n,e){const t={},s=f(n,["mode"]);e!==void 0&&s!=null&&h(e,["parameters","mode"],s);const o=f(n,["maxPredictions"]);e!==void 0&&o!=null&&h(e,["parameters","maxPredictions"],o);const l=f(n,["confidenceThreshold"]);e!==void 0&&l!=null&&h(e,["parameters","confidenceThreshold"],l);const u=f(n,["maskDilation"]);e!==void 0&&u!=null&&h(e,["parameters","maskDilation"],u);const d=f(n,["binaryColorThreshold"]);e!==void 0&&d!=null&&h(e,["parameters","binaryColorThreshold"],d);const g=f(n,["labels"]);return e!==void 0&&g!=null&&h(e,["labels"],g),t}function Ak(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],Je(n,s));const o=f(e,["source"]);o!=null&&Ik(o,t);const l=f(e,["config"]);return l!=null&&Sk(l,t),t}function Ck(n){const e={},t=f(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>$U(o))),h(e,["generatedMasks"],s)}return e}function Ik(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&h(e,["instances[0]","prompt"],s);const o=f(n,["image"]);e!==void 0&&o!=null&&h(e,["instances[0]","image"],li(o));const l=f(n,["scribbleImage"]);return e!==void 0&&l!=null&&h(e,["instances[0]","scribble"],Ek(l)),t}function GC(n){const e={},t=f(n,["voiceConfig"]);t!=null&&h(e,["voiceConfig"],t);const s=f(n,["languageCode"]);if(s!=null&&h(e,["languageCode"],s),f(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function Rk(n){const e={},t=f(n,["functionCallingConfig"]);t!=null&&h(e,["functionCallingConfig"],NU(t));const s=f(n,["retrievalConfig"]);return s!=null&&h(e,["retrievalConfig"],s),e}function wk(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let T=t;Array.isArray(T)&&(T=T.map(v=>v)),h(e,["functionDeclarations"],T)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearchRetrieval"]);s!=null&&h(e,["googleSearchRetrieval"],s);const o=f(n,["computerUse"]);o!=null&&h(e,["computerUse"],o);const l=f(n,["fileSearch"]);l!=null&&h(e,["fileSearch"],l);const u=f(n,["codeExecution"]);if(u!=null&&h(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&h(e,["googleMaps"],tk(d));const g=f(n,["googleSearch"]);g!=null&&h(e,["googleSearch"],nk(g));const m=f(n,["urlContext"]);return m!=null&&h(e,["urlContext"],m),e}function HC(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(S=>MU(S))),h(e,["functionDeclarations"],v)}const s=f(n,["retrieval"]);s!=null&&h(e,["retrieval"],s);const o=f(n,["googleSearchRetrieval"]);o!=null&&h(e,["googleSearchRetrieval"],o);const l=f(n,["computerUse"]);if(l!=null&&h(e,["computerUse"],l),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=f(n,["codeExecution"]);u!=null&&h(e,["codeExecution"],u);const d=f(n,["enterpriseWebSearch"]);d!=null&&h(e,["enterpriseWebSearch"],d);const g=f(n,["googleMaps"]);g!=null&&h(e,["googleMaps"],g);const m=f(n,["googleSearch"]);m!=null&&h(e,["googleSearch"],m);const T=f(n,["urlContext"]);return T!=null&&h(e,["urlContext"],T),e}function Nk(n){const e={},t=f(n,["baseModel"]);t!=null&&h(e,["baseModel"],t);const s=f(n,["createTime"]);s!=null&&h(e,["createTime"],s);const o=f(n,["updateTime"]);return o!=null&&h(e,["updateTime"],o),e}function Mk(n){const e={},t=f(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&h(e,["baseModel"],t);const s=f(n,["createTime"]);s!=null&&h(e,["createTime"],s);const o=f(n,["updateTime"]);return o!=null&&h(e,["updateTime"],o),e}function Dk(n,e){const t={},s=f(n,["displayName"]);e!==void 0&&s!=null&&h(e,["displayName"],s);const o=f(n,["description"]);e!==void 0&&o!=null&&h(e,["description"],o);const l=f(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&h(e,["defaultCheckpointId"],l),t}function bk(n,e){const t={},s=f(n,["displayName"]);e!==void 0&&s!=null&&h(e,["displayName"],s);const o=f(n,["description"]);e!==void 0&&o!=null&&h(e,["description"],o);const l=f(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&h(e,["defaultCheckpointId"],l),t}function Pk(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","name"],Je(n,s));const o=f(e,["config"]);return o!=null&&Dk(o,t),t}function xk(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],Je(n,s));const o=f(e,["config"]);return o!=null&&bk(o,t),t}function Vk(n,e){const t={},s=f(n,["outputGcsUri"]);e!==void 0&&s!=null&&h(e,["parameters","storageUri"],s);const o=f(n,["safetyFilterLevel"]);e!==void 0&&o!=null&&h(e,["parameters","safetySetting"],o);const l=f(n,["personGeneration"]);e!==void 0&&l!=null&&h(e,["parameters","personGeneration"],l);const u=f(n,["includeRaiReason"]);e!==void 0&&u!=null&&h(e,["parameters","includeRaiReason"],u);const d=f(n,["outputMimeType"]);e!==void 0&&d!=null&&h(e,["parameters","outputOptions","mimeType"],d);const g=f(n,["outputCompressionQuality"]);e!==void 0&&g!=null&&h(e,["parameters","outputOptions","compressionQuality"],g);const m=f(n,["enhanceInputImage"]);e!==void 0&&m!=null&&h(e,["parameters","upscaleConfig","enhanceInputImage"],m);const T=f(n,["imagePreservationFactor"]);e!==void 0&&T!=null&&h(e,["parameters","upscaleConfig","imagePreservationFactor"],T);const v=f(n,["labels"]);e!==void 0&&v!=null&&h(e,["labels"],v);const S=f(n,["numberOfImages"]);e!==void 0&&S!=null&&h(e,["parameters","sampleCount"],S);const w=f(n,["mode"]);return e!==void 0&&w!=null&&h(e,["parameters","mode"],w),t}function Uk(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],Je(n,s));const o=f(e,["image"]);o!=null&&h(t,["instances[0]","image"],li(o));const l=f(e,["upscaleFactor"]);l!=null&&h(t,["parameters","upscaleConfig","upscaleFactor"],l);const u=f(e,["config"]);return u!=null&&Vk(u,t),t}function kk(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>ld(l))),h(e,["generatedImages"],o)}return e}function Lk(n){const e={},t=f(n,["uri"]);t!=null&&h(e,["uri"],t);const s=f(n,["encodedVideo"]);s!=null&&h(e,["videoBytes"],Er(s));const o=f(n,["encoding"]);return o!=null&&h(e,["mimeType"],o),e}function Ok(n){const e={},t=f(n,["gcsUri"]);t!=null&&h(e,["uri"],t);const s=f(n,["bytesBase64Encoded"]);s!=null&&h(e,["videoBytes"],Er(s));const o=f(n,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function qk(n){const e={},t=f(n,["image"]);t!=null&&h(e,["_self"],li(t));const s=f(n,["maskMode"]);return s!=null&&h(e,["maskMode"],s),e}function Fk(n){const e={},t=f(n,["image"]);t!=null&&h(e,["image"],ud(t));const s=f(n,["referenceType"]);return s!=null&&h(e,["referenceType"],s),e}function Bk(n){const e={},t=f(n,["image"]);t!=null&&h(e,["image"],li(t));const s=f(n,["referenceType"]);return s!=null&&h(e,["referenceType"],s),e}function zC(n){const e={},t=f(n,["uri"]);t!=null&&h(e,["uri"],t);const s=f(n,["videoBytes"]);s!=null&&h(e,["encodedVideo"],Er(s));const o=f(n,["mimeType"]);return o!=null&&h(e,["encoding"],o),e}function JC(n){const e={},t=f(n,["uri"]);t!=null&&h(e,["gcsUri"],t);const s=f(n,["videoBytes"]);s!=null&&h(e,["bytesBase64Encoded"],Er(s));const o=f(n,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Gk(n,e){const t={},s=f(n,["displayName"]);return e!==void 0&&s!=null&&h(e,["displayName"],s),t}function Hk(n){const e={},t=f(n,["config"]);return t!=null&&Gk(t,e),e}function zk(n,e){const t={},s=f(n,["force"]);return e!==void 0&&s!=null&&h(e,["_query","force"],s),t}function Jk(n){const e={},t=f(n,["name"]);t!=null&&h(e,["_url","name"],t);const s=f(n,["config"]);return s!=null&&zk(s,e),e}function Yk(n){const e={},t=f(n,["name"]);return t!=null&&h(e,["_url","name"],t),e}function Kk(n,e){const t={},s=f(n,["customMetadata"]);if(e!==void 0&&s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["customMetadata"],l)}const o=f(n,["chunkingConfig"]);return e!==void 0&&o!=null&&h(e,["chunkingConfig"],o),t}function Qk(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const s=f(n,["metadata"]);s!=null&&h(e,["metadata"],s);const o=f(n,["done"]);o!=null&&h(e,["done"],o);const l=f(n,["error"]);l!=null&&h(e,["error"],l);const u=f(n,["response"]);return u!=null&&h(e,["response"],Xk(u)),e}function $k(n){const e={},t=f(n,["fileSearchStoreName"]);t!=null&&h(e,["_url","file_search_store_name"],t);const s=f(n,["fileName"]);s!=null&&h(e,["fileName"],s);const o=f(n,["config"]);return o!=null&&Kk(o,e),e}function Xk(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["parent"]);s!=null&&h(e,["parent"],s);const o=f(n,["documentName"]);return o!=null&&h(e,["documentName"],o),e}function Wk(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&h(e,["_query","pageToken"],o),t}function Zk(n){const e={},t=f(n,["config"]);return t!=null&&Wk(t,e),e}function jk(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const o=f(n,["fileSearchStores"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["fileSearchStores"],l)}return e}function YC(n,e){const t={},s=f(n,["mimeType"]);e!==void 0&&s!=null&&h(e,["mimeType"],s);const o=f(n,["displayName"]);e!==void 0&&o!=null&&h(e,["displayName"],o);const l=f(n,["customMetadata"]);if(e!==void 0&&l!=null){let d=l;Array.isArray(d)&&(d=d.map(g=>g)),h(e,["customMetadata"],d)}const u=f(n,["chunkingConfig"]);return e!==void 0&&u!=null&&h(e,["chunkingConfig"],u),t}function eL(n){const e={},t=f(n,["fileSearchStoreName"]);t!=null&&h(e,["_url","file_search_store_name"],t);const s=f(n,["config"]);return s!=null&&YC(s,e),e}function tL(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const nL="Content-Type",iL="X-Server-Timeout",sL="User-Agent",rm="x-goog-api-client",rL="1.32.0",oL=`google-genai-sdk/${rL}`,aL="v1beta1",lL="v1beta";class uL{constructor(e){var t,s;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:aL,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:lL,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const s=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&s.push(e.apiVersion),s.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,s){const o=[this.getRequestUrlInternal(t)];return s&&o.push(this.getBaseResourcePath()),e!==""&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,s);if(e.queryParams)for(const[u,d]of Object.entries(e.queryParams))o.searchParams.append(u,String(d));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,t,o.toString(),e.abortSignal),this.unaryApiCall(o,l,e.httpMethod)}patchHttpOptions(e,t){const s=JSON.parse(JSON.stringify(e));for(const[o,l]of Object.entries(t))typeof l=="object"?s[o]=Object.assign(Object.assign({},s[o]),l):l!==void 0&&(s[o]=l);return s}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,s);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,t,o.toString(),e.abortSignal),this.streamApiCall(o,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,s,o){if(t&&t.timeout||o){const l=new AbortController,u=l.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const d=setTimeout(()=>l.abort(),t.timeout);d&&typeof d.unref=="function"&&d.unref()}o&&o.addEventListener("abort",()=>{l.abort()}),e.signal=u}return t&&t.extraBody!==null&&cL(e,t.extraBody),e.headers=await this.getHeadersInternal(t,s),e}async unaryApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async o=>(await kS(o),new em(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async o=>(await kS(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(e){return ha(this,arguments,function*(){var s;const o=(s=e==null?void 0:e.body)===null||s===void 0?void 0:s.getReader(),l=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let u="";const d="data:",g=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:m,value:T}=yield at(o.read());if(m){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const v=l.decode(T,{stream:!0});try{const O=JSON.parse(v);if("error"in O){const G=JSON.parse(JSON.stringify(O.error)),F=G.status,$=G.code,te=`got status: ${F}. ${JSON.stringify(O)}`;if($>=400&&$<600)throw new od({message:te,status:$})}}catch(O){if(O.name==="ApiError")throw O}u+=v;let S=-1,w=0;for(;;){S=-1,w=0;for(const F of g){const $=u.indexOf(F);$!==-1&&(S===-1||$<S)&&(S=$,w=F.length)}if(S===-1)break;const O=u.substring(0,S);u=u.substring(S+w);const G=O.trim();if(G.startsWith(d)){const F=G.substring(d.length).trim();try{const $=new Response(F,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield at(new em($))}catch($){throw new Error(`exception parsing stream chunk ${F}. ${$}`)}}}}}finally{o.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(s=>{throw new Error(`exception ${s} sending request`)})}getDefaultHeaders(){const e={},t=oL+" "+this.clientOptions.userAgentExtra;return e[sL]=t,e[rm]=t,e[nL]="application/json",e}async getHeadersInternal(e,t){const s=new Headers;if(e&&e.headers){for(const[o,l]of Object.entries(e.headers))s.append(o,l);e.timeout&&e.timeout>0&&s.append(iL,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(s,t),s}getFileName(e){var t;let s="";return typeof e=="string"&&(s=e.replace(/[/\\]+$/,""),s=(t=s.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),s}async uploadFile(e,t){var s;const o={};t!=null&&(o.mimeType=t.mimeType,o.name=t.name,o.displayName=t.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const l=this.clientOptions.uploader,u=await l.stat(e);o.sizeBytes=String(u.size);const d=(s=t==null?void 0:t.mimeType)!==null&&s!==void 0?s:u.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=d;const g={file:o},m=this.getFileName(e),T=ue("upload/v1beta/files",g._url),v=await this.fetchUploadUrl(T,o.sizeBytes,o.mimeType,m,g,t==null?void 0:t.httpOptions);return l.upload(e,v,this)}async uploadFileToFileSearchStore(e,t,s){var o;const l=this.clientOptions.uploader,u=await l.stat(t),d=String(u.size),g=(o=s==null?void 0:s.mimeType)!==null&&o!==void 0?o:u.type;if(g===void 0||g==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const m=`upload/v1beta/${e}:uploadToFileSearchStore`,T=this.getFileName(t),v={};s!=null&&YC(s,v);const S=await this.fetchUploadUrl(m,d,g,T,v,s==null?void 0:s.httpOptions);return l.uploadToFileSearchStore(t,S,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,s,o,l,u){var d;let g={};u?g=u:g={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${s}`},o?{"X-Goog-Upload-File-Name":o}:{})};const m=await this.request({path:e,body:JSON.stringify(l),httpMethod:"POST",httpOptions:g});if(!m||!(m!=null&&m.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const T=(d=m==null?void 0:m.headers)===null||d===void 0?void 0:d["x-goog-upload-url"];if(T===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return T}}async function kS(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let s;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?s=await n.json():s={error:{message:await n.text(),code:n.status,status:n.statusText}};const o=JSON.stringify(s);throw t>=400&&t<600?new od({message:o,status:t}):new Error(o)}}function cL(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const l=JSON.parse(n.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))t=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function s(l,u){const d=Object.assign({},l);for(const g in u)if(Object.prototype.hasOwnProperty.call(u,g)){const m=u[g],T=d[g];m&&typeof m=="object"&&!Array.isArray(m)&&T&&typeof T=="object"&&!Array.isArray(T)?d[g]=s(T,m):(T&&m&&typeof T!=typeof m&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${g}". Original type: ${typeof T}, New type: ${typeof m}. Overwriting.`),d[g]=m)}return d}const o=s(t,e);n.body=JSON.stringify(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const fL="mcp_used/unknown";let dL=!1;function KC(n){for(const e of n)if(hL(e)||typeof e=="object"&&"inputSchema"in e)return!0;return dL}function QC(n){var e;const t=(e=n[rm])!==null&&e!==void 0?e:"";n[rm]=(t+` ${fL}`).trimStart()}function hL(n){return n!==null&&typeof n=="object"&&n instanceof dg}function pL(n){return ha(this,arguments,function*(t,s=100){let o,l=0;for(;l<s;){const u=yield at(t.listTools({cursor:o}));for(const d of u.tools)yield yield at(d),l++;if(!u.nextCursor)break;o=u.nextCursor}})}class dg{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new dg(e,t)}async initialize(){var e,t,s,o;if(this.mcpTools.length>0)return;const l={},u=[];for(const T of this.mcpClients)try{for(var d=!0,g=(t=void 0,Wl(pL(T))),m;m=await g.next(),e=m.done,!e;d=!0){o=m.value,d=!1;const v=o;u.push(v);const S=v.name;if(l[S])throw new Error(`Duplicate function name ${S} found in MCP tools. Please ensure function names are unique.`);l[S]=T}}catch(v){t={error:v}}finally{try{!d&&!e&&(s=g.return)&&await s.call(g)}finally{if(t)throw t.error}}this.mcpTools=u,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),Yx(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const s of e)if(s.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[s.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const u=await o.callTool({name:s.name,arguments:s.args},void 0,l);t.push({functionResponse:{name:s.name,response:u.isError?{error:u}:u}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function mL(n,e,t){const s=new Ox;let o;t.data instanceof Blob?o=JSON.parse(await t.data.text()):o=JSON.parse(t.data),Object.assign(s,o),e(s)}class gL{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s}async connect(e){var t,s;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),u=TL(this.apiClient.getDefaultHeaders()),d=this.apiClient.getApiKey(),g=`${o}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${d}`;let m=()=>{};const T=new Promise(ne=>{m=ne}),v=e.callbacks,S=function(){m({})},w=this.apiClient,O={onopen:S,onmessage:ne=>{mL(w,v.onmessage,ne)},onerror:(t=v==null?void 0:v.onerror)!==null&&t!==void 0?t:function(ne){},onclose:(s=v==null?void 0:v.onclose)!==null&&s!==void 0?s:function(ne){}},G=this.webSocketFactory.create(g,_L(u),O);G.connect(),await T;const te={setup:{model:Je(this.apiClient,e.model)}};return G.send(JSON.stringify(te)),new yL(G,this.apiClient)}}class yL{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=H2(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=G2(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(oa.PLAY)}pause(){this.sendPlaybackControl(oa.PAUSE)}stop(){this.sendPlaybackControl(oa.STOP)}resetContext(){this.sendPlaybackControl(oa.RESET_CONTEXT)}close(){this.conn.close()}}function _L(n){const e={};return n.forEach((t,s)=>{e[s]=t}),e}function TL(n){const e=new Headers;for(const[t,s]of Object.entries(n))e.append(t,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const vL="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function EL(n,e,t){const s=new Lx;let o;t.data instanceof Blob?o=await t.data.text():t.data instanceof ArrayBuffer?o=new TextDecoder().decode(t.data):o=t.data;const l=JSON.parse(o);if(n.isVertexAI()){const u=Y2(l);Object.assign(s,u)}else Object.assign(s,l);e(s)}class SL{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s,this.music=new gL(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,s,o,l,u,d;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const g=this.apiClient.getWebsocketBaseUrl(),m=this.apiClient.getApiVersion();let T;const v=this.apiClient.getHeaders();e.config&&e.config.tools&&KC(e.config.tools)&&QC(v);const S=RL(v);if(this.apiClient.isVertexAI())T=`${g}/ws/google.cloud.aiplatform.${m}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(S,T);else{const N=this.apiClient.getApiKey();let V="BidiGenerateContent",x="key";N!=null&&N.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),m!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),V="BidiGenerateContentConstrained",x="access_token"),T=`${g}/ws/google.ai.generativelanguage.${m}.GenerativeService.${V}?${x}=${N}`}let w=()=>{};const O=new Promise(N=>{w=N}),G=e.callbacks,F=function(){var N;(N=G==null?void 0:G.onopen)===null||N===void 0||N.call(G),w({})},$=this.apiClient,te={onopen:F,onmessage:N=>{EL($,G.onmessage,N)},onerror:(t=G==null?void 0:G.onerror)!==null&&t!==void 0?t:function(N){},onclose:(s=G==null?void 0:G.onclose)!==null&&s!==void 0?s:function(N){}},ne=this.webSocketFactory.create(T,IL(S),te);ne.connect(),await O;let le=Je(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&le.startsWith("publishers/")){const N=this.apiClient.getProject(),V=this.apiClient.getLocation();le=`projects/${N}/locations/${V}/`+le}let me={};this.apiClient.isVertexAI()&&((o=e.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Vf.AUDIO]}:e.config.responseModalities=[Vf.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const fe=(d=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[],D=[];for(const N of fe)if(this.isCallableTool(N)){const V=N;D.push(await V.tool())}else D.push(N);D.length>0&&(e.config.tools=D);const M={model:le,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?me=B2(this.apiClient,M):me=F2(this.apiClient,M),delete me.config,ne.send(JSON.stringify(me)),new CL(ne,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const AL={turnComplete:!0};class CL{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let s=[];try{s=zn(t.turns),e.isVertexAI()||(s=s.map(o=>ad(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:s,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let s=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?s=t.functionResponses:s=[t.functionResponses],s.length===0)throw new Error("functionResponses is required.");for(const l of s){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(vL)}return{toolResponse:{functionResponses:s}}}sendClientContent(e){e=Object.assign(Object.assign({},AL),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:J2(e)}:t={realtimeInput:z2(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function IL(n){const e={};return n.forEach((t,s)=>{e[s]=t}),e}function RL(n){const e=new Headers;for(const[t,s]of Object.entries(n))e.append(t,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const LS=10;function OS(n){var e,t,s;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let o=!1;for(const u of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(pa(u)){o=!0;break}if(!o)return!0;const l=(s=n==null?void 0:n.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function pa(n){return"callTool"in n&&typeof n.callTool=="function"}function wL(n){var e,t,s;return(s=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(o=>pa(o)))!==null&&s!==void 0?s:!1}function qS(n){var e;const t=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((s,o)=>{if(pa(s))return;const l=s;l.functionDeclarations&&l.functionDeclarations.length>0&&t.push(o)}),t}function FS(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class NL extends ys{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var s,o,l,u,d;const g=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!wL(t)||OS(t.config))return await this.generateContentInternal(g);const m=qS(t);if(m.length>0){const G=m.map(F=>`tools[${F}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${G}.`)}let T,v;const S=zn(g.contents),w=(l=(o=(s=g.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&l!==void 0?l:LS;let O=0;for(;O<w&&(T=await this.generateContentInternal(g),!(!T.functionCalls||T.functionCalls.length===0));){const G=T.candidates[0].content,F=[];for(const $ of(d=(u=t.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[])if(pa($)){const ne=await $.callTool(T.functionCalls);F.push(...ne)}O++,v={role:"user",parts:F},g.contents=zn(g.contents),g.contents.push(G),g.contents.push(v),FS(g.config)&&(S.push(G),S.push(v))}return FS(g.config)&&(T.automaticFunctionCallingHistory=S),T},this.generateContentStream=async t=>{var s,o,l,u,d;if(this.maybeMoveToResponseJsonSchem(t),OS(t.config)){const v=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(v)}const g=qS(t);if(g.length>0){const v=g.map(S=>`tools[${S}]`).join(", ");throw new Error(`Incompatible tools found at ${v}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const m=(l=(o=(s=t==null?void 0:t.config)===null||s===void 0?void 0:s.toolConfig)===null||o===void 0?void 0:o.functionCallingConfig)===null||l===void 0?void 0:l.streamFunctionCallArguments,T=(d=(u=t==null?void 0:t.config)===null||u===void 0?void 0:u.automaticFunctionCalling)===null||d===void 0?void 0:d.disable;if(m&&!T)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(s=>{var o;let l;const u=[];if(s!=null&&s.generatedImages)for(const g of s.generatedImages)g&&(g!=null&&g.safetyAttributes)&&((o=g==null?void 0:g.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?l=g==null?void 0:g.safetyAttributes:u.push(g);let d;return l?d={generatedImages:u,positivePromptSafetyAttributes:l,sdkHttpResponse:s.sdkHttpResponse}:d={generatedImages:u,sdkHttpResponse:s.sdkHttpResponse},d}),this.list=async t=>{var s;const u={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((s=u.config)===null||s===void 0)&&s.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new uo(ps.PAGED_ITEM_MODELS,d=>this.listInternal(d),await this.listInternal(u),u)},this.editImage=async t=>{const s={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(s.referenceImages=t.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(s)},this.upscaleImage=async t=>{let s={numberOfImages:1,mode:"upscale"};t.config&&(s=Object.assign(Object.assign({},s),t.config));const o={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:s};return await this.upscaleImageInternal(o)},this.generateVideos=async t=>{var s,o,l,u,d,g;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((s=t.video)===null||s===void 0)&&s.uri&&(!((o=t.video)===null||o===void 0)&&o.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((u=(l=t.source)===null||l===void 0?void 0:l.video)===null||u===void 0)&&u.uri&&(!((g=(d=t.source)===null||d===void 0?void 0:d.video)===null||g===void 0)&&g.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,s,o;const l=(t=e.config)===null||t===void 0?void 0:t.tools;if(!l)return e;const u=await Promise.all(l.map(async g=>pa(g)?await g.tool():g)),d={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(d.config.tools=u,e.config&&e.config.tools&&KC(e.config.tools)){const g=(o=(s=e.config.httpOptions)===null||s===void 0?void 0:s.headers)!==null&&o!==void 0?o:{};let m=Object.assign({},g);Object.keys(m).length===0&&(m=this.apiClient.getDefaultHeaders()),QC(m),d.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:m})}return d}async initAfcToolsMap(e){var t,s,o;const l=new Map;for(const u of(s=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&s!==void 0?s:[])if(pa(u)){const d=u,g=await d.tool();for(const m of(o=g.functionDeclarations)!==null&&o!==void 0?o:[]){if(!m.name)throw new Error("Function declaration name is required.");if(l.has(m.name))throw new Error(`Duplicate tool declaration name: ${m.name}`);l.set(m.name,d)}}return l}async processAfcStream(e){var t,s,o;const l=(o=(s=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&o!==void 0?o:LS;let u=!1,d=0;const g=await this.initAfcToolsMap(e);return(function(m,T,v){return ha(this,arguments,function*(){for(var S,w,O,G,F,$;d<l;){u&&(d++,u=!1);const me=yield at(m.processParamsMaybeAddMcpUsage(v)),fe=yield at(m.generateContentStreamInternal(me)),D=[],M=[];try{for(var te=!0,ne=(w=void 0,Wl(fe)),le;le=yield at(ne.next()),S=le.done,!S;te=!0){G=le.value,te=!1;const N=G;if(yield yield at(N),N.candidates&&(!((F=N.candidates[0])===null||F===void 0)&&F.content)){M.push(N.candidates[0].content);for(const V of($=N.candidates[0].content.parts)!==null&&$!==void 0?$:[])if(d<l&&V.functionCall){if(!V.functionCall.name)throw new Error("Function call name was not returned by the model.");if(T.has(V.functionCall.name)){const x=yield at(T.get(V.functionCall.name).callTool([V.functionCall]));D.push(...x)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${T.keys()}, mising tool: ${V.functionCall.name}`)}}}}catch(N){w={error:N}}finally{try{!te&&!S&&(O=ne.return)&&(yield at(O.call(ne)))}finally{if(w)throw w.error}}if(D.length>0){u=!0;const N=new Fl;N.candidates=[{content:{role:"user",parts:D}}],yield yield at(N);const V=[];V.push(...M),V.push({role:"user",parts:D});const x=zn(v.contents).concat(V);v.contents=x}else break}})})(this,g,e)}async generateContentInternal(e){var t,s,o,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=xS(this.apiClient,e);return d=ue("{model}:generateContent",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(v=>{const S=v;return S.sdkHttpResponse={headers:T.headers},S})),u.then(T=>{const v=US(T),S=new Fl;return Object.assign(S,v),S})}else{const m=PS(this.apiClient,e);return d=ue("{model}:generateContent",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(v=>{const S=v;return S.sdkHttpResponse={headers:T.headers},S})),u.then(T=>{const v=VS(T),S=new Fl;return Object.assign(S,v),S})}}async generateContentStreamInternal(e){var t,s,o,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=xS(this.apiClient,e);return d=ue("{model}:streamGenerateContent?alt=sse",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.requestStream({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),u.then(function(v){return ha(this,arguments,function*(){var S,w,O,G;try{for(var F=!0,$=Wl(v),te;te=yield at($.next()),S=te.done,!S;F=!0){G=te.value,F=!1;const ne=G,le=US(yield at(ne.json()));le.sdkHttpResponse={headers:ne.headers};const me=new Fl;Object.assign(me,le),yield yield at(me)}}catch(ne){w={error:ne}}finally{try{!F&&!S&&(O=$.return)&&(yield at(O.call($)))}finally{if(w)throw w.error}}})})}else{const m=PS(this.apiClient,e);return d=ue("{model}:streamGenerateContent?alt=sse",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.requestStream({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),u.then(function(v){return ha(this,arguments,function*(){var S,w,O,G;try{for(var F=!0,$=Wl(v),te;te=yield at($.next()),S=te.done,!S;F=!0){G=te.value,F=!1;const ne=G,le=VS(yield at(ne.json()));le.sdkHttpResponse={headers:ne.headers};const me=new Fl;Object.assign(me,le),yield yield at(me)}}catch(ne){w={error:ne}}finally{try{!F&&!S&&(O=$.return)&&(yield at(O.call($)))}finally{if(w)throw w.error}}})})}}async embedContent(e){var t,s,o,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=SU(this.apiClient,e);return d=ue("{model}:predict",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(v=>{const S=v;return S.sdkHttpResponse={headers:T.headers},S})),u.then(T=>{const v=CU(T),S=new mS;return Object.assign(S,v),S})}else{const m=EU(this.apiClient,e);return d=ue("{model}:batchEmbedContents",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(v=>{const S=v;return S.sdkHttpResponse={headers:T.headers},S})),u.then(T=>{const v=AU(T),S=new mS;return Object.assign(S,v),S})}}async generateImagesInternal(e){var t,s,o,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=UU(this.apiClient,e);return d=ue("{model}:predict",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(v=>{const S=v;return S.sdkHttpResponse={headers:T.headers},S})),u.then(T=>{const v=LU(T),S=new gS;return Object.assign(S,v),S})}else{const m=VU(this.apiClient,e);return d=ue("{model}:predict",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(v=>{const S=v;return S.sdkHttpResponse={headers:T.headers},S})),u.then(T=>{const v=kU(T),S=new gS;return Object.assign(S,v),S})}}async editImageInternal(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=yU(this.apiClient,e);return l=ue("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(m=>{const T=m;return T.sdkHttpResponse={headers:g.headers},T})),o.then(g=>{const m=_U(g),T=new Rx;return Object.assign(T,m),T})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=Uk(this.apiClient,e);return l=ue("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(m=>{const T=m;return T.sdkHttpResponse={headers:g.headers},T})),o.then(g=>{const m=kk(g),T=new wx;return Object.assign(T,m),T})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=gk(this.apiClient,e);return l=ue("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),o.then(g=>{const m=yk(g),T=new Nx;return Object.assign(T,m),T})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=Ak(this.apiClient,e);return l=ue("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),o.then(g=>{const m=Ck(g),T=new Mx;return Object.assign(T,m),T})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,s,o,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=ek(this.apiClient,e);return d=ue("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json()),u.then(T=>sm(T))}else{const m=jU(this.apiClient,e);return d=ue("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json()),u.then(T=>im(T))}}async listInternal(e){var t,s,o,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=uk(this.apiClient,e);return d=ue("{models_url}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(v=>{const S=v;return S.sdkHttpResponse={headers:T.headers},S})),u.then(T=>{const v=fk(T),S=new yS;return Object.assign(S,v),S})}else{const m=lk(this.apiClient,e);return d=ue("{models_url}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(v=>{const S=v;return S.sdkHttpResponse={headers:T.headers},S})),u.then(T=>{const v=ck(T),S=new yS;return Object.assign(S,v),S})}}async update(e){var t,s,o,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=xk(this.apiClient,e);return d=ue("{model}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json()),u.then(T=>sm(T))}else{const m=Pk(this.apiClient,e);return d=ue("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json()),u.then(T=>im(T))}}async delete(e){var t,s,o,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=hU(this.apiClient,e);return d=ue("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(v=>{const S=v;return S.sdkHttpResponse={headers:T.headers},S})),u.then(T=>{const v=mU(T),S=new _S;return Object.assign(S,v),S})}else{const m=dU(this.apiClient,e);return d=ue("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(v=>{const S=v;return S.sdkHttpResponse={headers:T.headers},S})),u.then(T=>{const v=pU(T),S=new _S;return Object.assign(S,v),S})}}async countTokens(e){var t,s,o,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=uU(this.apiClient,e);return d=ue("{model}:countTokens",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(v=>{const S=v;return S.sdkHttpResponse={headers:T.headers},S})),u.then(T=>{const v=fU(T),S=new TS;return Object.assign(S,v),S})}else{const m=lU(this.apiClient,e);return d=ue("{model}:countTokens",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(v=>{const S=v;return S.sdkHttpResponse={headers:T.headers},S})),u.then(T=>{const v=cU(T),S=new TS;return Object.assign(S,v),S})}}async computeTokens(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=tU(this.apiClient,e);return l=ue("{model}:computeTokens",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(m=>{const T=m;return T.sdkHttpResponse={headers:g.headers},T})),o.then(g=>{const m=nU(g),T=new Dx;return Object.assign(T,m),T})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,s,o,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=HU(this.apiClient,e);return d=ue("{model}:predictLongRunning",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json()),u.then(T=>{const v=BU(T),S=new Uf;return Object.assign(S,v),S})}else{const m=GU(this.apiClient,e);return d=ue("{model}:predictLongRunning",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json()),u.then(T=>{const v=FU(T),S=new Uf;return Object.assign(S,v),S})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ML extends ys{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,s=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:t.name,config:s});return t._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async get(e){const t=e.operation,s=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:t.name,config:s});return t._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,s,o,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=vx(e);return d=ue("{operationName}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json()),u}else{const m=Tx(e);return d=ue("{operationName}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json()),u}}async fetchPredictVideosOperationInternal(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=dx(e);return l=ue("{resourceName}:fetchPredictOperation",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function DL(n){const e={},t=f(n,["data"]);if(t!=null&&h(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function bL(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>FL(l))),h(e,["parts"],o)}const s=f(n,["role"]);return s!=null&&h(e,["role"],s),e}function PL(n,e,t){const s={},o=f(e,["expireTime"]);t!==void 0&&o!=null&&h(t,["expireTime"],o);const l=f(e,["newSessionExpireTime"]);t!==void 0&&l!=null&&h(t,["newSessionExpireTime"],l);const u=f(e,["uses"]);t!==void 0&&u!=null&&h(t,["uses"],u);const d=f(e,["liveConnectConstraints"]);t!==void 0&&d!=null&&h(t,["bidiGenerateContentSetup"],qL(n,d));const g=f(e,["lockAdditionalFields"]);return t!==void 0&&g!=null&&h(t,["fieldMask"],g),s}function xL(n,e){const t={},s=f(e,["config"]);return s!=null&&h(t,["config"],PL(n,s,t)),t}function VL(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function UL(n){const e={},t=f(n,["id"]);t!=null&&h(e,["id"],t);const s=f(n,["args"]);s!=null&&h(e,["args"],s);const o=f(n,["name"]);if(o!=null&&h(e,["name"],o),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function kL(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function LL(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function OL(n,e){const t={},s=f(n,["generationConfig"]);e!==void 0&&s!=null&&h(e,["setup","generationConfig"],s);const o=f(n,["responseModalities"]);e!==void 0&&o!=null&&h(e,["setup","generationConfig","responseModalities"],o);const l=f(n,["temperature"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","temperature"],l);const u=f(n,["topP"]);e!==void 0&&u!=null&&h(e,["setup","generationConfig","topP"],u);const d=f(n,["topK"]);e!==void 0&&d!=null&&h(e,["setup","generationConfig","topK"],d);const g=f(n,["maxOutputTokens"]);e!==void 0&&g!=null&&h(e,["setup","generationConfig","maxOutputTokens"],g);const m=f(n,["mediaResolution"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","mediaResolution"],m);const T=f(n,["seed"]);e!==void 0&&T!=null&&h(e,["setup","generationConfig","seed"],T);const v=f(n,["speechConfig"]);e!==void 0&&v!=null&&h(e,["setup","generationConfig","speechConfig"],fg(v));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&h(e,["setup","generationConfig","thinkingConfig"],S);const w=f(n,["enableAffectiveDialog"]);e!==void 0&&w!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],w);const O=f(n,["systemInstruction"]);e!==void 0&&O!=null&&h(e,["setup","systemInstruction"],bL(sn(O)));const G=f(n,["tools"]);if(e!==void 0&&G!=null){let fe=Pa(G);Array.isArray(fe)&&(fe=fe.map(D=>GL(ba(D)))),h(e,["setup","tools"],fe)}const F=f(n,["sessionResumption"]);e!==void 0&&F!=null&&h(e,["setup","sessionResumption"],BL(F));const $=f(n,["inputAudioTranscription"]);e!==void 0&&$!=null&&h(e,["setup","inputAudioTranscription"],$);const te=f(n,["outputAudioTranscription"]);e!==void 0&&te!=null&&h(e,["setup","outputAudioTranscription"],te);const ne=f(n,["realtimeInputConfig"]);e!==void 0&&ne!=null&&h(e,["setup","realtimeInputConfig"],ne);const le=f(n,["contextWindowCompression"]);e!==void 0&&le!=null&&h(e,["setup","contextWindowCompression"],le);const me=f(n,["proactivity"]);return e!==void 0&&me!=null&&h(e,["setup","proactivity"],me),t}function qL(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["setup","model"],Je(n,s));const o=f(e,["config"]);return o!=null&&h(t,["config"],OL(o,t)),t}function FL(n){const e={},t=f(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);const s=f(n,["codeExecutionResult"]);s!=null&&h(e,["codeExecutionResult"],s);const o=f(n,["executableCode"]);o!=null&&h(e,["executableCode"],o);const l=f(n,["fileData"]);l!=null&&h(e,["fileData"],VL(l));const u=f(n,["functionCall"]);u!=null&&h(e,["functionCall"],UL(u));const d=f(n,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const g=f(n,["inlineData"]);g!=null&&h(e,["inlineData"],DL(g));const m=f(n,["text"]);m!=null&&h(e,["text"],m);const T=f(n,["thought"]);T!=null&&h(e,["thought"],T);const v=f(n,["thoughtSignature"]);v!=null&&h(e,["thoughtSignature"],v);const S=f(n,["videoMetadata"]);return S!=null&&h(e,["videoMetadata"],S),e}function BL(n){const e={},t=f(n,["handle"]);if(t!=null&&h(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function GL(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let T=t;Array.isArray(T)&&(T=T.map(v=>v)),h(e,["functionDeclarations"],T)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearchRetrieval"]);s!=null&&h(e,["googleSearchRetrieval"],s);const o=f(n,["computerUse"]);o!=null&&h(e,["computerUse"],o);const l=f(n,["fileSearch"]);l!=null&&h(e,["fileSearch"],l);const u=f(n,["codeExecution"]);if(u!=null&&h(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&h(e,["googleMaps"],kL(d));const g=f(n,["googleSearch"]);g!=null&&h(e,["googleSearch"],LL(g));const m=f(n,["urlContext"]);return m!=null&&h(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function HL(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const s=n[t];if(typeof s=="object"&&s!=null&&Object.keys(s).length>0){const o=Object.keys(s).map(l=>`${t}.${l}`);e.push(...o)}else e.push(t)}return e.join(",")}function zL(n,e){let t=null;const s=n.bidiGenerateContentSetup;if(typeof s=="object"&&s!==null&&"setup"in s){const l=s.setup;typeof l=="object"&&l!==null?(n.bidiGenerateContentSetup=l,t=l):delete n.bidiGenerateContentSetup}else s!==void 0&&delete n.bidiGenerateContentSetup;const o=n.fieldMask;if(t){const l=HL(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?n.fieldMask=l:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let d=[];o.length>0&&(d=o.map(m=>u.includes(m)?`generationConfig.${m}`:m));const g=[];l&&g.push(l),d.length>0&&g.push(...d),g.length>0?n.fieldMask=g.join(","):delete n.fieldMask}else delete n.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?n.fieldMask=o.join(","):delete n.fieldMask;return n}class JL extends ys{constructor(e){super(),this.apiClient=e}async create(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const d=xL(this.apiClient,e);l=ue("auth_tokens",d._url),u=d._query,delete d.config,delete d._url,delete d._query;const g=zL(d,e.config);return o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),o.then(m=>m)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function YL(n,e){const t={},s=f(n,["force"]);return e!==void 0&&s!=null&&h(e,["_query","force"],s),t}function KL(n){const e={},t=f(n,["name"]);t!=null&&h(e,["_url","name"],t);const s=f(n,["config"]);return s!=null&&YL(s,e),e}function QL(n){const e={},t=f(n,["name"]);return t!=null&&h(e,["_url","name"],t),e}function $L(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&h(e,["_query","pageToken"],o),t}function XL(n){const e={},t=f(n,["parent"]);t!=null&&h(e,["_url","parent"],t);const s=f(n,["config"]);return s!=null&&$L(s,e),e}function WL(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const o=f(n,["documents"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["documents"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ZL extends ys{constructor(e){super(),this.apiClient=e,this.list=async t=>new uo(ps.PAGED_ITEM_DOCUMENTS,s=>this.listInternal({parent:t.parent,config:s.config}),await this.listInternal(t),t)}async get(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=QL(e);return l=ue("{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),o.then(g=>g)}}async delete(e){var t,s;let o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=KL(e);o=ue("{name}",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=XL(e);return l=ue("{parent}/documents",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),o.then(g=>{const m=WL(g),T=new bx;return Object.assign(T,m),T})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class jL extends ys{constructor(e,t=new ZL(e)){super(),this.apiClient=e,this.documents=t,this.list=async(s={})=>new uo(ps.PAGED_ITEM_FILE_SEARCH_STORES,o=>this.listInternal(o),await this.listInternal(s),s)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Hk(e);return l=ue("fileSearchStores",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),o.then(g=>g)}}async get(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Yk(e);return l=ue("{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),o.then(g=>g)}}async delete(e){var t,s;let o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Jk(e);o=ue("{name}",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Zk(e);return l=ue("fileSearchStores",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),o.then(g=>{const m=jk(g),T=new Px;return Object.assign(T,m),T})}}async uploadToFileSearchStoreInternal(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=eL(e);return l=ue("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),o.then(g=>{const m=tL(g),T=new xx;return Object.assign(T,m),T})}}async importFile(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=$k(e);return l=ue("{file_search_store_name}:importFile",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),o.then(g=>{const m=Qk(g),T=new og;return Object.assign(T,m),T})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function eO(n,e){const t={},s=f(n,["name"]);return s!=null&&h(t,["_url","name"],s),t}function tO(n,e){const t={},s=f(n,["name"]);return s!=null&&h(t,["_url","name"],s),t}function nO(n,e){const t={},s=f(n,["sdkHttpResponse"]);return s!=null&&h(t,["sdkHttpResponse"],s),t}function iO(n,e){const t={},s=f(n,["sdkHttpResponse"]);return s!=null&&h(t,["sdkHttpResponse"],s),t}function sO(n,e,t){const s={};if(f(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=f(n,["tunedModelDisplayName"]);if(e!==void 0&&o!=null&&h(e,["displayName"],o),f(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=f(n,["epochCount"]);e!==void 0&&l!=null&&h(e,["tuningTask","hyperparameters","epochCount"],l);const u=f(n,["learningRateMultiplier"]);if(u!=null&&h(s,["tuningTask","hyperparameters","learningRateMultiplier"],u),f(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(f(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(f(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const d=f(n,["batchSize"]);e!==void 0&&d!=null&&h(e,["tuningTask","hyperparameters","batchSize"],d);const g=f(n,["learningRate"]);if(e!==void 0&&g!=null&&h(e,["tuningTask","hyperparameters","learningRate"],g),f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(f(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return s}function rO(n,e,t){const s={};let o=f(t,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const w=f(n,["validationDataset"]);e!==void 0&&w!=null&&h(e,["supervisedTuningSpec"],BS(w))}else if(o==="PREFERENCE_TUNING"){const w=f(n,["validationDataset"]);e!==void 0&&w!=null&&h(e,["preferenceOptimizationSpec"],BS(w))}const l=f(n,["tunedModelDisplayName"]);e!==void 0&&l!=null&&h(e,["tunedModelDisplayName"],l);const u=f(n,["description"]);e!==void 0&&u!=null&&h(e,["description"],u);let d=f(t,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const w=f(n,["epochCount"]);e!==void 0&&w!=null&&h(e,["supervisedTuningSpec","hyperParameters","epochCount"],w)}else if(d==="PREFERENCE_TUNING"){const w=f(n,["epochCount"]);e!==void 0&&w!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],w)}let g=f(t,["config","method"]);if(g===void 0&&(g="SUPERVISED_FINE_TUNING"),g==="SUPERVISED_FINE_TUNING"){const w=f(n,["learningRateMultiplier"]);e!==void 0&&w!=null&&h(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],w)}else if(g==="PREFERENCE_TUNING"){const w=f(n,["learningRateMultiplier"]);e!==void 0&&w!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],w)}let m=f(t,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const w=f(n,["exportLastCheckpointOnly"]);e!==void 0&&w!=null&&h(e,["supervisedTuningSpec","exportLastCheckpointOnly"],w)}else if(m==="PREFERENCE_TUNING"){const w=f(n,["exportLastCheckpointOnly"]);e!==void 0&&w!=null&&h(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],w)}let T=f(t,["config","method"]);if(T===void 0&&(T="SUPERVISED_FINE_TUNING"),T==="SUPERVISED_FINE_TUNING"){const w=f(n,["adapterSize"]);e!==void 0&&w!=null&&h(e,["supervisedTuningSpec","hyperParameters","adapterSize"],w)}else if(T==="PREFERENCE_TUNING"){const w=f(n,["adapterSize"]);e!==void 0&&w!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],w)}if(f(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(f(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const v=f(n,["labels"]);e!==void 0&&v!=null&&h(e,["labels"],v);const S=f(n,["beta"]);return e!==void 0&&S!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","beta"],S),s}function oO(n,e){const t={},s=f(n,["baseModel"]);s!=null&&h(t,["baseModel"],s);const o=f(n,["preTunedModel"]);o!=null&&h(t,["preTunedModel"],o);const l=f(n,["trainingDataset"]);l!=null&&yO(l);const u=f(n,["config"]);return u!=null&&sO(u,t),t}function aO(n,e){const t={},s=f(n,["baseModel"]);s!=null&&h(t,["baseModel"],s);const o=f(n,["preTunedModel"]);o!=null&&h(t,["preTunedModel"],o);const l=f(n,["trainingDataset"]);l!=null&&_O(l,t,e);const u=f(n,["config"]);return u!=null&&rO(u,t,e),t}function lO(n,e){const t={},s=f(n,["name"]);return s!=null&&h(t,["_url","name"],s),t}function uO(n,e){const t={},s=f(n,["name"]);return s!=null&&h(t,["_url","name"],s),t}function cO(n,e,t){const s={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const l=f(n,["pageToken"]);e!==void 0&&l!=null&&h(e,["_query","pageToken"],l);const u=f(n,["filter"]);return e!==void 0&&u!=null&&h(e,["_query","filter"],u),s}function fO(n,e,t){const s={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const l=f(n,["pageToken"]);e!==void 0&&l!=null&&h(e,["_query","pageToken"],l);const u=f(n,["filter"]);return e!==void 0&&u!=null&&h(e,["_query","filter"],u),s}function dO(n,e){const t={},s=f(n,["config"]);return s!=null&&cO(s,t),t}function hO(n,e){const t={},s=f(n,["config"]);return s!=null&&fO(s,t),t}function pO(n,e){const t={},s=f(n,["sdkHttpResponse"]);s!=null&&h(t,["sdkHttpResponse"],s);const o=f(n,["nextPageToken"]);o!=null&&h(t,["nextPageToken"],o);const l=f(n,["tunedModels"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(d=>$C(d))),h(t,["tuningJobs"],u)}return t}function mO(n,e){const t={},s=f(n,["sdkHttpResponse"]);s!=null&&h(t,["sdkHttpResponse"],s);const o=f(n,["nextPageToken"]);o!=null&&h(t,["nextPageToken"],o);const l=f(n,["tuningJobs"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(d=>om(d))),h(t,["tuningJobs"],u)}return t}function gO(n,e){const t={},s=f(n,["name"]);s!=null&&h(t,["model"],s);const o=f(n,["name"]);return o!=null&&h(t,["endpoint"],o),t}function yO(n,e){const t={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const s=f(n,["examples"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>l)),h(t,["examples","examples"],o)}return t}function _O(n,e,t){const s={};let o=f(t,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const u=f(n,["gcsUri"]);e!==void 0&&u!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(o==="PREFERENCE_TUNING"){const u=f(n,["gcsUri"]);e!==void 0&&u!=null&&h(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}let l=f(t,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const u=f(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(l==="PREFERENCE_TUNING"){const u=f(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&h(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}if(f(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return s}function $C(n,e){const t={},s=f(n,["sdkHttpResponse"]);s!=null&&h(t,["sdkHttpResponse"],s);const o=f(n,["name"]);o!=null&&h(t,["name"],o);const l=f(n,["state"]);l!=null&&h(t,["state"],MC(l));const u=f(n,["createTime"]);u!=null&&h(t,["createTime"],u);const d=f(n,["tuningTask","startTime"]);d!=null&&h(t,["startTime"],d);const g=f(n,["tuningTask","completeTime"]);g!=null&&h(t,["endTime"],g);const m=f(n,["updateTime"]);m!=null&&h(t,["updateTime"],m);const T=f(n,["description"]);T!=null&&h(t,["description"],T);const v=f(n,["baseModel"]);v!=null&&h(t,["baseModel"],v);const S=f(n,["_self"]);return S!=null&&h(t,["tunedModel"],gO(S)),t}function om(n,e){const t={},s=f(n,["sdkHttpResponse"]);s!=null&&h(t,["sdkHttpResponse"],s);const o=f(n,["name"]);o!=null&&h(t,["name"],o);const l=f(n,["state"]);l!=null&&h(t,["state"],MC(l));const u=f(n,["createTime"]);u!=null&&h(t,["createTime"],u);const d=f(n,["startTime"]);d!=null&&h(t,["startTime"],d);const g=f(n,["endTime"]);g!=null&&h(t,["endTime"],g);const m=f(n,["updateTime"]);m!=null&&h(t,["updateTime"],m);const T=f(n,["error"]);T!=null&&h(t,["error"],T);const v=f(n,["description"]);v!=null&&h(t,["description"],v);const S=f(n,["baseModel"]);S!=null&&h(t,["baseModel"],S);const w=f(n,["tunedModel"]);w!=null&&h(t,["tunedModel"],w);const O=f(n,["preTunedModel"]);O!=null&&h(t,["preTunedModel"],O);const G=f(n,["supervisedTuningSpec"]);G!=null&&h(t,["supervisedTuningSpec"],G);const F=f(n,["preferenceOptimizationSpec"]);F!=null&&h(t,["preferenceOptimizationSpec"],F);const $=f(n,["tuningDataStats"]);$!=null&&h(t,["tuningDataStats"],$);const te=f(n,["encryptionSpec"]);te!=null&&h(t,["encryptionSpec"],te);const ne=f(n,["partnerModelTuningSpec"]);ne!=null&&h(t,["partnerModelTuningSpec"],ne);const le=f(n,["customBaseModel"]);le!=null&&h(t,["customBaseModel"],le);const me=f(n,["experiment"]);me!=null&&h(t,["experiment"],me);const fe=f(n,["labels"]);fe!=null&&h(t,["labels"],fe);const D=f(n,["outputUri"]);D!=null&&h(t,["outputUri"],D);const M=f(n,["pipelineJob"]);M!=null&&h(t,["pipelineJob"],M);const N=f(n,["serviceAccount"]);N!=null&&h(t,["serviceAccount"],N);const V=f(n,["tunedModelDisplayName"]);V!=null&&h(t,["tunedModelDisplayName"],V);const x=f(n,["veoTuningSpec"]);return x!=null&&h(t,["veoTuningSpec"],x),t}function TO(n,e){const t={},s=f(n,["sdkHttpResponse"]);s!=null&&h(t,["sdkHttpResponse"],s);const o=f(n,["name"]);o!=null&&h(t,["name"],o);const l=f(n,["metadata"]);l!=null&&h(t,["metadata"],l);const u=f(n,["done"]);u!=null&&h(t,["done"],u);const d=f(n,["error"]);return d!=null&&h(t,["error"],d),t}function BS(n,e){const t={},s=f(n,["gcsUri"]);s!=null&&h(t,["validationDatasetUri"],s);const o=f(n,["vertexDatasetResource"]);return o!=null&&h(t,["validationDatasetUri"],o),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vO extends ys{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new uo(ps.PAGED_ITEM_TUNING_JOBS,s=>this.listInternal(s),await this.listInternal(t),t),this.get=async t=>await this.getInternal(t),this.tune=async t=>{var s;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const o={tunedModelName:t.baseModel};!((s=t.config)===null||s===void 0)&&s.preTunedModelCheckpointId&&(o.checkpointId=t.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},t),{preTunedModel:o});return l.baseModel=void 0,await this.tuneInternal(l)}else{const o=Object.assign({},t);return await this.tuneInternal(o)}else{const o=Object.assign({},t),l=await this.tuneMldevInternal(o);let u="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?u=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(u=l.name.split("/operations/")[0]),{name:u,state:jp.JOB_STATE_QUEUED}}}}async getInternal(e){var t,s,o,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=uO(e);return d=ue("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(v=>{const S=v;return S.sdkHttpResponse={headers:T.headers},S})),u.then(T=>om(T))}else{const m=lO(e);return d=ue("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(v=>{const S=v;return S.sdkHttpResponse={headers:T.headers},S})),u.then(T=>$C(T))}}async listInternal(e){var t,s,o,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=hO(e);return d=ue("tuningJobs",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(v=>{const S=v;return S.sdkHttpResponse={headers:T.headers},S})),u.then(T=>{const v=mO(T),S=new vS;return Object.assign(S,v),S})}else{const m=dO(e);return d=ue("tunedModels",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(v=>{const S=v;return S.sdkHttpResponse={headers:T.headers},S})),u.then(T=>{const v=pO(T),S=new vS;return Object.assign(S,v),S})}}async cancel(e){var t,s,o,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=tO(e);return d=ue("{name}:cancel",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(v=>{const S=v;return S.sdkHttpResponse={headers:T.headers},S})),u.then(T=>{const v=iO(T),S=new ES;return Object.assign(S,v),S})}else{const m=eO(e);return d=ue("{name}:cancel",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(v=>{const S=v;return S.sdkHttpResponse={headers:T.headers},S})),u.then(T=>{const v=nO(T),S=new ES;return Object.assign(S,v),S})}}async tuneInternal(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=aO(e,e);return l=ue("tuningJobs",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(m=>{const T=m;return T.sdkHttpResponse={headers:g.headers},T})),o.then(g=>om(g))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=oO(e);return l=ue("tunedModels",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(m=>{const T=m;return T.sdkHttpResponse={headers:g.headers},T})),o.then(g=>TO(g))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class EO{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const SO=1024*1024*8,AO=3,CO=1e3,IO=2,Lf="x-goog-upload-status";async function RO(n,e,t){var s;const o=await XC(n,e,t),l=await(o==null?void 0:o.json());if(((s=o==null?void 0:o.headers)===null||s===void 0?void 0:s[Lf])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return l.file}async function wO(n,e,t){var s;const o=await XC(n,e,t),l=await(o==null?void 0:o.json());if(((s=o==null?void 0:o.headers)===null||s===void 0?void 0:s[Lf])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const u=AC(l),d=new ag;return Object.assign(d,u),d}async function XC(n,e,t){var s,o;let l=0,u=0,d=new em(new Response),g="upload";for(l=n.size;u<l;){const m=Math.min(SO,l-u),T=n.slice(u,u+m);u+m>=l&&(g+=", finalize");let v=0,S=CO;for(;v<AO&&(d=await t.request({path:"",body:T,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":g,"X-Goog-Upload-Offset":String(u),"Content-Length":String(m)}}}),!(!((s=d==null?void 0:d.headers)===null||s===void 0)&&s[Lf]));)v++,await MO(S),S=S*IO;if(u+=m,((o=d==null?void 0:d.headers)===null||o===void 0?void 0:o[Lf])!=="active")break;if(l<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return d}async function NO(n){return{size:n.size,type:n.type}}function MO(n){return new Promise(e=>setTimeout(e,n))}class DO{async upload(e,t,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await RO(e,t,s)}async uploadToFileSearchStore(e,t,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await wO(e,t,s)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await NO(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class bO{create(e,t,s){return new PO(e,t,s)}}class PO{constructor(e,t,s){this.url=e,this.headers=t,this.callbacks=s}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const GS="x-goog-api-key";class xO{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(GS)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(GS,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const VO="gl-node/";class UO{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const s=cx(e.httpOptions,e.vertexai,void 0,void 0);s&&(e.httpOptions?e.httpOptions.baseUrl=s:e.httpOptions={baseUrl:s}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const o=new xO(this.apiKey);this.apiClient=new uL({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:VO+"web",uploader:new DO,downloader:new EO}),this.models=new NL(this.apiClient),this.live=new SL(this.apiClient,o,new bO),this.batches=new qV(this.apiClient),this.chats=new v2(this.models,this.apiClient),this.caches=new y2(this.apiClient),this.files=new D2(this.apiClient),this.operations=new ML(this.apiClient),this.authTokens=new JL(this.apiClient),this.tunings=new vO(this.apiClient),this.fileSearchStores=new jL(this.apiClient)}}const HS=[{id:"f1",description:" ",difficulty:"easy",points:10},{id:"f2",description:"",difficulty:"easy",points:10},{id:"f3",description:" ",difficulty:"easy",points:10},{id:"f4",description:"",difficulty:"easy",points:10},{id:"f5",description:"",difficulty:"easy",points:5}],zS=()=>({...HS[Math.floor(Math.random()*HS.length)],id:Math.random().toString(36).substr(2,9)}),kO="AIzaSyCiFX0b28tzHBS9Ablcdogy2HzDtO8Svt0",WC=new UO({apiKey:kO}),ZC="pq_task_history",JS=["  (, , , )","  (, , , )","  (, , , )"," (  , ,  , )","  ( ,  , )","   (,  , , )","  (, ,  , )","  (,  ,  , )","  ( , , , )","   (, , ,  )","  (, , ,  )","   ( , ,  )"],YS=["   ","   "," /  / "," / ",""," / ","   ","  "," "," ()"],jC=()=>{try{const n=localStorage.getItem(ZC);return n?JSON.parse(n):[]}catch{return[]}},LO=n=>{const t=[...jC(),n].slice(-15);localStorage.setItem(ZC,JSON.stringify(t))},OO=async()=>{try{const n=JS[Math.floor(Math.random()*JS.length)],e=YS[Math.floor(Math.random()*YS.length)],t=Math.random().toString(36).substring(7),s=jC(),o=s.length>0?s.join(", "):"",l=`     "-"   .
    
     :
    1.  : "${n}"
    2. /: "${e}"
    3.  ( ): [ ${o} ]
    4. Seed: ${t}
    
    :
     3      .
    
     :
    1.  .   "  "  " ". 
       : " ", "  ", " ".
    2.    ,   .
       : " ", "", "".
       : " ", " ", " ".
    3.   "" -   ,    (  /).
    4.   (2-5 ).
    
     JSON:   { description, difficulty (easy/medium/hard), points (10-100) }.`,u=await WC.models.generateContent({model:"gemini-2.5-flash",contents:{text:l},config:{temperature:1.5,responseMimeType:"application/json",responseSchema:{type:Xt.OBJECT,properties:{tasks:{type:Xt.ARRAY,items:{type:Xt.OBJECT,properties:{description:{type:Xt.STRING},difficulty:{type:Xt.STRING,enum:["easy","medium","hard"]},points:{type:Xt.INTEGER}},required:["description","difficulty","points"]}}},required:["tasks"]}}});if(u.text){const d=JSON.parse(u.text);if(d.tasks&&Array.isArray(d.tasks)&&d.tasks.length>0){const g=d.tasks[Math.floor(Math.random()*d.tasks.length)];return LO(g.description),{id:Math.random().toString(36).substr(2,9),description:g.description,difficulty:g.difficulty,points:g.points}}}return zS()}catch(n){return console.error("AI Task Generation Error:",n),zS()}},qO=async(n,e)=>{try{const t=n.split(",")[1]||n,s=`:   .
     :    "${e}".
    
    :
    1.   .     ?
    2.    (/),   ,  ,  .
    3.   ,    (     ) -> .
    4.    ,     -> .
    
     JSON: { "verified": boolean, "reason": string (   ) }`,o=await WC.models.generateContent({model:"gemini-2.5-flash",contents:{parts:[{inlineData:{mimeType:"image/jpeg",data:t}},{text:s}]},config:{responseMimeType:"application/json",responseSchema:{type:Xt.OBJECT,properties:{verified:{type:Xt.BOOLEAN},reason:{type:Xt.STRING}},required:["verified","reason"]}}});return o.text?JSON.parse(o.text):{verified:!1,reason:"   ."}}catch(t){return console.error("Gemini Verification Error:",t),{verified:!1,reason:" ."}}},FO=({user:n,refreshUser:e})=>{const[t,s]=lt.useState(n.currentTask||null),[o,l]=lt.useState(!1),[u,d]=lt.useState(!1),[g,m]=lt.useState(null),[T,v]=lt.useState(!1),S=lt.useCallback(async()=>{if(n.currentTask){s(n.currentTask);return}await w(!0)},[n.currentTask]);lt.useEffect(()=>{S()},[]);const w=async($=!1)=>{if(!u){d(!0),m(null),v(!1);try{const te=await OO();await ix(te),s(te),e()}catch{m({type:"error",message:"   "})}finally{d(!1)}}},O=async()=>{if(u||o)return;const $=await sx();$.success?(e(),await w()):(m({type:"error",message:$.message||" "}),setTimeout(()=>m(null),3e3))},G=async $=>{if(!(!t||o||u)){l(!0),m({type:"info",message:" ..."});try{const te=await qO($,t.description);te.verified?(await nx(t.points),s(null),e(),m({type:"success",message:`! +${t.points} .`}),v(!0)):(m({type:"error",message:te.reason||"  .   ."}),setTimeout(()=>m(null),4e3))}catch{m({type:"error",message:" ."})}finally{l(!1)}}},F=3-(n.skipsUsedToday||0);return se.jsxs("div",{className:"relative h-full flex flex-col",children:[se.jsxs("div",{className:"absolute top-0 left-0 right-0 z-10 p-4 flex justify-between items-start bg-gradient-to-b from-black/80 to-transparent",children:[se.jsxs("div",{className:"bg-black/40 backdrop-blur-md px-3 py-1 rounded-full border border-white/10",children:[se.jsx("span",{className:"text-xs text-slate-300 uppercase",children:""}),se.jsx("div",{className:"text-xl font-bold text-indigo-400",children:n.score})]}),se.jsxs("div",{className:"flex-1 mx-4 bg-slate-900/90 backdrop-blur-md p-3 rounded-xl border border-indigo-500/30 shadow-lg animate-fade-in min-h-[80px] flex flex-col justify-center",children:[se.jsx("div",{className:"text-xs text-indigo-300 uppercase font-bold tracking-wider mb-1",children:" "}),u?se.jsxs("div",{className:"flex items-center space-x-2",children:[se.jsx("span",{className:"w-4 h-4 border-2 border-indigo-500 border-t-transparent rounded-full animate-spin"}),se.jsx("span",{className:"text-slate-400 text-sm animate-pulse",children:" ..."})]}):t?se.jsxs(se.Fragment,{children:[se.jsxs("div",{className:"text-lg font-bold text-white leading-tight",children:[": ",se.jsx("span",{className:"text-indigo-400",children:t.description})]}),se.jsxs("div",{className:"text-xs text-slate-400 mt-1 flex justify-between",children:[se.jsxs("span",{children:[": ",t.difficulty==="easy"?"":t.difficulty==="medium"?"":""]}),se.jsxs("span",{className:"text-yellow-400 font-bold",children:[t.points," XP"]})]})]}):se.jsx("span",{className:"text-red-400 text-sm",children:" "})]})]}),se.jsxs("div",{className:"flex-1 relative bg-black",children:[se.jsx(ox,{onCapture:G,isProcessing:o||u}),g&&!T&&se.jsxs("div",{className:`
            absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2
            px-6 py-4 rounded-xl shadow-2xl backdrop-blur-md text-center max-w-[80%]
            animate-bounce-in z-30
            ${g.type==="error"?"bg-red-500/90 text-white":""}
            ${g.type==="info"?"bg-blue-500/90 text-white":""}
            ${g.type==="success"?"hidden":""}
          `,children:[g.type==="info"&&se.jsx("div",{className:"animate-pulse mb-2 text-2xl",children:""}),se.jsx("div",{className:"font-bold",children:g.message})]})]}),se.jsxs("div",{className:"absolute bottom-6 right-6 z-20 mb-20 md:mb-8 flex flex-col items-end",children:[se.jsxs("span",{className:"text-[10px] text-white/50 mb-1 mr-1",children:[": ",F]}),se.jsx("button",{onClick:O,disabled:u||o||F<=0,className:`
            p-3 rounded-full backdrop-blur-sm border border-white/10 text-xs transition-all active:scale-95
            ${F>0?"bg-black/40 text-white/70 hover:text-white":"bg-red-900/40 text-red-300 opacity-50 cursor-not-allowed"}
          `,children:u?"...":""})]}),T&&se.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-6",children:se.jsxs("div",{className:"bg-slate-800 rounded-2xl p-6 w-full max-w-sm text-center border border-indigo-500/50 shadow-2xl transform scale-100 animate-pop-in",children:[se.jsx("div",{className:"text-6xl mb-4",children:""}),se.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:" !"}),se.jsxs("p",{className:"text-slate-300 mb-6",children:["  ",se.jsx("span",{className:"text-indigo-400 font-bold",children:t==null?void 0:t.description}),"   ",t==null?void 0:t.points," ."]}),se.jsx(sg,{onClick:()=>w(!0),className:"w-full",children:u?" ...":" "})]})})]})},BO=()=>{const[n,e]=lt.useState("day"),[t,s]=lt.useState([]),[o,l]=lt.useState(!1);return lt.useEffect(()=>{(async()=>{l(!0);try{const d=await rx(n);s(d)}catch{console.error("Failed to load leaderboard")}finally{l(!1)}})()},[n]),se.jsxs("div",{className:"flex flex-col h-full bg-slate-900 p-4",children:[se.jsx("h2",{className:"text-2xl font-bold text-center mb-6 text-transparent bg-clip-text bg-gradient-to-r from-indigo-400 to-purple-400",children:" "}),se.jsx("div",{className:"flex bg-slate-800 p-1 rounded-xl mb-6",children:["day","week","all"].map(u=>se.jsx("button",{onClick:()=>e(u),className:`flex-1 py-2 text-sm font-medium rounded-lg transition-colors ${n===u?"bg-indigo-600 text-white shadow-lg":"text-slate-400 hover:text-white"}`,children:u==="day"?"":u==="week"?"":" "},u))}),se.jsx("div",{className:"flex-1 overflow-y-auto space-y-3 pb-20 relative",children:o?se.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:se.jsx("span",{className:"w-8 h-8 border-2 border-indigo-500 border-t-transparent rounded-full animate-spin"})}):t.length===0?se.jsx("div",{className:"text-center text-slate-500 mt-10",children:" "}):t.map(u=>se.jsxs("div",{className:`
                flex items-center p-4 rounded-xl border animate-fade-in
                ${u.isCurrentUser?"bg-indigo-900/30 border-indigo-500/50":"bg-slate-800 border-slate-700"}
              `,children:[se.jsx("div",{className:`
                w-8 h-8 flex items-center justify-center rounded-full font-bold mr-4
                ${u.rank<=3?"bg-yellow-500 text-black":"bg-slate-700 text-slate-300"}
              `,children:u.rank}),se.jsx("div",{className:"flex-1",children:se.jsxs("div",{className:"font-bold text-white",children:[u.username,u.isCurrentUser&&se.jsx("span",{className:"text-xs text-indigo-400 ml-2",children:"()"})]})}),se.jsx("div",{className:"text-indigo-300 font-mono font-bold",children:u.score})]},`${u.username}-${u.rank}`))})]})},GO=()=>se.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[se.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),se.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]}),HO=()=>se.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[se.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"}),se.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})]}),zO=()=>{const[n,e]=lt.useState(null),[t,s]=lt.useState(si.REGISTER),[o,l]=lt.useState(""),[u,d]=lt.useState(""),[g,m]=lt.useState(!0),[T,v]=lt.useState("register"),[S,w]=lt.useState(null);lt.useEffect(()=>{(async()=>{const $=setTimeout(()=>m(!1),3e3);try{const te=await xf();te&&(e(te),s(si.GAME))}catch(te){console.error("Failed to load user",te)}finally{clearTimeout($),m(!1)}})()},[]);const O=async F=>{if(F.preventDefault(),w(null),o.trim().length<3){w("    3 ");return}if(u.length<3){w("  ");return}m(!0);try{let $=null;if(T==="register")$=await tx(o.trim(),u);else if($=await ex(o.trim(),u),!$)throw new Error("  .");e($),s(si.GAME)}catch($){console.error("Auth error:",$),w($.message||" ")}finally{m(!1)}},G=async()=>{const F=await xf();F&&e(F)};return g?se.jsx("div",{className:"min-h-screen bg-slate-900 flex items-center justify-center",children:se.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-500"})}):!n||t===si.REGISTER?se.jsxs("div",{className:"min-h-screen bg-slate-900 flex flex-col items-center justify-center p-6 text-white relative overflow-hidden",children:[se.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-64 h-64 bg-indigo-600 rounded-full blur-[100px] opacity-20"}),se.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-80 h-80 bg-purple-600 rounded-full blur-[100px] opacity-20"}),se.jsxs("div",{className:"relative z-10 w-full max-w-md bg-slate-800/50 p-8 rounded-3xl border border-slate-700 backdrop-blur-xl shadow-2xl",children:[se.jsxs("div",{className:"text-center mb-8",children:[se.jsx("h1",{className:"text-4xl font-black bg-gradient-to-r from-indigo-400 to-purple-400 bg-clip-text text-transparent mb-2",children:"PhotoQuest"}),se.jsx("p",{className:"text-slate-400",children:"  "}),!gs()&&se.jsx("span",{className:"text-[10px] text-yellow-500/50 bg-yellow-900/20 px-2 py-1 rounded mt-2 inline-block",children:" "})]}),se.jsxs("div",{className:"flex bg-slate-900/50 rounded-lg p-1 mb-6",children:[se.jsx("button",{onClick:()=>{v("register"),w(null),d("")},className:`flex-1 py-2 text-sm font-medium rounded-md transition-all ${T==="register"?"bg-indigo-600 text-white shadow":"text-slate-400 hover:text-white"}`,children:" "}),se.jsx("button",{onClick:()=>{v("login"),w(null),d("")},className:`flex-1 py-2 text-sm font-medium rounded-md transition-all ${T==="login"?"bg-indigo-600 text-white shadow":"text-slate-400 hover:text-white"}`,children:""})]}),se.jsxs("form",{onSubmit:O,className:"space-y-4",children:[se.jsxs("div",{children:[se.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:""}),se.jsx("input",{type:"text",value:o,onChange:F=>l(F.target.value),className:"w-full bg-slate-900 border border-slate-700 rounded-xl px-4 py-3 text-white focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all placeholder-slate-600",placeholder:"  ",maxLength:20})]}),se.jsxs("div",{children:[se.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:""}),se.jsx("input",{type:"password",value:u,onChange:F=>d(F.target.value),className:"w-full bg-slate-900 border border-slate-700 rounded-xl px-4 py-3 text-white focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all placeholder-slate-600",placeholder:T==="register"?"  ":" "}),T==="register"&&se.jsx("p",{className:"text-[10px] text-yellow-500/70 mt-2 bg-yellow-900/20 p-2 rounded",children:" :         .  -  (: 12345)."})]}),S&&se.jsx("p",{className:"text-red-400 text-xs mt-2 text-center bg-red-900/20 p-2 rounded",children:S}),se.jsx(sg,{type:"submit",className:"w-full mt-4",disabled:o.trim().length<3||u.length<3||g,children:g?"...":T==="register"?" ":""})]})]})]}):se.jsxs("div",{className:"fixed inset-0 bg-slate-900 overflow-hidden flex flex-col",children:[se.jsxs("div",{className:"flex-1 overflow-hidden relative",children:[t===si.GAME&&se.jsx(FO,{user:n,refreshUser:G}),t===si.LEADERBOARD&&se.jsx(BO,{}),jP()&&se.jsx("div",{className:"absolute top-20 right-4 z-40",children:se.jsxs("div",{className:"bg-yellow-500/10 backdrop-blur-md border border-yellow-500/20 text-yellow-500 text-[10px] px-2 py-1 rounded-full flex items-center gap-1",children:[se.jsx("div",{className:"w-2 h-2 rounded-full bg-yellow-500 animate-pulse"}),"Offline Mode"]})})]}),se.jsxs("nav",{className:"h-16 bg-slate-800 border-t border-slate-700 flex items-center justify-around z-20 shrink-0",children:[se.jsxs("button",{onClick:()=>s(si.GAME),className:`flex flex-col items-center justify-center w-full h-full transition-colors ${t===si.GAME?"text-indigo-400":"text-slate-500 hover:text-slate-300"}`,children:[se.jsx(GO,{}),se.jsx("span",{className:"text-xs mt-1 font-medium",children:""})]}),se.jsxs("button",{onClick:()=>s(si.LEADERBOARD),className:`flex flex-col items-center justify-center w-full h-full transition-colors ${t===si.LEADERBOARD?"text-indigo-400":"text-slate-500 hover:text-slate-300"}`,children:[se.jsx(HO,{}),se.jsx("span",{className:"text-xs mt-1 font-medium",children:""})]})]})]})},eI=document.getElementById("root");if(!eI)throw new Error("Could not find root element to mount to");const JO=GR.createRoot(eI);JO.render(se.jsx(VR.StrictMode,{children:se.jsx(zO,{})}));
